"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("colors");var fs=require("fs"),path=require("path"),httpsProxyAgent=require("https-proxy-agent"),url=require("url"),dotenv=require("dotenv"),zod=require("zod"),http=require("http"),https=require("https"),tarn=require("tarn"),uuid=require("uuid"),puppeteer=require("puppeteer"),DOMPurify=require("dompurify"),jsdom=require("jsdom"),cors=require("cors"),express=require("express"),multer=require("multer"),rateLimit=require("express-rate-limit"),_documentCurrentScript="undefined"!=typeof document?document.currentScript:null;const __dirname$1=url.fileURLToPath(new URL("../.","undefined"==typeof document?require("url").pathToFileURL(__filename).href:_documentCurrentScript&&"SCRIPT"===_documentCurrentScript.tagName.toUpperCase()&&_documentCurrentScript.src||new URL("index.cjs",document.baseURI).href));function deepCopy(e){if(null===e||"object"!=typeof e)return e;const t=Array.isArray(e)?[]:{};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=deepCopy(e[o]));return t}function getAbsolutePath(e){return path.isAbsolute(e)?path.normalize(e):path.resolve(e)}function getBase64(e,t){return"pdf"===t||"svg"==t?Buffer.from(e,"utf8").toString("base64"):e}function getNewDate(){return(new Date).toString().split("(")[0].trim()}function getNewDateTime(){return(new Date).getTime()}function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function isObjectEmpty(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e&&0===Object.keys(e).length}function isPrivateRangeUrlFound(e){return[/xlink:href="(?:http:\/\/|https:\/\/)?localhost\b/,/xlink:href="(?:http:\/\/|https:\/\/)?10\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/,/xlink:href="(?:http:\/\/|https:\/\/)?127\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/,/xlink:href="(?:http:\/\/|https:\/\/)?172\.(1[6-9]|2[0-9]|3[0-1])\.\d{1,3}\.\d{1,3}\b/,/xlink:href="(?:http:\/\/|https:\/\/)?192\.168\.\d{1,3}\.\d{1,3}\b/].some((t=>t.test(e)))}function measureTime(){const e=process.hrtime.bigint();return()=>Number(process.hrtime.bigint()-e)/1e6}function roundNumber(e,t=1){const o=Math.pow(10,t||0);return Math.round(+e*o)/o}const colors=["red","yellow","blue","gray","green"],logging={toConsole:!0,toFile:!1,pathCreated:!1,pathToLog:"",levelsDesc:[{title:"error",color:colors[0]},{title:"warning",color:colors[1]},{title:"notice",color:colors[2]},{title:"verbose",color:colors[3]},{title:"benchmark",color:colors[4]}]};function log(...e){const[t,...o]=e,{levelsDesc:r,level:n}=logging;if(5!==t&&(0===t||t>n||n>r.length))return;const i=`${getNewDate()} [${r[t-1].title}] -`;logging.toFile&&_logToFile(o,i),logging.toConsole&&console.log.apply(void 0,[i.toString()[logging.levelsDesc[t-1].color]].concat(o))}function logWithStack(e,t,o){const r=o||t&&t.message||"",{level:n,levelsDesc:i}=logging;if(0===e||e>n||n>i.length)return;const s=`${getNewDate()} [${i[e-1].title}] -`,a=t&&t.stack,l=[r];a&&l.push("\n",a),logging.toFile&&_logToFile(l,s),logging.toConsole&&console.log.apply(void 0,[s.toString()[logging.levelsDesc[e-1].color]].concat([l.shift()[colors[e-1]],...l]))}function logZodIssues(e,t,o){logWithStack(e,null,[`${o||"[validation] Validation error"} - the following Zod issues occured:`,...(t||[]).map((e=>`- ${e.message}`))].join("\n"))}function initLogging(e){const{level:t,dest:o,file:r,toConsole:n,toFile:i}=e;logging.pathCreated=!1,logging.pathToLog="",setLogLevel(t),enableConsoleLogging(n),enableFileLogging(o,r,i)}function setLogLevel(e){Number.isInteger(e)&&e>=0&&e<=logging.levelsDesc.length&&(logging.level=e)}function enableConsoleLogging(e){logging.toConsole=!!e}function enableFileLogging(e,t,o){logging.toFile=!!o,logging.toFile&&(logging.dest=e||"log",logging.file=t||"highcharts-export-server.log")}function _logToFile(e,t){logging.pathCreated||(!fs.existsSync(getAbsolutePath(logging.dest))&&fs.mkdirSync(getAbsolutePath(logging.dest)),logging.pathToLog=getAbsolutePath(path.join(logging.dest,logging.file)),logging.pathCreated=!0),fs.appendFile(logging.pathToLog,[t].concat(e).join(" ")+"\n",(e=>{e&&logging.toFile&&logging.pathCreated&&(logging.toFile=!1,logging.pathCreated=!1,logWithStack(2,e,"[logger] Unable to write to log file."))}))}const defaultConfig={puppeteer:{args:{value:["--allow-running-insecure-content","--ash-no-nudges","--autoplay-policy=user-gesture-required","--block-new-web-contents","--disable-accelerated-2d-canvas","--disable-background-networking","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-checker-imaging","--disable-client-side-phishing-detection","--disable-component-extensions-with-background-pages","--disable-component-update","--disable-default-apps","--disable-dev-shm-usage","--disable-domain-reliability","--disable-extensions","--disable-features=CalculateNativeWinOcclusion,InterestFeedContentSuggestions,WebOTP","--disable-hang-monitor","--disable-ipc-flooding-protection","--disable-logging","--disable-notifications","--disable-offer-store-unmasked-wallet-cards","--disable-popup-blocking","--disable-print-preview","--disable-prompt-on-repost","--disable-renderer-backgrounding","--disable-search-engine-choice-screen","--disable-session-crashed-bubble","--disable-setuid-sandbox","--disable-site-isolation-trials","--disable-speech-api","--disable-sync","--enable-unsafe-webgpu","--hide-crash-restore-bubble","--hide-scrollbars","--metrics-recording-only","--mute-audio","--no-default-browser-check","--no-first-run","--no-pings","--no-sandbox","--no-startup-window","--no-zygote","--password-store=basic","--process-per-tab","--use-mock-keychain"],types:["string[]"],envLink:"PUPPETEER_ARGS",cliName:"puppeteerArgs",description:"Array of Puppeteer arguments",promptOptions:{type:"list",separator:";"}}},highcharts:{version:{value:"latest",types:["string"],envLink:"HIGHCHARTS_VERSION",description:"Highcharts version",promptOptions:{type:"text"}},cdnUrl:{value:"https://code.highcharts.com",types:["string"],envLink:"HIGHCHARTS_CDN_URL",description:"CDN URL for Highcharts scripts",promptOptions:{type:"text"}},forceFetch:{value:!1,types:["boolean"],envLink:"HIGHCHARTS_FORCE_FETCH",description:"Flag to refetch scripts after each server rerun",promptOptions:{type:"toggle"}},cachePath:{value:".cache",types:["string"],envLink:"HIGHCHARTS_CACHE_PATH",description:"Directory path for cached Highcharts scripts",promptOptions:{type:"text"}},coreScripts:{value:["highcharts","highcharts-more","highcharts-3d"],types:["string[]"],envLink:"HIGHCHARTS_CORE_SCRIPTS",description:"Highcharts core scripts to fetch",promptOptions:{type:"multiselect",instructions:"Space: Select specific, A: Select all, Enter: Confirm"}},moduleScripts:{value:["stock","map","gantt","exporting","parallel-coordinates","accessibility","boost-canvas","boost","data","data-tools","draggable-points","static-scale","broken-axis","heatmap","tilemap","tiledwebmap","timeline","treemap","treegraph","item-series","drilldown","histogram-bellcurve","bullet","funnel","funnel3d","geoheatmap","pyramid3d","networkgraph","overlapping-datalabels","pareto","pattern-fill","pictorial","price-indicator","sankey","arc-diagram","dependency-wheel","series-label","series-on-point","solid-gauge","sonification","streamgraph","sunburst","variable-pie","variwide","vector","venn","windbarb","wordcloud","xrange","no-data-to-display","drag-panes","debugger","dumbbell","lollipop","cylinder","organization","dotplot","marker-clusters","hollowcandlestick","heikinashi","flowmap","export-data","navigator","textpath"],types:["string[]"],envLink:"HIGHCHARTS_MODULE_SCRIPTS",description:"Highcharts module scripts to fetch",promptOptions:{type:"multiselect",instructions:"Space: Select specific, A: Select all, Enter: Confirm"}},indicatorScripts:{value:["indicators-all"],types:["string[]"],envLink:"HIGHCHARTS_INDICATOR_SCRIPTS",description:"Highcharts indicator scripts to fetch",promptOptions:{type:"multiselect",instructions:"Space: Select specific, A: Select all, Enter: Confirm"}},customScripts:{value:["https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js","https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.45/moment-timezone-with-data.min.js"],types:["string[]"],envLink:"HIGHCHARTS_CUSTOM_SCRIPTS",description:"Additional custom scripts or dependencies to fetch",promptOptions:{type:"list",separator:";"}}},export:{infile:{value:null,types:["string","null"],envLink:"EXPORT_INFILE",description:"Input filename with type, formatted correctly as JSON or SVG",promptOptions:{type:"text"}},instr:{value:null,types:["Object","string","null"],envLink:"EXPORT_INSTR",description:"Overrides the `infile` with JSON, stringified JSON, or SVG input",promptOptions:{type:"text"}},options:{value:null,types:["Object","string","null"],envLink:"EXPORT_OPTIONS",description:"Alias for the `instr` option",promptOptions:{type:"text"}},svg:{value:null,types:["string","null"],envLink:"EXPORT_SVG",description:"SVG string representation of the chart to render",promptOptions:{type:"text"}},batch:{value:null,types:["string","null"],envLink:"EXPORT_BATCH",description:'Batch job string with input/output pairs: "in=out;in=out;..."',promptOptions:{type:"text"}},outfile:{value:null,types:["string","null"],envLink:"EXPORT_OUTFILE",description:"Output filename with type. Can be jpeg, png, pdf, or svg and ignores `type` option",promptOptions:{type:"text"}},type:{value:"png",types:["string"],envLink:"EXPORT_TYPE",description:"File export format. Can be jpeg, png, pdf, or svg",promptOptions:{type:"select",hint:"Default: png",choices:["png","jpeg","pdf","svg"]}},constr:{value:"chart",types:["string"],envLink:"EXPORT_CONSTR",description:"Chart constructor. Can be chart, stockChart, mapChart, or ganttChart",promptOptions:{type:"select",hint:"Default: chart",choices:["chart","stockChart","mapChart","ganttChart"]}},b64:{value:!1,types:["boolean"],envLink:"EXPORT_B64",description:"Whether or not to the chart should be received in Base64 format instead of binary",promptOptions:{type:"toggle"}},noDownload:{value:!1,types:["boolean"],envLink:"EXPORT_NO_DOWNLOAD",description:"Whether or not to include or exclude attachment headers in the response",promptOptions:{type:"toggle"}},height:{value:null,types:["number","null"],envLink:"EXPORT_HEIGHT",description:"Height of the exported chart, overrides chart settings",promptOptions:{type:"number"}},width:{value:null,types:["number","null"],envLink:"EXPORT_WIDTH",description:"Width of the exported chart, overrides chart settings",promptOptions:{type:"number"}},scale:{value:null,types:["number","null"],envLink:"EXPORT_SCALE",description:"Scale of the exported chart, overrides chart settings. Ranges from 0.1 to 5.0",promptOptions:{type:"number"}},defaultHeight:{value:400,types:["number"],envLink:"EXPORT_DEFAULT_HEIGHT",description:"Default height of the exported chart if not set",promptOptions:{type:"number"}},defaultWidth:{value:600,types:["number"],envLink:"EXPORT_DEFAULT_WIDTH",description:"Default width of the exported chart if not set",promptOptions:{type:"number"}},defaultScale:{value:1,types:["number"],envLink:"EXPORT_DEFAULT_SCALE",description:"Default scale of the exported chart if not set. Ranges from 0.1 to 5.0",promptOptions:{type:"number",min:.1,max:5}},globalOptions:{value:null,types:["Object","string","null"],envLink:"EXPORT_GLOBAL_OPTIONS",description:"JSON, stringified JSON or filename with global options for Highcharts.setOptions",promptOptions:{type:"text"}},themeOptions:{value:null,types:["Object","string","null"],envLink:"EXPORT_THEME_OPTIONS",description:"JSON, stringified JSON or filename with theme options for Highcharts.setOptions",promptOptions:{type:"text"}},rasterizationTimeout:{value:1500,types:["number"],envLink:"EXPORT_RASTERIZATION_TIMEOUT",description:"Milliseconds to wait for webpage rendering",promptOptions:{type:"number"}}},customLogic:{allowCodeExecution:{value:!1,types:["boolean"],envLink:"CUSTOM_LOGIC_ALLOW_CODE_EXECUTION",description:"Allows or disallows execution of arbitrary code during exporting",promptOptions:{type:"toggle"}},allowFileResources:{value:!1,types:["boolean"],envLink:"CUSTOM_LOGIC_ALLOW_FILE_RESOURCES",description:"Allows or disallows injection of filesystem resources (disabled in server mode)",promptOptions:{type:"toggle"}},customCode:{value:null,types:["string","null"],envLink:"CUSTOM_LOGIC_CUSTOM_CODE",description:"Custom code to execute before chart initialization. Can be a function, code wrapped in a function, or a .js filename",promptOptions:{type:"text"}},callback:{value:null,types:["string","null"],envLink:"CUSTOM_LOGIC_CALLBACK",description:"JavaScript code to run during construction. Can be a function or a .js filename",promptOptions:{type:"text"}},resources:{value:null,types:["Object","string","null"],envLink:"CUSTOM_LOGIC_RESOURCES",description:"Additional resources as JSON, stringified JSON, or filename, containing files, js, and css sections",promptOptions:{type:"text"}},loadConfig:{value:null,types:["string","null"],envLink:"CUSTOM_LOGIC_LOAD_CONFIG",legacyName:"fromFile",description:"File with a pre-defined configuration to use",promptOptions:{type:"text"}},createConfig:{value:null,types:["string","null"],envLink:"CUSTOM_LOGIC_CREATE_CONFIG",description:"Prompt-based option setting, saved to a provided config file",promptOptions:{type:"text"}}},server:{enable:{value:!1,types:["boolean"],envLink:"SERVER_ENABLE",cliName:"enableServer",description:"Starts the server when true",promptOptions:{type:"toggle"}},host:{value:"0.0.0.0",types:["string"],envLink:"SERVER_HOST",description:"Hostname of the server",promptOptions:{type:"text"}},port:{value:7801,types:["number"],envLink:"SERVER_PORT",description:"Port number for the server",promptOptions:{type:"number"}},uploadLimit:{value:3,types:["number"],envLink:"SERVER_UPLOAD_LIMIT",description:"Maximum request body size in MB",promptOptions:{type:"number"}},benchmarking:{value:!1,types:["boolean"],envLink:"SERVER_BENCHMARKING",cliName:"serverBenchmarking",description:"Displays or not action durations in milliseconds during server requests",promptOptions:{type:"toggle"}},proxy:{host:{value:null,types:["string","null"],envLink:"SERVER_PROXY_HOST",cliName:"proxyHost",description:"Host of the proxy server, if applicable",promptOptions:{type:"text"}},port:{value:null,types:["number","null"],envLink:"SERVER_PROXY_PORT",cliName:"proxyPort",description:"Port of the proxy server, if applicable",promptOptions:{type:"number"}},timeout:{value:5e3,types:["number"],envLink:"SERVER_PROXY_TIMEOUT",cliName:"proxyTimeout",description:"Timeout in milliseconds for the proxy server, if applicable",promptOptions:{type:"number"}}},rateLimiting:{enable:{value:!1,types:["boolean"],envLink:"SERVER_RATE_LIMITING_ENABLE",cliName:"enableRateLimiting",description:"Enables or disables rate limiting on the server",promptOptions:{type:"toggle"}},maxRequests:{value:10,types:["number"],envLink:"SERVER_RATE_LIMITING_MAX_REQUESTS",legacyName:"rateLimit",description:"Maximum number of requests allowed per minute",promptOptions:{type:"number"}},window:{value:1,types:["number"],envLink:"SERVER_RATE_LIMITING_WINDOW",description:"Time window in minutes for rate limiting",promptOptions:{type:"number"}},delay:{value:0,types:["number"],envLink:"SERVER_RATE_LIMITING_DELAY",description:"Delay duration between successive requests before reaching the limit",promptOptions:{type:"number"}},trustProxy:{value:!1,types:["boolean"],envLink:"SERVER_RATE_LIMITING_TRUST_PROXY",description:"Set to true if the server is behind a load balancer",promptOptions:{type:"toggle"}},skipKey:{value:null,types:["string","null"],envLink:"SERVER_RATE_LIMITING_SKIP_KEY",description:"Key to bypass the rate limiter, used with `skipToken`",promptOptions:{type:"text"}},skipToken:{value:null,types:["string","null"],envLink:"SERVER_RATE_LIMITING_SKIP_TOKEN",description:"Token to bypass the rate limiter, used with `skipKey`",promptOptions:{type:"text"}}},ssl:{enable:{value:!1,types:["boolean"],envLink:"SERVER_SSL_ENABLE",cliName:"enableSsl",description:"Enables or disables SSL protocol",promptOptions:{type:"toggle"}},force:{value:!1,types:["boolean"],envLink:"SERVER_SSL_FORCE",cliName:"sslForce",legacyName:"sslOnly",description:"Forces the server to use HTTPS only when true",promptOptions:{type:"toggle"}},port:{value:443,types:["number"],envLink:"SERVER_SSL_PORT",cliName:"sslPort",description:"Port for the SSL server",promptOptions:{type:"number"}},certPath:{value:null,types:["string","null"],envLink:"SERVER_SSL_CERT_PATH",cliName:"sslCertPath",legacyName:"sslPath",description:"Path to the SSL certificate/key file",promptOptions:{type:"text"}}}},pool:{minWorkers:{value:4,types:["number"],envLink:"POOL_MIN_WORKERS",description:"Minimum and initial number of pool workers to spawn",promptOptions:{type:"number"}},maxWorkers:{value:8,types:["number"],envLink:"POOL_MAX_WORKERS",legacyName:"workers",description:"Maximum number of pool workers to spawn",promptOptions:{type:"number"}},workLimit:{value:40,types:["number"],envLink:"POOL_WORK_LIMIT",description:"Number of tasks a worker can handle before restarting",promptOptions:{type:"number"}},acquireTimeout:{value:5e3,types:["number"],envLink:"POOL_ACQUIRE_TIMEOUT",description:"Timeout in milliseconds for acquiring a resource",promptOptions:{type:"number"}},createTimeout:{value:5e3,types:["number"],envLink:"POOL_CREATE_TIMEOUT",description:"Timeout in milliseconds for creating a resource",promptOptions:{type:"number"}},destroyTimeout:{value:5e3,types:["number"],envLink:"POOL_DESTROY_TIMEOUT",description:"Timeout in milliseconds for destroying a resource",promptOptions:{type:"number"}},idleTimeout:{value:3e4,types:["number"],envLink:"POOL_IDLE_TIMEOUT",description:"Timeout in milliseconds for destroying idle resources",promptOptions:{type:"number"}},createRetryInterval:{value:200,types:["number"],envLink:"POOL_CREATE_RETRY_INTERVAL",description:"Interval in milliseconds before retrying resource creation on failure",promptOptions:{type:"number"}},reaperInterval:{value:1e3,types:["number"],envLink:"POOL_REAPER_INTERVAL",description:"Interval in milliseconds to check and destroy idle resources",promptOptions:{type:"number"}},benchmarking:{value:!1,types:["boolean"],envLink:"POOL_BENCHMARKING",cliName:"poolBenchmarking",description:"Shows statistics for the pool of resources",promptOptions:{type:"toggle"}}},logging:{level:{value:4,types:["number"],envLink:"LOGGING_LEVEL",cliName:"logLevel",description:"Logging verbosity level",promptOptions:{type:"number",round:0,min:0,max:5}},file:{value:"highcharts-export-server.log",types:["string"],envLink:"LOGGING_FILE",cliName:"logFile",description:"Log file name. Requires `logToFile` and `logDest` to be set",promptOptions:{type:"text"}},dest:{value:"log",types:["string"],envLink:"LOGGING_DEST",cliName:"logDest",description:"Path to store log files. Requires `logToFile` to be set",promptOptions:{type:"text"}},toConsole:{value:!0,types:["boolean"],envLink:"LOGGING_TO_CONSOLE",cliName:"logToConsole",description:"Enables or disables console logging",promptOptions:{type:"toggle"}},toFile:{value:!0,types:["boolean"],envLink:"LOGGING_TO_FILE",cliName:"logToFile",description:"Enables or disables logging to a file",promptOptions:{type:"toggle"}}},ui:{enable:{value:!1,types:["boolean"],envLink:"UI_ENABLE",cliName:"enableUi",description:"Enables or disables the UI for the export server",promptOptions:{type:"toggle"}},route:{value:"/",types:["string"],envLink:"UI_ROUTE",cliName:"uiRoute",description:"The endpoint route for the UI",promptOptions:{type:"text"}}},other:{nodeEnv:{value:"production",types:["string"],envLink:"OTHER_NODE_ENV",description:"The Node.js environment type",promptOptions:{type:"text"}},listenToProcessExits:{value:!0,types:["boolean"],envLink:"OTHER_LISTEN_TO_PROCESS_EXITS",description:"Whether or not to attach process.exit handlers",promptOptions:{type:"toggle"}},noLogo:{value:!1,types:["boolean"],envLink:"OTHER_NO_LOGO",description:"Display or skip printing the logo on startup",promptOptions:{type:"toggle"}},hardResetPage:{value:!1,types:["boolean"],envLink:"OTHER_HARD_RESET_PAGE",description:"Whether or not to reset the page content entirely",promptOptions:{type:"toggle"}},browserShellMode:{value:!0,types:["boolean"],envLink:"OTHER_BROWSER_SHELL_MODE",description:"Whether or not to set the browser to run in shell mode",promptOptions:{type:"toggle"}},validation:{value:!0,types:["boolean"],envLink:"OTHER_VALIDATION",description:"Whether or not to enable validation of options types",promptOptions:{type:"toggle"}}},debug:{enable:{value:!1,types:["boolean"],envLink:"DEBUG_ENABLE",cliName:"enableDebug",description:"Enables or disables debug mode for the underlying browser",promptOptions:{type:"toggle"}},headless:{value:!1,types:["boolean"],envLink:"DEBUG_HEADLESS",description:"Whether or not to set the browser to run in headless mode during debugging",promptOptions:{type:"toggle"}},devtools:{value:!1,types:["boolean"],envLink:"DEBUG_DEVTOOLS",description:"Enables or disables DevTools in headful mode",promptOptions:{type:"toggle"}},listenToConsole:{value:!1,types:["boolean"],envLink:"DEBUG_LISTEN_TO_CONSOLE",description:"Enables or disables listening to console messages from the browser",promptOptions:{type:"toggle"}},dumpio:{value:!1,types:["boolean"],envLink:"DEBUG_DUMPIO",description:"Redirects or not browser stdout and stderr to process.stdout and process.stderr",promptOptions:{type:"toggle"}},slowMo:{value:0,types:["number"],envLink:"DEBUG_SLOW_MO",description:"Delays Puppeteer operations by the specified milliseconds",promptOptions:{type:"number"}},debuggingPort:{value:9222,types:["number"],envLink:"DEBUG_DEBUGGING_PORT",description:"Port used for debugging",promptOptions:{type:"number"}}}};dotenv.config();const{coreScripts:coreScripts,moduleScripts:moduleScripts,indicatorScripts:indicatorScripts}=defaultConfig.highcharts;zod.z.setErrorMap(_customErrorMap);const v={boolean:e=>e?zod.z.boolean():zod.z.union([zod.z.enum(["true","1","false","0","undefined","null",""]).transform((e=>["undefined","null",""].includes(e)?null:"true"===e||"1"===e)),zod.z.boolean()]).nullable(),string:e=>e?zod.z.string().trim().refine((e=>!["false","undefined","null",""].includes(e)),{params:{errorMessage:"The string contains a forbidden value"}}):zod.z.string().trim().transform((e=>["false","undefined","null",""].includes(e)?null:e)).nullable(),enum:(e,t)=>t?zod.z.enum([...e]):zod.z.enum([...e,"undefined","null",""]).transform((e=>["undefined","null",""].includes(e)?null:e)).nullable(),stringArray(e,t,o){const r=zod.z.string().trim().array(),n=zod.z.string().trim().transform((e=>(e.startsWith("[")&&(e=e.slice(1)),e.endsWith("]")&&(e=e.slice(0,-1)),e.split(t)))),i=t=>t.map((e=>e.trim())).filter(e);return o?r.transform(i):zod.z.union([n,r]).transform(i).transform((e=>e.length?e:null)).nullable()},positiveNum:e=>e?zod.z.number().positive():zod.z.union([zod.z.string().trim().refine((e=>!isNaN(Number(e))&&Number(e)>0||["undefined","null",""].includes(e)),{params:{errorMessage:"The value must be numeric and positive"}}).transform((e=>["undefined","null",""].includes(e)?null:Number(e))),zod.z.number().positive()]).nullable(),nonNegativeNum:e=>e?zod.z.number().nonnegative():zod.z.union([zod.z.string().trim().refine((e=>!isNaN(Number(e))&&Number(e)>=0||["undefined","null",""].includes(e)),{params:{errorMessage:"The value must be numeric and non-negative"}}).transform((e=>["undefined","null",""].includes(e)?null:Number(e))),zod.z.number().nonnegative()]).nullable(),startsWith:(e,t)=>t?zod.z.string().trim().refine((t=>e.some((e=>t.startsWith(e)))),{params:{errorMessage:`The value must be a string that starts with ${e.join(", ")}`}}):zod.z.string().trim().refine((t=>e.some((e=>t.startsWith(e)))||["undefined","null",""].includes(t)),{params:{errorMessage:`The value must be a string that starts with ${e.join(", ")}`}}).transform((e=>["undefined","null",""].includes(e)?null:e)).nullable(),chartConfig:()=>zod.z.union([zod.z.string().trim().refine((e=>e.startsWith("{")&&e.endsWith("}")||["undefined","null",""].includes(e)),{params:{errorMessage:"The value must be a string that starts with '{' and ends with '}'"}}).transform((e=>["undefined","null",""].includes(e)?null:e)),zod.z.object({}).passthrough()]).nullable(),additionalOptions:()=>zod.z.union([zod.z.string().trim().refine((e=>e.length>=6&&e.endsWith(".json")||e.startsWith("{")&&e.endsWith("}")||["undefined","null",""].includes(e)),{params:{errorMessage:"The value must be a string that ends with '.json' or starts with '{' and ends with '}'"}}).transform((e=>["undefined","null",""].includes(e)?null:e)),zod.z.object({}).passthrough()]).nullable()},validators={args:e=>v.stringArray((e=>!["false","undefined","null",""].includes(e)),";",e),version:e=>e?zod.z.string().trim().refine((e=>/^(latest|\d{1,2}(\.\d{1,2}){0,2})$/.test(e)),{params:{errorMessage:"The value must be 'latest', a major version, or in the form XX.YY.ZZ"}}):zod.z.string().trim().refine((e=>/^(latest|\d{1,2}(\.\d{1,2}){0,2})$/.test(e)||["undefined","null",""].includes(e)),{params:{errorMessage:"The value must be 'latest', a major version, or in the form XX.YY.ZZ"}}).transform((e=>["undefined","null",""].includes(e)?null:e)).nullable(),cdnUrl:e=>v.startsWith(["http://","https://"],e),forceFetch:e=>v.boolean(e),cachePath:e=>v.string(e),adminToken:e=>v.string(e),coreScripts:e=>v.stringArray((e=>coreScripts.value.includes(e)),",",e),moduleScripts:e=>v.stringArray((e=>moduleScripts.value.includes(e)),",",e),indicatorScripts:e=>v.stringArray((e=>indicatorScripts.value.includes(e)),",",e),customScripts:e=>v.stringArray((e=>e.startsWith("https://")||e.startsWith("http://")),",",e),infile:e=>e?zod.z.string().trim().refine((e=>e.length>=6&&e.endsWith(".json")||e.length>=5&&e.endsWith(".svg")),{params:{errorMessage:"The value must be a string that ends with .json or .svg"}}).nullable():zod.z.string().trim().refine((e=>e.length>=6&&e.endsWith(".json")||e.length>=5&&e.endsWith(".svg")||["undefined","null",""].includes(e)),{params:{errorMessage:"The value must be a string that ends with .json or .svg"}}).transform((e=>["undefined","null",""].includes(e)?null:e)).nullable(),instr:()=>v.chartConfig(),options:()=>v.chartConfig(),svg:()=>zod.z.string().trim().refine((e=>e.indexOf("<svg")>=0||e.indexOf("<?xml")>=0||["false","undefined","null",""].includes(e)),{params:{errorMessage:"The value must be a string that contains '<svg' or '<?xml'"}}).transform((e=>["false","undefined","null",""].includes(e)?null:e)).nullable(),outfile:e=>e?zod.z.string().trim().refine((e=>e.length>=6&&e.endsWith(".jpeg")||e.length>=5&&(e.endsWith(".jpg")||e.endsWith(".png")||e.endsWith(".pdf")||e.endsWith(".svg"))),{params:{errorMessage:"The value must be a string that ends with .jpeg, .jpg, .png, .pdf, or .svg"}}).nullable():zod.z.string().trim().refine((e=>e.length>=6&&e.endsWith(".jpeg")||e.length>=5&&(e.endsWith(".jpg")||e.endsWith(".png")||e.endsWith(".pdf")||e.endsWith(".svg"))||["undefined","null",""].includes(e)),{params:{errorMessage:"The value must be a string that ends with .jpeg, .jpg, .png, .pdf, or .svg"}}).transform((e=>["undefined","null",""].includes(e)?null:e)).nullable(),type:e=>v.enum(["jpeg","jpg","png","pdf","svg"],e),constr:e=>v.enum(["chart","stockChart","mapChart","ganttChart"],e),b64:e=>v.boolean(e),noDownload:e=>v.boolean(e),defaultHeight:e=>v.positiveNum(e),defaultWidth:e=>v.positiveNum(e),defaultScale:e=>e?zod.z.number().gte(.1).lte(5):zod.z.union([zod.z.string().trim().refine((e=>!isNaN(Number(e))&&!0!==e&&!e.startsWith("[")&&Number(e)>=.1&&Number(e)<=5||["undefined","null",""].includes(e)),{params:{errorMessage:"The value must be within a 0.1 and 5.0 range"}}).transform((e=>["undefined","null",""].includes(e)?null:Number(e))),zod.z.number().gte(.1).lte(5)]).nullable(),height(e){return this.defaultHeight(e).nullable()},width(e){return this.defaultWidth(e).nullable()},scale(e){return this.defaultScale(e).nullable()},globalOptions:()=>v.additionalOptions(),themeOptions:()=>v.additionalOptions(),batch:e=>v.string(e),rasterizationTimeout:e=>v.nonNegativeNum(e),allowCodeExecution:e=>v.boolean(e),allowFileResources:e=>v.boolean(e),customCode:e=>v.string(e),callback:e=>v.string(e),resources(e){const t=zod.z.object({js:v.string(!1),css:v.string(!1),files:v.stringArray((e=>!["undefined","null",""].includes(e)),",",!0).nullable()}).partial(),o=zod.z.string().trim().refine((e=>e.startsWith("{")&&e.endsWith("}")||e.length>=6&&e.endsWith(".json")),{params:{errorMessage:"The value must be a string that starts with '{' and ends with '}"}}),r=zod.z.string().trim().refine((e=>e.startsWith("{")&&e.endsWith("}")||e.length>=6&&e.endsWith(".json")||["undefined","null",""].includes(e)),{params:{errorMessage:"The value must be a string that ends with .json"}}).transform((e=>["undefined","null",""].includes(e)?null:e));return e?zod.z.union([t,o]).nullable():zod.z.union([t,r]).nullable()},loadConfig:e=>v.string(e).refine((e=>null===e||e.length>=6&&e.endsWith(".json")),{params:{errorMessage:"The value must be a string that ends with .json"}}),createConfig(e){return this.loadConfig(e)},enableServer:e=>v.boolean(e),host:e=>v.string(e),port:e=>v.nonNegativeNum(e),uploadLimit:e=>v.positiveNum(e),serverBenchmarking:e=>v.boolean(e),proxyHost:e=>v.string(e),proxyPort:e=>v.nonNegativeNum(e).nullable(),proxyTimeout:e=>v.nonNegativeNum(e),enableRateLimiting:e=>v.boolean(e),maxRequests:e=>v.nonNegativeNum(e),window:e=>v.nonNegativeNum(e),delay:e=>v.nonNegativeNum(e),trustProxy:e=>v.boolean(e),skipKey:e=>v.string(e),skipToken:e=>v.string(e),enableSsl:e=>v.boolean(e),sslForce:e=>v.boolean(e),sslPort:e=>v.nonNegativeNum(e),sslCertPath:e=>v.string(e),minWorkers:e=>v.positiveNum(e),maxWorkers:e=>v.positiveNum(e),workLimit:e=>v.positiveNum(e),acquireTimeout:e=>v.nonNegativeNum(e),createTimeout:e=>v.nonNegativeNum(e),destroyTimeout:e=>v.nonNegativeNum(e),idleTimeout:e=>v.nonNegativeNum(e),createRetryInterval:e=>v.nonNegativeNum(e),reaperInterval:e=>v.nonNegativeNum(e),poolBenchmarking:e=>v.boolean(e),resourcesInterval:e=>v.nonNegativeNum(e),logLevel:e=>e?zod.z.number().int().gte(0).lte(5):zod.z.union([zod.z.string().trim().refine((e=>!isNaN(Number(e))&&!0!==e&&!e.startsWith("[")&&Number.isInteger(Number(e))&&Number(e)>=0&&Number(e)<=5||["undefined","null",""].includes(e)),{params:{errorMessage:"The value must be within a 0 and 5 range"}}).transform((e=>["undefined","null",""].includes(e)?null:Number(e))),zod.z.number().int().gte(0).lte(5)]).nullable(),logFile:e=>v.string(e).refine((e=>null===e||e.length>=5&&e.endsWith(".log")),{params:{errorMessage:"The value must be a string that ends with .log"}}),logDest:e=>v.string(e),logToConsole:e=>v.boolean(e),logToFile:e=>v.boolean(e),enableUi:e=>v.boolean(e),uiRoute:e=>v.startsWith(["/"],e),nodeEnv:e=>v.enum(["development","production","test"],e),listenToProcessExits:e=>v.boolean(e),noLogo:e=>v.boolean(e),hardResetPage:e=>v.boolean(e),browserShellMode:e=>v.boolean(e),validation:e=>v.boolean(e),enableDebug:e=>v.boolean(e),headless:e=>v.boolean(e),devtools:e=>v.boolean(e),listenToConsole:e=>v.boolean(e),dumpio:e=>v.boolean(e),slowMo:e=>v.nonNegativeNum(e),debuggingPort:e=>v.nonNegativeNum(e),requestId:()=>zod.z.string().uuid({message:"The value must be a stringified UUID"}).nullable()},PuppeteerSchema=e=>zod.z.object({args:validators.args(e)}).partial(),HighchartsSchema=e=>zod.z.object({version:validators.version(e),cdnUrl:validators.cdnUrl(e),forceFetch:validators.forceFetch(e),cachePath:validators.cachePath(e),coreScripts:validators.coreScripts(e),moduleScripts:validators.moduleScripts(e),indicatorScripts:validators.indicatorScripts(e),customScripts:validators.customScripts(e)}).partial(),ExportSchema=e=>zod.z.object({infile:validators.infile(e),instr:validators.instr(),options:validators.options(),svg:validators.svg(),outfile:validators.outfile(e),type:validators.type(e),constr:validators.constr(e),b64:validators.b64(e),noDownload:validators.noDownload(e),defaultHeight:validators.defaultHeight(e),defaultWidth:validators.defaultWidth(e),defaultScale:validators.defaultScale(e),height:validators.height(e),width:validators.width(e),scale:validators.scale(e),globalOptions:validators.globalOptions(),themeOptions:validators.themeOptions(),batch:validators.batch(!1),rasterizationTimeout:validators.rasterizationTimeout(e)}).partial(),CustomLogicSchema=e=>zod.z.object({allowCodeExecution:validators.allowCodeExecution(e),allowFileResources:validators.allowFileResources(e),customCode:validators.customCode(!1),callback:validators.callback(!1),resources:validators.resources(e),loadConfig:validators.loadConfig(!1),createConfig:validators.createConfig(!1)}).partial(),ProxySchema=e=>zod.z.object({host:validators.proxyHost(!1),port:validators.proxyPort(e),timeout:validators.proxyTimeout(e)}).partial(),RateLimitingSchema=e=>zod.z.object({enable:validators.enableRateLimiting(e),maxRequests:validators.maxRequests(e),window:validators.window(e),delay:validators.delay(e),trustProxy:validators.trustProxy(e),skipKey:validators.skipKey(!1),skipToken:validators.skipToken(!1)}).partial(),SslSchema=e=>zod.z.object({enable:validators.enableSsl(e),force:validators.sslForce(e),port:validators.sslPort(e),certPath:validators.sslCertPath(!1)}).partial(),ServerSchema=e=>zod.z.object({enable:validators.enableServer(e).optional(),host:validators.host(e).optional(),port:validators.port(e).optional(),uploadLimit:validators.uploadLimit(e).optional(),benchmarking:validators.serverBenchmarking(e).optional(),proxy:ProxySchema(e).optional(),rateLimiting:RateLimitingSchema(e).optional(),ssl:SslSchema(e).optional()}),PoolSchema=e=>zod.z.object({minWorkers:validators.minWorkers(e),maxWorkers:validators.maxWorkers(e),workLimit:validators.workLimit(e),acquireTimeout:validators.acquireTimeout(e),createTimeout:validators.createTimeout(e),destroyTimeout:validators.destroyTimeout(e),idleTimeout:validators.idleTimeout(e),createRetryInterval:validators.createRetryInterval(e),reaperInterval:validators.reaperInterval(e),benchmarking:validators.poolBenchmarking(e)}).partial(),LoggingSchema=e=>zod.z.object({level:validators.logLevel(e),file:validators.logFile(e),dest:validators.logDest(e),toConsole:validators.logToConsole(e),toFile:validators.logToFile(e)}).partial(),UiSchema=e=>zod.z.object({enable:validators.enableUi(e),route:validators.uiRoute(e)}).partial(),OtherSchema=e=>zod.z.object({nodeEnv:validators.nodeEnv(e),listenToProcessExits:validators.listenToProcessExits(e),noLogo:validators.noLogo(e),hardResetPage:validators.hardResetPage(e),browserShellMode:validators.browserShellMode(e),validation:validators.validation(e)}).partial(),DebugSchema=e=>zod.z.object({enable:validators.enableDebug(e),headless:validators.headless(e),devtools:validators.devtools(e),listenToConsole:validators.listenToConsole(e),dumpio:validators.dumpio(e),slowMo:validators.slowMo(e),debuggingPort:validators.debuggingPort(e)}).partial(),StrictConfigSchema=zod.z.object({requestId:validators.requestId(),puppeteer:PuppeteerSchema(!0),highcharts:HighchartsSchema(!0),export:ExportSchema(!0),customLogic:CustomLogicSchema(!0),server:ServerSchema(!0),pool:PoolSchema(!0),logging:LoggingSchema(!0),ui:UiSchema(!0),other:OtherSchema(!0),debug:DebugSchema(!0)}),LooseConfigSchema=zod.z.object({requestId:validators.requestId(),puppeteer:PuppeteerSchema(!1),highcharts:HighchartsSchema(!1),export:ExportSchema(!1),customLogic:CustomLogicSchema(!1),server:ServerSchema(!1),pool:PoolSchema(!1),logging:LoggingSchema(!1),ui:UiSchema(!1),other:OtherSchema(!1),debug:DebugSchema(!1)}),EnvSchema=zod.z.object({PUPPETEER_ARGS:validators.args(!1),HIGHCHARTS_VERSION:validators.version(!1),HIGHCHARTS_CDN_URL:validators.cdnUrl(!1),HIGHCHARTS_FORCE_FETCH:validators.forceFetch(!1),HIGHCHARTS_CACHE_PATH:validators.cachePath(!1),HIGHCHARTS_ADMIN_TOKEN:validators.adminToken(!1),HIGHCHARTS_CORE_SCRIPTS:validators.coreScripts(!1),HIGHCHARTS_MODULE_SCRIPTS:validators.moduleScripts(!1),HIGHCHARTS_INDICATOR_SCRIPTS:validators.indicatorScripts(!1),HIGHCHARTS_CUSTOM_SCRIPTS:validators.customScripts(!1),EXPORT_INFILE:validators.infile(!1),EXPORT_INSTR:validators.instr(),EXPORT_OPTIONS:validators.options(),EXPORT_SVG:validators.svg(),EXPORT_BATCH:validators.batch(!1),EXPORT_OUTFILE:validators.outfile(!1),EXPORT_TYPE:validators.type(!1),EXPORT_CONSTR:validators.constr(!1),EXPORT_B64:validators.b64(!1),EXPORT_NO_DOWNLOAD:validators.noDownload(!1),EXPORT_HEIGHT:validators.height(!1),EXPORT_WIDTH:validators.width(!1),EXPORT_SCALE:validators.scale(!1),EXPORT_DEFAULT_HEIGHT:validators.defaultHeight(!1),EXPORT_DEFAULT_WIDTH:validators.defaultWidth(!1),EXPORT_DEFAULT_SCALE:validators.defaultScale(!1),EXPORT_GLOBAL_OPTIONS:validators.globalOptions(),EXPORT_THEME_OPTIONS:validators.themeOptions(),EXPORT_RASTERIZATION_TIMEOUT:validators.rasterizationTimeout(!1),CUSTOM_LOGIC_ALLOW_CODE_EXECUTION:validators.allowCodeExecution(!1),CUSTOM_LOGIC_ALLOW_FILE_RESOURCES:validators.allowFileResources(!1),CUSTOM_LOGIC_CUSTOM_CODE:validators.customCode(!1),CUSTOM_LOGIC_CALLBACK:validators.callback(!1),CUSTOM_LOGIC_RESOURCES:validators.resources(!1),CUSTOM_LOGIC_LOAD_CONFIG:validators.loadConfig(!1),CUSTOM_LOGIC_CREATE_CONFIG:validators.createConfig(!1),SERVER_ENABLE:validators.enableServer(!1),SERVER_HOST:validators.host(!1),SERVER_PORT:validators.port(!1),SERVER_UPLOAD_LIMIT:validators.uploadLimit(!1),SERVER_BENCHMARKING:validators.serverBenchmarking(!1),SERVER_PROXY_HOST:validators.proxyHost(!1),SERVER_PROXY_PORT:validators.proxyPort(!1),SERVER_PROXY_TIMEOUT:validators.proxyTimeout(!1),SERVER_RATE_LIMITING_ENABLE:validators.enableRateLimiting(!1),SERVER_RATE_LIMITING_MAX_REQUESTS:validators.maxRequests(!1),SERVER_RATE_LIMITING_WINDOW:validators.window(!1),SERVER_RATE_LIMITING_DELAY:validators.delay(!1),SERVER_RATE_LIMITING_TRUST_PROXY:validators.trustProxy(!1),SERVER_RATE_LIMITING_SKIP_KEY:validators.skipKey(!1),SERVER_RATE_LIMITING_SKIP_TOKEN:validators.skipToken(!1),SERVER_SSL_ENABLE:validators.enableSsl(!1),SERVER_SSL_FORCE:validators.sslForce(!1),SERVER_SSL_PORT:validators.sslPort(!1),SERVER_SSL_CERT_PATH:validators.sslCertPath(!1),POOL_MIN_WORKERS:validators.minWorkers(!1),POOL_MAX_WORKERS:validators.maxWorkers(!1),POOL_WORK_LIMIT:validators.workLimit(!1),POOL_ACQUIRE_TIMEOUT:validators.acquireTimeout(!1),POOL_CREATE_TIMEOUT:validators.createTimeout(!1),POOL_DESTROY_TIMEOUT:validators.destroyTimeout(!1),POOL_IDLE_TIMEOUT:validators.idleTimeout(!1),POOL_CREATE_RETRY_INTERVAL:validators.createRetryInterval(!1),POOL_REAPER_INTERVAL:validators.reaperInterval(!1),POOL_BENCHMARKING:validators.poolBenchmarking(!1),LOGGING_LEVEL:validators.logLevel(!1),LOGGING_FILE:validators.logFile(!1),LOGGING_DEST:validators.logDest(!1),LOGGING_TO_CONSOLE:validators.logToConsole(!1),LOGGING_TO_FILE:validators.logToFile(!1),UI_ENABLE:validators.enableUi(!1),UI_ROUTE:validators.uiRoute(!1),OTHER_NODE_ENV:validators.nodeEnv(!1),OTHER_LISTEN_TO_PROCESS_EXITS:validators.listenToProcessExits(!1),OTHER_NO_LOGO:validators.noLogo(!1),OTHER_HARD_RESET_PAGE:validators.hardResetPage(!1),OTHER_BROWSER_SHELL_MODE:validators.browserShellMode(!1),OTHER_VALIDATION:validators.validation(!1),DEBUG_ENABLE:validators.enableDebug(!1),DEBUG_HEADLESS:validators.headless(!1),DEBUG_DEVTOOLS:validators.devtools(!1),DEBUG_LISTEN_TO_CONSOLE:validators.listenToConsole(!1),DEBUG_DUMPIO:validators.dumpio(!1),DEBUG_SLOW_MO:validators.slowMo(!1),DEBUG_DEBUGGING_PORT:validators.debuggingPort(!1)}),envs=EnvSchema.partial().parse(process.env);function strictValidate(e){return StrictConfigSchema.partial().parse(e)}function looseValidate(e){return LooseConfigSchema.partial().parse(e)}function _customErrorMap(e,t){const o=e.path.join("."),r=`Invalid value for the ${o}`;if(e.code===zod.z.ZodIssueCode.invalid_type)return e.received===zod.z.ZodParsedType.undefined?{message:`${r} - No value was provided.`}:{message:`${r} - Invalid type. ${t.defaultError}.`};if(e.code===zod.z.ZodIssueCode.custom&&e.params?.errorMessage)return{message:`${r} - ${e.params?.errorMessage}, received '${t.data}'.`};if(e.code===zod.z.ZodIssueCode.invalid_union){let t=`Multiple errors occurred for the ${o}:\n`;return e.unionErrors.forEach((e=>{const o=e.issues[0].message.indexOf("-");t+=-1!==o?`${e.issues[0].message}\n`.substring(o):`${e.issues[0].message}\n`})),{message:t}}return{message:`${r} - ${t.defaultError}.`}}class ExportError extends Error{constructor(e,t){super(),this.message=e,this.stackMessage=e,t&&(this.statusCode=t)}setError(e){return this.error=e,e.name&&(this.name=e.name),e.statusCode&&(this.statusCode=e.statusCode),e.stack&&(this.stackMessage=e.message,this.stack=e.stack),this}}const globalOptions=_initOptions(defaultConfig),nestedProps=_createNestedProps(defaultConfig),absoluteProps=_createAbsoluteProps(defaultConfig);function getOptions(e=!0){return e?deepCopy(globalOptions):globalOptions}function updateOptions(e,t=!1,o=!0){return _mergeOptions(getOptions(t),validateOptions(e,o))}function mapToNewOptions(e){const t={};if(isObject(e))for(const[o,r]of Object.entries(e)){const e=nestedProps[o]?nestedProps[o].split("."):[];e.reduce(((t,o,n)=>t[o]=e.length-1===n?r:t[o]||{}),t)}else log(2,"[config] No correct object with options was provided. Returning an empty object.");return t}function validateOption(e,t,o=!0){if(!getOptions().other.validation)return t;try{return validators[e](o).parse(t)}catch(t){throw logZodIssues(1,t.issues,`[validation] The ${e} option validation error`),new ExportError(`[validation] The ${e} option validation error`,400)}}function validateOptions(e,t=!0){if(!getOptions().other.validation)return e;try{return t?strictValidate(e):looseValidate(e)}catch(e){throw logZodIssues(1,e.issues,"[validation] Options validation error"),new ExportError("[validation] Options validation error",400)}}function isAllowedConfig(config,toString=!1,allowFunctions=!1){try{if(!isObject(config)&&"string"!=typeof config)return null;const objectConfig="string"==typeof config?allowFunctions?eval(`(${config})`):JSON.parse(config):config,stringifiedOptions=_optionsStringify(objectConfig,allowFunctions,!1),parsedOptions=allowFunctions?JSON.parse(_optionsStringify(objectConfig,allowFunctions,!0),((_,value)=>"string"==typeof value&&value.startsWith("function")?eval(`(${value})`):value)):JSON.parse(stringifiedOptions);return toString?stringifiedOptions:parsedOptions}catch(e){return null}}function _initOptions(e){const t={};for(const[o,r]of Object.entries(e))Object.prototype.hasOwnProperty.call(r,"value")?void 0!==envs[r.envLink]&&null!==envs[r.envLink]?t[o]=envs[r.envLink]:t[o]=r.value:t[o]=_initOptions(r);return t}function _mergeOptions(e,t){if(isObject(e)&&isObject(t))for(const[o,r]of Object.entries(t))e[o]=isObject(r)&&!absoluteProps.includes(o)&&void 0!==e[o]?_mergeOptions(e[o],r):void 0!==r?r:e[o]||null;return e}function _optionsStringify(e,t,o){return JSON.stringify(e,((e,r)=>{if("string"==typeof r&&(r=r.trim()),"function"==typeof r||"string"==typeof r&&r.startsWith("function")&&r.endsWith("}")){if(t)return o?`"EXP_FUN${(r+"").replaceAll(/\s+/g," ")}EXP_FUN"`:`EXP_FUN${(r+"").replaceAll(/\s+/g," ")}EXP_FUN`;throw new Error}return r})).replaceAll(o?/\\"EXP_FUN|EXP_FUN\\"/g:/"EXP_FUN|EXP_FUN"/g,"")}function _createNestedProps(e,t={},o=""){return Object.keys(e).forEach((r=>{const n=e[r];void 0===n.value?_createNestedProps(n,t,`${o}.${r}`):(t[n.cliName||r]=`${o}.${r}`.substring(1),void 0!==n.legacyName&&(t[n.legacyName]=`${o}.${r}`.substring(1)))})),t}function _createAbsoluteProps(e,t=[]){return Object.keys(e).forEach((o=>{const r=e[o];void 0===r.types?_createAbsoluteProps(r,t):r.types.includes("Object")&&t.push(o)})),t}async function get$1(e,t={}){return new Promise(((o,r)=>{_getProtocolModule(e).get(e,t,(e=>{let t="";e.on("data",(e=>{t+=e})),e.on("end",(()=>{t||r("Nothing was fetched from the URL."),e.text=t,o(e)}))})).on("error",(e=>{r(e)}))}))}function _getProtocolModule(e){return e.startsWith("https")?https:http}const cache={cdnUrl:"https://code.highcharts.com",activeManifest:{},sources:"",hcVersion:""};async function checkCache(e,t){try{let o;const r=getCachePath(),n=path.join(r,"manifest.json"),i=path.join(r,"sources.js");if(!fs.existsSync(r)&&fs.mkdirSync(r,{recursive:!0}),!fs.existsSync(n)||e.forceFetch)log(3,"[cache] Fetching and caching Highcharts dependencies."),o=await _updateCache(e,t,i);else{let r=!1;const s=JSON.parse(fs.readFileSync(n),"utf8");if(s.modules&&Array.isArray(s.modules)){const e={};s.modules.forEach((t=>e[t]=1)),s.modules=e}const{coreScripts:a,moduleScripts:l,indicatorScripts:c}=e,p=a.length+l.length+c.length;s.version!==e.version?(log(2,"[cache] A Highcharts version mismatch in the cache, need to re-fetch."),r=!0):Object.keys(s.modules||{}).length!==p?(log(2,"[cache] The cache and the requested modules do not match, need to re-fetch."),r=!0):r=(l||[]).some((e=>{if(!s.modules[e])return log(2,`[cache] The ${e} is missing in the cache, need to re-fetch.`),!0})),r?o=await _updateCache(e,t,i):(log(3,"[cache] Dependency cache is up to date, proceeding."),cache.sources=fs.readFileSync(i,"utf8"),o=s.modules,cache.hcVersion=_extractHcVersion(cache.sources))}await _saveConfigToManifest(e.version,o)}catch(e){throw new ExportError("[cache] Could not configure cache and create or update the config manifest.",500).setError(e)}}function getHcVersion(){return cache.hcVersion}async function updateHcVersion(e){const t=updateOptions({highcharts:{version:e}});await checkCache(t.highcharts,t.server.proxy)}function getCachePath(){return getAbsolutePath(getOptions().highcharts.cachePath)}async function _saveConfigToManifest(e,t={}){cache.activeManifest={version:e,modules:t},log(3,"[cache] Writing a new manifest.");try{fs.writeFileSync(path.join(getCachePath(),"manifest.json"),JSON.stringify(cache.activeManifest),"utf8")}catch(e){throw new ExportError("[cache] Error writing the cache manifest.",500).setError(e)}}async function _updateCache(e,t,o){try{const r="latest"===e.version?null:`${e.version}`;log(3,`[cache] Updating cache version to Highcharts: ${r||"latest"}.`);const n=e.cdnUrl||cache.cdnUrl,i=_configureRequest(t),s={};return cache.sources=(await Promise.all([...e.coreScripts.map((e=>_fetchScript(r?`${n}/${r}/${e}`:`${n}/${e}`,i,s,!0))),...e.moduleScripts.map((e=>_fetchScript("map"===e?r?`${n}/maps/${r}/modules/${e}`:`${n}/maps/modules/${e}`:r?`${n}/${r}/modules/${e}`:`${n}/modules/${e}`,i,s))),...e.indicatorScripts.map((e=>_fetchScript(r?`${n}/stock/${r}/indicators/${e}`:`${n}/stock/indicators/${e}`,i,s))),...e.customScripts.map((e=>_fetchScript(`${e}`,i)))])).join(";\n"),cache.hcVersion=_extractHcVersion(cache.sources),fs.writeFileSync(o,cache.sources),s}catch(e){throw new ExportError("[cache] Unable to update the local Highcharts cache.",500).setError(e)}}async function _fetchScript(e,t,o,r=!1){e.endsWith(".js")&&(e=e.substring(0,e.length-3)),log(4,`[cache] Fetching script - ${e}.js`);const n=await get$1(`${e}.js`,t);if(200===n.statusCode&&"string"==typeof n.text){if(o){o[_extractModuleName(e)]=1}return n.text}if(r)throw new ExportError(`[cache] Could not fetch the ${e}.js. The script might not exist in the requested version (status code: ${n.statusCode}).`,404).setError(n);log(2,`[cache] Could not fetch the ${e}.js. The script might not exist in the requested version.`)}function _configureRequest(e){const t=e.host,o=e.port;if(t&&o)try{return{agent:new httpsProxyAgent.HttpsProxyAgent({host:t,port:o}),timeout:e.timeout}}catch(e){throw new ExportError("[cache] Could not create a Proxy Agent.",500).setError(e)}return{}}function _extractHcVersion(e){return e.substring(0,e.indexOf("*/")).replace("/*","").replace("*/","").replace(/\n/g,"").trim()}function _extractModuleName(e){return e.replace(/(.*)\/|(.*)modules\/|stock\/(.*)indicators\/|maps\/(.*)modules\//gi,"")}function setupHighcharts(){Highcharts.animObject=function(){return{duration:0}}}async function createChart(e,t){const{getOptions:o,setOptions:r,merge:n,wrap:i}=Highcharts;Highcharts.setOptionsObj=n(!1,{},o()),window.isRenderComplete=!1,i(Highcharts.Chart.prototype,"init",(function(e,t,o){((t=n(t,{exporting:{enabled:!1},plotOptions:{series:{label:{enabled:!1}}},tooltip:{}})).series||[]).forEach((function(e){e.animation=!1})),window.onHighchartsRender||(window.onHighchartsRender=Highcharts.addEvent(this,"render",(()=>{window.isRenderComplete=!0}))),e.apply(this,[t,o])})),i(Highcharts.Series.prototype,"init",(function(e,t,o){e.apply(this,[t,o])}));const s={chart:{animation:!1,height:e.height,width:e.width},exporting:{enabled:!1}},a=new Function(`return ${e.instr}`)(),l=new Function(`return ${e.themeOptions}`)(),c=n(!1,l,a,s),p=t.callback?new Function(`return ${t.callback}`)():null;t.customCode&&new Function("options",t.customCode)(a);const u=new Function(`return ${e.globalOptions}`)();u&&r(u),Highcharts[e.constr]("container",c,p);const d=Array.from(document.querySelectorAll(".highcharts-container image"));await Promise.race([Promise.all(d.map((e=>e.complete&&0!==e.naturalHeight?Promise.resolve():new Promise((t=>e.addEventListener("load",t,{once:!0})))))),new Promise((e=>setTimeout(e,2e3)))]);const g=o();for(const e in g)"function"!=typeof g[e]&&delete g[e];r(Highcharts.setOptionsObj),Highcharts.setOptionsObj={}}const pageTemplate=fs.readFileSync(path.join(__dirname$1,"templates","template.html"),"utf8");let browser=null;async function createBrowser(e){const{debug:t,other:o}=getOptions(),{enable:r,...n}=t,i={headless:!o.browserShellMode||"shell",userDataDir:"tmp",args:e||[],handleSIGINT:!1,handleSIGTERM:!1,handleSIGHUP:!1,waitForInitialPage:!1,defaultViewport:null,...r&&n};if(!browser){let e=0;const t=async()=>{try{log(3,`[browser] Attempting to launch and get a browser instance (try ${++e}).`),browser=await puppeteer.launch(i)}catch(o){if(logWithStack(1,o,"[browser] Failed to launch a browser instance."),!(e<25))throw o;log(3,`[browser] Retry to open a browser (${e} out of 25).`),await new Promise((e=>setTimeout(e,4e3))),await t()}};try{await t(),"shell"===i.headless&&log(3,"[browser] Launched browser in shell mode."),r&&log(3,"[browser] Launched browser in debug mode.")}catch(e){throw new ExportError("[browser] Maximum retries to open a browser instance reached.",500).setError(e)}if(!browser)throw new ExportError("[browser] Cannot find a browser to open.",500)}return browser}async function closeBrowser(){browser&&browser.connected&&await browser.close(),browser=null,log(4,"[browser] Closed the browser.")}async function newPage(e){if(!browser||!browser.connected)throw new ExportError("[browser] Browser is not yet connected.",500);if(e.page=await browser.newPage(),await e.page.setCacheEnabled(!1),await _setPageContent(e.page),_setPageEvents(e.page),!e.page||e.page.isClosed())throw new ExportError("[browser] The page is invalid or closed.",400)}async function clearPage(e,t=!1){try{if(e.page&&!e.page.isClosed())return t?(await e.page.goto("about:blank",{waitUntil:"domcontentloaded"}),await _setPageContent(e.page)):await e.page.evaluate((()=>{document.body.innerHTML='<div id="chart-container"><div id="container"></div></div>'})),!0}catch(t){logWithStack(2,t,`[pool] Pool resource [${e.id}] - Content of the page could not be cleared.`),e.workCount=getOptions().pool.workLimit+1}return!1}async function addPageResources(e,t){const o=[],r=t.resources;if(r){const n=[];if(r.js&&n.push({content:r.js}),r.files)for(const e of r.files){const t=!e.startsWith("http");n.push(t?{content:fs.readFileSync(getAbsolutePath(e),"utf8")}:{url:e})}for(const t of n)try{o.push(await e.addScriptTag(t))}catch(e){logWithStack(2,e,"[browser] The JS resource cannot be loaded.")}n.length=0;const i=[];if(r.css){const n=r.css.match(/@import\s*([^;]*);/g);if(n)for(let e of n)e&&(e=e.replace("url(","").replace("@import","").replace(/"/g,"").replace(/'/g,"").replace(/;/,"").replace(/\)/g,"").trim(),e.startsWith("http")?i.push({url:e}):t.allowFileResources&&i.push({path:getAbsolutePath(e)}));i.push({content:r.css.replace(/@import\s*([^;]*);/g,"")||" "});for(const t of i)try{o.push(await e.addStyleTag(t))}catch(e){logWithStack(2,e,"[browser] The CSS resource cannot be loaded.")}i.length=0}}return o}async function clearPageResources(e,t){try{for(const e of t)await e.dispose();await e.evaluate((()=>{if("undefined"!=typeof Highcharts){const e=Highcharts.charts;if(Array.isArray(e)&&e.length)for(const t of e)t&&t.destroy(),Highcharts.charts.shift()}const[...e]=document.getElementsByTagName("script"),[,...t]=document.getElementsByTagName("style"),[...o]=document.getElementsByTagName("link");for(const r of[...e,...t,...o])r.remove()}))}catch(e){logWithStack(2,e,"[browser] Could not clear page's resources.")}}async function _setPageContent(e){await e.setContent(pageTemplate,{waitUntil:"domcontentloaded"}),await e.addScriptTag({path:path.join(getCachePath(),"sources.js")}),await e.evaluate(setupHighcharts)}function _setPageEvents(e){const{debug:t}=getOptions();e.on("pageerror",(async()=>{e.isClosed()})),t.enable&&t.listenToConsole&&e.on("console",(e=>{console.log(`[debug] ${e.text()}`)}))}var cssTemplate=()=>"\n\nhtml, body {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n#table-div, #sliders, #datatable, #controls, .ld-row {\n  display: none;\n  height: 0;\n}\n\n#chart-container {\n  box-sizing: border-box;\n  margin: 0;\n  overflow: auto;\n  font-size: 0;\n}\n\n#chart-container > figure, div {\n  margin-top: 0 !important;\n  margin-bottom: 0 !important;\n}\n\n",svgTemplate=e=>`\n<!DOCTYPE html>\n<html lang='en-US'>\n  <head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n    <title>Highcharts Export</title>\n  </head>\n  <style>\n    ${cssTemplate()}\n  </style>\n  <body>\n    <div id="chart-container">\n      ${e}\n    </div>\n  </body>\n</html>\n\n`;async function puppeteerExport(e,t,o){const r=[];try{let n=!1;if(t.svg){if(log(4,"[export] Treating as SVG input."),"svg"===t.type)return t.svg;n=!0,await e.setContent(svgTemplate(t.svg),{waitUntil:"domcontentloaded"})}else log(4,"[export] Treating as JSON config."),await e.evaluate(createChart,t,o);r.push(...await addPageResources(e,o));const i=await _getChartSize(e,n,t.scale),{x:s,y:a}=await _getClipRegion(e),l=Math.abs(Math.ceil(i.chartHeight||t.height)),c=Math.abs(Math.ceil(i.chartWidth||t.width));let p;switch(await e.setViewport({height:l,width:c,deviceScaleFactor:n?1:parseFloat(t.scale)}),t.type){case"svg":p=await _createSVG(e);break;case"png":case"jpeg":p=await _createImage(e,t.type,{width:c,height:l,x:s,y:a},t.rasterizationTimeout);break;case"pdf":p=await _createPDF(e,l,c,t.rasterizationTimeout);break;default:throw new ExportError(`[export] Unsupported output format: ${t.type}.`,400)}return await clearPageResources(e,r),p}catch(t){return await clearPageResources(e,r),t}}async function _getClipRegion(e){return e.$eval("#chart-container",(e=>{const{x:t,y:o,width:r,height:n}=e.getBoundingClientRect();return{x:t,y:o,width:r,height:Math.trunc(n>1?n:500)}}))}async function _getChartSize(e,t,o){return t?await e.evaluate((e=>{const t=document.querySelector("#chart-container svg:first-of-type"),o=t.height.baseVal.value*e,r=t.width.baseVal.value*e;return document.body.style.zoom=e,document.body.style.margin="0px",{chartHeight:o,chartWidth:r}}),parseFloat(o)):await e.evaluate((()=>{const{chartHeight:e,chartWidth:t}=window.Highcharts.charts[0];return document.body.style.zoom=1,{chartHeight:e,chartWidth:t}}))}async function _createSVG(e){return e.$eval("#container svg:first-of-type",(e=>e.outerHTML))}async function _createImage(e,t,o,r){return Promise.race([e.screenshot({type:t,clip:o,encoding:"base64",fullPage:!1,optimizeForSpeed:!0,captureBeyondViewport:!0,..."png"!==t?{quality:80}:{},omitBackground:"png"==t}),new Promise(((e,t)=>setTimeout((()=>t(new ExportError("Rasterization timeout",408))),r||1500)))])}async function _createPDF(e,t,o,r){return await e.emulateMediaType("screen"),e.pdf({height:t+1,width:o,encoding:"base64",timeout:r||1500})}let pool=null;const poolStats={exportsAttempted:0,exportsPerformed:0,exportsDropped:0,exportsFromSvg:0,exportsFromOptions:0,exportsFromSvgAttempts:0,exportsFromOptionsAttempts:0,timeSpent:0,timeSpentAverage:0};async function initPool(e,t){await createBrowser(t);try{if(log(3,`[pool] Initializing pool with workers: min ${e.minWorkers}, max ${e.maxWorkers}.`),pool)return void log(4,"[pool] Already initialized, please kill it before creating a new one.");e.minWorkers>e.maxWorkers&&(e.minWorkers=e.maxWorkers),pool=new tarn.Pool({..._factory(e),min:e.minWorkers,max:e.maxWorkers,acquireTimeoutMillis:e.acquireTimeout,createTimeoutMillis:e.createTimeout,destroyTimeoutMillis:e.destroyTimeout,idleTimeoutMillis:e.idleTimeout,createRetryIntervalMillis:e.createRetryInterval,reapIntervalMillis:e.reaperInterval,propagateCreateError:!1}),pool.on("release",(async e=>{const t=await clearPage(e,!1);log(4,`[pool] Pool resource [${e.id}] - Releasing a worker. Clear page status: ${t}.`)})),pool.on("destroySuccess",((e,t)=>{log(4,`[pool] Pool resource [${t.id}] - Destroyed a worker successfully.`),t.page=null}));const t=[];for(let o=0;o<e.minWorkers;o++)try{const e=await pool.acquire().promise;t.push(e)}catch(e){logWithStack(2,e,"[pool] Could not create an initial resource.")}t.forEach((e=>{pool.release(e)})),log(3,"[pool] The pool is ready"+(t.length?` with ${t.length} initial resources waiting.`:"."))}catch(e){throw new ExportError("[pool] Could not configure and create the pool of workers.",500).setError(e)}}async function killPool(){if(log(3,"[pool] Killing pool with all workers and closing browser."),pool){for(const e of pool.used)pool.release(e.resource);pool.destroyed||(await pool.destroy(),log(4,"[pool] Destroyed the pool of resources.")),pool=null}await closeBrowser()}async function postWork(e){let t;try{if(log(4,"[pool] Work received, starting to process."),++poolStats.exportsAttempted,e.pool.benchmarking&&_getPoolInfo(),!pool)throw new ExportError("[pool] Work received, but pool has not been started.",500);const o=measureTime();try{log(4,"[pool] Acquiring a worker handle."),t=await pool.acquire().promise,e.server.benchmarking&&log(5,"[benchmark] "+(e.requestId?`Request [${e.requestId}] - `:""),`Acquiring a worker handle took ${o()}ms.`)}catch(t){throw new ExportError(`[pool] ${e.requestId?`Request [${e.requestId}] - `:""}Error encountered when acquiring an available entry: ${o()}ms.`,400).setError(t)}if(log(4,"[pool] Acquired a worker handle."),!t.page)throw t.workCount=e.pool.workLimit+1,new ExportError("[pool] Resolved worker page is invalid: the pool setup is wonky.",400);log(4,`[pool] Pool resource [${t.id}] - Starting work on this pool entry.`);const r=measureTime(),n=await puppeteerExport(t.page,e.export,e.customLogic);if(n instanceof Error)throw"Rasterization timeout"===n.message&&(t.workCount=e.pool.workLimit+1,t.page=null),"TimeoutError"===n.name||"Rasterization timeout"===n.message?new ExportError(`[pool] ${e.requestId?`Request [${e.requestId}] - `:""}Rasterization timeout: your chart may be too complex or large, and failed to render within the allotted time.`).setError(n):new ExportError(`[pool] ${e.requestId?`Request [${e.requestId}] - `:""}Error encountered during export: ${r()}ms.`).setError(n);return e.server.benchmarking&&log(5,"[benchmark] "+(e.requestId?`Request [${e.requestId}] - `:""),`Exporting a chart sucessfully took ${r()}ms.`),pool.release(t),poolStats.timeSpent+=r(),poolStats.timeSpentAverage=poolStats.timeSpent/++poolStats.exportsPerformed,log(4,`[pool] Work completed in ${r()}ms.`),{result:n,options:e}}catch(e){throw++poolStats.exportsDropped,t&&pool.release(t),e}}function getPoolStats(){return poolStats}function getPoolInfoJSON(){return{min:pool.min,max:pool.max,used:pool.numUsed(),available:pool.numFree(),allCreated:pool.numUsed()+pool.numFree(),pendingAcquires:pool.numPendingAcquires(),pendingCreates:pool.numPendingCreates(),pendingValidations:pool.numPendingValidations(),pendingDestroys:pool.pendingDestroys.length,absoluteAll:pool.numUsed()+pool.numFree()+pool.numPendingAcquires()+pool.numPendingCreates()+pool.numPendingValidations()+pool.pendingDestroys.length}}function _getPoolInfo(){const{min:e,max:t,used:o,available:r,allCreated:n,pendingAcquires:i,pendingCreates:s,pendingValidations:a,pendingDestroys:l,absoluteAll:c}=getPoolInfoJSON();log(5,`[pool] The minimum number of resources allowed by pool: ${e}.`),log(5,`[pool] The maximum number of resources allowed by pool: ${t}.`),log(5,`[pool] The number of used resources: ${o}.`),log(5,`[pool] The number of free resources: ${r}.`),log(5,`[pool] The number of all created (used and free) resources: ${n}.`),log(5,`[pool] The number of resources waiting to be acquired: ${i}.`),log(5,`[pool] The number of resources waiting to be created: ${s}.`),log(5,`[pool] The number of resources waiting to be validated: ${a}.`),log(5,`[pool] The number of resources waiting to be destroyed: ${l}.`),log(5,`[pool] The number of all resources: ${c}.`)}function _factory(e){return{create:async()=>{const t={id:uuid.v4(),workCount:Math.round(Math.random()*(e.workLimit/2))};try{const e=getNewDateTime();return await newPage(t),log(3,`[pool] Pool resource [${t.id}] - Successfully created a worker, took ${getNewDateTime()-e}ms.`),t}catch(e){throw log(3,`[pool] Pool resource [${t.id}] - Error encountered when creating a new page.`),e}},validate:async t=>t.page?t.page.isClosed()?(log(3,`[pool] Pool resource [${t.id}] - Validation failed (page is closed or invalid).`),!1):t.page.mainFrame().detached?(log(3,`[pool] Pool resource [${t.id}] - Validation failed (page's frame is detached).`),!1):!(e.workLimit&&++t.workCount>e.workLimit)||(log(3,`[pool] Pool resource [${t.id}] - Validation failed (exceeded the ${e.workLimit} works per resource limit).`),!1):(log(3,`[pool] Pool resource [${t.id}] - Validation failed (no valid page is found).`),!1),destroy:async e=>{if(log(3,`[pool] Pool resource [${e.id}] - Destroying a worker.`),e.page&&!e.page.isClosed())try{e.page.removeAllListeners("pageerror"),e.page.removeAllListeners("console"),e.page.removeAllListeners("framedetached"),await e.page.close()}catch(t){throw log(3,`[pool] Pool resource [${e.id}] - Page could not be closed upon destroying.`),t}}}}function sanitize(e){const t=new jsdom.JSDOM("").window;return DOMPurify(t).sanitize(e,{ADD_TAGS:["foreignObject"]})}let allowCodeExecution=!1;async function singleExport(e){if(!e||!e.export)throw new ExportError("[chart] No expected `export` options were found. Please provide one of the following options: `infile`, `instr`, `options`, or `svg` to generate a valid image.",400);await startExport({export:e.export,customLogic:e.customLogic},(async(e,t)=>{if(e)throw e;const{b64:o,outfile:r,type:n}=t.options.export;try{o?fs.writeFileSync(`${r.split(".").shift()||"chart"}.txt`,getBase64(t.result,n)):fs.writeFileSync(r||`chart.${n}`,"svg"!==n?Buffer.from(t.result,"base64"):t.result)}catch(e){throw new ExportError("[chart] Error while saving a chart.",500).setError(e)}await killPool()}))}async function batchExport(e){if(!(e&&e.export&&e.export.batch))throw new ExportError("[chart] No expected `export` options were found. Please provide the `batch` option to generate valid images.",400);{const t=[];for(let o of e.export.batch.split(";")||[])o=o.split("="),2===o.length?t.push(startExport({export:{...e.export,infile:o[0],outfile:o[1]},customLogic:e.customLogic},((e,t)=>{if(e)throw e;const{b64:o,outfile:r,type:n}=t.options.export;try{o?fs.writeFileSync(`${r.split(".").shift()||"chart"}.txt`,getBase64(t.result,n)):fs.writeFileSync(r,"svg"!==n?Buffer.from(t.result,"base64"):t.result)}catch(e){throw new ExportError("[chart] Error while saving a chart.",500).setError(e)}}))):log(2,"[chart] No correct pair found for the batch export.");const o=await Promise.allSettled(t);await killPool(),o.forEach(((e,t)=>{e.reason&&logWithStack(1,e.reason,`[chart] Batch export number ${t+1} could not be correctly completed.`)}))}}async function startExport(e,t){try{if(!isObject(e))throw new ExportError("[chart] Incorrect value of the provided `imageOptions`. Needs to be an object.",400);const o=updateOptions({export:e.export,customLogic:e.customLogic},!0),r=o.export;if(log(4,"[chart] Starting the exporting process."),null!==r.infile){let e;log(4,"[chart] Attempting to export from a file input.");try{e=fs.readFileSync(getAbsolutePath(r.infile),"utf8")}catch(e){throw new ExportError("[chart] Error loading content from a file input.",400).setError(e)}if(r.infile.endsWith(".svg"))r.svg=validateOption("svg",e);else{if(!r.infile.endsWith(".json"))throw new ExportError("[chart] Incorrect value of the `infile` option.",400);r.instr=validateOption("instr",e)}}if(null!==r.svg){log(4,"[chart] Attempting to export from an SVG input."),++getPoolStats().exportsFromSvgAttempts;const e=await _exportFromSvg(sanitize(r.svg),o);return++getPoolStats().exportsFromSvg,t(null,e)}if(null!==r.instr||null!==r.options){log(4,"[chart] Attempting to export from options input."),++getPoolStats().exportsFromOptionsAttempts;const e=await _exportFromOptions(r.instr||r.options,o);return++getPoolStats().exportsFromOptions,t(null,e)}return t(new ExportError("[chart] No valid input specified. Check if at least one of the following parameters is correctly set: 'infile', 'instr', 'options', or 'svg'.",400))}catch(e){return t(e)}}function getAllowCodeExecution(){return allowCodeExecution}function setAllowCodeExecution(e){allowCodeExecution=e}async function _exportFromSvg(e,t){if("string"==typeof e&&(e.indexOf("<svg")>=0||e.indexOf("<?xml")>=0))return log(4,"[chart] Parsing input as SVG."),t.export.svg=e,t.export.options=null,t.export.instr=null,_prepareExport(t);throw new ExportError("[chart] Not a correct SVG input.",400)}async function _exportFromOptions(e,t){log(4,"[chart] Parsing input from options.");const o=isAllowedConfig(e,!0,t.customLogic.allowCodeExecution);if(null===o||"string"!=typeof o||!o.startsWith("{")||!o.endsWith("}"))throw new ExportError("[chart] Invalid configuration provided - Only options configurations and SVG are allowed for this server. If this is your server, JavaScript custom code can be enabled by starting the server with the `allowCodeExecution` options set to true.",403);return t.export.instr=o,t.export.options=null,t.export.svg=null,_prepareExport(t)}async function _prepareExport(e){const{export:t,customLogic:o}=e;return t.constr=_fixConstr(t.constr),t.type=_fixType(t.type,t.outfile),t.outfile=_fixOutfile(t.type,t.outfile),log(3,`[chart] The custom logic is ${o.allowCodeExecution?"allowed":"disallowed"}.`),_handleCustomLogic(o),_handleGlobalAndTheme(t,o),_handleSize(t),_checkDataSize({export:t,customLogic:o}),postWork(e)}function _fixConstr(e){try{const t=`${e.toLowerCase().replace("chart","")}Chart`;return"Chart"===t&&t.toLowerCase(),["chart","stockChart","mapChart","ganttChart"].includes(t)?t:"chart"}catch{return"chart"}}function _fixOutfile(e,t){return`${getAbsolutePath(t||"chart").split(".").shift()}.${e||"png"}`}function _fixType(e,t=null){const o={"image/png":"png","image/jpeg":"jpeg","application/pdf":"pdf","image/svg+xml":"svg"},r=Object.values(o);if(t){const o=t.split(".").pop();"jpg"===o?e="jpeg":r.includes(o)&&e!==o&&(e=o)}return o[e]||r.find((t=>t===e))||"png"}function _handleSize(e){const{chart:t,exporting:o}=isAllowedConfig(e.instr)||!1,{chart:r,exporting:n}=isAllowedConfig(e.globalOptions)||!1,{chart:i,exporting:s}=isAllowedConfig(e.themeOptions)||!1,a=e.height||o?.sourceHeight||t?.height||n?.sourceHeight||r?.height||s?.sourceHeight||i?.height||e.defaultHeight||400,l=e.width||o?.sourceWidth||t?.width||n?.sourceWidth||r?.width||s?.sourceWidth||i?.width||e.defaultWidth||600,c=roundNumber(Math.max(.1,Math.min(e.scale||o?.scale||n?.scale||s?.scale||e.defaultScale||1,5)),2);e.height=a,e.width=l,e.scale=c;for(let t of["height","width","scale"])"string"==typeof e[t]&&(e[t]=+e[t].replace(/px|%/gi,""))}function _handleCustomLogic(e){if(e.allowCodeExecution){try{e.resources=_handleResources(e.resources,e.allowFileResources,!0),e.resources=validateOption("resources",e.resources)}catch(t){log(2,"[chart] The `resources` cannot be loaded."),e.resources=null}try{e.customCode=_handleCustomCode(e.customCode,e.allowFileResources),e.customCode=validateOption("customCode",e.customCode)}catch(t){logWithStack(2,t,"[chart] The `customCode` cannot be loaded."),e.customCode=null}try{e.callback=_handleCustomCode(e.callback,e.allowFileResources,!0),e.callback=validateOption("callback",e.callback)}catch(t){logWithStack(2,t,"[chart] The `callback` cannot be loaded."),e.callback=null}[null,void 0].includes(e.customCode)&&log(3,"[chart] No value for the `customCode` option found."),[null,void 0].includes(e.callback)&&log(3,"[chart] No value for the `callback` option found."),[null,void 0].includes(e.resources)&&log(3,"[chart] No value for the `resources` option found.")}else if(e.callback||e.resources||e.customCode)throw e.callback=null,e.resources=null,e.customCode=null,new ExportError("[chart] The 'callback', 'resources', and 'customCode' options have been disabled for this server.",403)}function _handleResources(e=null,t,o){let r=e;r||(e="resources.json");const n=["js","css","files"];let i=!1;t&&"string"==typeof e&&e.endsWith(".json")?r=isAllowedConfig(fs.readFileSync(getAbsolutePath(e),"utf8"),!1,o):(r=isAllowedConfig(e,!1,o),r&&!t&&delete r.files);for(const e in r)n.includes(e)?i||(i=!0):delete r[e];return i?(r.files&&(r.files=r.files.map((e=>e.trim())),(!r.files||r.files.length<=0)&&delete r.files),r):null}function _handleCustomCode(e,t,o=!1){if(e&&"string"==typeof e)return(e=e.trim()).endsWith(".js")?t?_handleCustomCode(fs.readFileSync(getAbsolutePath(e),"utf8"),t,o):null:!o&&(e.startsWith("function()")||e.startsWith("function ()")||e.startsWith("()=>")||e.startsWith("() =>"))?`(${e})()`:e.replace(/;$/,"")}function _handleGlobalAndTheme(e,t){const{allowFileResources:o,allowCodeExecution:r}=t;["globalOptions","themeOptions"].forEach((t=>{try{e[t]&&(o&&"string"==typeof e[t]&&e[t].endsWith(".json")?e[t]=isAllowedConfig(fs.readFileSync(getAbsolutePath(e[t]),"utf8"),!0,r):e[t]=isAllowedConfig(e[t],!0,r),e[t]=validateOption(t,e[t]))}catch(o){logWithStack(2,o,`[chart] The \`${t}\` cannot be loaded.`),e[t]=null}})),[null,void 0].includes(e.globalOptions)&&log(3,"[chart] No value for the `globalOptions` option found."),[null,void 0].includes(e.themeOptions)&&log(3,"[chart] No value for the `themeOptions` option found.")}function _checkDataSize(e){const t=Buffer.byteLength(JSON.stringify(e),"utf-8");if(log(3,`[chart] The current total size of the data for the export process is around ${(t/1048576).toFixed(2)}MB.`),t>=104857600)throw new ExportError("[chart] The data for the export process exceeds 100MB limit.")}const timerIds=[];function addTimer(e){timerIds.push(e)}function clearAllTimers(){log(4,"[timer] Clearing all registered intervals and timeouts.");for(const e of timerIds)clearInterval(e),clearTimeout(e)}function logErrorMiddleware(e,t,o,r){return logWithStack(1,e),"development"!==getOptions().other.nodeEnv&&delete e.stack,r(e)}function returnErrorMiddleware(e,t,o,r){const{message:n,stack:i}=e,s=e.statusCode||400;o.status(s).json({statusCode:s,message:n,stack:i})}function errorMiddleware(e){e.use(logErrorMiddleware),e.use(returnErrorMiddleware)}function rateLimitingMiddleware(e,t){try{if(e&&t.enable){const o="Too many requests, you have been rate limited. Please try again later.",r={window:t.window||1,maxRequests:t.maxRequests||30,delay:t.delay||0,trustProxy:t.trustProxy||!1,skipKey:t.skipKey||null,skipToken:t.skipToken||null};r.trustProxy&&e.enable("trust proxy");const n=rateLimit({windowMs:60*r.window*1e3,limit:r.maxRequests,delayMs:r.delay,handler:(e,t)=>{t.format({json:()=>{t.status(429).send({message:o})},default:()=>{t.status(429).send(o)}})},skip:e=>null!==r.skipKey&&null!==r.skipToken&&e.query.key===r.skipKey&&e.query.access_token===r.skipToken&&(log(4,"[rate limiting] Skipping rate limiter."),!0)});e.use(n),log(3,`[rate limiting] Enabled rate limiting with ${r.maxRequests} requests per ${r.window} minute for each IP, trusting proxy: ${r.trustProxy}.`)}}catch(e){throw new ExportError("[rate limiting] Could not configure and set the rate limiting options.",500).setError(e)}}function contentTypeMiddleware(e,t,o){try{const t=e.headers["content-type"]||"";if(!t.includes("application/json")&&!t.includes("application/x-www-form-urlencoded")&&!t.includes("multipart/form-data"))throw new ExportError("[validation] Content-Type must be application/json, application/x-www-form-urlencoded, or multipart/form-data.",415);return o()}catch(e){return o(e)}}function requestBodyMiddleware(e,t,o){try{const t=e.body,r=uuid.v4();if(!t||isObjectEmpty(t))throw log(2,`[validation] Request [${r}] - The request from ${e.headers["x-forwarded-for"]||e.connection.remoteAddress} was incorrect. Received payload is empty.`),new ExportError(`[validation] Request [${r}] - The request body is required. Please ensure that your Content-Type header is correct. Accepted types are 'application/json' and 'multipart/form-data'.`,400);const n=getAllowCodeExecution(),i=isAllowedConfig(t.instr||t.options||t.infile||t.data,!0,n);if(null===i&&!t.svg)throw log(2,`[validation] Request [${r}] - The request from ${e.headers["x-forwarded-for"]||e.connection.remoteAddress} was incorrect. Received payload is missing correct chart data for export: ${JSON.stringify(t)}.`),new ExportError(`[validation] Request [${r}] - No correct chart data found. Ensure that you are using either application/json or multipart/form-data headers. If sending JSON, make sure the chart data is in the 'infile', 'options', or 'data' attribute. If sending SVG, ensure it is in the 'svg' attribute.`,400);if(t.svg&&isPrivateRangeUrlFound(t.svg))throw new ExportError(`[validation] Request [${r}] - SVG potentially contain at least one forbidden URL in 'xlink:href' element. Please review the SVG content and ensure that all referenced URLs comply with security policies.`,400);return e.validatedOptions={requestId:r,export:{instr:i,svg:t.svg,outfile:t.outfile||`${e.params.filename||"chart"}.${t.type||"png"}`,type:t.type,constr:t.constr,b64:t.b64,noDownload:t.noDownload,height:t.height,width:t.width,scale:t.scale,globalOptions:isAllowedConfig(t.globalOptions,!0,n),themeOptions:isAllowedConfig(t.themeOptions,!0,n)},customLogic:{allowCodeExecution:n,allowFileResources:!1,customCode:t.customCode,callback:t.callback,resources:isAllowedConfig(t.resources,!0,n)}},o()}catch(e){return o(e)}}function validationMiddleware(e){e.post(["/","/:filename"],contentTypeMiddleware),e.post(["/","/:filename"],requestBodyMiddleware)}const reversedMime={png:"image/png",jpeg:"image/jpeg",gif:"image/gif",pdf:"application/pdf",svg:"image/svg+xml"};async function requestExport(e,t,o){try{const o=measureTime();let r=!1;e.socket.on("close",(e=>{e&&(r=!0)}));const n=e.validatedOptions,i=n.requestId;log(4,`[export] Request [${i}] - Got an incoming HTTP request.`),await startExport(n,((n,s)=>{if(e.socket.removeAllListeners("close"),r)log(3,`[export] Request [${i}] - The client closed the connection before the chart finished processing.`);else{if(n)throw n;if(!s||!s.result)throw log(2,`[export] Request [${i}] - Request from ${e.headers["x-forwarded-for"]||e.connection.remoteAddress} was incorrect. Received result is ${s.result}.`),new ExportError(`[export] Request [${i}] - Unexpected return of the export result from the chart generation. Please check your request data.`,400);if(s.result){log(3,`[export] Request [${i}] - The whole exporting process took ${o()}ms.`);const{type:e,b64:r,noDownload:n,outfile:a}=s.options.export;return r?t.send(getBase64(s.result,e)):(t.header("Content-Type",reversedMime[e]||"image/png"),n||t.attachment(a),"svg"===e?t.send(s.result):t.send(Buffer.from(s.result,"base64")))}}}))}catch(e){return o(e)}}function exportRoutes(e){e.post("/",requestExport),e.post("/:filename",requestExport)}const serverStartTime=new Date,packageFile=JSON.parse(fs.readFileSync(path.join(__dirname$1,"package.json"),"utf8")),successRates=[],recordInterval=6e4,windowSize=30;function _calculateMovingAverage(){return successRates.reduce(((e,t)=>e+t),0)/successRates.length}function _startSuccessRate(){return setInterval((()=>{const e=getPoolStats(),t=0===e.exportsAttempted?1:e.exportsPerformed/e.exportsAttempted*100;successRates.push(t),successRates.length>windowSize&&successRates.shift()}),recordInterval)}function healthRoutes(e){addTimer(_startSuccessRate()),e.get("/health",((e,t,o)=>{try{log(4,"[health] Returning server health.");const e=getPoolStats(),o=successRates.length,r=_calculateMovingAverage();t.send({status:"OK",bootTime:serverStartTime,uptime:`${Math.floor((getNewDateTime()-serverStartTime.getTime())/1e3/60)} minutes`,serverVersion:packageFile.version,highchartsVersion:getHcVersion(),averageExportTime:e.timeSpentAverage,attemptedExports:e.exportsAttempted,performedExports:e.exportsPerformed,failedExports:e.exportsDropped,sucessRatio:e.exportsPerformed/e.exportsAttempted*100,pool:getPoolInfoJSON(),period:o,movingAverage:r,message:isNaN(r)||!successRates.length?"Too early to report. No exports made yet. Please check back soon.":`Last ${o} minutes had a success rate of ${r.toFixed(2)}%.`,svgExports:e.exportsFromSvg,jsonExports:e.exportsFromOptions,svgExportsAttempts:e.exportsFromSvgAttempts,jsonExportsAttempts:e.exportsFromOptionsAttempts})}catch(e){return o(e)}}))}function uiRoutes(e){getOptions().ui.enable&&e.get(getOptions().ui.route||"/",((e,t,o)=>{try{log(4,"[ui] Returning UI for the export."),t.sendFile(path.join(__dirname$1,"public","index.html"),{acceptRanges:!1})}catch(e){return o(e)}}))}function versionChangeRoutes(e){e.post("/version_change/:newVersion",(async(e,t,o)=>{try{log(4,"[version] Changing Highcharts version.");const o=envs.HIGHCHARTS_ADMIN_TOKEN;if(!o||!o.length)throw new ExportError("[version] The server is not configured to perform run-time version changes: `HIGHCHARTS_ADMIN_TOKEN` is not set.",401);const r=e.get("hc-auth");if(!r||r!==o)throw new ExportError("[version] Invalid or missing token: Set the token in the hc-auth header.",401);const n=e.params.newVersion;if(!n)throw new ExportError("[version] No new version supplied.",400);try{await updateHcVersion(n)}catch(e){throw new ExportError(`[version] Version change: ${e.message}`,400).setError(e)}t.status(200).send({statusCode:200,highchartsVersion:getHcVersion(),message:`Successfully updated Highcharts to version: ${n}.`})}catch(e){return o(e)}}))}const activeServers=new Map,app=express();async function startServer(e={}){try{const t=updateOptions({server:e});if(!(e=t.server).enable||!app)throw new ExportError("[server] Server cannot be started (not enabled or no correct Express app found).",500);const o=1024*e.uploadLimit*1024,r=multer.memoryStorage(),n=multer({storage:r,limits:{fieldSize:o}});if(app.disable("x-powered-by"),app.use(cors({methods:["POST","GET","OPTIONS"]})),app.use(((e,t,o)=>{t.set("Accept-Ranges","none"),o()})),app.use(express.json({limit:o})),app.use(express.urlencoded({extended:!0,limit:o})),app.use(n.none()),app.use(express.static(path.join(__dirname$1,"public"))),!e.ssl.force){const t=http.createServer(app);_attachServerErrorHandlers(t),t.listen(e.port,e.host,(()=>{activeServers.set(e.port,t),log(3,`[server] Started HTTP server on ${e.host}:${e.port}.`)}))}if(e.ssl.enable){let t,o;try{t=fs.readFileSync(path.join(getAbsolutePath(e.ssl.certPath),"server.key"),"utf8"),o=fs.readFileSync(path.join(getAbsolutePath(e.ssl.certPath),"server.crt"),"utf8")}catch(t){log(2,`[server] Unable to load key/certificate from the '${e.ssl.certPath}' path. Could not run secured layer server.`)}if(t&&o){const r=https.createServer({key:t,cert:o},app);_attachServerErrorHandlers(r),r.listen(e.ssl.port,e.host,(()=>{activeServers.set(e.ssl.port,r),log(3,`[server] Started HTTPS server on ${e.host}:${e.ssl.port}.`)}))}}rateLimitingMiddleware(app,e.rateLimiting),validationMiddleware(app),exportRoutes(app),healthRoutes(app),uiRoutes(app),versionChangeRoutes(app),errorMiddleware(app)}catch(e){throw new ExportError("[server] Could not configure and start the server.",500).setError(e)}}function closeServers(){if(activeServers.size>0){log(4,"[server] Closing all servers.");for(const[e,t]of activeServers)t.close((()=>{activeServers.delete(e),log(4,`[server] Closed server on port: ${e}.`)}))}}function getServers(){return activeServers}function getExpress(){return express}function getApp(){return app}function enableRateLimiting(e){const t=updateOptions({server:{rateLimiting:e}});rateLimitingMiddleware(app,t.server.rateLimitingOptions)}function use(e,...t){app.use(e,...t)}function get(e,...t){app.get(e,...t)}function post(e,...t){app.post(e,...t)}function _attachServerErrorHandlers(e){e.on("clientError",((e,t)=>{logWithStack(1,e,`[server] Client error: ${e.message}, destroying socket.`),t.destroy()})),e.on("error",(e=>{logWithStack(1,e,`[server] Server error: ${e.message}`)})),e.on("connection",(e=>{e.on("error",(e=>{logWithStack(1,e,`[server] Socket error: ${e.message}`)}))}))}var server={startServer:startServer,closeServers:closeServers,getServers:getServers,getExpress:getExpress,getApp:getApp,enableRateLimiting:enableRateLimiting,use:use,get:get,post:post};async function shutdownCleanUp(e=0){await Promise.allSettled([clearAllTimers(),closeServers(),killPool()]),process.exit(e)}async function initExport(e={}){const t=updateOptions(e);setAllowCodeExecution(t.customLogic.allowCodeExecution),initLogging(t.logging),t.other.listenToProcessExits&&_attachProcessExitListeners(),await checkCache(t.highcharts,t.server.proxy),await initPool(t.pool,t.puppeteer.args)}function _attachProcessExitListeners(){log(3,"[process] Attaching exit listeners to the process."),process.on("exit",(e=>{log(4,`[process] Process exited with code: ${e}.`)})),process.on("SIGINT",(async(e,t)=>{log(4,`[process] The ${e} event with code: ${t}.`),await shutdownCleanUp()})),process.on("SIGTERM",(async(e,t)=>{log(4,`[process] The ${e} event with code: ${t}.`),await shutdownCleanUp()})),process.on("SIGHUP",(async(e,t)=>{log(4,`[process] The ${e} event with code: ${t}.`),await shutdownCleanUp()})),process.on("uncaughtException",(async(e,t)=>{logWithStack(1,e,`[process] The ${t} error.`),await shutdownCleanUp(1)}))}var index={...server,getOptions:getOptions,updateOptions:updateOptions,mapToNewOptions:mapToNewOptions,validateOption:validateOption,validateOptions:validateOptions,initExport:initExport,singleExport:singleExport,batchExport:batchExport,startExport:startExport,killPool:killPool,shutdownCleanUp:shutdownCleanUp,log:log,logWithStack:logWithStack,logZodIssues:logZodIssues,setLogLevel:function(e){setLogLevel(updateOptions({logging:{level:e}}).logging.level)},enableConsoleLogging:function(e){enableConsoleLogging(updateOptions({logging:{toConsole:e}}).logging.toConsole)},enableFileLogging:function(e,t,o){const r=updateOptions({logging:{dest:e,file:t,toFile:o}});enableFileLogging(r.logging.dest,r.logging.file,r.logging.toFile)}};exports.default=index,exports.initExport=initExport;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguY2pzIiwic291cmNlcyI6WyIuLi9saWIvdXRpbHMuanMiLCIuLi9saWIvbG9nZ2VyLmpzIiwiLi4vbGliL3NjaGVtYXMvY29uZmlnLmpzIiwiLi4vbGliL3ZhbGlkYXRpb24uanMiLCIuLi9saWIvZXJyb3JzL0V4cG9ydEVycm9yLmpzIiwiLi4vbGliL2NvbmZpZy5qcyIsIi4uL2xpYi9mZXRjaC5qcyIsIi4uL2xpYi9jYWNoZS5qcyIsIi4uL2xpYi9oaWdoY2hhcnRzLmpzIiwiLi4vbGliL2Jyb3dzZXIuanMiLCIuLi90ZW1wbGF0ZXMvc3ZnRXhwb3J0L2Nzcy5qcyIsIi4uL3RlbXBsYXRlcy9zdmdFeHBvcnQvc3ZnRXhwb3J0LmpzIiwiLi4vbGliL2V4cG9ydC5qcyIsIi4uL2xpYi9wb29sLmpzIiwiLi4vbGliL3Nhbml0aXplLmpzIiwiLi4vbGliL2NoYXJ0LmpzIiwiLi4vbGliL3RpbWVyLmpzIiwiLi4vbGliL3NlcnZlci9taWRkbGV3YXJlcy9lcnJvci5qcyIsIi4uL2xpYi9zZXJ2ZXIvbWlkZGxld2FyZXMvcmF0ZUxpbWl0aW5nLmpzIiwiLi4vbGliL3NlcnZlci9taWRkbGV3YXJlcy92YWxpZGF0aW9uLmpzIiwiLi4vbGliL3NlcnZlci9yb3V0ZXMvZXhwb3J0LmpzIiwiLi4vbGliL3NlcnZlci9yb3V0ZXMvaGVhbHRoLmpzIiwiLi4vbGliL3NlcnZlci9yb3V0ZXMvdWkuanMiLCIuLi9saWIvc2VydmVyL3JvdXRlcy92ZXJzaW9uQ2hhbmdlLmpzIiwiLi4vbGliL3NlcnZlci9zZXJ2ZXIuanMiLCIuLi9saWIvcmVzb3VyY2VSZWxlYXNlLmpzIiwiLi4vbGliL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBUaGUgSGlnaGNoYXJ0cyBFeHBvcnQgU2VydmVyIHV0aWxpdHkgbW9kdWxlIHByb3ZpZGVzXHJcbiAqIGEgY29tcHJlaGVuc2l2ZSBzZXQgb2YgaGVscGVyIGZ1bmN0aW9ucyBhbmQgY29uc3RhbnRzIGRlc2lnbmVkIHRvIHN0cmVhbWxpbmVcclxuICogYW5kIGVuaGFuY2UgdmFyaW91cyBvcGVyYXRpb25zIHJlcXVpcmVkIGZvciBIaWdoY2hhcnRzIGV4cG9ydCB0YXNrcy5cclxuICovXHJcblxyXG5pbXBvcnQgeyBpc0Fic29sdXRlLCBub3JtYWxpemUsIHJlc29sdmUgfSBmcm9tICdwYXRoJztcclxuaW1wb3J0IHsgZmlsZVVSTFRvUGF0aCB9IGZyb20gJ3VybCc7XHJcblxyXG5jb25zdCBNQVhfQkFDS09GRl9BVFRFTVBUUyA9IDY7XHJcblxyXG4vLyBUaGUgZGlyZWN0b3J5IHBhdGhcclxuZXhwb3J0IGNvbnN0IF9fZGlybmFtZSA9IGZpbGVVUkxUb1BhdGgobmV3IFVSTCgnLi4vLicsIGltcG9ydC5tZXRhLnVybCkpO1xyXG5cclxuLyoqXHJcbiAqIENsZWFycyBhbmQgc3RhbmRhcmRpemVzIHRleHQgYnkgcmVwbGFjaW5nIG11bHRpcGxlIGNvbnNlY3V0aXZlIHdoaXRlc3BhY2VcclxuICogY2hhcmFjdGVycyB3aXRoIGEgc2luZ2xlIHNwYWNlIGFuZCB0cmltbWluZyBhbnkgbGVhZGluZyBvciB0cmFpbGluZ1xyXG4gKiB3aGl0ZXNwYWNlLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gY2xlYXJUZXh0XHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGhlIGlucHV0IHRleHQgdG8gYmUgY2xlYXJlZC5cclxuICogQHBhcmFtIHtSZWdFeHB9IFtydWxlPS9cXHNcXHMrL2ddIC0gVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBydWxlIHRvIG1hdGNoXHJcbiAqIG11bHRpcGxlIGNvbnNlY3V0aXZlIHdoaXRlc3BhY2UgY2hhcmFjdGVycy4gVGhlIGRlZmF1bHQgdmFsdWVcclxuICogaXMgdGhlICcvXFxzXFxzKy9nJyBSZWdFeHAuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcmVwbGFjZXI9JyAnXSAtIFRoZSBzdHJpbmcgdXNlZCB0byByZXBsYWNlIG11bHRpcGxlXHJcbiAqIGNvbnNlY3V0aXZlIHdoaXRlc3BhY2UgY2hhcmFjdGVycy4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgdGhlICcgJyBzdHJpbmcuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjbGVhcmVkIGFuZCBzdGFuZGFyZGl6ZWQgdGV4dC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGVhclRleHQodGV4dCwgcnVsZSA9IC9cXHNcXHMrL2csIHJlcGxhY2VyID0gJyAnKSB7XHJcbiAgcmV0dXJuIHRleHQucmVwbGFjZUFsbChydWxlLCByZXBsYWNlcikudHJpbSgpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiB0aGUgZ2l2ZW4gb2JqZWN0IG9yIGFycmF5LlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gZGVlcENvcHlcclxuICpcclxuICogQHBhcmFtIHsoT2JqZWN0fEFycmF5KX0gb2JqQXJyIC0gVGhlIG9iamVjdCBvciBhcnJheSB0byBiZSBkZWVwbHkgY29waWVkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7KE9iamVjdHxBcnJheSl9IFRoZSBkZWVwIGNvcHkgb2YgdGhlIHByb3ZpZGVkIG9iamVjdCBvciBhcnJheS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWVwQ29weShvYmpBcnIpIHtcclxuICAvLyBJZiB0aGUgYG9iakFycmAgaXMgbnVsbCBvciBub3Qgb2YgdGhlIGBvYmplY3RgIHR5cGUsIHJldHVybiBpdFxyXG4gIGlmIChvYmpBcnIgPT09IG51bGwgfHwgdHlwZW9mIG9iakFyciAhPT0gJ29iamVjdCcpIHtcclxuICAgIHJldHVybiBvYmpBcnI7XHJcbiAgfVxyXG5cclxuICAvLyBQcmVwYXJlIGVpdGhlciBhIG5ldyBhcnJheSBvciBhIG5ldyBvYmplY3RcclxuICBjb25zdCBvYmpBcnJDb3B5ID0gQXJyYXkuaXNBcnJheShvYmpBcnIpID8gW10gOiB7fTtcclxuXHJcbiAgLy8gUmVjdXJzaXZlbHkgY29weSBlYWNoIHByb3BlcnR5XHJcbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqQXJyKSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iakFyciwga2V5KSkge1xyXG4gICAgICBvYmpBcnJDb3B5W2tleV0gPSBkZWVwQ29weShvYmpBcnJba2V5XSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm4gdGhlIGNvcGllZCBvYmplY3RcclxuICByZXR1cm4gb2JqQXJyQ29weTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEltcGxlbWVudHMgYW4gZXhwb25lbnRpYWwgYmFja29mZiBzdHJhdGVneSBmb3IgcmV0cnlpbmcgYSBmdW5jdGlvbiB1bnRpbFxyXG4gKiBhIGNlcnRhaW4gbnVtYmVyIG9mIGF0dGVtcHRzIGFyZSByZWFjaGVkLlxyXG4gKlxyXG4gKiBAYXN5bmNcclxuICogQGZ1bmN0aW9uIGV4cEJhY2tvZmZcclxuICpcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gYmUgcmV0cmllZC5cclxuICogQHBhcmFtIHtudW1iZXJ9IFthdHRlbXB0PTBdIC0gVGhlIGN1cnJlbnQgYXR0ZW1wdCBudW1iZXIuIFRoZSBkZWZhdWx0IHZhbHVlXHJcbiAqIGlzIGAwYC5cclxuICogQHBhcmFtIHsuLi51bmtub3dufSBhcmdzIC0gQXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byB0aGUgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHVua25vd24+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgcmVzdWx0XHJcbiAqIG9mIHRoZSBmdW5jdGlvbiBpZiBzdWNjZXNzZnVsLlxyXG4gKlxyXG4gKiBAdGhyb3dzIHtFcnJvcn0gVGhyb3dzIGFuIGBFcnJvcmAgaWYgdGhlIG1heGltdW0gbnVtYmVyIG9mIGF0dGVtcHRzXHJcbiAqIGlzIHJlYWNoZWQuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhwQmFja29mZihmbiwgYXR0ZW1wdCA9IDAsIC4uLmFyZ3MpIHtcclxuICB0cnkge1xyXG4gICAgLy8gVHJ5IHRvIGNhbGwgdGhlIGZ1bmN0aW9uXHJcbiAgICByZXR1cm4gYXdhaXQgZm4oLi4uYXJncyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIC8vIENhbGN1bGF0ZSBkZWxheSBpbiBtc1xyXG4gICAgY29uc3QgZGVsYXlJbk1zID0gMiAqKiBhdHRlbXB0ICogMTAwMDtcclxuXHJcbiAgICAvLyBJZiB0aGUgYXR0ZW1wdCBleGNlZWRzIHRoZSBtYXhpbXVtIGF0dGVtcHRzIG9mIHJlcGVhdCwgdGhyb3cgYW4gZXJyb3JcclxuICAgIGlmICgrK2F0dGVtcHQgPj0gTUFYX0JBQ0tPRkZfQVRURU1QVFMpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2FpdCBnaXZlbiBhbW91bnQgb2YgdGltZVxyXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc3BvbnNlKSA9PiBzZXRUaW1lb3V0KHJlc3BvbnNlLCBkZWxheUluTXMpKTtcclxuXHJcbiAgICAvLy8gVE8gRE86IENvcnJlY3RcclxuICAgIC8vIC8vIEluZm9ybWF0aW9uIGFib3V0IHRoZSByZXNvdXJjZSB0aW1lb3V0XHJcbiAgICAvLyBsb2coXHJcbiAgICAvLyAgIDMsXHJcbiAgICAvLyAgIGBbdXRpbHNdIFdhaXRlZCAke2RlbGF5SW5Nc31tcyB1bnRpbCBuZXh0IGNhbGwgZm9yIHRoZSByZXNvdXJjZSBvZiBJRDogJHthcmdzWzBdfS5gXHJcbiAgICAvLyApO1xyXG5cclxuICAgIC8vIFRyeSBhZ2FpblxyXG4gICAgcmV0dXJuIGV4cEJhY2tvZmYoZm4sIGF0dGVtcHQsIC4uLmFyZ3MpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gcGF0aCBpcyByZWxhdGl2ZSBvciBhYnNvbHV0ZSBhbmQgcmV0dXJucyB0aGUgY29ycmVjdGVkLFxyXG4gKiBhYnNvbHV0ZSBwYXRoLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gZ2V0QWJzb2x1dGVQYXRoXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGggdG8gYmUgY2hlY2tlZCBvbi5cclxuICpcclxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGFic29sdXRlIHBhdGguXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWJzb2x1dGVQYXRoKHBhdGgpIHtcclxuICByZXR1cm4gaXNBYnNvbHV0ZShwYXRoKSA/IG5vcm1hbGl6ZShwYXRoKSA6IHJlc29sdmUocGF0aCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBpbnB1dCBkYXRhIHRvIGEgQmFzZTY0IHN0cmluZyBiYXNlZCBvbiB0aGUgZXhwb3J0IHR5cGUuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBnZXRCYXNlNjRcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGlucHV0IC0gVGhlIGlucHV0IHRvIGJlIHRyYW5zZm9ybWVkIHRvIEJhc2U2NCBmb3JtYXQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVGhlIG9yaWdpbmFsIGV4cG9ydCB0eXBlLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgQmFzZTY0IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgaW5wdXQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmFzZTY0KGlucHV0LCB0eXBlKSB7XHJcbiAgLy8gRm9yIHBkZiBhbmQgc3ZnIHR5cGVzIHRoZSBpbnB1dCBtdXN0IGJlIHRyYW5zZm9ybWVkIHRvIEJhc2U2NCBmcm9tIGEgYnVmZmVyXHJcbiAgaWYgKHR5cGUgPT09ICdwZGYnIHx8IHR5cGUgPT0gJ3N2ZycpIHtcclxuICAgIHJldHVybiBCdWZmZXIuZnJvbShpbnB1dCwgJ3V0ZjgnKS50b1N0cmluZygnYmFzZTY0Jyk7XHJcbiAgfVxyXG5cclxuICAvLyBGb3IgcG5nIGFuZCBqcGVnIGlucHV0IGlzIGFscmVhZHkgYSBCYXNlNjQgc3RyaW5nXHJcbiAgcmV0dXJuIGlucHV0O1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJucyBzdHJpbmdpZmllZCBkYXRlIHdpdGhvdXQgdGhlIEdNVCB0ZXh0IGluZm9ybWF0aW9uLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gZ2V0TmV3RGF0ZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE5ld0RhdGUoKSB7XHJcbiAgLy8gR2V0IHJpZCBvZiB0aGUgR01UIHRleHQgaW5mb3JtYXRpb25cclxuICByZXR1cm4gbmV3IERhdGUoKS50b1N0cmluZygpLnNwbGl0KCcoJylbMF0udHJpbSgpO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgc3RvcmVkIHRpbWUgdmFsdWUgaW4gbWlsbGlzZWNvbmRzLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gZ2V0TmV3RGF0ZVRpbWVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXdEYXRlVGltZSgpIHtcclxuICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIGl0ZW0gaXMgYW4gb2JqZWN0LlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gaXNPYmplY3RcclxuICpcclxuICogQHBhcmFtIHt1bmtub3dufSBpdGVtIC0gVGhlIGl0ZW0gdG8gYmUgY2hlY2tlZC5cclxuICpcclxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBpdGVtIGlzIGFuIG9iamVjdCwgYGZhbHNlYFxyXG4gKiBvdGhlcndpc2UuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoaXRlbSkge1xyXG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlbSkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBvYmplY3QgaXMgZW1wdHkuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBpc09iamVjdEVtcHR5XHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtIC0gVGhlIG9iamVjdCB0byBiZSBjaGVja2VkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGl0ZW0gaXMgYW4gZW1wdHkgb2JqZWN0LCBgZmFsc2VgXHJcbiAqIG90aGVyd2lzZS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdEVtcHR5KGl0ZW0pIHtcclxuICByZXR1cm4gKFxyXG4gICAgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmXHJcbiAgICAhQXJyYXkuaXNBcnJheShpdGVtKSAmJlxyXG4gICAgaXRlbSAhPT0gbnVsbCAmJlxyXG4gICAgT2JqZWN0LmtleXMoaXRlbSkubGVuZ3RoID09PSAwXHJcbiAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIHByaXZhdGUgSVAgcmFuZ2UgVVJMIGlzIGZvdW5kIGluIHRoZSBnaXZlbiBzdHJpbmcuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBpc1ByaXZhdGVSYW5nZVVybEZvdW5kXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtIC0gVGhlIHN0cmluZyB0byBiZSBjaGVja2VkIGZvciBhIHByaXZhdGUgSVAgcmFuZ2UgVVJMLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYSBwcml2YXRlIElQIHJhbmdlIFVSTCBpcyBmb3VuZCwgYGZhbHNlYFxyXG4gKiBvdGhlcndpc2UuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNQcml2YXRlUmFuZ2VVcmxGb3VuZChpdGVtKSB7XHJcbiAgY29uc3QgcmVnZXhQYXR0ZXJucyA9IFtcclxuICAgIC94bGluazpocmVmPVwiKD86aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvKT9sb2NhbGhvc3RcXGIvLFxyXG4gICAgL3hsaW5rOmhyZWY9XCIoPzpodHRwOlxcL1xcL3xodHRwczpcXC9cXC8pPzEwXFwuXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9XFxiLyxcclxuICAgIC94bGluazpocmVmPVwiKD86aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvKT8xMjdcXC5cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM31cXGIvLFxyXG4gICAgL3hsaW5rOmhyZWY9XCIoPzpodHRwOlxcL1xcL3xodHRwczpcXC9cXC8pPzE3MlxcLigxWzYtOV18MlswLTldfDNbMC0xXSlcXC5cXGR7MSwzfVxcLlxcZHsxLDN9XFxiLyxcclxuICAgIC94bGluazpocmVmPVwiKD86aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvKT8xOTJcXC4xNjhcXC5cXGR7MSwzfVxcLlxcZHsxLDN9XFxiL1xyXG4gIF07XHJcblxyXG4gIHJldHVybiByZWdleFBhdHRlcm5zLnNvbWUoKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChpdGVtKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVdGlsaXR5IHRvIG1lYXN1cmUgZWxhcHNlZCB0aW1lIHVzaW5nIHRoZSBOb2RlLmpzIGBwcm9jZXNzLmhydGltZSgpYCBtZXRob2QuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBtZWFzdXJlVGltZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHRoZSBlbGFwc2VkIHRpbWUgaW4gbWlsbGlzZWNvbmRzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUaW1lKCkge1xyXG4gIGNvbnN0IHN0YXJ0ID0gcHJvY2Vzcy5ocnRpbWUuYmlnaW50KCk7XHJcbiAgcmV0dXJuICgpID0+IE51bWJlcihwcm9jZXNzLmhydGltZS5iaWdpbnQoKSAtIHN0YXJ0KSAvIDEwMDAwMDA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSb3VuZHMgYSBudW1iZXIgdG8gdGhlIHNwZWNpZmllZCBwcmVjaXNpb24uXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiByb3VuZE51bWJlclxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBUaGUgbnVtYmVyIHRvIGJlIHJvdW5kZWQuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwcmVjaXNpb24gLSBUaGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHJvdW5kIHRvLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgcm91bmRlZCBudW1iZXIuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcm91bmROdW1iZXIodmFsdWUsIHByZWNpc2lvbiA9IDEpIHtcclxuICBjb25zdCBtdWx0aXBsaWVyID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbiB8fCAwKTtcclxuICByZXR1cm4gTWF0aC5yb3VuZCgrdmFsdWUgKiBtdWx0aXBsaWVyKSAvIG11bHRpcGxpZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhIHZhbHVlIHRvIGEgYm9vbGVhbi5cclxuICpcclxuICogQGZ1bmN0aW9uIHRvQm9vbGVhblxyXG4gKlxyXG4gKiBAcGFyYW0ge3Vua25vd259IGl0ZW0gLSBUaGUgdmFsdWUgdG8gYmUgY29udmVydGVkIHRvIGEgYm9vbGVhbi5cclxuICpcclxuICogQHJldHVybnMge2Jvb2xlYW59IFRoZSBib29sZWFuIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBpbnB1dCB2YWx1ZS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB0b0Jvb2xlYW4oaXRlbSkge1xyXG4gIHJldHVybiBbJ2ZhbHNlJywgJ3VuZGVmaW5lZCcsICdudWxsJywgJ05hTicsICcwJywgJyddLmluY2x1ZGVzKGl0ZW0pXHJcbiAgICA/IGZhbHNlXHJcbiAgICA6ICEhaXRlbTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIF9fZGlybmFtZSxcclxuICBjbGVhclRleHQsXHJcbiAgZGVlcENvcHksXHJcbiAgZXhwQmFja29mZixcclxuICBnZXRBYnNvbHV0ZVBhdGgsXHJcbiAgZ2V0QmFzZTY0LFxyXG4gIGdldE5ld0RhdGUsXHJcbiAgZ2V0TmV3RGF0ZVRpbWUsXHJcbiAgaXNPYmplY3QsXHJcbiAgaXNPYmplY3RFbXB0eSxcclxuICBpc1ByaXZhdGVSYW5nZVVybEZvdW5kLFxyXG4gIG1lYXN1cmVUaW1lLFxyXG4gIHJvdW5kTnVtYmVyLFxyXG4gIHRvQm9vbGVhblxyXG59O1xyXG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5cclxuSGlnaGNoYXJ0cyBFeHBvcnQgU2VydmVyXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMTYtMjAyNSwgSGlnaHNvZnRcclxuXHJcbkxpY2VuY2VkIHVuZGVyIHRoZSBNSVQgbGljZW5jZS5cclxuXHJcbkFkZGl0aW9uYWxseSBhIHZhbGlkIEhpZ2hjaGFydHMgbGljZW5zZSBpcyByZXF1aXJlZCBmb3IgdXNlLlxyXG5cclxuU2VlIExJQ0VOU0UgZmlsZSBpbiByb290IGZvciBkZXRhaWxzLlxyXG5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBAb3ZlcnZpZXcgQSBtb2R1bGUgZm9yIG1hbmFnaW5nIGxvZ2dpbmcgZnVuY3Rpb25hbGl0eSB3aXRoIGN1c3RvbWl6YWJsZVxyXG4gKiBsb2cgbGV2ZWxzLCBjb25zb2xlIGFuZCBmaWxlIGxvZ2dpbmcgb3B0aW9ucywgYW5kIGVycm9yIGhhbmRsaW5nIHN1cHBvcnQuXHJcbiAqIFRoZSBtb2R1bGUgYWxzbyBlbnN1cmVzIHRoYXQgZmlsZS1iYXNlZCBsb2dzIGFyZSBzdG9yZWQgaW4gYSBzdHJ1Y3R1cmVkXHJcbiAqIGRpcmVjdG9yeSwgY3JlYXRpbmcgdGhlIG5lY2Vzc2FyeSBwYXRocyBhdXRvbWF0aWNhbGx5IGlmIHRoZXkgZG8gbm90IGV4aXN0LlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGFwcGVuZEZpbGUsIGV4aXN0c1N5bmMsIG1rZGlyU3luYyB9IGZyb20gJ2ZzJztcclxuaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnO1xyXG5cclxuaW1wb3J0IHsgZ2V0QWJzb2x1dGVQYXRoLCBnZXROZXdEYXRlIH0gZnJvbSAnLi91dGlscy5qcyc7XHJcblxyXG4vLyBUaGUgYXZhaWxhYmxlIGNvbG9yc1xyXG5jb25zdCBjb2xvcnMgPSBbJ3JlZCcsICd5ZWxsb3cnLCAnYmx1ZScsICdncmF5JywgJ2dyZWVuJ107XHJcblxyXG4vLyBUaGUgZGVmYXVsdCBsb2dnaW5nIGNvbmZpZ1xyXG5jb25zdCBsb2dnaW5nID0ge1xyXG4gIC8vIEZsYWdzIGZvciBsb2dnaW5nIHN0YXR1c1xyXG4gIHRvQ29uc29sZTogdHJ1ZSxcclxuICB0b0ZpbGU6IGZhbHNlLFxyXG4gIHBhdGhDcmVhdGVkOiBmYWxzZSxcclxuICAvLyBGdWxsIHBhdGggdG8gdGhlIGxvZyBmaWxlXHJcbiAgcGF0aFRvTG9nOiAnJyxcclxuICAvLyBMb2cgbGV2ZWxzXHJcbiAgbGV2ZWxzRGVzYzogW1xyXG4gICAge1xyXG4gICAgICB0aXRsZTogJ2Vycm9yJyxcclxuICAgICAgY29sb3I6IGNvbG9yc1swXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6ICd3YXJuaW5nJyxcclxuICAgICAgY29sb3I6IGNvbG9yc1sxXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdGl0bGU6ICdub3RpY2UnLFxyXG4gICAgICBjb2xvcjogY29sb3JzWzJdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogJ3ZlcmJvc2UnLFxyXG4gICAgICBjb2xvcjogY29sb3JzWzNdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0aXRsZTogJ2JlbmNobWFyaycsXHJcbiAgICAgIGNvbG9yOiBjb2xvcnNbNF1cclxuICAgIH1cclxuICBdXHJcbn07XHJcblxyXG4vKipcclxuICogTG9ncyBhIG1lc3NhZ2Ugd2l0aCBhIHNwZWNpZmllZCBsb2cgbGV2ZWwuIEFjY2VwdHMgYSB2YXJpYWJsZSBudW1iZXJcclxuICogb2YgYXJndW1lbnRzLiBUaGUgYXJndW1lbnRzIGFmdGVyIHRoZSBgbGV2ZWxgIGFyZSBwYXNzZWQgdG8gYGNvbnNvbGUubG9nYFxyXG4gKiBhbmQvb3IgdXNlZCB0byBjb25zdHJ1Y3QgYW5kIGFwcGVuZCBtZXNzYWdlcyB0byBhIGxvZyBmaWxlLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gbG9nXHJcbiAqXHJcbiAqIEBwYXJhbSB7Li4udW5rbm93bn0gYXJncyAtIEFuIGFycmF5IG9mIGFyZ3VtZW50cyB3aGVyZSB0aGUgZmlyc3QgaXMgdGhlIGxvZ1xyXG4gKiBsZXZlbCBhbmQgdGhlIHJlbWFpbmluZyBhcmUgc3RyaW5ncyB1c2VkIHRvIGJ1aWxkIHRoZSBsb2cgbWVzc2FnZS5cclxuICpcclxuICogQHJldHVybnMge3ZvaWR9IEV4aXRzIHRoZSBmdW5jdGlvbiBleGVjdXRpb24gaWYgYXR0ZW1wdGluZyB0byBsb2cgYXQgYSBsZXZlbFxyXG4gKiBoaWdoZXIgdGhhbiBhbGxvd2VkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGxvZyguLi5hcmdzKSB7XHJcbiAgY29uc3QgW25ld0xldmVsLCAuLi50ZXh0c10gPSBhcmdzO1xyXG5cclxuICAvLyBDdXJyZW50IGxvZ2dpbmcgb3B0aW9uc1xyXG4gIGNvbnN0IHsgbGV2ZWxzRGVzYywgbGV2ZWwgfSA9IGxvZ2dpbmc7XHJcblxyXG4gIC8vIENoZWNrIGlmIHRoZSBsb2cgbGV2ZWwgaXMgd2l0aGluIGEgY29ycmVjdCByYW5nZSBvciBpcyBpdCBhIGJlbmNobWFyayBsb2dcclxuICBpZiAoXHJcbiAgICBuZXdMZXZlbCAhPT0gNSAmJlxyXG4gICAgKG5ld0xldmVsID09PSAwIHx8IG5ld0xldmVsID4gbGV2ZWwgfHwgbGV2ZWwgPiBsZXZlbHNEZXNjLmxlbmd0aClcclxuICApIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIENyZWF0ZSBhIG1lc3NhZ2UncyBwcmVmaXhcclxuICBjb25zdCBwcmVmaXggPSBgJHtnZXROZXdEYXRlKCl9IFske2xldmVsc0Rlc2NbbmV3TGV2ZWwgLSAxXS50aXRsZX1dIC1gO1xyXG5cclxuICAvLyBMb2cgdG8gZmlsZVxyXG4gIGlmIChsb2dnaW5nLnRvRmlsZSkge1xyXG4gICAgX2xvZ1RvRmlsZSh0ZXh0cywgcHJlZml4KTtcclxuICB9XHJcblxyXG4gIC8vIExvZyB0byBjb25zb2xlXHJcbiAgaWYgKGxvZ2dpbmcudG9Db25zb2xlKSB7XHJcbiAgICBjb25zb2xlLmxvZy5hcHBseShcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICBbcHJlZml4LnRvU3RyaW5nKClbbG9nZ2luZy5sZXZlbHNEZXNjW25ld0xldmVsIC0gMV0uY29sb3JdXS5jb25jYXQodGV4dHMpXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIExvZ3MgYW4gZXJyb3IgbWVzc2FnZSBhbG9uZyB3aXRoIGl0cyBzdGFjayB0cmFjZS4gT3B0aW9uYWxseSwgYSBjdXN0b21cclxuICogbWVzc2FnZSBjYW4gYmUgcHJvdmlkZWQuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBsb2dXaXRoU3RhY2tcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IG5ld0xldmVsIC0gVGhlIGxvZyBsZXZlbC5cclxuICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgLSBUaGUgZXJyb3Igb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHN0YWNrIHRyYWNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY3VzdG9tTWVzc2FnZSAtIEFuIG9wdGlvbmFsIGN1c3RvbSBtZXNzYWdlIHRvIGJlIGluY2x1ZGVkXHJcbiAqIGluIHRoZSBsb2cgYWxvbmdzaWRlIHRoZSBlcnJvci5cclxuICpcclxuICogQHJldHVybnMge3ZvaWR9IEV4aXRzIHRoZSBmdW5jdGlvbiBleGVjdXRpb24gaWYgYXR0ZW1wdGluZyB0byBsb2cgYXQgYSBsZXZlbFxyXG4gKiBoaWdoZXIgdGhhbiBhbGxvd2VkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGxvZ1dpdGhTdGFjayhuZXdMZXZlbCwgZXJyb3IsIGN1c3RvbU1lc3NhZ2UpIHtcclxuICAvLyBHZXQgdGhlIG1haW4gbWVzc2FnZVxyXG4gIGNvbnN0IG1haW5NZXNzYWdlID0gY3VzdG9tTWVzc2FnZSB8fCAoZXJyb3IgJiYgZXJyb3IubWVzc2FnZSkgfHwgJyc7XHJcblxyXG4gIC8vIEN1cnJlbnQgbG9nZ2luZyBvcHRpb25zXHJcbiAgY29uc3QgeyBsZXZlbCwgbGV2ZWxzRGVzYyB9ID0gbG9nZ2luZztcclxuXHJcbiAgLy8gQ2hlY2sgaWYgdGhlIGxvZyBsZXZlbCBpcyB3aXRoaW4gYSBjb3JyZWN0IHJhbmdlXHJcbiAgaWYgKG5ld0xldmVsID09PSAwIHx8IG5ld0xldmVsID4gbGV2ZWwgfHwgbGV2ZWwgPiBsZXZlbHNEZXNjLmxlbmd0aCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGEgbWVzc2FnZSdzIHByZWZpeFxyXG4gIGNvbnN0IHByZWZpeCA9IGAke2dldE5ld0RhdGUoKX0gWyR7bGV2ZWxzRGVzY1tuZXdMZXZlbCAtIDFdLnRpdGxlfV0gLWA7XHJcblxyXG4gIC8vIEFkZCB0aGUgd2hvbGUgc3RhY2sgbWVzc2FnZVxyXG4gIGNvbnN0IHN0YWNrTWVzc2FnZSA9IGVycm9yICYmIGVycm9yLnN0YWNrO1xyXG5cclxuICAvLyBDb21iaW5lIGN1c3RvbSBtZXNzYWdlIG9yIGVycm9yIG1lc3NhZ2Ugd2l0aCBlcnJvciBzdGFjayBtZXNzYWdlLCBpZiBleGlzdHNcclxuICBjb25zdCB0ZXh0cyA9IFttYWluTWVzc2FnZV07XHJcbiAgaWYgKHN0YWNrTWVzc2FnZSkge1xyXG4gICAgdGV4dHMucHVzaCgnXFxuJywgc3RhY2tNZXNzYWdlKTtcclxuICB9XHJcblxyXG4gIC8vIExvZyB0byBmaWxlXHJcbiAgaWYgKGxvZ2dpbmcudG9GaWxlKSB7XHJcbiAgICBfbG9nVG9GaWxlKHRleHRzLCBwcmVmaXgpO1xyXG4gIH1cclxuXHJcbiAgLy8gTG9nIHRvIGNvbnNvbGVcclxuICBpZiAobG9nZ2luZy50b0NvbnNvbGUpIHtcclxuICAgIGNvbnNvbGUubG9nLmFwcGx5KFxyXG4gICAgICB1bmRlZmluZWQsXHJcbiAgICAgIFtwcmVmaXgudG9TdHJpbmcoKVtsb2dnaW5nLmxldmVsc0Rlc2NbbmV3TGV2ZWwgLSAxXS5jb2xvcl1dLmNvbmNhdChbXHJcbiAgICAgICAgdGV4dHMuc2hpZnQoKVtjb2xvcnNbbmV3TGV2ZWwgLSAxXV0sXHJcbiAgICAgICAgLi4udGV4dHNcclxuICAgICAgXSlcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogTG9ncyBhbiBlcnJvciBtZXNzYWdlIHJlbGF0ZWQgdG8gWm9kIHZhbGlkYXRpb24gaXNzdWVzLiBPcHRpb25hbGx5LCBhIGN1c3RvbVxyXG4gKiBtZXNzYWdlIGNhbiBiZSBwcm92aWRlZC5cclxuICpcclxuICogQGZ1bmN0aW9uIGxvZ1pvZElzc3Vlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gbmV3TGV2ZWwgLSBUaGUgbG9nIGxldmVsLlxyXG4gKiBAcGFyYW0ge0Vycm9yW119IGlzc3VlcyAtIEFuIGFycmF5IG9mIFpvZCB2YWxpZGF0aW9uIGlzc3Vlcy5cclxuICogQHBhcmFtIHtzdHJpbmd9IGN1c3RvbU1lc3NhZ2UgLSBBbiBvcHRpb25hbCBjdXN0b20gbWVzc2FnZSB0byBiZSBpbmNsdWRlZFxyXG4gKiBpbiB0aGUgbG9nIGFsb25nc2lkZSB0aGUgZXJyb3IuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbG9nWm9kSXNzdWVzKG5ld0xldmVsLCBpc3N1ZXMsIGN1c3RvbU1lc3NhZ2UpIHtcclxuICBsb2dXaXRoU3RhY2soXHJcbiAgICBuZXdMZXZlbCxcclxuICAgIG51bGwsXHJcbiAgICBbXHJcbiAgICAgIGAke2N1c3RvbU1lc3NhZ2UgfHwgJ1t2YWxpZGF0aW9uXSBWYWxpZGF0aW9uIGVycm9yJ30gLSB0aGUgZm9sbG93aW5nIFpvZCBpc3N1ZXMgb2NjdXJlZDpgLFxyXG4gICAgICAuLi4oaXNzdWVzIHx8IFtdKS5tYXAoKGlzc3VlKSA9PiBgLSAke2lzc3VlLm1lc3NhZ2V9YClcclxuICAgIF0uam9pbignXFxuJylcclxuICApO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZXMgbG9nZ2luZyB3aXRoIHRoZSBzcGVjaWZpZWQgbG9nZ2luZyBjb25maWd1cmF0aW9uLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gaW5pdExvZ2dpbmdcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGxvZ2dpbmdPcHRpb25zIC0gVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmdcclxuICogYGxvZ2dpbmdgIG9wdGlvbnMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaW5pdExvZ2dpbmcobG9nZ2luZ09wdGlvbnMpIHtcclxuICAvLyBHZXQgb3B0aW9ucyBmcm9tIHRoZSBgbG9nZ2luZ09wdGlvbnNgIG9iamVjdFxyXG4gIGNvbnN0IHsgbGV2ZWwsIGRlc3QsIGZpbGUsIHRvQ29uc29sZSwgdG9GaWxlIH0gPSBsb2dnaW5nT3B0aW9ucztcclxuXHJcbiAgLy8gUmVzZXQgZmxhZ3MgdG8gdGhlIGRlZmF1bHQgdmFsdWVzXHJcbiAgbG9nZ2luZy5wYXRoQ3JlYXRlZCA9IGZhbHNlO1xyXG4gIGxvZ2dpbmcucGF0aFRvTG9nID0gJyc7XHJcblxyXG4gIC8vIFNldCB0aGUgbG9nZ2luZyBsZXZlbFxyXG4gIHNldExvZ0xldmVsKGxldmVsKTtcclxuXHJcbiAgLy8gU2V0IHRoZSBjb25zb2xlIGxvZ2dpbmdcclxuICBlbmFibGVDb25zb2xlTG9nZ2luZyh0b0NvbnNvbGUpO1xyXG5cclxuICAvLyBTZXQgdGhlIGZpbGUgbG9nZ2luZ1xyXG4gIGVuYWJsZUZpbGVMb2dnaW5nKGRlc3QsIGZpbGUsIHRvRmlsZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBsb2cgbGV2ZWwgdG8gdGhlIHNwZWNpZmllZCB2YWx1ZS4gTG9nIGxldmVscyBhcmUgKGAwYCA9IG5vIGxvZ2dpbmcsXHJcbiAqIGAxYCA9IGVycm9yLCBgMmAgPSB3YXJuaW5nLCBgM2AgPSBub3RpY2UsIGA0YCA9IHZlcmJvc2UsIG9yIGA1YCA9IGJlbmNobWFyaykuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBzZXRMb2dMZXZlbFxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgLSBUaGUgbG9nIGxldmVsIHRvIGJlIHNldC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xyXG4gIGlmIChcclxuICAgIE51bWJlci5pc0ludGVnZXIobGV2ZWwpICYmXHJcbiAgICBsZXZlbCA+PSAwICYmXHJcbiAgICBsZXZlbCA8PSBsb2dnaW5nLmxldmVsc0Rlc2MubGVuZ3RoXHJcbiAgKSB7XHJcbiAgICAvLyBVcGRhdGUgdGhlIG1vZHVsZSBsb2dnaW5nJ3MgYGxldmVsYCBvcHRpb25cclxuICAgIGxvZ2dpbmcubGV2ZWwgPSBsZXZlbDtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFbmFibGVzIGNvbnNvbGUgbG9nZ2luZy5cclxuICpcclxuICogQGZ1bmN0aW9uIGVuYWJsZUNvbnNvbGVMb2dnaW5nXHJcbiAqXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdG9Db25zb2xlIC0gVGhlIGZsYWcgZm9yIHNldHRpbmcgdGhlIGxvZ2dpbmcgdG8gdGhlIGNvbnNvbGUuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlQ29uc29sZUxvZ2dpbmcodG9Db25zb2xlKSB7XHJcbiAgLy8gVXBkYXRlIHRoZSBtb2R1bGUgbG9nZ2luZydzIGB0b0NvbnNvbGVgIG9wdGlvblxyXG4gIGxvZ2dpbmcudG9Db25zb2xlID0gISF0b0NvbnNvbGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFbmFibGVzIGZpbGUgbG9nZ2luZyB3aXRoIHRoZSBzcGVjaWZpZWQgZGVzdGluYXRpb24gYW5kIGxvZyBmaWxlIG5hbWUuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBlbmFibGVGaWxlTG9nZ2luZ1xyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdCAtIFRoZSBkZXN0aW5hdGlvbiBwYXRoIHdoZXJlIHRoZSBsb2cgZmlsZSBzaG91bGRcclxuICogYmUgc2F2ZWQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlIC0gVGhlIG5hbWUgb2YgdGhlIGxvZyBmaWxlLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHRvRmlsZSAtIEEgZmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgbG9nZ2luZyBzaG91bGRcclxuICogYmUgZGlyZWN0ZWQgdG8gYSBmaWxlLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUZpbGVMb2dnaW5nKGRlc3QsIGZpbGUsIHRvRmlsZSkge1xyXG4gIC8vIFVwZGF0ZSB0aGUgbW9kdWxlIGxvZ2dpbmcncyBgdG9GaWxlYCBvcHRpb25cclxuICBsb2dnaW5nLnRvRmlsZSA9ICEhdG9GaWxlO1xyXG5cclxuICAvLyBTZXQgdGhlIGBkZXN0YCBhbmQgYGZpbGVgIG9wdGlvbnMgb25seSBpZiB0aGUgZmlsZSBsb2dnaW5nIGlzIGVuYWJsZWRcclxuICBpZiAobG9nZ2luZy50b0ZpbGUpIHtcclxuICAgIGxvZ2dpbmcuZGVzdCA9IGRlc3QgfHwgJ2xvZyc7XHJcbiAgICBsb2dnaW5nLmZpbGUgPSBmaWxlIHx8ICdoaWdoY2hhcnRzLWV4cG9ydC1zZXJ2ZXIubG9nJztcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2dzIHRoZSBwcm92aWRlZCB0ZXh0cyB0byBhIGZpbGUsIGlmIGZpbGUgbG9nZ2luZyBpcyBlbmFibGVkLiBJdCBjcmVhdGVzXHJcbiAqIHRoZSBuZWNlc3NhcnkgZGlyZWN0b3J5IHN0cnVjdHVyZSBpZiBub3QgYWxyZWFkeSBjcmVhdGVkIGFuZCBhcHBlbmRzXHJcbiAqIHRoZSBjb250ZW50LCBpbmNsdWRpbmcgYW4gb3B0aW9uYWwgcHJlZml4LCB0byB0aGUgc3BlY2lmaWVkIGxvZyBmaWxlLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gX2xvZ1RvRmlsZVxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHRleHRzIC0gQW4gYXJyYXkgb2YgdGV4dHMgdG8gYmUgbG9nZ2VkLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJlZml4IC0gQW4gb3B0aW9uYWwgcHJlZml4IHRvIGJlIGFkZGVkIHRvIGVhY2ggbG9nIGVudHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gX2xvZ1RvRmlsZSh0ZXh0cywgcHJlZml4KSB7XHJcbiAgaWYgKCFsb2dnaW5nLnBhdGhDcmVhdGVkKSB7XHJcbiAgICAvLyBDcmVhdGUgaWYgZG9lcyBub3QgZXhpc3RcclxuICAgICFleGlzdHNTeW5jKGdldEFic29sdXRlUGF0aChsb2dnaW5nLmRlc3QpKSAmJlxyXG4gICAgICBta2RpclN5bmMoZ2V0QWJzb2x1dGVQYXRoKGxvZ2dpbmcuZGVzdCkpO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZnVsbCBwYXRoXHJcbiAgICBsb2dnaW5nLnBhdGhUb0xvZyA9IGdldEFic29sdXRlUGF0aChqb2luKGxvZ2dpbmcuZGVzdCwgbG9nZ2luZy5maWxlKSk7XHJcblxyXG4gICAgLy8gV2Ugbm93IGFzc3VtZSB0aGUgcGF0aCBpcyBhdmFpbGFibGUsIGUuZy4gaXQncyB0aGUgcmVzcG9uc2liaWxpdHlcclxuICAgIC8vIG9mIHRoZSB1c2VyIHRvIGNyZWF0ZSB0aGUgcGF0aCB3aXRoIHRoZSBjb3JyZWN0IGFjY2VzcyByaWdodHMuXHJcbiAgICBsb2dnaW5nLnBhdGhDcmVhdGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIEFkZCB0aGUgY29udGVudCB0byBhIGZpbGVcclxuICBhcHBlbmRGaWxlKFxyXG4gICAgbG9nZ2luZy5wYXRoVG9Mb2csXHJcbiAgICBbcHJlZml4XS5jb25jYXQodGV4dHMpLmpvaW4oJyAnKSArICdcXG4nLFxyXG4gICAgKGVycm9yKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvciAmJiBsb2dnaW5nLnRvRmlsZSAmJiBsb2dnaW5nLnBhdGhDcmVhdGVkKSB7XHJcbiAgICAgICAgbG9nZ2luZy50b0ZpbGUgPSBmYWxzZTtcclxuICAgICAgICBsb2dnaW5nLnBhdGhDcmVhdGVkID0gZmFsc2U7XHJcbiAgICAgICAgbG9nV2l0aFN0YWNrKDIsIGVycm9yLCBgW2xvZ2dlcl0gVW5hYmxlIHRvIHdyaXRlIHRvIGxvZyBmaWxlLmApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGxvZyxcclxuICBsb2dXaXRoU3RhY2ssXHJcbiAgbG9nWm9kSXNzdWVzLFxyXG4gIGluaXRMb2dnaW5nLFxyXG4gIHNldExvZ0xldmVsLFxyXG4gIGVuYWJsZUNvbnNvbGVMb2dnaW5nLFxyXG4gIGVuYWJsZUZpbGVMb2dnaW5nXHJcbn07XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBDb25maWd1cmF0aW9uIG1hbmFnZW1lbnQgbW9kdWxlIGZvciB0aGUgSGlnaGNoYXJ0cyBFeHBvcnQgU2VydmVyLlxyXG4gKiBJdCBwcm92aWRlcyBhIGRlZmF1bHQgY29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCBwcmVkZWZpbmVkIGRlZmF1bHQgdmFsdWVzLFxyXG4gKiBkZXNjcmlwdGlvbnMsIGFuZCBjaGFyYWN0ZXJpc3RpY3MgZm9yIGVhY2ggb3B0aW9uIHVzZWQgaW4gdGhlIEV4cG9ydCBTZXJ2ZXIuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIGF2YWlsYWJsZSBvcHRpb25zLCBvcmdhbml6ZWRcclxuICogYnkgc2VjdGlvbnMuXHJcbiAqXHJcbiAqIFRoaXMgb2JqZWN0IGluY2x1ZGVzOlxyXG4gKiAtIERlZmF1bHQgdmFsdWVzIGZvciBlYWNoIG9wdGlvbi5cclxuICogLSBEYXRhIHR5cGVzIGZvciB2YWxpZGF0aW9uLlxyXG4gKiAtIE5hbWVzIG9mIGNvcnJlc3BvbmRpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxyXG4gKiAtIERlc2NyaXB0aW9ucyBvZiBlYWNoIHByb3BlcnR5LlxyXG4gKiAtIEluZm9ybWF0aW9uIHVzZWQgZm9yIHByb21wdHMgaW4gaW50ZXJhY3RpdmUgY29uZmlndXJhdGlvbi5cclxuICogLSBbT3B0aW9uYWxdIENvcnJlc3BvbmRpbmcgQ0xJIGFyZ3VtZW50IG5hbWVzIGZvciBDTEkgdXNhZ2UuXHJcbiAqIC0gW09wdGlvbmFsXSBMZWdhY3kgbmFtZXMgZnJvbSB0aGUgcHJldmlvdXMgUGhhbnRvbUpTLWJhc2VkIHNlcnZlci5cclxuICovXHJcbmNvbnN0IGRlZmF1bHRDb25maWcgPSB7XHJcbiAgcHVwcGV0ZWVyOiB7XHJcbiAgICBhcmdzOiB7XHJcbiAgICAgIHZhbHVlOiBbXHJcbiAgICAgICAgJy0tYWxsb3ctcnVubmluZy1pbnNlY3VyZS1jb250ZW50JyxcclxuICAgICAgICAnLS1hc2gtbm8tbnVkZ2VzJyxcclxuICAgICAgICAnLS1hdXRvcGxheS1wb2xpY3k9dXNlci1nZXN0dXJlLXJlcXVpcmVkJyxcclxuICAgICAgICAnLS1ibG9jay1uZXctd2ViLWNvbnRlbnRzJyxcclxuICAgICAgICAnLS1kaXNhYmxlLWFjY2VsZXJhdGVkLTJkLWNhbnZhcycsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1iYWNrZ3JvdW5kLW5ldHdvcmtpbmcnLFxyXG4gICAgICAgICctLWRpc2FibGUtYmFja2dyb3VuZC10aW1lci10aHJvdHRsaW5nJyxcclxuICAgICAgICAnLS1kaXNhYmxlLWJhY2tncm91bmRpbmctb2NjbHVkZWQtd2luZG93cycsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1icmVha3BhZCcsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1jaGVja2VyLWltYWdpbmcnLFxyXG4gICAgICAgICctLWRpc2FibGUtY2xpZW50LXNpZGUtcGhpc2hpbmctZGV0ZWN0aW9uJyxcclxuICAgICAgICAnLS1kaXNhYmxlLWNvbXBvbmVudC1leHRlbnNpb25zLXdpdGgtYmFja2dyb3VuZC1wYWdlcycsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1jb21wb25lbnQtdXBkYXRlJyxcclxuICAgICAgICAnLS1kaXNhYmxlLWRlZmF1bHQtYXBwcycsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1kZXYtc2htLXVzYWdlJyxcclxuICAgICAgICAnLS1kaXNhYmxlLWRvbWFpbi1yZWxpYWJpbGl0eScsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1leHRlbnNpb25zJyxcclxuICAgICAgICAnLS1kaXNhYmxlLWZlYXR1cmVzPUNhbGN1bGF0ZU5hdGl2ZVdpbk9jY2x1c2lvbixJbnRlcmVzdEZlZWRDb250ZW50U3VnZ2VzdGlvbnMsV2ViT1RQJyxcclxuICAgICAgICAnLS1kaXNhYmxlLWhhbmctbW9uaXRvcicsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1pcGMtZmxvb2RpbmctcHJvdGVjdGlvbicsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1sb2dnaW5nJyxcclxuICAgICAgICAnLS1kaXNhYmxlLW5vdGlmaWNhdGlvbnMnLFxyXG4gICAgICAgICctLWRpc2FibGUtb2ZmZXItc3RvcmUtdW5tYXNrZWQtd2FsbGV0LWNhcmRzJyxcclxuICAgICAgICAnLS1kaXNhYmxlLXBvcHVwLWJsb2NraW5nJyxcclxuICAgICAgICAnLS1kaXNhYmxlLXByaW50LXByZXZpZXcnLFxyXG4gICAgICAgICctLWRpc2FibGUtcHJvbXB0LW9uLXJlcG9zdCcsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1yZW5kZXJlci1iYWNrZ3JvdW5kaW5nJyxcclxuICAgICAgICAnLS1kaXNhYmxlLXNlYXJjaC1lbmdpbmUtY2hvaWNlLXNjcmVlbicsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1zZXNzaW9uLWNyYXNoZWQtYnViYmxlJyxcclxuICAgICAgICAnLS1kaXNhYmxlLXNldHVpZC1zYW5kYm94JyxcclxuICAgICAgICAnLS1kaXNhYmxlLXNpdGUtaXNvbGF0aW9uLXRyaWFscycsXHJcbiAgICAgICAgJy0tZGlzYWJsZS1zcGVlY2gtYXBpJyxcclxuICAgICAgICAnLS1kaXNhYmxlLXN5bmMnLFxyXG4gICAgICAgICctLWVuYWJsZS11bnNhZmUtd2ViZ3B1JyxcclxuICAgICAgICAnLS1oaWRlLWNyYXNoLXJlc3RvcmUtYnViYmxlJyxcclxuICAgICAgICAnLS1oaWRlLXNjcm9sbGJhcnMnLFxyXG4gICAgICAgICctLW1ldHJpY3MtcmVjb3JkaW5nLW9ubHknLFxyXG4gICAgICAgICctLW11dGUtYXVkaW8nLFxyXG4gICAgICAgICctLW5vLWRlZmF1bHQtYnJvd3Nlci1jaGVjaycsXHJcbiAgICAgICAgJy0tbm8tZmlyc3QtcnVuJyxcclxuICAgICAgICAnLS1uby1waW5ncycsXHJcbiAgICAgICAgJy0tbm8tc2FuZGJveCcsXHJcbiAgICAgICAgJy0tbm8tc3RhcnR1cC13aW5kb3cnLFxyXG4gICAgICAgICctLW5vLXp5Z290ZScsXHJcbiAgICAgICAgJy0tcGFzc3dvcmQtc3RvcmU9YmFzaWMnLFxyXG4gICAgICAgICctLXByb2Nlc3MtcGVyLXRhYicsXHJcbiAgICAgICAgJy0tdXNlLW1vY2sta2V5Y2hhaW4nXHJcbiAgICAgIF0sXHJcbiAgICAgIHR5cGVzOiBbJ3N0cmluZ1tdJ10sXHJcbiAgICAgIGVudkxpbms6ICdQVVBQRVRFRVJfQVJHUycsXHJcbiAgICAgIGNsaU5hbWU6ICdwdXBwZXRlZXJBcmdzJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdBcnJheSBvZiBQdXBwZXRlZXIgYXJndW1lbnRzJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICdsaXN0JyxcclxuICAgICAgICBzZXBhcmF0b3I6ICc7J1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBoaWdoY2hhcnRzOiB7XHJcbiAgICB2ZXJzaW9uOiB7XHJcbiAgICAgIHZhbHVlOiAnbGF0ZXN0JyxcclxuICAgICAgdHlwZXM6IFsnc3RyaW5nJ10sXHJcbiAgICAgIGVudkxpbms6ICdISUdIQ0hBUlRTX1ZFUlNJT04nLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0hpZ2hjaGFydHMgdmVyc2lvbicsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndGV4dCdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNkblVybDoge1xyXG4gICAgICB2YWx1ZTogJ2h0dHBzOi8vY29kZS5oaWdoY2hhcnRzLmNvbScsXHJcbiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLFxyXG4gICAgICBlbnZMaW5rOiAnSElHSENIQVJUU19DRE5fVVJMJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdDRE4gVVJMIGZvciBIaWdoY2hhcnRzIHNjcmlwdHMnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBmb3JjZUZldGNoOiB7XHJcbiAgICAgIHZhbHVlOiBmYWxzZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnSElHSENIQVJUU19GT1JDRV9GRVRDSCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnRmxhZyB0byByZWZldGNoIHNjcmlwdHMgYWZ0ZXIgZWFjaCBzZXJ2ZXIgcmVydW4nLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RvZ2dsZSdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNhY2hlUGF0aDoge1xyXG4gICAgICB2YWx1ZTogJy5jYWNoZScsXHJcbiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLFxyXG4gICAgICBlbnZMaW5rOiAnSElHSENIQVJUU19DQUNIRV9QQVRIJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdEaXJlY3RvcnkgcGF0aCBmb3IgY2FjaGVkIEhpZ2hjaGFydHMgc2NyaXB0cycsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndGV4dCdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNvcmVTY3JpcHRzOiB7XHJcbiAgICAgIHZhbHVlOiBbJ2hpZ2hjaGFydHMnLCAnaGlnaGNoYXJ0cy1tb3JlJywgJ2hpZ2hjaGFydHMtM2QnXSxcclxuICAgICAgdHlwZXM6IFsnc3RyaW5nW10nXSxcclxuICAgICAgZW52TGluazogJ0hJR0hDSEFSVFNfQ09SRV9TQ1JJUFRTJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdIaWdoY2hhcnRzIGNvcmUgc2NyaXB0cyB0byBmZXRjaCcsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAnbXVsdGlzZWxlY3QnLFxyXG4gICAgICAgIGluc3RydWN0aW9uczogJ1NwYWNlOiBTZWxlY3Qgc3BlY2lmaWMsIEE6IFNlbGVjdCBhbGwsIEVudGVyOiBDb25maXJtJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgbW9kdWxlU2NyaXB0czoge1xyXG4gICAgICB2YWx1ZTogW1xyXG4gICAgICAgICdzdG9jaycsXHJcbiAgICAgICAgJ21hcCcsXHJcbiAgICAgICAgJ2dhbnR0JyxcclxuICAgICAgICAnZXhwb3J0aW5nJyxcclxuICAgICAgICAncGFyYWxsZWwtY29vcmRpbmF0ZXMnLFxyXG4gICAgICAgICdhY2Nlc3NpYmlsaXR5JyxcclxuICAgICAgICAvLyAnYW5ub3RhdGlvbnMtYWR2YW5jZWQnLFxyXG4gICAgICAgICdib29zdC1jYW52YXMnLFxyXG4gICAgICAgICdib29zdCcsXHJcbiAgICAgICAgJ2RhdGEnLFxyXG4gICAgICAgICdkYXRhLXRvb2xzJyxcclxuICAgICAgICAnZHJhZ2dhYmxlLXBvaW50cycsXHJcbiAgICAgICAgJ3N0YXRpYy1zY2FsZScsXHJcbiAgICAgICAgJ2Jyb2tlbi1heGlzJyxcclxuICAgICAgICAnaGVhdG1hcCcsXHJcbiAgICAgICAgJ3RpbGVtYXAnLFxyXG4gICAgICAgICd0aWxlZHdlYm1hcCcsXHJcbiAgICAgICAgJ3RpbWVsaW5lJyxcclxuICAgICAgICAndHJlZW1hcCcsXHJcbiAgICAgICAgJ3RyZWVncmFwaCcsXHJcbiAgICAgICAgJ2l0ZW0tc2VyaWVzJyxcclxuICAgICAgICAnZHJpbGxkb3duJyxcclxuICAgICAgICAnaGlzdG9ncmFtLWJlbGxjdXJ2ZScsXHJcbiAgICAgICAgJ2J1bGxldCcsXHJcbiAgICAgICAgJ2Z1bm5lbCcsXHJcbiAgICAgICAgJ2Z1bm5lbDNkJyxcclxuICAgICAgICAnZ2VvaGVhdG1hcCcsXHJcbiAgICAgICAgJ3B5cmFtaWQzZCcsXHJcbiAgICAgICAgJ25ldHdvcmtncmFwaCcsXHJcbiAgICAgICAgJ292ZXJsYXBwaW5nLWRhdGFsYWJlbHMnLFxyXG4gICAgICAgICdwYXJldG8nLFxyXG4gICAgICAgICdwYXR0ZXJuLWZpbGwnLFxyXG4gICAgICAgICdwaWN0b3JpYWwnLFxyXG4gICAgICAgICdwcmljZS1pbmRpY2F0b3InLFxyXG4gICAgICAgICdzYW5rZXknLFxyXG4gICAgICAgICdhcmMtZGlhZ3JhbScsXHJcbiAgICAgICAgJ2RlcGVuZGVuY3ktd2hlZWwnLFxyXG4gICAgICAgICdzZXJpZXMtbGFiZWwnLFxyXG4gICAgICAgICdzZXJpZXMtb24tcG9pbnQnLFxyXG4gICAgICAgICdzb2xpZC1nYXVnZScsXHJcbiAgICAgICAgJ3NvbmlmaWNhdGlvbicsXHJcbiAgICAgICAgLy8gJ3N0b2NrLXRvb2xzJyxcclxuICAgICAgICAnc3RyZWFtZ3JhcGgnLFxyXG4gICAgICAgICdzdW5idXJzdCcsXHJcbiAgICAgICAgJ3ZhcmlhYmxlLXBpZScsXHJcbiAgICAgICAgJ3Zhcml3aWRlJyxcclxuICAgICAgICAndmVjdG9yJyxcclxuICAgICAgICAndmVubicsXHJcbiAgICAgICAgJ3dpbmRiYXJiJyxcclxuICAgICAgICAnd29yZGNsb3VkJyxcclxuICAgICAgICAneHJhbmdlJyxcclxuICAgICAgICAnbm8tZGF0YS10by1kaXNwbGF5JyxcclxuICAgICAgICAnZHJhZy1wYW5lcycsXHJcbiAgICAgICAgJ2RlYnVnZ2VyJyxcclxuICAgICAgICAnZHVtYmJlbGwnLFxyXG4gICAgICAgICdsb2xsaXBvcCcsXHJcbiAgICAgICAgJ2N5bGluZGVyJyxcclxuICAgICAgICAnb3JnYW5pemF0aW9uJyxcclxuICAgICAgICAnZG90cGxvdCcsXHJcbiAgICAgICAgJ21hcmtlci1jbHVzdGVycycsXHJcbiAgICAgICAgJ2hvbGxvd2NhbmRsZXN0aWNrJyxcclxuICAgICAgICAnaGVpa2luYXNoaScsXHJcbiAgICAgICAgJ2Zsb3dtYXAnLFxyXG4gICAgICAgICdleHBvcnQtZGF0YScsXHJcbiAgICAgICAgJ25hdmlnYXRvcicsXHJcbiAgICAgICAgJ3RleHRwYXRoJ1xyXG4gICAgICBdLFxyXG4gICAgICB0eXBlczogWydzdHJpbmdbXSddLFxyXG4gICAgICBlbnZMaW5rOiAnSElHSENIQVJUU19NT0RVTEVfU0NSSVBUUycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnSGlnaGNoYXJ0cyBtb2R1bGUgc2NyaXB0cyB0byBmZXRjaCcsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAnbXVsdGlzZWxlY3QnLFxyXG4gICAgICAgIGluc3RydWN0aW9uczogJ1NwYWNlOiBTZWxlY3Qgc3BlY2lmaWMsIEE6IFNlbGVjdCBhbGwsIEVudGVyOiBDb25maXJtJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgaW5kaWNhdG9yU2NyaXB0czoge1xyXG4gICAgICB2YWx1ZTogWydpbmRpY2F0b3JzLWFsbCddLFxyXG4gICAgICB0eXBlczogWydzdHJpbmdbXSddLFxyXG4gICAgICBlbnZMaW5rOiAnSElHSENIQVJUU19JTkRJQ0FUT1JfU0NSSVBUUycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnSGlnaGNoYXJ0cyBpbmRpY2F0b3Igc2NyaXB0cyB0byBmZXRjaCcsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAnbXVsdGlzZWxlY3QnLFxyXG4gICAgICAgIGluc3RydWN0aW9uczogJ1NwYWNlOiBTZWxlY3Qgc3BlY2lmaWMsIEE6IFNlbGVjdCBhbGwsIEVudGVyOiBDb25maXJtJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgY3VzdG9tU2NyaXB0czoge1xyXG4gICAgICB2YWx1ZTogW1xyXG4gICAgICAgICdodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9tb21lbnQuanMvMi4zMC4xL21vbWVudC5taW4uanMnLFxyXG4gICAgICAgICdodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9tb21lbnQtdGltZXpvbmUvMC41LjQ1L21vbWVudC10aW1lem9uZS13aXRoLWRhdGEubWluLmpzJ1xyXG4gICAgICBdLFxyXG4gICAgICB0eXBlczogWydzdHJpbmdbXSddLFxyXG4gICAgICBlbnZMaW5rOiAnSElHSENIQVJUU19DVVNUT01fU0NSSVBUUycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWRkaXRpb25hbCBjdXN0b20gc2NyaXB0cyBvciBkZXBlbmRlbmNpZXMgdG8gZmV0Y2gnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ2xpc3QnLFxyXG4gICAgICAgIHNlcGFyYXRvcjogJzsnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIGV4cG9ydDoge1xyXG4gICAgaW5maWxlOiB7XHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICB0eXBlczogWydzdHJpbmcnLCAnbnVsbCddLFxyXG4gICAgICBlbnZMaW5rOiAnRVhQT1JUX0lORklMRScsXHJcbiAgICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICAgICdJbnB1dCBmaWxlbmFtZSB3aXRoIHR5cGUsIGZvcm1hdHRlZCBjb3JyZWN0bHkgYXMgSlNPTiBvciBTVkcnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBpbnN0cjoge1xyXG4gICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgdHlwZXM6IFsnT2JqZWN0JywgJ3N0cmluZycsICdudWxsJ10sXHJcbiAgICAgIGVudkxpbms6ICdFWFBPUlRfSU5TVFInLFxyXG4gICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAnT3ZlcnJpZGVzIHRoZSBgaW5maWxlYCB3aXRoIEpTT04sIHN0cmluZ2lmaWVkIEpTT04sIG9yIFNWRyBpbnB1dCcsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndGV4dCdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9wdGlvbnM6IHtcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIHR5cGVzOiBbJ09iamVjdCcsICdzdHJpbmcnLCAnbnVsbCddLFxyXG4gICAgICBlbnZMaW5rOiAnRVhQT1JUX09QVElPTlMnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0FsaWFzIGZvciB0aGUgYGluc3RyYCBvcHRpb24nLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzdmc6IHtcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXHJcbiAgICAgIGVudkxpbms6ICdFWFBPUlRfU1ZHJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdTVkcgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjaGFydCB0byByZW5kZXInLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBiYXRjaDoge1xyXG4gICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcclxuICAgICAgZW52TGluazogJ0VYUE9SVF9CQVRDSCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICAgICdCYXRjaCBqb2Igc3RyaW5nIHdpdGggaW5wdXQvb3V0cHV0IHBhaXJzOiBcImluPW91dDtpbj1vdXQ7Li4uXCInLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBvdXRmaWxlOiB7XHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICB0eXBlczogWydzdHJpbmcnLCAnbnVsbCddLFxyXG4gICAgICBlbnZMaW5rOiAnRVhQT1JUX09VVEZJTEUnLFxyXG4gICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAnT3V0cHV0IGZpbGVuYW1lIHdpdGggdHlwZS4gQ2FuIGJlIGpwZWcsIHBuZywgcGRmLCBvciBzdmcgYW5kIGlnbm9yZXMgYHR5cGVgIG9wdGlvbicsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndGV4dCdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHR5cGU6IHtcclxuICAgICAgdmFsdWU6ICdwbmcnLFxyXG4gICAgICB0eXBlczogWydzdHJpbmcnXSxcclxuICAgICAgZW52TGluazogJ0VYUE9SVF9UWVBFJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdGaWxlIGV4cG9ydCBmb3JtYXQuIENhbiBiZSBqcGVnLCBwbmcsIHBkZiwgb3Igc3ZnJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICdzZWxlY3QnLFxyXG4gICAgICAgIGhpbnQ6ICdEZWZhdWx0OiBwbmcnLFxyXG4gICAgICAgIGNob2ljZXM6IFsncG5nJywgJ2pwZWcnLCAncGRmJywgJ3N2ZyddXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjb25zdHI6IHtcclxuICAgICAgdmFsdWU6ICdjaGFydCcsXHJcbiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLFxyXG4gICAgICBlbnZMaW5rOiAnRVhQT1JUX0NPTlNUUicsXHJcbiAgICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICAgICdDaGFydCBjb25zdHJ1Y3Rvci4gQ2FuIGJlIGNoYXJ0LCBzdG9ja0NoYXJ0LCBtYXBDaGFydCwgb3IgZ2FudHRDaGFydCcsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAnc2VsZWN0JyxcclxuICAgICAgICBoaW50OiAnRGVmYXVsdDogY2hhcnQnLFxyXG4gICAgICAgIGNob2ljZXM6IFsnY2hhcnQnLCAnc3RvY2tDaGFydCcsICdtYXBDaGFydCcsICdnYW50dENoYXJ0J11cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGI2NDoge1xyXG4gICAgICB2YWx1ZTogZmFsc2UsXHJcbiAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nXSxcclxuICAgICAgZW52TGluazogJ0VYUE9SVF9CNjQnLFxyXG4gICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAnV2hldGhlciBvciBub3QgdG8gdGhlIGNoYXJ0IHNob3VsZCBiZSByZWNlaXZlZCBpbiBCYXNlNjQgZm9ybWF0IGluc3RlYWQgb2YgYmluYXJ5JyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0b2dnbGUnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBub0Rvd25sb2FkOiB7XHJcbiAgICAgIHZhbHVlOiBmYWxzZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnRVhQT1JUX05PX0RPV05MT0FEJyxcclxuICAgICAgZGVzY3JpcHRpb246XHJcbiAgICAgICAgJ1doZXRoZXIgb3Igbm90IHRvIGluY2x1ZGUgb3IgZXhjbHVkZSBhdHRhY2htZW50IGhlYWRlcnMgaW4gdGhlIHJlc3BvbnNlJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0b2dnbGUnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBoZWlnaHQ6IHtcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdudWxsJ10sXHJcbiAgICAgIGVudkxpbms6ICdFWFBPUlRfSEVJR0hUJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdIZWlnaHQgb2YgdGhlIGV4cG9ydGVkIGNoYXJ0LCBvdmVycmlkZXMgY2hhcnQgc2V0dGluZ3MnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ251bWJlcidcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHdpZHRoOiB7XHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICB0eXBlczogWydudW1iZXInLCAnbnVsbCddLFxyXG4gICAgICBlbnZMaW5rOiAnRVhQT1JUX1dJRFRIJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdXaWR0aCBvZiB0aGUgZXhwb3J0ZWQgY2hhcnQsIG92ZXJyaWRlcyBjaGFydCBzZXR0aW5ncycsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAnbnVtYmVyJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2NhbGU6IHtcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIHR5cGVzOiBbJ251bWJlcicsICdudWxsJ10sXHJcbiAgICAgIGVudkxpbms6ICdFWFBPUlRfU0NBTEUnLFxyXG4gICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAnU2NhbGUgb2YgdGhlIGV4cG9ydGVkIGNoYXJ0LCBvdmVycmlkZXMgY2hhcnQgc2V0dGluZ3MuIFJhbmdlcyBmcm9tIDAuMSB0byA1LjAnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ251bWJlcidcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGRlZmF1bHRIZWlnaHQ6IHtcclxuICAgICAgdmFsdWU6IDQwMCxcclxuICAgICAgdHlwZXM6IFsnbnVtYmVyJ10sXHJcbiAgICAgIGVudkxpbms6ICdFWFBPUlRfREVGQVVMVF9IRUlHSFQnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0RlZmF1bHQgaGVpZ2h0IG9mIHRoZSBleHBvcnRlZCBjaGFydCBpZiBub3Qgc2V0JyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBkZWZhdWx0V2lkdGg6IHtcclxuICAgICAgdmFsdWU6IDYwMCxcclxuICAgICAgdHlwZXM6IFsnbnVtYmVyJ10sXHJcbiAgICAgIGVudkxpbms6ICdFWFBPUlRfREVGQVVMVF9XSURUSCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnRGVmYXVsdCB3aWR0aCBvZiB0aGUgZXhwb3J0ZWQgY2hhcnQgaWYgbm90IHNldCcsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAnbnVtYmVyJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgZGVmYXVsdFNjYWxlOiB7XHJcbiAgICAgIHZhbHVlOiAxLFxyXG4gICAgICB0eXBlczogWydudW1iZXInXSxcclxuICAgICAgZW52TGluazogJ0VYUE9SVF9ERUZBVUxUX1NDQUxFJyxcclxuICAgICAgZGVzY3JpcHRpb246XHJcbiAgICAgICAgJ0RlZmF1bHQgc2NhbGUgb2YgdGhlIGV4cG9ydGVkIGNoYXJ0IGlmIG5vdCBzZXQuIFJhbmdlcyBmcm9tIDAuMSB0byA1LjAnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgICAgbWluOiAwLjEsXHJcbiAgICAgICAgbWF4OiA1XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBnbG9iYWxPcHRpb25zOiB7XHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICB0eXBlczogWydPYmplY3QnLCAnc3RyaW5nJywgJ251bGwnXSxcclxuICAgICAgZW52TGluazogJ0VYUE9SVF9HTE9CQUxfT1BUSU9OUycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICAgICdKU09OLCBzdHJpbmdpZmllZCBKU09OIG9yIGZpbGVuYW1lIHdpdGggZ2xvYmFsIG9wdGlvbnMgZm9yIEhpZ2hjaGFydHMuc2V0T3B0aW9ucycsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndGV4dCdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHRoZW1lT3B0aW9uczoge1xyXG4gICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgdHlwZXM6IFsnT2JqZWN0JywgJ3N0cmluZycsICdudWxsJ10sXHJcbiAgICAgIGVudkxpbms6ICdFWFBPUlRfVEhFTUVfT1BUSU9OUycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICAgICdKU09OLCBzdHJpbmdpZmllZCBKU09OIG9yIGZpbGVuYW1lIHdpdGggdGhlbWUgb3B0aW9ucyBmb3IgSGlnaGNoYXJ0cy5zZXRPcHRpb25zJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0ZXh0J1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgcmFzdGVyaXphdGlvblRpbWVvdXQ6IHtcclxuICAgICAgdmFsdWU6IDE1MDAsXHJcbiAgICAgIHR5cGVzOiBbJ251bWJlciddLFxyXG4gICAgICBlbnZMaW5rOiAnRVhQT1JUX1JBU1RFUklaQVRJT05fVElNRU9VVCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnTWlsbGlzZWNvbmRzIHRvIHdhaXQgZm9yIHdlYnBhZ2UgcmVuZGVyaW5nJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIGN1c3RvbUxvZ2ljOiB7XHJcbiAgICBhbGxvd0NvZGVFeGVjdXRpb246IHtcclxuICAgICAgdmFsdWU6IGZhbHNlLFxyXG4gICAgICB0eXBlczogWydib29sZWFuJ10sXHJcbiAgICAgIGVudkxpbms6ICdDVVNUT01fTE9HSUNfQUxMT1dfQ09ERV9FWEVDVVRJT04nLFxyXG4gICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAnQWxsb3dzIG9yIGRpc2FsbG93cyBleGVjdXRpb24gb2YgYXJiaXRyYXJ5IGNvZGUgZHVyaW5nIGV4cG9ydGluZycsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndG9nZ2xlJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgYWxsb3dGaWxlUmVzb3VyY2VzOiB7XHJcbiAgICAgIHZhbHVlOiBmYWxzZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnQ1VTVE9NX0xPR0lDX0FMTE9XX0ZJTEVfUkVTT1VSQ0VTJyxcclxuICAgICAgZGVzY3JpcHRpb246XHJcbiAgICAgICAgJ0FsbG93cyBvciBkaXNhbGxvd3MgaW5qZWN0aW9uIG9mIGZpbGVzeXN0ZW0gcmVzb3VyY2VzIChkaXNhYmxlZCBpbiBzZXJ2ZXIgbW9kZSknLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RvZ2dsZSdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGN1c3RvbUNvZGU6IHtcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXHJcbiAgICAgIGVudkxpbms6ICdDVVNUT01fTE9HSUNfQ1VTVE9NX0NPREUnLFxyXG4gICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAnQ3VzdG9tIGNvZGUgdG8gZXhlY3V0ZSBiZWZvcmUgY2hhcnQgaW5pdGlhbGl6YXRpb24uIENhbiBiZSBhIGZ1bmN0aW9uLCBjb2RlIHdyYXBwZWQgaW4gYSBmdW5jdGlvbiwgb3IgYSAuanMgZmlsZW5hbWUnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjYWxsYmFjazoge1xyXG4gICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcclxuICAgICAgZW52TGluazogJ0NVU1RPTV9MT0dJQ19DQUxMQkFDSycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICAgICdKYXZhU2NyaXB0IGNvZGUgdG8gcnVuIGR1cmluZyBjb25zdHJ1Y3Rpb24uIENhbiBiZSBhIGZ1bmN0aW9uIG9yIGEgLmpzIGZpbGVuYW1lJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0ZXh0J1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgcmVzb3VyY2VzOiB7XHJcbiAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICB0eXBlczogWydPYmplY3QnLCAnc3RyaW5nJywgJ251bGwnXSxcclxuICAgICAgZW52TGluazogJ0NVU1RPTV9MT0dJQ19SRVNPVVJDRVMnLFxyXG4gICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAnQWRkaXRpb25hbCByZXNvdXJjZXMgYXMgSlNPTiwgc3RyaW5naWZpZWQgSlNPTiwgb3IgZmlsZW5hbWUsIGNvbnRhaW5pbmcgZmlsZXMsIGpzLCBhbmQgY3NzIHNlY3Rpb25zJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0ZXh0J1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgbG9hZENvbmZpZzoge1xyXG4gICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcclxuICAgICAgZW52TGluazogJ0NVU1RPTV9MT0dJQ19MT0FEX0NPTkZJRycsXHJcbiAgICAgIGxlZ2FjeU5hbWU6ICdmcm9tRmlsZScsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnRmlsZSB3aXRoIGEgcHJlLWRlZmluZWQgY29uZmlndXJhdGlvbiB0byB1c2UnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjcmVhdGVDb25maWc6IHtcclxuICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXHJcbiAgICAgIGVudkxpbms6ICdDVVNUT01fTE9HSUNfQ1JFQVRFX0NPTkZJRycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICAgICdQcm9tcHQtYmFzZWQgb3B0aW9uIHNldHRpbmcsIHNhdmVkIHRvIGEgcHJvdmlkZWQgY29uZmlnIGZpbGUnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHNlcnZlcjoge1xyXG4gICAgZW5hYmxlOiB7XHJcbiAgICAgIHZhbHVlOiBmYWxzZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnU0VSVkVSX0VOQUJMRScsXHJcbiAgICAgIGNsaU5hbWU6ICdlbmFibGVTZXJ2ZXInLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ1N0YXJ0cyB0aGUgc2VydmVyIHdoZW4gdHJ1ZScsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndG9nZ2xlJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgaG9zdDoge1xyXG4gICAgICB2YWx1ZTogJzAuMC4wLjAnLFxyXG4gICAgICB0eXBlczogWydzdHJpbmcnXSxcclxuICAgICAgZW52TGluazogJ1NFUlZFUl9IT1NUJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdIb3N0bmFtZSBvZiB0aGUgc2VydmVyJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0ZXh0J1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgcG9ydDoge1xyXG4gICAgICB2YWx1ZTogNzgwMSxcclxuICAgICAgdHlwZXM6IFsnbnVtYmVyJ10sXHJcbiAgICAgIGVudkxpbms6ICdTRVJWRVJfUE9SVCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnUG9ydCBudW1iZXIgZm9yIHRoZSBzZXJ2ZXInLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ251bWJlcidcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHVwbG9hZExpbWl0OiB7XHJcbiAgICAgIHZhbHVlOiAzLFxyXG4gICAgICB0eXBlczogWydudW1iZXInXSxcclxuICAgICAgZW52TGluazogJ1NFUlZFUl9VUExPQURfTElNSVQnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ01heGltdW0gcmVxdWVzdCBib2R5IHNpemUgaW4gTUInLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ251bWJlcidcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGJlbmNobWFya2luZzoge1xyXG4gICAgICB2YWx1ZTogZmFsc2UsXHJcbiAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nXSxcclxuICAgICAgZW52TGluazogJ1NFUlZFUl9CRU5DSE1BUktJTkcnLFxyXG4gICAgICBjbGlOYW1lOiAnc2VydmVyQmVuY2htYXJraW5nJyxcclxuICAgICAgZGVzY3JpcHRpb246XHJcbiAgICAgICAgJ0Rpc3BsYXlzIG9yIG5vdCBhY3Rpb24gZHVyYXRpb25zIGluIG1pbGxpc2Vjb25kcyBkdXJpbmcgc2VydmVyIHJlcXVlc3RzJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0b2dnbGUnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBwcm94eToge1xyXG4gICAgICBob3N0OiB7XHJcbiAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcclxuICAgICAgICBlbnZMaW5rOiAnU0VSVkVSX1BST1hZX0hPU1QnLFxyXG4gICAgICAgIGNsaU5hbWU6ICdwcm94eUhvc3QnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnSG9zdCBvZiB0aGUgcHJveHkgc2VydmVyLCBpZiBhcHBsaWNhYmxlJyxcclxuICAgICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgICB0eXBlOiAndGV4dCdcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHBvcnQ6IHtcclxuICAgICAgICB2YWx1ZTogbnVsbCxcclxuICAgICAgICB0eXBlczogWydudW1iZXInLCAnbnVsbCddLFxyXG4gICAgICAgIGVudkxpbms6ICdTRVJWRVJfUFJPWFlfUE9SVCcsXHJcbiAgICAgICAgY2xpTmFtZTogJ3Byb3h5UG9ydCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdQb3J0IG9mIHRoZSBwcm94eSBzZXJ2ZXIsIGlmIGFwcGxpY2FibGUnLFxyXG4gICAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0aW1lb3V0OiB7XHJcbiAgICAgICAgdmFsdWU6IDUwMDAsXHJcbiAgICAgICAgdHlwZXM6IFsnbnVtYmVyJ10sXHJcbiAgICAgICAgZW52TGluazogJ1NFUlZFUl9QUk9YWV9USU1FT1VUJyxcclxuICAgICAgICBjbGlOYW1lOiAncHJveHlUaW1lb3V0JyxcclxuICAgICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAgICdUaW1lb3V0IGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlIHByb3h5IHNlcnZlciwgaWYgYXBwbGljYWJsZScsXHJcbiAgICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgICAgdHlwZTogJ251bWJlcidcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICByYXRlTGltaXRpbmc6IHtcclxuICAgICAgZW5hYmxlOiB7XHJcbiAgICAgICAgdmFsdWU6IGZhbHNlLFxyXG4gICAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nXSxcclxuICAgICAgICBlbnZMaW5rOiAnU0VSVkVSX1JBVEVfTElNSVRJTkdfRU5BQkxFJyxcclxuICAgICAgICBjbGlOYW1lOiAnZW5hYmxlUmF0ZUxpbWl0aW5nJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ0VuYWJsZXMgb3IgZGlzYWJsZXMgcmF0ZSBsaW1pdGluZyBvbiB0aGUgc2VydmVyJyxcclxuICAgICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgICB0eXBlOiAndG9nZ2xlJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgbWF4UmVxdWVzdHM6IHtcclxuICAgICAgICB2YWx1ZTogMTAsXHJcbiAgICAgICAgdHlwZXM6IFsnbnVtYmVyJ10sXHJcbiAgICAgICAgZW52TGluazogJ1NFUlZFUl9SQVRFX0xJTUlUSU5HX01BWF9SRVFVRVNUUycsXHJcbiAgICAgICAgbGVnYWN5TmFtZTogJ3JhdGVMaW1pdCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdNYXhpbXVtIG51bWJlciBvZiByZXF1ZXN0cyBhbGxvd2VkIHBlciBtaW51dGUnLFxyXG4gICAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB3aW5kb3c6IHtcclxuICAgICAgICB2YWx1ZTogMSxcclxuICAgICAgICB0eXBlczogWydudW1iZXInXSxcclxuICAgICAgICBlbnZMaW5rOiAnU0VSVkVSX1JBVEVfTElNSVRJTkdfV0lORE9XJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ1RpbWUgd2luZG93IGluIG1pbnV0ZXMgZm9yIHJhdGUgbGltaXRpbmcnLFxyXG4gICAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBkZWxheToge1xyXG4gICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgIHR5cGVzOiBbJ251bWJlciddLFxyXG4gICAgICAgIGVudkxpbms6ICdTRVJWRVJfUkFURV9MSU1JVElOR19ERUxBWScsXHJcbiAgICAgICAgZGVzY3JpcHRpb246XHJcbiAgICAgICAgICAnRGVsYXkgZHVyYXRpb24gYmV0d2VlbiBzdWNjZXNzaXZlIHJlcXVlc3RzIGJlZm9yZSByZWFjaGluZyB0aGUgbGltaXQnLFxyXG4gICAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB0cnVzdFByb3h5OiB7XHJcbiAgICAgICAgdmFsdWU6IGZhbHNlLFxyXG4gICAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nXSxcclxuICAgICAgICBlbnZMaW5rOiAnU0VSVkVSX1JBVEVfTElNSVRJTkdfVFJVU1RfUFJPWFknLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnU2V0IHRvIHRydWUgaWYgdGhlIHNlcnZlciBpcyBiZWhpbmQgYSBsb2FkIGJhbGFuY2VyJyxcclxuICAgICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgICB0eXBlOiAndG9nZ2xlJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgc2tpcEtleToge1xyXG4gICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXHJcbiAgICAgICAgZW52TGluazogJ1NFUlZFUl9SQVRFX0xJTUlUSU5HX1NLSVBfS0VZJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ0tleSB0byBieXBhc3MgdGhlIHJhdGUgbGltaXRlciwgdXNlZCB3aXRoIGBza2lwVG9rZW5gJyxcclxuICAgICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgICB0eXBlOiAndGV4dCdcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHNraXBUb2tlbjoge1xyXG4gICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgIHR5cGVzOiBbJ3N0cmluZycsICdudWxsJ10sXHJcbiAgICAgICAgZW52TGluazogJ1NFUlZFUl9SQVRFX0xJTUlUSU5HX1NLSVBfVE9LRU4nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVG9rZW4gdG8gYnlwYXNzIHRoZSByYXRlIGxpbWl0ZXIsIHVzZWQgd2l0aCBgc2tpcEtleWAnLFxyXG4gICAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICAgIHR5cGU6ICd0ZXh0J1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNzbDoge1xyXG4gICAgICBlbmFibGU6IHtcclxuICAgICAgICB2YWx1ZTogZmFsc2UsXHJcbiAgICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICAgIGVudkxpbms6ICdTRVJWRVJfU1NMX0VOQUJMRScsXHJcbiAgICAgICAgY2xpTmFtZTogJ2VuYWJsZVNzbCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdFbmFibGVzIG9yIGRpc2FibGVzIFNTTCBwcm90b2NvbCcsXHJcbiAgICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgICAgdHlwZTogJ3RvZ2dsZSdcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGZvcmNlOiB7XHJcbiAgICAgICAgdmFsdWU6IGZhbHNlLFxyXG4gICAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nXSxcclxuICAgICAgICBlbnZMaW5rOiAnU0VSVkVSX1NTTF9GT1JDRScsXHJcbiAgICAgICAgY2xpTmFtZTogJ3NzbEZvcmNlJyxcclxuICAgICAgICBsZWdhY3lOYW1lOiAnc3NsT25seScsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdGb3JjZXMgdGhlIHNlcnZlciB0byB1c2UgSFRUUFMgb25seSB3aGVuIHRydWUnLFxyXG4gICAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICAgIHR5cGU6ICd0b2dnbGUnXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBwb3J0OiB7XHJcbiAgICAgICAgdmFsdWU6IDQ0MyxcclxuICAgICAgICB0eXBlczogWydudW1iZXInXSxcclxuICAgICAgICBlbnZMaW5rOiAnU0VSVkVSX1NTTF9QT1JUJyxcclxuICAgICAgICBjbGlOYW1lOiAnc3NsUG9ydCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdQb3J0IGZvciB0aGUgU1NMIHNlcnZlcicsXHJcbiAgICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgICAgdHlwZTogJ251bWJlcidcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGNlcnRQYXRoOiB7XHJcbiAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgICAgdHlwZXM6IFsnc3RyaW5nJywgJ251bGwnXSxcclxuICAgICAgICBlbnZMaW5rOiAnU0VSVkVSX1NTTF9DRVJUX1BBVEgnLFxyXG4gICAgICAgIGNsaU5hbWU6ICdzc2xDZXJ0UGF0aCcsXHJcbiAgICAgICAgbGVnYWN5TmFtZTogJ3NzbFBhdGgnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUGF0aCB0byB0aGUgU1NMIGNlcnRpZmljYXRlL2tleSBmaWxlJyxcclxuICAgICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgICB0eXBlOiAndGV4dCdcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHBvb2w6IHtcclxuICAgIG1pbldvcmtlcnM6IHtcclxuICAgICAgdmFsdWU6IDQsXHJcbiAgICAgIHR5cGVzOiBbJ251bWJlciddLFxyXG4gICAgICBlbnZMaW5rOiAnUE9PTF9NSU5fV09SS0VSUycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnTWluaW11bSBhbmQgaW5pdGlhbCBudW1iZXIgb2YgcG9vbCB3b3JrZXJzIHRvIHNwYXduJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtYXhXb3JrZXJzOiB7XHJcbiAgICAgIHZhbHVlOiA4LFxyXG4gICAgICB0eXBlczogWydudW1iZXInXSxcclxuICAgICAgZW52TGluazogJ1BPT0xfTUFYX1dPUktFUlMnLFxyXG4gICAgICBsZWdhY3lOYW1lOiAnd29ya2VycycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnTWF4aW11bSBudW1iZXIgb2YgcG9vbCB3b3JrZXJzIHRvIHNwYXduJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB3b3JrTGltaXQ6IHtcclxuICAgICAgdmFsdWU6IDQwLFxyXG4gICAgICB0eXBlczogWydudW1iZXInXSxcclxuICAgICAgZW52TGluazogJ1BPT0xfV09SS19MSU1JVCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnTnVtYmVyIG9mIHRhc2tzIGEgd29ya2VyIGNhbiBoYW5kbGUgYmVmb3JlIHJlc3RhcnRpbmcnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ251bWJlcidcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGFjcXVpcmVUaW1lb3V0OiB7XHJcbiAgICAgIHZhbHVlOiA1MDAwLFxyXG4gICAgICB0eXBlczogWydudW1iZXInXSxcclxuICAgICAgZW52TGluazogJ1BPT0xfQUNRVUlSRV9USU1FT1VUJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdUaW1lb3V0IGluIG1pbGxpc2Vjb25kcyBmb3IgYWNxdWlyaW5nIGEgcmVzb3VyY2UnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ251bWJlcidcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNyZWF0ZVRpbWVvdXQ6IHtcclxuICAgICAgdmFsdWU6IDUwMDAsXHJcbiAgICAgIHR5cGVzOiBbJ251bWJlciddLFxyXG4gICAgICBlbnZMaW5rOiAnUE9PTF9DUkVBVEVfVElNRU9VVCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGltZW91dCBpbiBtaWxsaXNlY29uZHMgZm9yIGNyZWF0aW5nIGEgcmVzb3VyY2UnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ251bWJlcidcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGRlc3Ryb3lUaW1lb3V0OiB7XHJcbiAgICAgIHZhbHVlOiA1MDAwLFxyXG4gICAgICB0eXBlczogWydudW1iZXInXSxcclxuICAgICAgZW52TGluazogJ1BPT0xfREVTVFJPWV9USU1FT1VUJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdUaW1lb3V0IGluIG1pbGxpc2Vjb25kcyBmb3IgZGVzdHJveWluZyBhIHJlc291cmNlJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBpZGxlVGltZW91dDoge1xyXG4gICAgICB2YWx1ZTogMzAwMDAsXHJcbiAgICAgIHR5cGVzOiBbJ251bWJlciddLFxyXG4gICAgICBlbnZMaW5rOiAnUE9PTF9JRExFX1RJTUVPVVQnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ1RpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIGZvciBkZXN0cm95aW5nIGlkbGUgcmVzb3VyY2VzJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjcmVhdGVSZXRyeUludGVydmFsOiB7XHJcbiAgICAgIHZhbHVlOiAyMDAsXHJcbiAgICAgIHR5cGVzOiBbJ251bWJlciddLFxyXG4gICAgICBlbnZMaW5rOiAnUE9PTF9DUkVBVEVfUkVUUllfSU5URVJWQUwnLFxyXG4gICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAnSW50ZXJ2YWwgaW4gbWlsbGlzZWNvbmRzIGJlZm9yZSByZXRyeWluZyByZXNvdXJjZSBjcmVhdGlvbiBvbiBmYWlsdXJlJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZWFwZXJJbnRlcnZhbDoge1xyXG4gICAgICB2YWx1ZTogMTAwMCxcclxuICAgICAgdHlwZXM6IFsnbnVtYmVyJ10sXHJcbiAgICAgIGVudkxpbms6ICdQT09MX1JFQVBFUl9JTlRFUlZBTCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICAgICdJbnRlcnZhbCBpbiBtaWxsaXNlY29uZHMgdG8gY2hlY2sgYW5kIGRlc3Ryb3kgaWRsZSByZXNvdXJjZXMnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ251bWJlcidcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGJlbmNobWFya2luZzoge1xyXG4gICAgICB2YWx1ZTogZmFsc2UsXHJcbiAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nXSxcclxuICAgICAgZW52TGluazogJ1BPT0xfQkVOQ0hNQVJLSU5HJyxcclxuICAgICAgY2xpTmFtZTogJ3Bvb2xCZW5jaG1hcmtpbmcnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ1Nob3dzIHN0YXRpc3RpY3MgZm9yIHRoZSBwb29sIG9mIHJlc291cmNlcycsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndG9nZ2xlJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBsb2dnaW5nOiB7XHJcbiAgICBsZXZlbDoge1xyXG4gICAgICB2YWx1ZTogNCxcclxuICAgICAgdHlwZXM6IFsnbnVtYmVyJ10sXHJcbiAgICAgIGVudkxpbms6ICdMT0dHSU5HX0xFVkVMJyxcclxuICAgICAgY2xpTmFtZTogJ2xvZ0xldmVsJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdMb2dnaW5nIHZlcmJvc2l0eSBsZXZlbCcsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICByb3VuZDogMCxcclxuICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgbWF4OiA1XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBmaWxlOiB7XHJcbiAgICAgIHZhbHVlOiAnaGlnaGNoYXJ0cy1leHBvcnQtc2VydmVyLmxvZycsXHJcbiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLFxyXG4gICAgICBlbnZMaW5rOiAnTE9HR0lOR19GSUxFJyxcclxuICAgICAgY2xpTmFtZTogJ2xvZ0ZpbGUnLFxyXG4gICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAnTG9nIGZpbGUgbmFtZS4gUmVxdWlyZXMgYGxvZ1RvRmlsZWAgYW5kIGBsb2dEZXN0YCB0byBiZSBzZXQnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBkZXN0OiB7XHJcbiAgICAgIHZhbHVlOiAnbG9nJyxcclxuICAgICAgdHlwZXM6IFsnc3RyaW5nJ10sXHJcbiAgICAgIGVudkxpbms6ICdMT0dHSU5HX0RFU1QnLFxyXG4gICAgICBjbGlOYW1lOiAnbG9nRGVzdCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnUGF0aCB0byBzdG9yZSBsb2cgZmlsZXMuIFJlcXVpcmVzIGBsb2dUb0ZpbGVgIHRvIGJlIHNldCcsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndGV4dCdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHRvQ29uc29sZToge1xyXG4gICAgICB2YWx1ZTogdHJ1ZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnTE9HR0lOR19UT19DT05TT0xFJyxcclxuICAgICAgY2xpTmFtZTogJ2xvZ1RvQ29uc29sZScsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnRW5hYmxlcyBvciBkaXNhYmxlcyBjb25zb2xlIGxvZ2dpbmcnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RvZ2dsZSdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHRvRmlsZToge1xyXG4gICAgICB2YWx1ZTogdHJ1ZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnTE9HR0lOR19UT19GSUxFJyxcclxuICAgICAgY2xpTmFtZTogJ2xvZ1RvRmlsZScsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnRW5hYmxlcyBvciBkaXNhYmxlcyBsb2dnaW5nIHRvIGEgZmlsZScsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndG9nZ2xlJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICB1aToge1xyXG4gICAgZW5hYmxlOiB7XHJcbiAgICAgIHZhbHVlOiBmYWxzZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnVUlfRU5BQkxFJyxcclxuICAgICAgY2xpTmFtZTogJ2VuYWJsZVVpJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdFbmFibGVzIG9yIGRpc2FibGVzIHRoZSBVSSBmb3IgdGhlIGV4cG9ydCBzZXJ2ZXInLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RvZ2dsZSdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHJvdXRlOiB7XHJcbiAgICAgIHZhbHVlOiAnLycsXHJcbiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLFxyXG4gICAgICBlbnZMaW5rOiAnVUlfUk9VVEUnLFxyXG4gICAgICBjbGlOYW1lOiAndWlSb3V0ZScsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIGVuZHBvaW50IHJvdXRlIGZvciB0aGUgVUknLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIG90aGVyOiB7XHJcbiAgICBub2RlRW52OiB7XHJcbiAgICAgIHZhbHVlOiAncHJvZHVjdGlvbicsXHJcbiAgICAgIHR5cGVzOiBbJ3N0cmluZyddLFxyXG4gICAgICBlbnZMaW5rOiAnT1RIRVJfTk9ERV9FTlYnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ1RoZSBOb2RlLmpzIGVudmlyb25tZW50IHR5cGUnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBsaXN0ZW5Ub1Byb2Nlc3NFeGl0czoge1xyXG4gICAgICB2YWx1ZTogdHJ1ZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnT1RIRVJfTElTVEVOX1RPX1BST0NFU1NfRVhJVFMnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ1doZXRoZXIgb3Igbm90IHRvIGF0dGFjaCBwcm9jZXNzLmV4aXQgaGFuZGxlcnMnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RvZ2dsZSdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIG5vTG9nbzoge1xyXG4gICAgICB2YWx1ZTogZmFsc2UsXHJcbiAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nXSxcclxuICAgICAgZW52TGluazogJ09USEVSX05PX0xPR08nLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0Rpc3BsYXkgb3Igc2tpcCBwcmludGluZyB0aGUgbG9nbyBvbiBzdGFydHVwJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0b2dnbGUnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBoYXJkUmVzZXRQYWdlOiB7XHJcbiAgICAgIHZhbHVlOiBmYWxzZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnT1RIRVJfSEFSRF9SRVNFVF9QQUdFJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdXaGV0aGVyIG9yIG5vdCB0byByZXNldCB0aGUgcGFnZSBjb250ZW50IGVudGlyZWx5JyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0b2dnbGUnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBicm93c2VyU2hlbGxNb2RlOiB7XHJcbiAgICAgIHZhbHVlOiB0cnVlLFxyXG4gICAgICB0eXBlczogWydib29sZWFuJ10sXHJcbiAgICAgIGVudkxpbms6ICdPVEhFUl9CUk9XU0VSX1NIRUxMX01PREUnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ1doZXRoZXIgb3Igbm90IHRvIHNldCB0aGUgYnJvd3NlciB0byBydW4gaW4gc2hlbGwgbW9kZScsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndG9nZ2xlJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgdmFsaWRhdGlvbjoge1xyXG4gICAgICB2YWx1ZTogdHJ1ZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnT1RIRVJfVkFMSURBVElPTicsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnV2hldGhlciBvciBub3QgdG8gZW5hYmxlIHZhbGlkYXRpb24gb2Ygb3B0aW9ucyB0eXBlcycsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAndG9nZ2xlJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBkZWJ1Zzoge1xyXG4gICAgZW5hYmxlOiB7XHJcbiAgICAgIHZhbHVlOiBmYWxzZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnREVCVUdfRU5BQkxFJyxcclxuICAgICAgY2xpTmFtZTogJ2VuYWJsZURlYnVnJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdFbmFibGVzIG9yIGRpc2FibGVzIGRlYnVnIG1vZGUgZm9yIHRoZSB1bmRlcmx5aW5nIGJyb3dzZXInLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RvZ2dsZSdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGhlYWRsZXNzOiB7XHJcbiAgICAgIHZhbHVlOiBmYWxzZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnREVCVUdfSEVBRExFU1MnLFxyXG4gICAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgICAnV2hldGhlciBvciBub3QgdG8gc2V0IHRoZSBicm93c2VyIHRvIHJ1biBpbiBoZWFkbGVzcyBtb2RlIGR1cmluZyBkZWJ1Z2dpbmcnLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RvZ2dsZSdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGRldnRvb2xzOiB7XHJcbiAgICAgIHZhbHVlOiBmYWxzZSxcclxuICAgICAgdHlwZXM6IFsnYm9vbGVhbiddLFxyXG4gICAgICBlbnZMaW5rOiAnREVCVUdfREVWVE9PTFMnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0VuYWJsZXMgb3IgZGlzYWJsZXMgRGV2VG9vbHMgaW4gaGVhZGZ1bCBtb2RlJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0b2dnbGUnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBsaXN0ZW5Ub0NvbnNvbGU6IHtcclxuICAgICAgdmFsdWU6IGZhbHNlLFxyXG4gICAgICB0eXBlczogWydib29sZWFuJ10sXHJcbiAgICAgIGVudkxpbms6ICdERUJVR19MSVNURU5fVE9fQ09OU09MRScsXHJcbiAgICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICAgICdFbmFibGVzIG9yIGRpc2FibGVzIGxpc3RlbmluZyB0byBjb25zb2xlIG1lc3NhZ2VzIGZyb20gdGhlIGJyb3dzZXInLFxyXG4gICAgICBwcm9tcHRPcHRpb25zOiB7XHJcbiAgICAgICAgdHlwZTogJ3RvZ2dsZSdcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGR1bXBpbzoge1xyXG4gICAgICB2YWx1ZTogZmFsc2UsXHJcbiAgICAgIHR5cGVzOiBbJ2Jvb2xlYW4nXSxcclxuICAgICAgZW52TGluazogJ0RFQlVHX0RVTVBJTycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICAgICdSZWRpcmVjdHMgb3Igbm90IGJyb3dzZXIgc3Rkb3V0IGFuZCBzdGRlcnIgdG8gcHJvY2Vzcy5zdGRvdXQgYW5kIHByb2Nlc3Muc3RkZXJyJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICd0b2dnbGUnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzbG93TW86IHtcclxuICAgICAgdmFsdWU6IDAsXHJcbiAgICAgIHR5cGVzOiBbJ251bWJlciddLFxyXG4gICAgICBlbnZMaW5rOiAnREVCVUdfU0xPV19NTycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnRGVsYXlzIFB1cHBldGVlciBvcGVyYXRpb25zIGJ5IHRoZSBzcGVjaWZpZWQgbWlsbGlzZWNvbmRzJyxcclxuICAgICAgcHJvbXB0T3B0aW9uczoge1xyXG4gICAgICAgIHR5cGU6ICdudW1iZXInXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBkZWJ1Z2dpbmdQb3J0OiB7XHJcbiAgICAgIHZhbHVlOiA5MjIyLFxyXG4gICAgICB0eXBlczogWydudW1iZXInXSxcclxuICAgICAgZW52TGluazogJ0RFQlVHX0RFQlVHR0lOR19QT1JUJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdQb3J0IHVzZWQgZm9yIGRlYnVnZ2luZycsXHJcbiAgICAgIHByb21wdE9wdGlvbnM6IHtcclxuICAgICAgICB0eXBlOiAnbnVtYmVyJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGVmYXVsdENvbmZpZztcclxuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbkhpZ2hjaGFydHMgRXhwb3J0IFNlcnZlclxyXG5cclxuQ29weXJpZ2h0IChjKSAyMDE2LTIwMjUsIEhpZ2hzb2Z0XHJcblxyXG5MaWNlbmNlZCB1bmRlciB0aGUgTUlUIGxpY2VuY2UuXHJcblxyXG5BZGRpdGlvbmFsbHkgYSB2YWxpZCBIaWdoY2hhcnRzIGxpY2Vuc2UgaXMgcmVxdWlyZWQgZm9yIHVzZS5cclxuXHJcblNlZSBMSUNFTlNFIGZpbGUgaW4gcm9vdCBmb3IgZGV0YWlscy5cclxuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogQG92ZXJ2aWV3IFRoaXMgZmlsZSBoYW5kbGVzIHBhcnNpbmcgYW5kIHZhbGlkYXRpbmcgb3B0aW9ucyBmcm9tIG11bHRpcGxlXHJcbiAqIHNvdXJjZXMgKHRoZSBjb25maWcgZmlsZSwgY3VzdG9tIEpTT04sIGVudmlyb25tZW50IHZhcmlhYmxlcywgQ0xJIGFyZ3VtZW50cyxcclxuICogYW5kIHJlcXVlc3QgcGF5bG9hZCkgdXNpbmcgdGhlICd6b2QnIGxpYnJhcnkuXHJcbiAqXHJcbiAqIEVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgcGFyc2VkIGFuZCB2YWxpZGF0ZWQgb25seSBvbmNlIGF0IGFwcGxpY2F0aW9uXHJcbiAqIHN0YXJ0dXAsIGFuZCB0aGUgdmFsaWRhdGVkIHJlc3VsdHMgYXJlIGV4cG9ydGVkIGFzIGBlbnZzYCBmb3IgdXNlIHRocm91Z2hvdXRcclxuICogdGhlIGFwcGxpY2F0aW9uLlxyXG4gKlxyXG4gKiBPcHRpb25zIGZyb20gb3RoZXIgc291cmNlcywgaG93ZXZlciwgYXJlIHBhcnNlZCBhbmQgdmFsaWRhdGVkIG9uIGRlbWFuZCxcclxuICogZWFjaCB0aW1lIGFuIGV4cG9ydCBpcyBhdHRlbXB0ZWQuXHJcbiAqL1xyXG5cclxuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xyXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcclxuXHJcbmltcG9ydCBkZWZhdWx0Q29uZmlnIGZyb20gJy4vc2NoZW1hcy9jb25maWcuanMnO1xyXG5cclxuLy8gTG9hZCB0aGUgLmVudiBpbnRvIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG5kb3RlbnYuY29uZmlnKCk7XHJcblxyXG4vLyBHZXQgc2NyaXB0cyBuYW1lcyBvZiBlYWNoIGNhdGVnb3J5IGZyb20gdGhlIGRlZmF1bHQgY29uZmlnXHJcbmNvbnN0IHsgY29yZVNjcmlwdHMsIG1vZHVsZVNjcmlwdHMsIGluZGljYXRvclNjcmlwdHMgfSA9XHJcbiAgZGVmYXVsdENvbmZpZy5oaWdoY2hhcnRzO1xyXG5cclxuLy8gU2V0cyB0aGUgY3VzdG9tIGVycm9yIG1hcCBnbG9iYWxseVxyXG56LnNldEVycm9yTWFwKF9jdXN0b21FcnJvck1hcCk7XHJcblxyXG4vKipcclxuICogT2JqZWN0IGNvbnRhaW5pbmcgY3VzdG9tIGdlbmVyYWwgdmFsaWRhdG9ycyBhbmQgcGFyc2VycyB0byBhdm9pZCByZXBldGl0aW9uXHJcbiAqIGluIHNjaGVtYSBvYmplY3RzLiBBbGwgdmFsaWRhdG9ycyBhcHBseSB0byB2YWx1ZXMgZnJvbSB2YXJpb3VzIHNvdXJjZXMsXHJcbiAqIGluY2x1ZGluZyB0aGUgZGVmYXVsdCBjb25maWcgZmlsZSwgYSBjdXN0b20gSlNPTiBmaWxlIGxvYWRlZCB3aXRoIHRoZSBvcHRpb25cclxuICogY2FsbGVkIGBsb2FkQ29uZmlnYCwgdGhlIC5lbnYgZmlsZSwgQ0xJIGFyZ3VtZW50cywgYW5kIHRoZSByZXF1ZXN0IHBheWxvYWQuXHJcbiAqIFRoZSBgc3RyaWN0Q2hlY2tgIGZsYWcgZW5hYmxlcyBzdHJpY3RlciB2YWxpZGF0aW9uIGFuZCBwYXJzaW5nIHJ1bGVzLiBUaGlzXHJcbiAqIGZsYWcgaXMgc2V0IHRvIGZhbHNlIGZvciB2YWx1ZXMgdGhhdCBjb21lIGZyb20gdGhlIC5lbnYgZmlsZSBvciBDTEkgYXJndW1lbnRzXHJcbiAqIGJlY2F1c2UgdGhleSBhcmUgcHJvdmlkZWQgYXMgc3RyaW5ncyBhbmQgbmVlZCB0byBiZSBwYXJzZWQgYWNjb3JkaW5nbHkgZmlyc3QuXHJcbiAqL1xyXG5jb25zdCB2ID0ge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBgYm9vbGVhbmAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbCBzdHJpY3RlclxyXG4gICAqIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoYXQ6XHJcbiAgICpcclxuICAgKiAtIFdoZW4gYHN0cmljdENoZWNrYCBpcyB0cnVlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IHZhbHVlcyBhcmUgdHJ1ZVxyXG4gICAqIGFuZCBmYWxzZSBhbmQgdGhlIHNjaGVtYSB3aWxsIHZhbGlkYXRlIGFnYWluc3QgdGhlIGRlZmF1bHQgYm9vbGVhblxyXG4gICAqIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIGZhbHNlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IHZhbHVlcyBhcmUgdHJ1ZSxcclxuICAgKiBmYWxzZSwgbnVsbCwgJ3RydWUnLCAnMScsICdmYWxzZScsICcwJywgJ3VuZGVmaW5lZCcsICdudWxsJywgYW5kICcnLlxyXG4gICAqIFRoZSBzdHJpbmdzICd1bmRlZmluZWQnLCAnbnVsbCcsIGFuZCAnJyB3aWxsIGJlIHRyYW5zZm9ybWVkIHRvIG51bGwsXHJcbiAgICogdGhlIHN0cmluZyAndHJ1ZScgd2lsbCBiZSB0cmFuc2Zvcm1lZCB0byB0aGUgYm9vbGVhbiB2YWx1ZSB0cnVlLFxyXG4gICAqIGFuZCAnZmFsc2UnIHdpbGwgYmUgdHJhbnNmb3JtZWQgdG8gdGhlIGJvb2xlYW4gdmFsdWUgZmFsc2UuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gYm9vbGVhblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIGJvb2xlYW4gdmFsdWVzLlxyXG4gICAqL1xyXG4gIGJvb2xlYW4oc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiBzdHJpY3RDaGVja1xyXG4gICAgICA/IHouYm9vbGVhbigpXHJcbiAgICAgIDogelxyXG4gICAgICAgICAgLnVuaW9uKFtcclxuICAgICAgICAgICAgelxyXG4gICAgICAgICAgICAgIC5lbnVtKFsndHJ1ZScsICcxJywgJ2ZhbHNlJywgJzAnLCAndW5kZWZpbmVkJywgJ251bGwnLCAnJ10pXHJcbiAgICAgICAgICAgICAgLnRyYW5zZm9ybSgodmFsdWUpID0+XHJcbiAgICAgICAgICAgICAgICAhWyd1bmRlZmluZWQnLCAnbnVsbCcsICcnXS5pbmNsdWRlcyh2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgPyB2YWx1ZSA9PT0gJ3RydWUnIHx8IHZhbHVlID09PSAnMSdcclxuICAgICAgICAgICAgICAgICAgOiBudWxsXHJcbiAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgei5ib29sZWFuKClcclxuICAgICAgICAgIF0pXHJcbiAgICAgICAgICAubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHN0cmluZ2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbCBzdHJpY3RlclxyXG4gICAqIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoYXQ6XHJcbiAgICpcclxuICAgKiAtIFdoZW4gYHN0cmljdENoZWNrYCBpcyB0cnVlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IHRyaW1tZWQgc3RyaW5ncyBleGNlcHRcclxuICAgKiB0aGUgZm9yYmlkZGVuIHZhbHVlczogJ2ZhbHNlJywgJ3VuZGVmaW5lZCcsICdudWxsJywgYW5kICcnLlxyXG4gICAqXHJcbiAgICogLSBXaGVuIGBzdHJpY3RDaGVja2AgaXMgZmFsc2UsIHRoZSBzY2hlbWEgd2lsbCBhY2NlcHQgdHJpbW1lZCBzdHJpbmdzXHJcbiAgICogYW5kIG51bGwuIFRoZSBmb3JiaWRkZW4gdmFsdWVzOiAnZmFsc2UnLCAndW5kZWZpbmVkJywgJ251bGwnLCBhbmQgJycgd2lsbFxyXG4gICAqIGJlIHRyYW5zZm9ybWVkIHRvIG51bGwuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gc3RyaW5nXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgc3RyaW5nIHZhbHVlcy5cclxuICAgKi9cclxuICBzdHJpbmcoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiBzdHJpY3RDaGVja1xyXG4gICAgICA/IHpcclxuICAgICAgICAgIC5zdHJpbmcoKVxyXG4gICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgLnJlZmluZShcclxuICAgICAgICAgICAgKHZhbHVlKSA9PiAhWydmYWxzZScsICd1bmRlZmluZWQnLCAnbnVsbCcsICcnXS5pbmNsdWRlcyh2YWx1ZSksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ1RoZSBzdHJpbmcgY29udGFpbnMgYSBmb3JiaWRkZW4gdmFsdWUnXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApXHJcbiAgICAgIDogelxyXG4gICAgICAgICAgLnN0cmluZygpXHJcbiAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAudHJhbnNmb3JtKCh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgIVsnZmFsc2UnLCAndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpID8gdmFsdWUgOiBudWxsXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGVudW1gIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWwgc3RyaWN0ZXJcclxuICAgKiBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgc2NoZW1hIHdpbGwgdmFsaWRhdGUgYWdhaW5zdCB0aGUgcHJvdmlkZWQgYHZhbHVlc2AgYXJyYXkuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGF0OlxyXG4gICAqXHJcbiAgICogLSBXaGVuIGBzdHJpY3RDaGVja2AgaXMgdHJ1ZSwgdGhlIHNjaGVtYSB3aWxsIHZhbGlkYXRlIGFnYWluc3QgdGhlIGB2YWx1ZXNgXHJcbiAgICogYXJyYXkgd2l0aCB0aGUgZGVmYXVsdCBlbnVtIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIGZhbHNlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IGFsc28gbnVsbCxcclxuICAgKiAndW5kZWZpbmVkJywgJ251bGwnLCBhbmQgJycsIHdoaWNoIHdpbGwgYmUgdHJhbnNmb3JtZWQgdG8gbnVsbC5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBlbnVtXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSB2YWx1ZXMgLSBBbiBhcnJheSBvZiB2YWxpZCBzdHJpbmcgdmFsdWVzXHJcbiAgICogZm9yIHRoZSBlbnVtLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyBlbnVtIHZhbHVlcy5cclxuICAgKi9cclxuICBlbnVtKHZhbHVlcywgc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiBzdHJpY3RDaGVja1xyXG4gICAgICA/IHouZW51bShbLi4udmFsdWVzXSlcclxuICAgICAgOiB6XHJcbiAgICAgICAgICAuZW51bShbLi4udmFsdWVzLCAndW5kZWZpbmVkJywgJ251bGwnLCAnJ10pXHJcbiAgICAgICAgICAudHJhbnNmb3JtKCh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgIVsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpID8gdmFsdWUgOiBudWxsXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHN0cmluZ0FycmF5YCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhhdDpcclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIHRydWUsIHRoZSBzY2hlbWEgd2lsbCBhY2NlcHQgYW4gYXJyYXkgb2YgdHJpbW1lZFxyXG4gICAqIHN0cmluZyB2YWx1ZXMgZmlsdGVyZWQgYnkgdGhlIGxvZ2ljIHByb3ZpZGVkIHRocm91Z2ggdGhlIGBmaWx0ZXJDYWxsYmFja2AuXHJcbiAgICpcclxuICAgKiAtIFdoZW4gYHN0cmljdENoZWNrYCBpcyBmYWxzZSwgdGhlIHNjaGVtYSB3aWxsIGFjY2VwdCBudWxsIGFuZCB0cmltbWVkXHJcbiAgICogc3RyaW5nIHZhbHVlcyB3aGljaCB3aWxsIGJlIHNwbGl0dGVkIGludG8gYW4gYXJyYXkgb2Ygc3RyaW5ncyBhbmQgZmlsdGVyZWRcclxuICAgKiBmcm9tIHRoZSAnWycgYW5kICddJyBjaGFyYWN0ZXJzIGFuZCBieSB0aGUgbG9naWMgcHJvdmlkZWQgdGhyb3VnaFxyXG4gICAqIHRoZSBgZmlsdGVyQ2FsbGJhY2tgLiBJZiB0aGUgYXJyYXkgaXMgZW1wdHksIGl0IHdpbGwgYmUgdHJhbnNmb3JtZWRcclxuICAgKiB0byBudWxsLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIHN0cmluZ0FycmF5XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmaWx0ZXJDYWxsYmFjayAtIFRoZSBmaWx0ZXIgY2FsbGJhY2suXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlcGFyYXRvciAtIFRoZSBzZXBhcmF0b3IgZm9yIHNwbGl0aW5nIGEgc3RyaW5nLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyBhcnJheSBvZiBzdHJpbmdcclxuICAgKiB2YWx1ZXMuXHJcbiAgICovXHJcbiAgc3RyaW5nQXJyYXkoZmlsdGVyQ2FsbGJhY2ssIHNlcGFyYXRvciwgc3RyaWN0Q2hlY2spIHtcclxuICAgIGNvbnN0IGFycmF5U2NoZW1hID0gei5zdHJpbmcoKS50cmltKCkuYXJyYXkoKTtcclxuICAgIGNvbnN0IHN0cmluZ1NjaGVtYSA9IHpcclxuICAgICAgLnN0cmluZygpXHJcbiAgICAgIC50cmltKClcclxuICAgICAgLnRyYW5zZm9ybSgodmFsdWUpID0+IHtcclxuICAgICAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnWycpKSB7XHJcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUuZW5kc1dpdGgoJ10nKSkge1xyXG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB2YWx1ZS5zcGxpdChzZXBhcmF0b3IpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICBjb25zdCB0cmFuc2Zvcm1DYWxsYmFjayA9ICh2YWx1ZSkgPT5cclxuICAgICAgdmFsdWUubWFwKCh2YWx1ZSkgPT4gdmFsdWUudHJpbSgpKS5maWx0ZXIoZmlsdGVyQ2FsbGJhY2spO1xyXG5cclxuICAgIHJldHVybiBzdHJpY3RDaGVja1xyXG4gICAgICA/IGFycmF5U2NoZW1hLnRyYW5zZm9ybSh0cmFuc2Zvcm1DYWxsYmFjaylcclxuICAgICAgOiB6XHJcbiAgICAgICAgICAudW5pb24oW3N0cmluZ1NjaGVtYSwgYXJyYXlTY2hlbWFdKVxyXG4gICAgICAgICAgLnRyYW5zZm9ybSh0cmFuc2Zvcm1DYWxsYmFjaylcclxuICAgICAgICAgIC50cmFuc2Zvcm0oKHZhbHVlKSA9PiAodmFsdWUubGVuZ3RoID8gdmFsdWUgOiBudWxsKSlcclxuICAgICAgICAgIC5udWxsYWJsZSgpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgcG9zaXRpdmVOdW1gIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGF0OlxyXG4gICAqXHJcbiAgICogLSBXaGVuIGBzdHJpY3RDaGVja2AgaXMgdHJ1ZSwgdGhlIHNjaGVtYSB3aWxsIGFjY2VwdCBwb3NpdGl2ZSBudW1iZXIgdmFsdWVzXHJcbiAgICogYW5kIHZhbGlkYXRlIGFnYWluc3QgdGhlIGRlZmF1bHQgcG9zaXRpdmUgbnVtYmVyIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIGZhbHNlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IHBvc2l0aXZlIG51bWJlclxyXG4gICAqIHZhbHVlcywgbnVsbCwgYW5kIHRyaW1tZWQgc3RyaW5nIHZhbHVlcyB0aGF0IGNhbiBlaXRoZXIgYmUgJ3VuZGVmaW5lZCcsXHJcbiAgICogJ251bGwnLCAnJywgb3IgcmVwcmVzZW50IGEgcG9zaXRpdmUgbnVtYmVyLiBJdCB3aWxsIHRyYW5zZm9ybSB0aGUgc3RyaW5nXHJcbiAgICogdG8gYSBwb3NpdGl2ZSBudW1iZXIsIG9yIHRvIG51bGwgaWYgaXQgaXMgJ3VuZGVmaW5lZCcsICdudWxsJywgb3IgJycuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gcG9zaXRpdmVOdW1cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyBwb3NpdGl2ZSBudW1iZXJcclxuICAgKiB2YWx1ZXMuXHJcbiAgICovXHJcbiAgcG9zaXRpdmVOdW0oc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiBzdHJpY3RDaGVja1xyXG4gICAgICA/IHoubnVtYmVyKCkucG9zaXRpdmUoKVxyXG4gICAgICA6IHpcclxuICAgICAgICAgIC51bmlvbihbXHJcbiAgICAgICAgICAgIHpcclxuICAgICAgICAgICAgICAuc3RyaW5nKClcclxuICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgLnJlZmluZShcclxuICAgICAgICAgICAgICAgICh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgICAgICAgKCFpc05hTihOdW1iZXIodmFsdWUpKSAmJiBOdW1iZXIodmFsdWUpID4gMCkgfHxcclxuICAgICAgICAgICAgICAgICAgWyd1bmRlZmluZWQnLCAnbnVsbCcsICcnXS5pbmNsdWRlcyh2YWx1ZSksXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ1RoZSB2YWx1ZSBtdXN0IGJlIG51bWVyaWMgYW5kIHBvc2l0aXZlJ1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIC50cmFuc2Zvcm0oKHZhbHVlKSA9PlxyXG4gICAgICAgICAgICAgICAgIVsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgID8gTnVtYmVyKHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB6Lm51bWJlcigpLnBvc2l0aXZlKClcclxuICAgICAgICAgIF0pXHJcbiAgICAgICAgICAubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYG5vbk5lZ2F0aXZlTnVtYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhhdDpcclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIHRydWUsIHRoZSBzY2hlbWEgd2lsbCBhY2NlcHQgbm9uLW5lZ2F0aXZlIG51bWJlclxyXG4gICAqIHZhbHVlcyBhbmQgdmFsaWRhdGUgYWdhaW5zdCB0aGUgZGVmYXVsdCBub24tbmVnYXRpdmUgbnVtYmVyIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIGZhbHNlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IG5vbi1uZWdhdGl2ZSBudW1iZXJcclxuICAgKiB2YWx1ZXMsIG51bGwsIGFuZCB0cmltbWVkIHN0cmluZyB2YWx1ZXMgdGhhdCBjYW4gZWl0aGVyIGJlICd1bmRlZmluZWQnLFxyXG4gICAqICdudWxsJywgJycsIG9yIHJlcHJlc2VudCBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIEl0IHdpbGwgdHJhbnNmb3JtXHJcbiAgICogdGhlIHN0cmluZyB0byBhIG5vbi1uZWdhdGl2ZSBudW1iZXIsIG9yIHRvIG51bGwgaWYgaXQgaXMgJ3VuZGVmaW5lZCcsXHJcbiAgICogJ251bGwnLCBvciAnJy5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBub25OZWdhdGl2ZU51bVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIG5vbi1uZWdhdGl2ZVxyXG4gICAqIG51bWJlciB2YWx1ZXMuXHJcbiAgICovXHJcbiAgbm9uTmVnYXRpdmVOdW0oc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiBzdHJpY3RDaGVja1xyXG4gICAgICA/IHoubnVtYmVyKCkubm9ubmVnYXRpdmUoKVxyXG4gICAgICA6IHpcclxuICAgICAgICAgIC51bmlvbihbXHJcbiAgICAgICAgICAgIHpcclxuICAgICAgICAgICAgICAuc3RyaW5nKClcclxuICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgLnJlZmluZShcclxuICAgICAgICAgICAgICAgICh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgICAgICAgKCFpc05hTihOdW1iZXIodmFsdWUpKSAmJiBOdW1iZXIodmFsdWUpID49IDApIHx8XHJcbiAgICAgICAgICAgICAgICAgIFsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6ICdUaGUgdmFsdWUgbXVzdCBiZSBudW1lcmljIGFuZCBub24tbmVnYXRpdmUnXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgLnRyYW5zZm9ybSgodmFsdWUpID0+XHJcbiAgICAgICAgICAgICAgICAhWyd1bmRlZmluZWQnLCAnbnVsbCcsICcnXS5pbmNsdWRlcyh2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgPyBOdW1iZXIodmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgIDogbnVsbFxyXG4gICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHoubnVtYmVyKCkubm9ubmVnYXRpdmUoKVxyXG4gICAgICAgICAgXSlcclxuICAgICAgICAgIC5udWxsYWJsZSgpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgc3RhcnRzV2l0aGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSBzY2hlbWEgd2lsbCB2YWxpZGF0ZSBhZ2FpbnN0IHRoZSBwcm92aWRlZCBgcHJlZml4ZXNgIGFycmF5IHRvIGNoZWNrXHJcbiAgICogd2hldGhlciBhIHN0cmluZyB2YWx1ZSBzdGFydHMgd2l0aCBhbnkgb2YgdGhlIHZhbHVlcyBwcm92aWRlZFxyXG4gICAqIGluIHRoZSBgcHJlZml4ZXNgIGFycmF5LlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhhdDpcclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIHRydWUsIHRoZSBzY2hlbWEgd2lsbCBhY2NlcHQgdHJpbW1lZCBzdHJpbmcgdmFsdWVzXHJcbiAgICogdGhhdCBzdGFydCB3aXRoIHZhbHVlcyBmcm9tIHRoZSBwcmVmaXhlcyBhcnJheS5cclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIGZhbHNlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IHRyaW1tZWQgc3RyaW5nIHZhbHVlc1xyXG4gICAqIHRoYXQgc3RhcnQgd2l0aCB2YWx1ZXMgZnJvbSB0aGUgcHJlZml4ZXMgYXJyYXksIG51bGwsICd1bmRlZmluZWQnLCAnbnVsbCcsXHJcbiAgICogYW5kICcnIHdoZXJlIHRoZSBzY2hlbWEgd2lsbCB0cmFuc2Zvcm0gdGhlbSB0byBudWxsLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIHN0YXJ0c1dpdGhcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IHByZWZpeGVzIC0gQW4gYXJyYXkgb2YgcHJlZml4ZXMgdG8gdmFsaWRhdGVcclxuICAgKiB0aGUgc3RyaW5nIGFnYWluc3QuXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHN0cmluZ3MgdGhhdFxyXG4gICAqIHN0YXJ0cyB3aXRoIHZhbHVlcy5cclxuICAgKi9cclxuICBzdGFydHNXaXRoKHByZWZpeGVzLCBzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHN0cmljdENoZWNrXHJcbiAgICAgID8gelxyXG4gICAgICAgICAgLnN0cmluZygpXHJcbiAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAucmVmaW5lKFxyXG4gICAgICAgICAgICAodmFsdWUpID0+IHByZWZpeGVzLnNvbWUoKHByZWZpeCkgPT4gdmFsdWUuc3RhcnRzV2l0aChwcmVmaXgpKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBgVGhlIHZhbHVlIG11c3QgYmUgYSBzdHJpbmcgdGhhdCBzdGFydHMgd2l0aCAke3ByZWZpeGVzLmpvaW4oJywgJyl9YFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICA6IHpcclxuICAgICAgICAgIC5zdHJpbmcoKVxyXG4gICAgICAgICAgLnRyaW0oKVxyXG4gICAgICAgICAgLnJlZmluZShcclxuICAgICAgICAgICAgKHZhbHVlKSA9PlxyXG4gICAgICAgICAgICAgIHByZWZpeGVzLnNvbWUoKHByZWZpeCkgPT4gdmFsdWUuc3RhcnRzV2l0aChwcmVmaXgpKSB8fFxyXG4gICAgICAgICAgICAgIFsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGBUaGUgdmFsdWUgbXVzdCBiZSBhIHN0cmluZyB0aGF0IHN0YXJ0cyB3aXRoICR7cHJlZml4ZXMuam9pbignLCAnKX1gXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAudHJhbnNmb3JtKCh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgIVsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpID8gdmFsdWUgOiBudWxsXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGNoYXJ0Q29uZmlnYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYS5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoYXQgdGhlIHNjaGVtYSB3aWxsIGFjY2VwdCBvYmplY3QgdmFsdWVzXHJcbiAgICogb3IgdHJpbW1lZCBzdHJpbmcgdmFsdWVzIHRoYXQgY29udGFpbiAnPHN2Zycgb3IgJzw/eG1sJyBlbGVtZW50cywgc3RhcnRcclxuICAgKiB3aXRoIHRoZSAneycgYW5kIGVuZCB3aXRoIHRoZSAnfScsIGFuZCBudWxsLiBUaGUgJ3VuZGVmaW5lZCcsICdudWxsJyxcclxuICAgKiBhbmQgJycgdmFsdWVzIHdpbGwgYmUgdHJhbnNmb3JtZWQgdG8gbnVsbC5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBjaGFydENvbmZpZ1xyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIGNoYXJ0XHJcbiAgICogY29uZmlndXJhdGlvbiB2YWx1ZS5cclxuICAgKi9cclxuICBjaGFydENvbmZpZygpIHtcclxuICAgIHJldHVybiB6XHJcbiAgICAgIC51bmlvbihbXHJcbiAgICAgICAgelxyXG4gICAgICAgICAgLnN0cmluZygpXHJcbiAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAucmVmaW5lKFxyXG4gICAgICAgICAgICAodmFsdWUpID0+XHJcbiAgICAgICAgICAgICAgKHZhbHVlLnN0YXJ0c1dpdGgoJ3snKSAmJiB2YWx1ZS5lbmRzV2l0aCgnfScpKSB8fFxyXG4gICAgICAgICAgICAgIFsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6XHJcbiAgICAgICAgICAgICAgICAgIFwiVGhlIHZhbHVlIG11c3QgYmUgYSBzdHJpbmcgdGhhdCBzdGFydHMgd2l0aCAneycgYW5kIGVuZHMgd2l0aCAnfSdcIlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgLnRyYW5zZm9ybSgodmFsdWUpID0+XHJcbiAgICAgICAgICAgICFbJ3VuZGVmaW5lZCcsICdudWxsJywgJyddLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogbnVsbFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICB6Lm9iamVjdCh7fSkucGFzc3Rocm91Z2goKVxyXG4gICAgICBdKVxyXG4gICAgICAubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGFkZGl0aW9uYWxPcHRpb25zYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYS5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoYXQgdGhlIHNjaGVtYSB3aWxsIGFjY2VwdCBvYmplY3QgdmFsdWVzXHJcbiAgICogb3IgdHJpbW1lZCBzdHJpbmcgdmFsdWVzIHRoYXQgZW5kIHdpdGggJy5qc29uJyBhbmQgYXJlIGF0IGxlYXN0IG9uZVxyXG4gICAqIGNoYXJhY3RlciBsb25nIGV4Y2x1ZGluZyB0aGUgZXh0ZW5zaW9uLCBzdGFydCB3aXRoIHRoZSAneycgYW5kIGVuZFxyXG4gICAqIHdpdGggdGhlICd9JywgYW5kIG51bGwuIFRoZSAndW5kZWZpbmVkJywgJ251bGwnLCBhbmQgJycgdmFsdWVzIHdpbGxcclxuICAgKiBiZSB0cmFuc2Zvcm1lZCB0byBudWxsLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGFkZGl0aW9uYWxPcHRpb25zXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9ICBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIGFkZGl0aW9uYWwgY2hhcnRcclxuICAgKiBvcHRpb25zIHZhbHVlLlxyXG4gICAqL1xyXG4gIGFkZGl0aW9uYWxPcHRpb25zKCkge1xyXG4gICAgcmV0dXJuIHpcclxuICAgICAgLnVuaW9uKFtcclxuICAgICAgICB6XHJcbiAgICAgICAgICAuc3RyaW5nKClcclxuICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgIC5yZWZpbmUoXHJcbiAgICAgICAgICAgICh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgICAodmFsdWUubGVuZ3RoID49IDYgJiYgdmFsdWUuZW5kc1dpdGgoJy5qc29uJykpIHx8XHJcbiAgICAgICAgICAgICAgKHZhbHVlLnN0YXJ0c1dpdGgoJ3snKSAmJiB2YWx1ZS5lbmRzV2l0aCgnfScpKSB8fFxyXG4gICAgICAgICAgICAgIFsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6XHJcbiAgICAgICAgICAgICAgICAgIFwiVGhlIHZhbHVlIG11c3QgYmUgYSBzdHJpbmcgdGhhdCBlbmRzIHdpdGggJy5qc29uJyBvciBzdGFydHMgd2l0aCAneycgYW5kIGVuZHMgd2l0aCAnfSdcIlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgLnRyYW5zZm9ybSgodmFsdWUpID0+XHJcbiAgICAgICAgICAgICFbJ3VuZGVmaW5lZCcsICdudWxsJywgJyddLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogbnVsbFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICB6Lm9iamVjdCh7fSkucGFzc3Rocm91Z2goKVxyXG4gICAgICBdKVxyXG4gICAgICAubnVsbGFibGUoKTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogT2JqZWN0IGNvbnRhaW5pbmcgY3VzdG9tIGNvbmZpZyB2YWxpZGF0b3JzIGFuZCBwYXJzZXJzIHRvIGF2b2lkIHJlcGV0aXRpb25cclxuICogaW4gc2NoZW1hIG9iamVjdHMuIEFsbCB2YWxpZGF0b3JzIGFwcGx5IHRvIHZhbHVlcyBmcm9tIHZhcmlvdXMgc291cmNlcyxcclxuICogaW5jbHVkaW5nIHRoZSBkZWZhdWx0IGNvbmZpZyBmaWxlLCBhIGN1c3RvbSBKU09OIGZpbGUgbG9hZGVkIHdpdGggdGhlIG9wdGlvblxyXG4gKiBjYWxsZWQgYGxvYWRDb25maWdgLCB0aGUgLmVudiBmaWxlLCBDTEkgYXJndW1lbnRzLCBhbmQgdGhlIHJlcXVlc3QgcGF5bG9hZC5cclxuICogVGhlIGBzdHJpY3RDaGVja2AgZmxhZyBlbmFibGVzIHN0cmljdGVyIHZhbGlkYXRpb24gYW5kIHBhcnNpbmcgcnVsZXMuIFRoaXNcclxuICogZmxhZyBpcyBzZXQgdG8gZmFsc2UgZm9yIHZhbHVlcyB0aGF0IGNvbWUgZnJvbSB0aGUgLmVudiBmaWxlIG9yIENMSSBhcmd1bWVudHNcclxuICogYmVjYXVzZSB0aGV5IGFyZSBwcm92aWRlZCBhcyBzdHJpbmdzIGFuZCBuZWVkIHRvIGJlIHBhcnNlZCBhY2NvcmRpbmdseSBmaXJzdC5cclxuICovXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0b3JzID0ge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBgYXJnc2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbCBzdHJpY3RlclxyXG4gICAqIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBzdHJpbmdBcnJheWAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGFyZ3NcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYGFyZ3NgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGFyZ3Moc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnN0cmluZ0FycmF5KFxyXG4gICAgICAodmFsdWUpID0+ICFbJ2ZhbHNlJywgJ3VuZGVmaW5lZCcsICdudWxsJywgJyddLmluY2x1ZGVzKHZhbHVlKSxcclxuICAgICAgJzsnLFxyXG4gICAgICBzdHJpY3RDaGVja1xyXG4gICAgKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHZlcnNpb25gIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWwgc3RyaWN0ZXJcclxuICAgKiBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGF0OlxyXG4gICAqXHJcbiAgICogLSBXaGVuIGBzdHJpY3RDaGVja2AgaXMgdHJ1ZSwgdGhlIHNjaGVtYSB3aWxsIGFjY2VwdCB0cmltbWVkIHN0cmluZyB2YWx1ZXNcclxuICAgKiB0aGF0IGFyZSBhIFJlZ0V4cC1iYXNlZCB0aGF0IGFsbG93cyB0byBiZSAnbGF0ZXN0Jywgb3IgaW4gdGhlIGZvcm1hdCBYWCxcclxuICAgKiBYWC5ZWSwgb3IgWFguWVkuWlosIHdoZXJlIFhYLCBZWSwgYW5kIFpaIGFyZSBudW1lcmljIGZvciB0aGUgSGlnaGNoYXJ0c1xyXG4gICAqIHZlcnNpb24gb3B0aW9uLlxyXG4gICAqXHJcbiAgICogLSBXaGVuIGBzdHJpY3RDaGVja2AgaXMgZmFsc2UsIHRoZSBzY2hlbWEgd2lsbCBhY2NlcHQgYWxzbyBudWxsLFxyXG4gICAqICd1bmRlZmluZWQnLCAnbnVsbCcsIG9yICcnIGFuZCBpbiBhbGwgY2FzZXMgdGhlIHNjaGVtYSB3aWxsIHRyYW5zZm9ybSB0aGVtXHJcbiAgICogdG8gbnVsbC5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiB2ZXJzaW9uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGB2ZXJzaW9uYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICB2ZXJzaW9uKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gc3RyaWN0Q2hlY2tcclxuICAgICAgPyB6XHJcbiAgICAgICAgICAuc3RyaW5nKClcclxuICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgIC5yZWZpbmUoKHZhbHVlKSA9PiAvXihsYXRlc3R8XFxkezEsMn0oXFwuXFxkezEsMn0pezAsMn0pJC8udGVzdCh2YWx1ZSksIHtcclxuICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOlxyXG4gICAgICAgICAgICAgICAgXCJUaGUgdmFsdWUgbXVzdCBiZSAnbGF0ZXN0JywgYSBtYWpvciB2ZXJzaW9uLCBvciBpbiB0aGUgZm9ybSBYWC5ZWS5aWlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgIDogelxyXG4gICAgICAgICAgLnN0cmluZygpXHJcbiAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAucmVmaW5lKFxyXG4gICAgICAgICAgICAodmFsdWUpID0+XHJcbiAgICAgICAgICAgICAgL14obGF0ZXN0fFxcZHsxLDJ9KFxcLlxcZHsxLDJ9KXswLDJ9KSQvLnRlc3QodmFsdWUpIHx8XHJcbiAgICAgICAgICAgICAgWyd1bmRlZmluZWQnLCAnbnVsbCcsICcnXS5pbmNsdWRlcyh2YWx1ZSksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTpcclxuICAgICAgICAgICAgICAgICAgXCJUaGUgdmFsdWUgbXVzdCBiZSAnbGF0ZXN0JywgYSBtYWpvciB2ZXJzaW9uLCBvciBpbiB0aGUgZm9ybSBYWC5ZWS5aWlwiXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAudHJhbnNmb3JtKCh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgIVsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpID8gdmFsdWUgOiBudWxsXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGNkblVybGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbCBzdHJpY3RlclxyXG4gICAqIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBzdGFydHNXaXRoYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gY2RuVXJsXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBjZG5VcmxgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGNkblVybChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuc3RhcnRzV2l0aChbJ2h0dHA6Ly8nLCAnaHR0cHM6Ly8nXSwgc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgZm9yY2VGZXRjaGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBib29sZWFuYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gZm9yY2VGZXRjaFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgZm9yY2VGZXRjaGBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgZm9yY2VGZXRjaChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuYm9vbGVhbihzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBjYWNoZVBhdGhgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgc3RyaW5nYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gY2FjaGVQYXRoXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBjYWNoZVBhdGhgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGNhY2hlUGF0aChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuc3RyaW5nKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGFkbWluVG9rZW5gIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgc3RyaW5nYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gYWRtaW5Ub2tlblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgYWRtaW5Ub2tlbmBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgYWRtaW5Ub2tlbihzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuc3RyaW5nKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGNvcmVTY3JpcHRzYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYHN0cmluZ0FycmF5YCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gY29yZVNjcmlwdHNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYGNvcmVTY3JpcHRzYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICBjb3JlU2NyaXB0cyhzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuc3RyaW5nQXJyYXkoXHJcbiAgICAgICh2YWx1ZSkgPT4gY29yZVNjcmlwdHMudmFsdWUuaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAnLCcsXHJcbiAgICAgIHN0cmljdENoZWNrXHJcbiAgICApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgbW9kdWxlU2NyaXB0c2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBzdHJpbmdBcnJheWAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIG1vZHVsZVNjcmlwdHNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgbW9kdWxlU2NyaXB0c2Agb3B0aW9uLlxyXG4gICAqL1xyXG4gIG1vZHVsZVNjcmlwdHMoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnN0cmluZ0FycmF5KFxyXG4gICAgICAodmFsdWUpID0+IG1vZHVsZVNjcmlwdHMudmFsdWUuaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAnLCcsXHJcbiAgICAgIHN0cmljdENoZWNrXHJcbiAgICApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgaW5kaWNhdG9yU2NyaXB0c2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBzdHJpbmdBcnJheWAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGluZGljYXRvclNjcmlwdHNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgaW5kaWNhdG9yU2NyaXB0c2Agb3B0aW9uLlxyXG4gICAqL1xyXG4gIGluZGljYXRvclNjcmlwdHMoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnN0cmluZ0FycmF5KFxyXG4gICAgICAodmFsdWUpID0+IGluZGljYXRvclNjcmlwdHMudmFsdWUuaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAnLCcsXHJcbiAgICAgIHN0cmljdENoZWNrXHJcbiAgICApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgY3VzdG9tU2NyaXB0c2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBzdHJpbmdBcnJheWAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGN1c3RvbVNjcmlwdHNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgY3VzdG9tU2NyaXB0c2Agb3B0aW9uLlxyXG4gICAqL1xyXG4gIGN1c3RvbVNjcmlwdHMoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnN0cmluZ0FycmF5KFxyXG4gICAgICAodmFsdWUpID0+IHZhbHVlLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykgfHwgdmFsdWUuc3RhcnRzV2l0aCgnaHR0cDovLycpLFxyXG4gICAgICAnLCcsXHJcbiAgICAgIHN0cmljdENoZWNrXHJcbiAgICApO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgaW5maWxlYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsIHN0cmljdGVyXHJcbiAgICogY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhhdDpcclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIHRydWUsIHRoZSBzY2hlbWEgd2lsbCBhY2NlcHQgdHJpbW1lZCBzdHJpbmcgdmFsdWVzXHJcbiAgICogdGhhdCBlbmQgd2l0aCAnLmpzb24nIG9yICcuc3ZnJywgYXJlIGF0IGxlYXN0IG9uZSBjaGFyYWN0ZXIgbG9uZyBleGNsdWRpbmdcclxuICAgKiB0aGUgZXh0ZW5zaW9uLCBvciBudWxsLlxyXG4gICAqXHJcbiAgICogLSBXaGVuIGBzdHJpY3RDaGVja2AgaXMgZmFsc2UsIHRoZSBzY2hlbWEgd2lsbCBhY2NlcHQgdHJpbW1lZCBzdHJpbmcgdmFsdWVzXHJcbiAgICogdGhhdCBlbmQgd2l0aCAnLmpzb24nIG9yICcuc3ZnJywgYXJlIGF0IGxlYXN0IG9uZSBjaGFyYWN0ZXIgbG9uZyBleGNsdWRpbmdcclxuICAgKiB0aGUgZXh0ZW5zaW9uIGFuZCB3aWxsIGJlIG51bGwgaWYgdGhlIHByb3ZpZGVkIHZhbHVlIGlzIG51bGwsICd1bmRlZmluZWQnLFxyXG4gICAqICdudWxsJywgb3IgJycuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gaW5maWxlXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBpbmZpbGVgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGluZmlsZShzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHN0cmljdENoZWNrXHJcbiAgICAgID8gelxyXG4gICAgICAgICAgLnN0cmluZygpXHJcbiAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAucmVmaW5lKFxyXG4gICAgICAgICAgICAodmFsdWUpID0+XHJcbiAgICAgICAgICAgICAgKHZhbHVlLmxlbmd0aCA+PSA2ICYmIHZhbHVlLmVuZHNXaXRoKCcuanNvbicpKSB8fFxyXG4gICAgICAgICAgICAgICh2YWx1ZS5sZW5ndGggPj0gNSAmJiB2YWx1ZS5lbmRzV2l0aCgnLnN2ZycpKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOlxyXG4gICAgICAgICAgICAgICAgICAnVGhlIHZhbHVlIG11c3QgYmUgYSBzdHJpbmcgdGhhdCBlbmRzIHdpdGggLmpzb24gb3IgLnN2ZydcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIClcclxuICAgICAgICAgIC5udWxsYWJsZSgpXHJcbiAgICAgIDogelxyXG4gICAgICAgICAgLnN0cmluZygpXHJcbiAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAucmVmaW5lKFxyXG4gICAgICAgICAgICAodmFsdWUpID0+XHJcbiAgICAgICAgICAgICAgKHZhbHVlLmxlbmd0aCA+PSA2ICYmIHZhbHVlLmVuZHNXaXRoKCcuanNvbicpKSB8fFxyXG4gICAgICAgICAgICAgICh2YWx1ZS5sZW5ndGggPj0gNSAmJiB2YWx1ZS5lbmRzV2l0aCgnLnN2ZycpKSB8fFxyXG4gICAgICAgICAgICAgIFsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6XHJcbiAgICAgICAgICAgICAgICAgICdUaGUgdmFsdWUgbXVzdCBiZSBhIHN0cmluZyB0aGF0IGVuZHMgd2l0aCAuanNvbiBvciAuc3ZnJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgLnRyYW5zZm9ybSgodmFsdWUpID0+XHJcbiAgICAgICAgICAgICFbJ3VuZGVmaW5lZCcsICdudWxsJywgJyddLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogbnVsbFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgLm51bGxhYmxlKCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBpbnN0cmAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgb3B0aW9uc2AgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGluc3RyXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBpbnN0cmBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgaW5zdHIoKSB7XHJcbiAgICByZXR1cm4gdi5jaGFydENvbmZpZygpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgb3B0aW9uc2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgb3B0aW9uc2AgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIG9wdGlvbnNcclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYG9wdGlvbnNgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIG9wdGlvbnMoKSB7XHJcbiAgICByZXR1cm4gdi5jaGFydENvbmZpZygpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgc3ZnYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYS5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoYXQgdGhlIHNjaGVtYSB3aWxsIGFjY2VwdCBvYmplY3QgdmFsdWVzXHJcbiAgICogb3IgdHJpbW1lZCBzdHJpbmcgdmFsdWVzIHRoYXQgY29udGFpbiAnPHN2Zycgb3IgJzw/eG1sJyBlbGVtZW50cyBhbmQgbnVsbC5cclxuICAgKiBUaGUgJ3VuZGVmaW5lZCcsICdudWxsJywgYW5kICcnIHZhbHVlcyB3aWxsIGJlIHRyYW5zZm9ybWVkIHRvIG51bGwuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gc3ZnXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBzdmdgIG9wdGlvbi5cclxuICAgKi9cclxuICBzdmcoKSB7XHJcbiAgICByZXR1cm4gelxyXG4gICAgICAuc3RyaW5nKClcclxuICAgICAgLnRyaW0oKVxyXG4gICAgICAucmVmaW5lKFxyXG4gICAgICAgICh2YWx1ZSkgPT5cclxuICAgICAgICAgIHZhbHVlLmluZGV4T2YoJzxzdmcnKSA+PSAwIHx8XHJcbiAgICAgICAgICB2YWx1ZS5pbmRleE9mKCc8P3htbCcpID49IDAgfHxcclxuICAgICAgICAgIFsnZmFsc2UnLCAndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6XHJcbiAgICAgICAgICAgICAgXCJUaGUgdmFsdWUgbXVzdCBiZSBhIHN0cmluZyB0aGF0IGNvbnRhaW5zICc8c3ZnJyBvciAnPD94bWwnXCJcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIClcclxuICAgICAgLnRyYW5zZm9ybSgodmFsdWUpID0+XHJcbiAgICAgICAgIVsnZmFsc2UnLCAndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpID8gdmFsdWUgOiBudWxsXHJcbiAgICAgIClcclxuICAgICAgLm51bGxhYmxlKCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBvdXRmaWxlYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsIHN0cmljdGVyXHJcbiAgICogY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhhdDpcclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIHRydWUsIHRoZSBzY2hlbWEgd2lsbCBhY2NlcHQgdHJpbW1lZCBzdHJpbmcgdmFsdWVzXHJcbiAgICogdGhhdCBlbmQgd2l0aCAnLmpwZWcnLCAnLmpwZycsICcucG5nJywgJy5wZGYnLCBvciAnLnN2ZycsIGFyZSBhdCBsZWFzdCBvbmVcclxuICAgKiBjaGFyYWN0ZXIgbG9uZyBleGNsdWRpbmcgdGhlIGV4dGVuc2lvbiwgb3IgbnVsbC5cclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIGZhbHNlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IHRyaW1tZWQgc3RyaW5nIHZhbHVlc1xyXG4gICAqIHRoYXQgZW5kIHdpdGggJy5qcGVnJywgJy5qcGcnLCAnLnBuZycsICcucGRmJywgb3IgJy5zdmcnLCBhcmUgYXQgbGVhc3Qgb25lXHJcbiAgICogY2hhcmFjdGVyIGxvbmcgZXhjbHVkaW5nIHRoZSBleHRlbnNpb24gYW5kIHdpbGwgYmUgbnVsbCBpZiB0aGUgcHJvdmlkZWRcclxuICAgKiB2YWx1ZSBpcyBudWxsLCAndW5kZWZpbmVkJywgJ251bGwnLCBvciAnJy5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBvdXRmaWxlXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBvdXRmaWxlYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICBvdXRmaWxlKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gc3RyaWN0Q2hlY2tcclxuICAgICAgPyB6XHJcbiAgICAgICAgICAuc3RyaW5nKClcclxuICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgIC5yZWZpbmUoXHJcbiAgICAgICAgICAgICh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgICAodmFsdWUubGVuZ3RoID49IDYgJiYgdmFsdWUuZW5kc1dpdGgoJy5qcGVnJykpIHx8XHJcbiAgICAgICAgICAgICAgKHZhbHVlLmxlbmd0aCA+PSA1ICYmXHJcbiAgICAgICAgICAgICAgICAodmFsdWUuZW5kc1dpdGgoJy5qcGcnKSB8fFxyXG4gICAgICAgICAgICAgICAgICB2YWx1ZS5lbmRzV2l0aCgnLnBuZycpIHx8XHJcbiAgICAgICAgICAgICAgICAgIHZhbHVlLmVuZHNXaXRoKCcucGRmJykgfHxcclxuICAgICAgICAgICAgICAgICAgdmFsdWUuZW5kc1dpdGgoJy5zdmcnKSkpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6XHJcbiAgICAgICAgICAgICAgICAgICdUaGUgdmFsdWUgbXVzdCBiZSBhIHN0cmluZyB0aGF0IGVuZHMgd2l0aCAuanBlZywgLmpwZywgLnBuZywgLnBkZiwgb3IgLnN2ZydcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIClcclxuICAgICAgICAgIC5udWxsYWJsZSgpXHJcbiAgICAgIDogelxyXG4gICAgICAgICAgLnN0cmluZygpXHJcbiAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAucmVmaW5lKFxyXG4gICAgICAgICAgICAodmFsdWUpID0+XHJcbiAgICAgICAgICAgICAgKHZhbHVlLmxlbmd0aCA+PSA2ICYmIHZhbHVlLmVuZHNXaXRoKCcuanBlZycpKSB8fFxyXG4gICAgICAgICAgICAgICh2YWx1ZS5sZW5ndGggPj0gNSAmJlxyXG4gICAgICAgICAgICAgICAgKHZhbHVlLmVuZHNXaXRoKCcuanBnJykgfHxcclxuICAgICAgICAgICAgICAgICAgdmFsdWUuZW5kc1dpdGgoJy5wbmcnKSB8fFxyXG4gICAgICAgICAgICAgICAgICB2YWx1ZS5lbmRzV2l0aCgnLnBkZicpIHx8XHJcbiAgICAgICAgICAgICAgICAgIHZhbHVlLmVuZHNXaXRoKCcuc3ZnJykpKSB8fFxyXG4gICAgICAgICAgICAgIFsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6XHJcbiAgICAgICAgICAgICAgICAgICdUaGUgdmFsdWUgbXVzdCBiZSBhIHN0cmluZyB0aGF0IGVuZHMgd2l0aCAuanBlZywgLmpwZywgLnBuZywgLnBkZiwgb3IgLnN2ZydcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIClcclxuICAgICAgICAgIC50cmFuc2Zvcm0oKHZhbHVlKSA9PlxyXG4gICAgICAgICAgICAhWyd1bmRlZmluZWQnLCAnbnVsbCcsICcnXS5pbmNsdWRlcyh2YWx1ZSkgPyB2YWx1ZSA6IG51bGxcclxuICAgICAgICAgIClcclxuICAgICAgICAgIC5udWxsYWJsZSgpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgdHlwZWAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbCBzdHJpY3RlclxyXG4gICAqIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBlbnVtYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gdHlwZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgdHlwZWBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgdHlwZShzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuZW51bShbJ2pwZWcnLCAnanBnJywgJ3BuZycsICdwZGYnLCAnc3ZnJ10sIHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGNvbnN0cmAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbCBzdHJpY3RlclxyXG4gICAqIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBlbnVtYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gY29uc3RyXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBjb25zdHJgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGNvbnN0cihzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuZW51bShcclxuICAgICAgWydjaGFydCcsICdzdG9ja0NoYXJ0JywgJ21hcENoYXJ0JywgJ2dhbnR0Q2hhcnQnXSxcclxuICAgICAgc3RyaWN0Q2hlY2tcclxuICAgICk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBiNjRgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWwgc3RyaWN0ZXJcclxuICAgKiBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgYm9vbGVhbmAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGI2NFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgYjY0YCBvcHRpb24uXHJcbiAgICovXHJcbiAgYjY0KHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYG5vRG93bmxvYWRgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgYm9vbGVhbmAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIG5vRG93bmxvYWRcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYG5vRG93bmxvYWRgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIG5vRG93bmxvYWQoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LmJvb2xlYW4oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgZGVmYXVsdEhlaWdodGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBwb3NpdGl2ZU51bWAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGRlZmF1bHRIZWlnaHRcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgZGVmYXVsdEhlaWdodGAgb3B0aW9uLlxyXG4gICAqL1xyXG4gIGRlZmF1bHRIZWlnaHQoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnBvc2l0aXZlTnVtKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGRlZmF1bHRXaWR0aGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBwb3NpdGl2ZU51bWAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGRlZmF1bHRXaWR0aFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGBkZWZhdWx0V2lkdGhgIG9wdGlvbi5cclxuICAgKi9cclxuICBkZWZhdWx0V2lkdGgoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnBvc2l0aXZlTnVtKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGRlZmF1bHRTY2FsZWAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoYXQ6XHJcbiAgICpcclxuICAgKiAtIFdoZW4gYHN0cmljdENoZWNrYCBpcyB0cnVlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IG51bWJlciB2YWx1ZXMgdGhhdFxyXG4gICAqIGFyZSBiZXR3ZWVuIDAuMSBhbmQgNSAoaW5jbHVzaXZlKS5cclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIGZhbHNlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IG51bWJlciB2YWx1ZXNcclxuICAgKiBhbmQgc3RyaW5naWZpZWQgbnVtYmVyIHZhbHVlcyB0aGF0IGFyZSBiZXR3ZWVuIDAuMSBhbmQgNSAoaW5jbHVzaXZlKSwgbnVsbCxcclxuICAgKiAndW5kZWZpbmVkJywgJ251bGwnLCBhbmQgJycgd2hpY2ggd2lsbCBiZSB0cmFuc2Zvcm1lZCB0byBudWxsLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGRlZmF1bHRTY2FsZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGBkZWZhdWx0U2NhbGVgIG9wdGlvbi5cclxuICAgKi9cclxuICBkZWZhdWx0U2NhbGUoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiBzdHJpY3RDaGVja1xyXG4gICAgICA/IHoubnVtYmVyKCkuZ3RlKDAuMSkubHRlKDUpXHJcbiAgICAgIDogelxyXG4gICAgICAgICAgLnVuaW9uKFtcclxuICAgICAgICAgICAgelxyXG4gICAgICAgICAgICAgIC5zdHJpbmcoKVxyXG4gICAgICAgICAgICAgIC50cmltKClcclxuICAgICAgICAgICAgICAucmVmaW5lKFxyXG4gICAgICAgICAgICAgICAgKHZhbHVlKSA9PlxyXG4gICAgICAgICAgICAgICAgICAoIWlzTmFOKE51bWJlcih2YWx1ZSkpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgIT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgICAgICAhdmFsdWUuc3RhcnRzV2l0aCgnWycpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHZhbHVlKSA+PSAwLjEgJiZcclxuICAgICAgICAgICAgICAgICAgICBOdW1iZXIodmFsdWUpIDw9IDUpIHx8XHJcbiAgICAgICAgICAgICAgICAgIFsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6ICdUaGUgdmFsdWUgbXVzdCBiZSB3aXRoaW4gYSAwLjEgYW5kIDUuMCByYW5nZSdcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAudHJhbnNmb3JtKCh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgICAgICFbJ3VuZGVmaW5lZCcsICdudWxsJywgJyddLmluY2x1ZGVzKHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICA/IE51bWJlcih2YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgOiBudWxsXHJcbiAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgei5udW1iZXIoKS5ndGUoMC4xKS5sdGUoNSlcclxuICAgICAgICAgIF0pXHJcbiAgICAgICAgICAubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGhlaWdodGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbCBzdHJpY3RlclxyXG4gICAqIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgYSBudWxsYWJsZSBgZGVmYXVsdEhlaWdodGBcclxuICAgKiB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gaGVpZ2h0XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBoZWlnaHRgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGhlaWdodChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHRoaXMuZGVmYXVsdEhlaWdodChzdHJpY3RDaGVjaykubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHdpZHRoYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsIHN0cmljdGVyXHJcbiAgICogY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyBhIG51bGxhYmxlIGBkZWZhdWx0V2lkdGhgXHJcbiAgICogdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIHdpZHRoXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGB3aWR0aGBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgd2lkdGgoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB0aGlzLmRlZmF1bHRXaWR0aChzdHJpY3RDaGVjaykubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHNjYWxlYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsIHN0cmljdGVyXHJcbiAgICogY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyBhIG51bGxhYmxlIGBkZWZhdWx0U2NhbGVgXHJcbiAgICogdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIHNjYWxlXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBzY2FsZWBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgc2NhbGUoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB0aGlzLmRlZmF1bHRTY2FsZShzdHJpY3RDaGVjaykubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGdsb2JhbE9wdGlvbnNgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGFkZGl0aW9uYWxPcHRpb25zYFxyXG4gICAqIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBnbG9iYWxPcHRpb25zXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmdcclxuICAgKiB0aGUgYGdsb2JhbE9wdGlvbnNgIG9wdGlvbi5cclxuICAgKi9cclxuICBnbG9iYWxPcHRpb25zKCkge1xyXG4gICAgcmV0dXJuIHYuYWRkaXRpb25hbE9wdGlvbnMoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHRoZW1lT3B0aW9uc2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgYWRkaXRpb25hbE9wdGlvbnNgXHJcbiAgICogdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIHRoZW1lT3B0aW9uc1xyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGB0aGVtZU9wdGlvbnNgIG9wdGlvbi5cclxuICAgKi9cclxuICB0aGVtZU9wdGlvbnMoKSB7XHJcbiAgICByZXR1cm4gdi5hZGRpdGlvbmFsT3B0aW9ucygpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgYmF0Y2hgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWwgc3RyaWN0ZXJcclxuICAgKiBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgc3RyaW5nYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gYmF0Y2hcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYGJhdGNoYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICBiYXRjaChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuc3RyaW5nKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHJhc3Rlcml6YXRpb25UaW1lb3V0YCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoXHJcbiAgICogYW4gb3B0aW9uYWwgc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYG5vbk5lZ2F0aXZlTnVtYFxyXG4gICAqIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiByYXN0ZXJpemF0aW9uVGltZW91dFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGByYXN0ZXJpemF0aW9uVGltZW91dGAgb3B0aW9uLlxyXG4gICAqL1xyXG4gIHJhc3Rlcml6YXRpb25UaW1lb3V0KHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ub25OZWdhdGl2ZU51bShzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBhbGxvd0NvZGVFeGVjdXRpb25gIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGhcclxuICAgKiBhbiBvcHRpb25hbCBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgYm9vbGVhbmAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGFsbG93Q29kZUV4ZWN1dGlvblxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGBhbGxvd0NvZGVFeGVjdXRpb25gIG9wdGlvbi5cclxuICAgKi9cclxuICBhbGxvd0NvZGVFeGVjdXRpb24oc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LmJvb2xlYW4oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgYWxsb3dGaWxlUmVzb3VyY2VzYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoXHJcbiAgICogYW4gb3B0aW9uYWwgc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGJvb2xlYW5gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBhbGxvd0ZpbGVSZXNvdXJjZXNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgYWxsb3dGaWxlUmVzb3VyY2VzYCBvcHRpb24uXHJcbiAgICovXHJcbiAgYWxsb3dGaWxlUmVzb3VyY2VzKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGN1c3RvbUNvZGVgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgc3RyaW5nYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gY3VzdG9tQ29kZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgY3VzdG9tQ29kZWBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgY3VzdG9tQ29kZShzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuc3RyaW5nKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGNhbGxiYWNrYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYHN0cmluZ2AgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGNhbGxiYWNrXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBjYWxsYmFja2BcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgY2FsbGJhY2soc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnN0cmluZyhzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGByZXNvdXJjZXNgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGF0OlxyXG4gICAqXHJcbiAgICogLSBXaGVuIGBzdHJpY3RDaGVja2AgaXMgdHJ1ZSwgdGhlIHNjaGVtYSB3aWxsIGFjY2VwdCBhIHBhcnRpYWwgb2JqZWN0XHJcbiAgICogd2l0aCBhbGxvd2VkIHByb3BlcnRpZXMgYGpzYCwgYGNzc2AsIGFuZCBgZmlsZXNgIHdoZXJlIGVhY2ggb2YgdGhlIGFsbG93ZWRcclxuICAgKiBwcm9wZXJ0aWVzIGNhbiBiZSBudWxsLCBzdHJpbmdpZmllZCB2ZXJzaW9uIG9mIHRoZSBvYmplY3QsIHN0cmluZyB0aGF0IGVuZHNcclxuICAgKiB3aXRoIHRoZSAnLmpzb24nLCBhbmQgbnVsbC5cclxuICAgKlxyXG4gICAqIC0gV2hlbiBgc3RyaWN0Q2hlY2tgIGlzIGZhbHNlLCB0aGUgc2NoZW1hIHdpbGwgYWNjZXB0IGEgc3RyaW5naWZpZWQgdmVyc2lvblxyXG4gICAqIG9mIGEgcGFydGlhbCBvYmplY3Qgd2l0aCBhbGxvd2VkIHByb3BlcnRpZXMgYGpzYCwgYGNzc2AsIGFuZCBgZmlsZXNgIHdoZXJlXHJcbiAgICogZWFjaCBvZiB0aGUgYWxsb3dlZCBwcm9wZXJ0aWVzIGNhbiBiZSBudWxsLCBzdHJpbmcgdGhhdCBlbmRzIHdpdGggdGhlXHJcbiAgICogJy5qc29uJywgYW5kIHdpbGwgYmUgbnVsbCBpZiB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgJ3VuZGVmaW5lZCcsICdudWxsJ1xyXG4gICAqIG9yICcnLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIHJlc291cmNlc1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgcmVzb3VyY2VzYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICByZXNvdXJjZXMoc3RyaWN0Q2hlY2spIHtcclxuICAgIGNvbnN0IG9iamVjdFNjaGVtYSA9IHpcclxuICAgICAgLm9iamVjdCh7XHJcbiAgICAgICAganM6IHYuc3RyaW5nKGZhbHNlKSxcclxuICAgICAgICBjc3M6IHYuc3RyaW5nKGZhbHNlKSxcclxuICAgICAgICBmaWxlczogdlxyXG4gICAgICAgICAgLnN0cmluZ0FycmF5KFxyXG4gICAgICAgICAgICAodmFsdWUpID0+ICFbJ3VuZGVmaW5lZCcsICdudWxsJywgJyddLmluY2x1ZGVzKHZhbHVlKSxcclxuICAgICAgICAgICAgJywnLFxyXG4gICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAubnVsbGFibGUoKVxyXG4gICAgICB9KVxyXG4gICAgICAucGFydGlhbCgpO1xyXG5cclxuICAgIGNvbnN0IHN0cmluZ1NjaGVtYTEgPSB6XHJcbiAgICAgIC5zdHJpbmcoKVxyXG4gICAgICAudHJpbSgpXHJcbiAgICAgIC5yZWZpbmUoXHJcbiAgICAgICAgKHZhbHVlKSA9PlxyXG4gICAgICAgICAgKHZhbHVlLnN0YXJ0c1dpdGgoJ3snKSAmJiB2YWx1ZS5lbmRzV2l0aCgnfScpKSB8fFxyXG4gICAgICAgICAgKHZhbHVlLmxlbmd0aCA+PSA2ICYmIHZhbHVlLmVuZHNXaXRoKCcuanNvbicpKSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlOlxyXG4gICAgICAgICAgICAgIFwiVGhlIHZhbHVlIG11c3QgYmUgYSBzdHJpbmcgdGhhdCBzdGFydHMgd2l0aCAneycgYW5kIGVuZHMgd2l0aCAnfVwiXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG5cclxuICAgIGNvbnN0IHN0cmluZ1NjaGVtYTIgPSB6XHJcbiAgICAgIC5zdHJpbmcoKVxyXG4gICAgICAudHJpbSgpXHJcbiAgICAgIC5yZWZpbmUoXHJcbiAgICAgICAgKHZhbHVlKSA9PlxyXG4gICAgICAgICAgKHZhbHVlLnN0YXJ0c1dpdGgoJ3snKSAmJiB2YWx1ZS5lbmRzV2l0aCgnfScpKSB8fFxyXG4gICAgICAgICAgKHZhbHVlLmxlbmd0aCA+PSA2ICYmIHZhbHVlLmVuZHNXaXRoKCcuanNvbicpKSB8fFxyXG4gICAgICAgICAgWyd1bmRlZmluZWQnLCAnbnVsbCcsICcnXS5pbmNsdWRlcyh2YWx1ZSksXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ1RoZSB2YWx1ZSBtdXN0IGJlIGEgc3RyaW5nIHRoYXQgZW5kcyB3aXRoIC5qc29uJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgICAudHJhbnNmb3JtKCh2YWx1ZSkgPT5cclxuICAgICAgICAhWyd1bmRlZmluZWQnLCAnbnVsbCcsICcnXS5pbmNsdWRlcyh2YWx1ZSkgPyB2YWx1ZSA6IG51bGxcclxuICAgICAgKTtcclxuXHJcbiAgICByZXR1cm4gc3RyaWN0Q2hlY2tcclxuICAgICAgPyB6LnVuaW9uKFtvYmplY3RTY2hlbWEsIHN0cmluZ1NjaGVtYTFdKS5udWxsYWJsZSgpXHJcbiAgICAgIDogei51bmlvbihbb2JqZWN0U2NoZW1hLCBzdHJpbmdTY2hlbWEyXSkubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGxvYWRDb25maWdgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgc3RyaW5nYCB2YWxpZGF0b3IuXHJcbiAgICogQWRkaXRpb25hbGx5LCBpdCBtdXN0IGJlIGEgc3RyaW5nIHRoYXQgZW5kcyB3aXRoICcuanNvbicuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gbG9hZENvbmZpZ1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgbG9hZENvbmZpZ2BcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgbG9hZENvbmZpZyhzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHZcclxuICAgICAgLnN0cmluZyhzdHJpY3RDaGVjaylcclxuICAgICAgLnJlZmluZShcclxuICAgICAgICAodmFsdWUpID0+XHJcbiAgICAgICAgICB2YWx1ZSA9PT0gbnVsbCB8fCAodmFsdWUubGVuZ3RoID49IDYgJiYgdmFsdWUuZW5kc1dpdGgoJy5qc29uJykpLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6ICdUaGUgdmFsdWUgbXVzdCBiZSBhIHN0cmluZyB0aGF0IGVuZHMgd2l0aCAuanNvbidcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBjcmVhdGVDb25maWdgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgbG9hZENvbmZpZ2AgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGNyZWF0ZUNvbmZpZ1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGBjcmVhdGVDb25maWdgIG9wdGlvbi5cclxuICAgKi9cclxuICBjcmVhdGVDb25maWcoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB0aGlzLmxvYWRDb25maWcoc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgZW5hYmxlU2VydmVyYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGJvb2xlYW5gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBlbmFibGVTZXJ2ZXJcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgZW5hYmxlU2VydmVyYCBvcHRpb24uXHJcbiAgICovXHJcbiAgZW5hYmxlU2VydmVyKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGhvc3RgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWwgc3RyaWN0ZXJcclxuICAgKiBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgc3RyaW5nYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gaG9zdFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgaG9zdGBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgaG9zdChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuc3RyaW5nKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHBvcnRgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWwgc3RyaWN0ZXJcclxuICAgKiBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgbm9uTmVnYXRpdmVOdW1gXHJcbiAgICogdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIHBvcnRcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYHBvcnRgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIHBvcnQoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2Lm5vbk5lZ2F0aXZlTnVtKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHVwbG9hZExpbWl0YCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYHBvc2l0aXZlTnVtYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gdXBsb2FkTGltaXRcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYHVwbG9hZExpbWl0YFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICB1cGxvYWRMaW1pdChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYucG9zaXRpdmVOdW0oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgc2VydmVyQmVuY2htYXJraW5nYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoXHJcbiAgICogYW4gb3B0aW9uYWwgc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGJvb2xlYW5gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBzZXJ2ZXJCZW5jaG1hcmtpbmdcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgc2VydmVyQmVuY2htYXJraW5nYCBvcHRpb24uXHJcbiAgICovXHJcbiAgc2VydmVyQmVuY2htYXJraW5nKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHByb3h5SG9zdGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBzdHJpbmdgIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBwcm94eUhvc3RcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYHByb3h5SG9zdGBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgcHJveHlIb3N0KHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5zdHJpbmcoc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgcHJveHlQb3J0YCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyBhIG51bGxhYmxlIGBub25OZWdhdGl2ZU51bWBcclxuICAgKiB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gcHJveHlQb3J0XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBwcm94eVBvcnRgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIHByb3h5UG9ydChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYubm9uTmVnYXRpdmVOdW0oc3RyaWN0Q2hlY2spLm51bGxhYmxlKCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBwcm94eVRpbWVvdXRgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgbm9uTmVnYXRpdmVOdW1gXHJcbiAgICogdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIHByb3h5VGltZW91dFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGBwcm94eVRpbWVvdXRgIG9wdGlvbi5cclxuICAgKi9cclxuICBwcm94eVRpbWVvdXQoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2Lm5vbk5lZ2F0aXZlTnVtKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGVuYWJsZVJhdGVMaW1pdGluZ2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aFxyXG4gICAqIGFuIG9wdGlvbmFsIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBib29sZWFuYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gZW5hYmxlUmF0ZUxpbWl0aW5nXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmdcclxuICAgKiB0aGUgYGVuYWJsZVJhdGVMaW1pdGluZ2Agb3B0aW9uLlxyXG4gICAqL1xyXG4gIGVuYWJsZVJhdGVMaW1pdGluZyhzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuYm9vbGVhbihzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBtYXhSZXF1ZXN0c2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBub25OZWdhdGl2ZU51bWBcclxuICAgKiB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gbWF4UmVxdWVzdHNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYG1heFJlcXVlc3RzYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICBtYXhSZXF1ZXN0cyhzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYubm9uTmVnYXRpdmVOdW0oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgd2luZG93YCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsIHN0cmljdGVyXHJcbiAgICogY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYG5vbk5lZ2F0aXZlTnVtYFxyXG4gICAqIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiB3aW5kb3dcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYHdpbmRvd2BcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgd2luZG93KHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ub25OZWdhdGl2ZU51bShzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBkZWxheWAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbCBzdHJpY3RlclxyXG4gICAqIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBub25OZWdhdGl2ZU51bWBcclxuICAgKiB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gZGVsYXlcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYGRlbGF5YFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICBkZWxheShzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYubm9uTmVnYXRpdmVOdW0oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgdHJ1c3RQcm94eWAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBib29sZWFuYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gdHJ1c3RQcm94eVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgdHJ1c3RQcm94eWBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgdHJ1c3RQcm94eShzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuYm9vbGVhbihzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBza2lwS2V5YCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsIHN0cmljdGVyXHJcbiAgICogY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYHN0cmluZ2AgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIHNraXBLZXlcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYHNraXBLZXlgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIHNraXBLZXkoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnN0cmluZyhzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBza2lwVG9rZW5gIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgc3RyaW5nYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gc2tpcFRva2VuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBza2lwVG9rZW5gXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIHNraXBUb2tlbihzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuc3RyaW5nKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGVuYWJsZVNzbGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBib29sZWFuYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gZW5hYmxlU3NsXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBlbmFibGVTc2xgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGVuYWJsZVNzbChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuYm9vbGVhbihzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBzc2xGb3JjZWAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBib29sZWFuYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gc3NsRm9yY2VcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYHNzbEZvcmNlYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICBzc2xGb3JjZShzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuYm9vbGVhbihzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBzc2xQb3J0YCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsIHN0cmljdGVyXHJcbiAgICogY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYG5vbk5lZ2F0aXZlTnVtYFxyXG4gICAqIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBzc2xQb3J0XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBzc2xQb3J0YFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICBzc2xQb3J0KHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ub25OZWdhdGl2ZU51bShzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBzc2xDZXJ0UGF0aGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBzdHJpbmdgIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBzc2xDZXJ0UGF0aFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgc3NsQ2VydFBhdGhgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIHNzbENlcnRQYXRoKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5zdHJpbmcoc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgbWluV29ya2Vyc2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBwb3NpdGl2ZU51bWAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIG1pbldvcmtlcnNcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYG1pbldvcmtlcnNgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIG1pbldvcmtlcnMoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnBvc2l0aXZlTnVtKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYG1heFdvcmtlcnNgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgcG9zaXRpdmVOdW1gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBtYXhXb3JrZXJzXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBtYXhXb3JrZXJzYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICBtYXhXb3JrZXJzKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5wb3NpdGl2ZU51bShzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGB3b3JrTGltaXRgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgcG9zaXRpdmVOdW1gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiB3b3JrTGltaXRcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYHdvcmtMaW1pdGBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgd29ya0xpbWl0KHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5wb3NpdGl2ZU51bShzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBhY3F1aXJlVGltZW91dGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBub25OZWdhdGl2ZU51bWBcclxuICAgKiB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gYWNxdWlyZVRpbWVvdXRcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgYWNxdWlyZVRpbWVvdXRgIG9wdGlvbi5cclxuICAgKi9cclxuICBhY3F1aXJlVGltZW91dChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYubm9uTmVnYXRpdmVOdW0oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgY3JlYXRlVGltZW91dGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBub25OZWdhdGl2ZU51bWBcclxuICAgKiB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gY3JlYXRlVGltZW91dFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGBjcmVhdGVUaW1lb3V0YCBvcHRpb24uXHJcbiAgICovXHJcbiAgY3JlYXRlVGltZW91dChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYubm9uTmVnYXRpdmVOdW0oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgZGVzdHJveVRpbWVvdXRgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgbm9uTmVnYXRpdmVOdW1gXHJcbiAgICogdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGRlc3Ryb3lUaW1lb3V0XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmdcclxuICAgKiB0aGUgYGRlc3Ryb3lUaW1lb3V0YCBvcHRpb24uXHJcbiAgICovXHJcbiAgZGVzdHJveVRpbWVvdXQoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2Lm5vbk5lZ2F0aXZlTnVtKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGlkbGVUaW1lb3V0YCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYG5vbk5lZ2F0aXZlTnVtYFxyXG4gICAqIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBpZGxlVGltZW91dFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGBpZGxlVGltZW91dGAgb3B0aW9uLlxyXG4gICAqL1xyXG4gIGlkbGVUaW1lb3V0KHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ub25OZWdhdGl2ZU51bShzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBjcmVhdGVSZXRyeUludGVydmFsYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoXHJcbiAgICogYW4gb3B0aW9uYWwgc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYG5vbk5lZ2F0aXZlTnVtYFxyXG4gICAqIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBjcmVhdGVSZXRyeUludGVydmFsXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmdcclxuICAgKiB0aGUgYGNyZWF0ZVJldHJ5SW50ZXJ2YWxgIG9wdGlvbi5cclxuICAgKi9cclxuICBjcmVhdGVSZXRyeUludGVydmFsKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ub25OZWdhdGl2ZU51bShzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGByZWFwZXJJbnRlcnZhbGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBub25OZWdhdGl2ZU51bWBcclxuICAgKiB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gcmVhcGVySW50ZXJ2YWxcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgcmVhcGVySW50ZXJ2YWxgIG9wdGlvbi5cclxuICAgKi9cclxuICByZWFwZXJJbnRlcnZhbChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYubm9uTmVnYXRpdmVOdW0oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgcG9vbEJlbmNobWFya2luZ2AgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBib29sZWFuYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gcG9vbEJlbmNobWFya2luZ1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGBwb29sQmVuY2htYXJraW5nYCBvcHRpb24uXHJcbiAgICovXHJcbiAgcG9vbEJlbmNobWFya2luZyhzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuYm9vbGVhbihzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGByZXNvdXJjZXNJbnRlcnZhbGAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aFxyXG4gICAqIGFuIG9wdGlvbmFsIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBub25OZWdhdGl2ZU51bWBcclxuICAgKiB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gcmVzb3VyY2VzSW50ZXJ2YWxcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgcmVzb3VyY2VzSW50ZXJ2YWxgIG9wdGlvbi5cclxuICAgKi9cclxuICByZXNvdXJjZXNJbnRlcnZhbChzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYubm9uTmVnYXRpdmVOdW0oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgbG9nTGV2ZWxgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGF0OlxyXG4gICAqXHJcbiAgICogLSBXaGVuIGBzdHJpY3RDaGVja2AgaXMgdHJ1ZSwgdGhlIHNjaGVtYSB3aWxsIGFjY2VwdCBpbnRlZ2VyIG51bWJlciB2YWx1ZXNcclxuICAgKiB0aGF0IGFyZSBiZXR3ZWVuIDAgYW5kIDUgKGluY2x1c2l2ZSkuXHJcbiAgICpcclxuICAgKiAtIFdoZW4gYHN0cmljdENoZWNrYCBpcyBmYWxzZSwgdGhlIHNjaGVtYSB3aWxsIGFjY2VwdCBpbnRlZ2VyIG51bWJlciB2YWx1ZXNcclxuICAgKiBhbmQgc3RyaW5naWZpZWQgaW50ZWdlciBudW1iZXIgdmFsdWVzIHRoYXQgYXJlIGJldHdlZW4gMSBhbmQgNSAoaW5jbHVzaXZlKSxcclxuICAgKiBudWxsLCAndW5kZWZpbmVkJywgJ251bGwnLCBhbmQgJycgd2hpY2ggd2lsbCBiZSB0cmFuc2Zvcm1lZCB0byBudWxsLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGxvZ0xldmVsXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBsb2dMZXZlbGBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgbG9nTGV2ZWwoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiBzdHJpY3RDaGVja1xyXG4gICAgICA/IHoubnVtYmVyKCkuaW50KCkuZ3RlKDApLmx0ZSg1KVxyXG4gICAgICA6IHpcclxuICAgICAgICAgIC51bmlvbihbXHJcbiAgICAgICAgICAgIHpcclxuICAgICAgICAgICAgICAuc3RyaW5nKClcclxuICAgICAgICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgICAgICAgLnJlZmluZShcclxuICAgICAgICAgICAgICAgICh2YWx1ZSkgPT5cclxuICAgICAgICAgICAgICAgICAgKCFpc05hTihOdW1iZXIodmFsdWUpKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlICE9PSB0cnVlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIXZhbHVlLnN0YXJ0c1dpdGgoJ1snKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIE51bWJlci5pc0ludGVnZXIoTnVtYmVyKHZhbHVlKSkgJiZcclxuICAgICAgICAgICAgICAgICAgICBOdW1iZXIodmFsdWUpID49IDAgJiZcclxuICAgICAgICAgICAgICAgICAgICBOdW1iZXIodmFsdWUpIDw9IDUpIHx8XHJcbiAgICAgICAgICAgICAgICAgIFsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6ICdUaGUgdmFsdWUgbXVzdCBiZSB3aXRoaW4gYSAwIGFuZCA1IHJhbmdlJ1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIC50cmFuc2Zvcm0oKHZhbHVlKSA9PlxyXG4gICAgICAgICAgICAgICAgIVsndW5kZWZpbmVkJywgJ251bGwnLCAnJ10uaW5jbHVkZXModmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgID8gTnVtYmVyKHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB6Lm51bWJlcigpLmludCgpLmd0ZSgwKS5sdGUoNSlcclxuICAgICAgICAgIF0pXHJcbiAgICAgICAgICAubnVsbGFibGUoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGxvZ0ZpbGVgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWwgc3RyaWN0ZXJcclxuICAgKiBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgc3RyaW5nYCB2YWxpZGF0b3IuXHJcbiAgICogQWRkaXRpb25hbGx5LCBpdCBtdXN0IGJlIGEgc3RyaW5nIHRoYXQgZW5kcyB3aXRoICcubG9nJy5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBsb2dGaWxlXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGBsb2dGaWxlYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICBsb2dGaWxlKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdlxyXG4gICAgICAuc3RyaW5nKHN0cmljdENoZWNrKVxyXG4gICAgICAucmVmaW5lKFxyXG4gICAgICAgICh2YWx1ZSkgPT5cclxuICAgICAgICAgIHZhbHVlID09PSBudWxsIHx8ICh2YWx1ZS5sZW5ndGggPj0gNSAmJiB2YWx1ZS5lbmRzV2l0aCgnLmxvZycpKSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwYXJhbXM6IHtcclxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiAnVGhlIHZhbHVlIG11c3QgYmUgYSBzdHJpbmcgdGhhdCBlbmRzIHdpdGggLmxvZydcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBsb2dEZXN0YCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsIHN0cmljdGVyXHJcbiAgICogY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYHN0cmluZ2AgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGxvZ0Rlc3RcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYGxvZ0Rlc3RgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGxvZ0Rlc3Qoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnN0cmluZyhzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBsb2dUb0NvbnNvbGVgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgYm9vbGVhbmAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGxvZ1RvQ29uc29sZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGBsb2dUb0NvbnNvbGVgIG9wdGlvbi5cclxuICAgKi9cclxuICBsb2dUb0NvbnNvbGUoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LmJvb2xlYW4oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgbG9nVG9GaWxlYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGJvb2xlYW5gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBsb2dUb0ZpbGVcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYGxvZ1RvRmlsZWBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgbG9nVG9GaWxlKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGVuYWJsZVVpYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGJvb2xlYW5gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBlbmFibGVVaVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgZW5hYmxlVWlgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGVuYWJsZVVpKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYHVpUm91dGVgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgc3RhcnRzV2l0aGAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIHVpUm91dGVcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYHVpUm91dGVgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIHVpUm91dGUoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LnN0YXJ0c1dpdGgoWycvJ10sIHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYG5vZGVFbnZgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgZW51bWAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIG5vZGVFbnZcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYG5vZGVFbnZgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIG5vZGVFbnYoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LmVudW0oWydkZXZlbG9wbWVudCcsICdwcm9kdWN0aW9uJywgJ3Rlc3QnXSwgc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgbGlzdGVuVG9Qcm9jZXNzRXhpdHNgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGhcclxuICAgKiBhbiBvcHRpb25hbCBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgYm9vbGVhbmAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGxpc3RlblRvUHJvY2Vzc0V4aXRzXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmdcclxuICAgKiB0aGUgYGxpc3RlblRvUHJvY2Vzc0V4aXRzYCBvcHRpb24uXHJcbiAgICovXHJcbiAgbGlzdGVuVG9Qcm9jZXNzRXhpdHMoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LmJvb2xlYW4oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgbm9Mb2dvYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGJvb2xlYW5gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBub0xvZ29cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYG5vTG9nb2BcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgbm9Mb2dvKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGhhcmRSZXNldFBhZ2VgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgYm9vbGVhbmAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGhhcmRSZXNldFBhZ2VcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZ1xyXG4gICAqIHRoZSBgaGFyZFJlc2V0UGFnZWAgb3B0aW9uLlxyXG4gICAqL1xyXG4gIGhhcmRSZXNldFBhZ2Uoc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LmJvb2xlYW4oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgYnJvd3NlclNoZWxsTW9kZWAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBib29sZWFuYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gYnJvd3NlclNoZWxsTW9kZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nXHJcbiAgICogdGhlIGBicm93c2VyU2hlbGxNb2RlYCBvcHRpb24uXHJcbiAgICovXHJcbiAgYnJvd3NlclNoZWxsTW9kZShzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuYm9vbGVhbihzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGB2YWxpZGF0aW9uYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGJvb2xlYW5gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiB2YWxpZGF0aW9uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmcgdGhlIGB2YWxpZGF0aW9uYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICB2YWxpZGF0aW9uKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGVuYWJsZURlYnVnYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGJvb2xlYW5gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBlbmFibGVEZWJ1Z1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgZW5hYmxlRGVidWdgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGVuYWJsZURlYnVnKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGhlYWRsZXNzYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGJvb2xlYW5gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBoZWFkbGVzc1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgaGVhZGxlc3NgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGhlYWRsZXNzKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGRldnRvb2xzYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYGJvb2xlYW5gIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBkZXZ0b29sc1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgZGV2dG9vbHNgXHJcbiAgICogb3B0aW9uLlxyXG4gICAqL1xyXG4gIGRldnRvb2xzKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ib29sZWFuKHN0cmljdENoZWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYGxpc3RlblRvQ29uc29sZWAgdmFsaWRhdG9yIHRoYXQgcmV0dXJucyBhIFpvZCBzY2hlbWEgd2l0aCBhbiBvcHRpb25hbFxyXG4gICAqIHN0cmljdGVyIGNoZWNrIGJhc2VkIG9uIHRoZSBgc3RyaWN0Q2hlY2tgIHBhcmFtZXRlci5cclxuICAgKlxyXG4gICAqIFRoZSB2YWxpZGF0aW9uIHNjaGVtYSBlbnN1cmVzIHRoZSBzYW1lIHdvcmsgYXMgdGhlIGBib29sZWFuYCB2YWxpZGF0b3IuXHJcbiAgICpcclxuICAgKiBAZnVuY3Rpb24gbGlzdGVuVG9Db25zb2xlXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmdcclxuICAgKiB0aGUgYGxpc3RlblRvQ29uc29sZWAgb3B0aW9uLlxyXG4gICAqL1xyXG4gIGxpc3RlblRvQ29uc29sZShzdHJpY3RDaGVjaykge1xyXG4gICAgcmV0dXJuIHYuYm9vbGVhbihzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBkdW1waW9gIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWwgc3RyaWN0ZXJcclxuICAgKiBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgYm9vbGVhbmAgdmFsaWRhdG9yLlxyXG4gICAqXHJcbiAgICogQGZ1bmN0aW9uIGR1bXBpb1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RDaGVjayAtIERldGVybWluZXMgaWYgc3RyaWN0ZXIgdmFsaWRhdGlvbiBzaG91bGRcclxuICAgKiBiZSBhcHBsaWVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3ouWm9kU2NoZW1hfSBBIFpvZCBzY2hlbWEgb2JqZWN0IGZvciB2YWxpZGF0aW5nIHRoZSBgZHVtcGlvYFxyXG4gICAqIG9wdGlvbi5cclxuICAgKi9cclxuICBkdW1waW8oc3RyaWN0Q2hlY2spIHtcclxuICAgIHJldHVybiB2LmJvb2xlYW4oc3RyaWN0Q2hlY2spO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBgc2xvd01vYCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsIHN0cmljdGVyXHJcbiAgICogY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYG5vbk5lZ2F0aXZlTnVtYFxyXG4gICAqIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBzbG93TW9cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYHNsb3dNb2BcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgc2xvd01vKHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ub25OZWdhdGl2ZU51bShzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGBkZWJ1Z2dpbmdQb3J0YCB2YWxpZGF0b3IgdGhhdCByZXR1cm5zIGEgWm9kIHNjaGVtYSB3aXRoIGFuIG9wdGlvbmFsXHJcbiAgICogc3RyaWN0ZXIgY2hlY2sgYmFzZWQgb24gdGhlIGBzdHJpY3RDaGVja2AgcGFyYW1ldGVyLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbGlkYXRpb24gc2NoZW1hIGVuc3VyZXMgdGhlIHNhbWUgd29yayBhcyB0aGUgYG5vbk5lZ2F0aXZlTnVtYFxyXG4gICAqIHZhbGlkYXRvci5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiBkZWJ1Z2dpbmdQb3J0XHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0cmljdENoZWNrIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uIHNob3VsZFxyXG4gICAqIGJlIGFwcGxpZWQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7ei5ab2RTY2hlbWF9IEEgWm9kIHNjaGVtYSBvYmplY3QgZm9yIHZhbGlkYXRpbmdcclxuICAgKiB0aGUgYGRlYnVnZ2luZ1BvcnRgIG9wdGlvbi5cclxuICAgKi9cclxuICBkZWJ1Z2dpbmdQb3J0KHN0cmljdENoZWNrKSB7XHJcbiAgICByZXR1cm4gdi5ub25OZWdhdGl2ZU51bShzdHJpY3RDaGVjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGByZXF1ZXN0SWRgIHZhbGlkYXRvciB0aGF0IHJldHVybnMgYSBab2Qgc2NoZW1hIHdpdGggYW4gb3B0aW9uYWxcclxuICAgKiBzdHJpY3RlciBjaGVjayBiYXNlZCBvbiB0aGUgYHN0cmljdENoZWNrYCBwYXJhbWV0ZXIuXHJcbiAgICpcclxuICAgKiBUaGUgdmFsaWRhdGlvbiBzY2hlbWEgZW5zdXJlcyB0aGUgc2FtZSB3b3JrIGFzIHRoZSBgc3RyaW5nYCB2YWxpZGF0b3IuXHJcbiAgICogQWRkaXRpb25hbGx5LCBpdCBtdXN0IGJlIGEgc3RyaW5naWZpZWQgVVVJRCBvciBjYW4gYmUgbnVsbC5cclxuICAgKlxyXG4gICAqIEBmdW5jdGlvbiByZXF1ZXN0SWRcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RyaWN0Q2hlY2sgLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb24gc2hvdWxkXHJcbiAgICogYmUgYXBwbGllZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHt6LlpvZFNjaGVtYX0gQSBab2Qgc2NoZW1hIG9iamVjdCBmb3IgdmFsaWRhdGluZyB0aGUgYHJlcXVlc3RJZGBcclxuICAgKiBvcHRpb24uXHJcbiAgICovXHJcbiAgcmVxdWVzdElkKCkge1xyXG4gICAgcmV0dXJuIHpcclxuICAgICAgLnN0cmluZygpXHJcbiAgICAgIC51dWlkKHsgbWVzc2FnZTogJ1RoZSB2YWx1ZSBtdXN0IGJlIGEgc3RyaW5naWZpZWQgVVVJRCcgfSlcclxuICAgICAgLm51bGxhYmxlKCk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gU2NoZW1hIGZvciB0aGUgcHVwcGV0ZWVyIHNlY3Rpb24gb2Ygb3B0aW9uc1xyXG5jb25zdCBQdXBwZXRlZXJTY2hlbWEgPSAoc3RyaWN0Q2hlY2spID0+XHJcbiAgelxyXG4gICAgLm9iamVjdCh7XHJcbiAgICAgIGFyZ3M6IHZhbGlkYXRvcnMuYXJncyhzdHJpY3RDaGVjaylcclxuICAgIH0pXHJcbiAgICAucGFydGlhbCgpO1xyXG5cclxuLy8gU2NoZW1hIGZvciB0aGUgaGlnaGNoYXJ0cyBzZWN0aW9uIG9mIG9wdGlvbnNcclxuY29uc3QgSGlnaGNoYXJ0c1NjaGVtYSA9IChzdHJpY3RDaGVjaykgPT5cclxuICB6XHJcbiAgICAub2JqZWN0KHtcclxuICAgICAgdmVyc2lvbjogdmFsaWRhdG9ycy52ZXJzaW9uKHN0cmljdENoZWNrKSxcclxuICAgICAgY2RuVXJsOiB2YWxpZGF0b3JzLmNkblVybChzdHJpY3RDaGVjayksXHJcbiAgICAgIGZvcmNlRmV0Y2g6IHZhbGlkYXRvcnMuZm9yY2VGZXRjaChzdHJpY3RDaGVjayksXHJcbiAgICAgIGNhY2hlUGF0aDogdmFsaWRhdG9ycy5jYWNoZVBhdGgoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBjb3JlU2NyaXB0czogdmFsaWRhdG9ycy5jb3JlU2NyaXB0cyhzdHJpY3RDaGVjayksXHJcbiAgICAgIG1vZHVsZVNjcmlwdHM6IHZhbGlkYXRvcnMubW9kdWxlU2NyaXB0cyhzdHJpY3RDaGVjayksXHJcbiAgICAgIGluZGljYXRvclNjcmlwdHM6IHZhbGlkYXRvcnMuaW5kaWNhdG9yU2NyaXB0cyhzdHJpY3RDaGVjayksXHJcbiAgICAgIGN1c3RvbVNjcmlwdHM6IHZhbGlkYXRvcnMuY3VzdG9tU2NyaXB0cyhzdHJpY3RDaGVjaylcclxuICAgIH0pXHJcbiAgICAucGFydGlhbCgpO1xyXG5cclxuLy8gU2NoZW1hIGZvciB0aGUgZXhwb3J0IHNlY3Rpb24gb2Ygb3B0aW9uc1xyXG5jb25zdCBFeHBvcnRTY2hlbWEgPSAoc3RyaWN0Q2hlY2spID0+XHJcbiAgelxyXG4gICAgLm9iamVjdCh7XHJcbiAgICAgIGluZmlsZTogdmFsaWRhdG9ycy5pbmZpbGUoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBpbnN0cjogdmFsaWRhdG9ycy5pbnN0cigpLFxyXG4gICAgICBvcHRpb25zOiB2YWxpZGF0b3JzLm9wdGlvbnMoKSxcclxuICAgICAgc3ZnOiB2YWxpZGF0b3JzLnN2ZygpLFxyXG4gICAgICBvdXRmaWxlOiB2YWxpZGF0b3JzLm91dGZpbGUoc3RyaWN0Q2hlY2spLFxyXG4gICAgICB0eXBlOiB2YWxpZGF0b3JzLnR5cGUoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBjb25zdHI6IHZhbGlkYXRvcnMuY29uc3RyKHN0cmljdENoZWNrKSxcclxuICAgICAgYjY0OiB2YWxpZGF0b3JzLmI2NChzdHJpY3RDaGVjayksXHJcbiAgICAgIG5vRG93bmxvYWQ6IHZhbGlkYXRvcnMubm9Eb3dubG9hZChzdHJpY3RDaGVjayksXHJcbiAgICAgIGRlZmF1bHRIZWlnaHQ6IHZhbGlkYXRvcnMuZGVmYXVsdEhlaWdodChzdHJpY3RDaGVjayksXHJcbiAgICAgIGRlZmF1bHRXaWR0aDogdmFsaWRhdG9ycy5kZWZhdWx0V2lkdGgoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBkZWZhdWx0U2NhbGU6IHZhbGlkYXRvcnMuZGVmYXVsdFNjYWxlKHN0cmljdENoZWNrKSxcclxuICAgICAgaGVpZ2h0OiB2YWxpZGF0b3JzLmhlaWdodChzdHJpY3RDaGVjayksXHJcbiAgICAgIHdpZHRoOiB2YWxpZGF0b3JzLndpZHRoKHN0cmljdENoZWNrKSxcclxuICAgICAgc2NhbGU6IHZhbGlkYXRvcnMuc2NhbGUoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBnbG9iYWxPcHRpb25zOiB2YWxpZGF0b3JzLmdsb2JhbE9wdGlvbnMoKSxcclxuICAgICAgdGhlbWVPcHRpb25zOiB2YWxpZGF0b3JzLnRoZW1lT3B0aW9ucygpLFxyXG4gICAgICBiYXRjaDogdmFsaWRhdG9ycy5iYXRjaChmYWxzZSksXHJcbiAgICAgIHJhc3Rlcml6YXRpb25UaW1lb3V0OiB2YWxpZGF0b3JzLnJhc3Rlcml6YXRpb25UaW1lb3V0KHN0cmljdENoZWNrKVxyXG4gICAgfSlcclxuICAgIC5wYXJ0aWFsKCk7XHJcblxyXG4vLyBTY2hlbWEgZm9yIHRoZSBjdXN0b21Mb2dpYyBzZWN0aW9uIG9mIG9wdGlvbnNcclxuY29uc3QgQ3VzdG9tTG9naWNTY2hlbWEgPSAoc3RyaWN0Q2hlY2spID0+XHJcbiAgelxyXG4gICAgLm9iamVjdCh7XHJcbiAgICAgIGFsbG93Q29kZUV4ZWN1dGlvbjogdmFsaWRhdG9ycy5hbGxvd0NvZGVFeGVjdXRpb24oc3RyaWN0Q2hlY2spLFxyXG4gICAgICBhbGxvd0ZpbGVSZXNvdXJjZXM6IHZhbGlkYXRvcnMuYWxsb3dGaWxlUmVzb3VyY2VzKHN0cmljdENoZWNrKSxcclxuICAgICAgY3VzdG9tQ29kZTogdmFsaWRhdG9ycy5jdXN0b21Db2RlKGZhbHNlKSxcclxuICAgICAgY2FsbGJhY2s6IHZhbGlkYXRvcnMuY2FsbGJhY2soZmFsc2UpLFxyXG4gICAgICByZXNvdXJjZXM6IHZhbGlkYXRvcnMucmVzb3VyY2VzKHN0cmljdENoZWNrKSxcclxuICAgICAgbG9hZENvbmZpZzogdmFsaWRhdG9ycy5sb2FkQ29uZmlnKGZhbHNlKSxcclxuICAgICAgY3JlYXRlQ29uZmlnOiB2YWxpZGF0b3JzLmNyZWF0ZUNvbmZpZyhmYWxzZSlcclxuICAgIH0pXHJcbiAgICAucGFydGlhbCgpO1xyXG5cclxuLy8gU2NoZW1hIGZvciB0aGUgc2VydmVyLnByb3h5IHNlY3Rpb24gb2Ygb3B0aW9uc1xyXG5jb25zdCBQcm94eVNjaGVtYSA9IChzdHJpY3RDaGVjaykgPT5cclxuICB6XHJcbiAgICAub2JqZWN0KHtcclxuICAgICAgaG9zdDogdmFsaWRhdG9ycy5wcm94eUhvc3QoZmFsc2UpLFxyXG4gICAgICBwb3J0OiB2YWxpZGF0b3JzLnByb3h5UG9ydChzdHJpY3RDaGVjayksXHJcbiAgICAgIHRpbWVvdXQ6IHZhbGlkYXRvcnMucHJveHlUaW1lb3V0KHN0cmljdENoZWNrKVxyXG4gICAgfSlcclxuICAgIC5wYXJ0aWFsKCk7XHJcblxyXG4vLyBTY2hlbWEgZm9yIHRoZSBzZXJ2ZXIucmF0ZUxpbWl0aW5nIHNlY3Rpb24gb2Ygb3B0aW9uc1xyXG5jb25zdCBSYXRlTGltaXRpbmdTY2hlbWEgPSAoc3RyaWN0Q2hlY2spID0+XHJcbiAgelxyXG4gICAgLm9iamVjdCh7XHJcbiAgICAgIGVuYWJsZTogdmFsaWRhdG9ycy5lbmFibGVSYXRlTGltaXRpbmcoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBtYXhSZXF1ZXN0czogdmFsaWRhdG9ycy5tYXhSZXF1ZXN0cyhzdHJpY3RDaGVjayksXHJcbiAgICAgIHdpbmRvdzogdmFsaWRhdG9ycy53aW5kb3coc3RyaWN0Q2hlY2spLFxyXG4gICAgICBkZWxheTogdmFsaWRhdG9ycy5kZWxheShzdHJpY3RDaGVjayksXHJcbiAgICAgIHRydXN0UHJveHk6IHZhbGlkYXRvcnMudHJ1c3RQcm94eShzdHJpY3RDaGVjayksXHJcbiAgICAgIHNraXBLZXk6IHZhbGlkYXRvcnMuc2tpcEtleShmYWxzZSksXHJcbiAgICAgIHNraXBUb2tlbjogdmFsaWRhdG9ycy5za2lwVG9rZW4oZmFsc2UpXHJcbiAgICB9KVxyXG4gICAgLnBhcnRpYWwoKTtcclxuXHJcbi8vIFNjaGVtYSBmb3IgdGhlIHNlcnZlci5zc2wgc2VjdGlvbiBvZiBvcHRpb25zXHJcbmNvbnN0IFNzbFNjaGVtYSA9IChzdHJpY3RDaGVjaykgPT5cclxuICB6XHJcbiAgICAub2JqZWN0KHtcclxuICAgICAgZW5hYmxlOiB2YWxpZGF0b3JzLmVuYWJsZVNzbChzdHJpY3RDaGVjayksXHJcbiAgICAgIGZvcmNlOiB2YWxpZGF0b3JzLnNzbEZvcmNlKHN0cmljdENoZWNrKSxcclxuICAgICAgcG9ydDogdmFsaWRhdG9ycy5zc2xQb3J0KHN0cmljdENoZWNrKSxcclxuICAgICAgY2VydFBhdGg6IHZhbGlkYXRvcnMuc3NsQ2VydFBhdGgoZmFsc2UpXHJcbiAgICB9KVxyXG4gICAgLnBhcnRpYWwoKTtcclxuXHJcbi8vIFNjaGVtYSBmb3IgdGhlIHNlcnZlciBzZWN0aW9uIG9mIG9wdGlvbnNcclxuY29uc3QgU2VydmVyU2NoZW1hID0gKHN0cmljdENoZWNrKSA9PlxyXG4gIHoub2JqZWN0KHtcclxuICAgIGVuYWJsZTogdmFsaWRhdG9ycy5lbmFibGVTZXJ2ZXIoc3RyaWN0Q2hlY2spLm9wdGlvbmFsKCksXHJcbiAgICBob3N0OiB2YWxpZGF0b3JzLmhvc3Qoc3RyaWN0Q2hlY2spLm9wdGlvbmFsKCksXHJcbiAgICBwb3J0OiB2YWxpZGF0b3JzLnBvcnQoc3RyaWN0Q2hlY2spLm9wdGlvbmFsKCksXHJcbiAgICB1cGxvYWRMaW1pdDogdmFsaWRhdG9ycy51cGxvYWRMaW1pdChzdHJpY3RDaGVjaykub3B0aW9uYWwoKSxcclxuICAgIGJlbmNobWFya2luZzogdmFsaWRhdG9ycy5zZXJ2ZXJCZW5jaG1hcmtpbmcoc3RyaWN0Q2hlY2spLm9wdGlvbmFsKCksXHJcbiAgICBwcm94eTogUHJveHlTY2hlbWEoc3RyaWN0Q2hlY2spLm9wdGlvbmFsKCksXHJcbiAgICByYXRlTGltaXRpbmc6IFJhdGVMaW1pdGluZ1NjaGVtYShzdHJpY3RDaGVjaykub3B0aW9uYWwoKSxcclxuICAgIHNzbDogU3NsU2NoZW1hKHN0cmljdENoZWNrKS5vcHRpb25hbCgpXHJcbiAgfSk7XHJcblxyXG4vLyBTY2hlbWEgZm9yIHRoZSBwb29sIHNlY3Rpb24gb2Ygb3B0aW9uc1xyXG5jb25zdCBQb29sU2NoZW1hID0gKHN0cmljdENoZWNrKSA9PlxyXG4gIHpcclxuICAgIC5vYmplY3Qoe1xyXG4gICAgICBtaW5Xb3JrZXJzOiB2YWxpZGF0b3JzLm1pbldvcmtlcnMoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBtYXhXb3JrZXJzOiB2YWxpZGF0b3JzLm1heFdvcmtlcnMoc3RyaWN0Q2hlY2spLFxyXG4gICAgICB3b3JrTGltaXQ6IHZhbGlkYXRvcnMud29ya0xpbWl0KHN0cmljdENoZWNrKSxcclxuICAgICAgYWNxdWlyZVRpbWVvdXQ6IHZhbGlkYXRvcnMuYWNxdWlyZVRpbWVvdXQoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBjcmVhdGVUaW1lb3V0OiB2YWxpZGF0b3JzLmNyZWF0ZVRpbWVvdXQoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBkZXN0cm95VGltZW91dDogdmFsaWRhdG9ycy5kZXN0cm95VGltZW91dChzdHJpY3RDaGVjayksXHJcbiAgICAgIGlkbGVUaW1lb3V0OiB2YWxpZGF0b3JzLmlkbGVUaW1lb3V0KHN0cmljdENoZWNrKSxcclxuICAgICAgY3JlYXRlUmV0cnlJbnRlcnZhbDogdmFsaWRhdG9ycy5jcmVhdGVSZXRyeUludGVydmFsKHN0cmljdENoZWNrKSxcclxuICAgICAgcmVhcGVySW50ZXJ2YWw6IHZhbGlkYXRvcnMucmVhcGVySW50ZXJ2YWwoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBiZW5jaG1hcmtpbmc6IHZhbGlkYXRvcnMucG9vbEJlbmNobWFya2luZyhzdHJpY3RDaGVjaylcclxuICAgIH0pXHJcbiAgICAucGFydGlhbCgpO1xyXG5cclxuLy8gU2NoZW1hIGZvciB0aGUgbG9nZ2luZyBzZWN0aW9uIG9mIG9wdGlvbnNcclxuY29uc3QgTG9nZ2luZ1NjaGVtYSA9IChzdHJpY3RDaGVjaykgPT5cclxuICB6XHJcbiAgICAub2JqZWN0KHtcclxuICAgICAgbGV2ZWw6IHZhbGlkYXRvcnMubG9nTGV2ZWwoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBmaWxlOiB2YWxpZGF0b3JzLmxvZ0ZpbGUoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBkZXN0OiB2YWxpZGF0b3JzLmxvZ0Rlc3Qoc3RyaWN0Q2hlY2spLFxyXG4gICAgICB0b0NvbnNvbGU6IHZhbGlkYXRvcnMubG9nVG9Db25zb2xlKHN0cmljdENoZWNrKSxcclxuICAgICAgdG9GaWxlOiB2YWxpZGF0b3JzLmxvZ1RvRmlsZShzdHJpY3RDaGVjaylcclxuICAgIH0pXHJcbiAgICAucGFydGlhbCgpO1xyXG5cclxuLy8gU2NoZW1hIGZvciB0aGUgdWkgc2VjdGlvbiBvZiBvcHRpb25zXHJcbmNvbnN0IFVpU2NoZW1hID0gKHN0cmljdENoZWNrKSA9PlxyXG4gIHpcclxuICAgIC5vYmplY3Qoe1xyXG4gICAgICBlbmFibGU6IHZhbGlkYXRvcnMuZW5hYmxlVWkoc3RyaWN0Q2hlY2spLFxyXG4gICAgICByb3V0ZTogdmFsaWRhdG9ycy51aVJvdXRlKHN0cmljdENoZWNrKVxyXG4gICAgfSlcclxuICAgIC5wYXJ0aWFsKCk7XHJcblxyXG4vLyBTY2hlbWEgZm9yIHRoZSBvdGhlciBzZWN0aW9uIG9mIG9wdGlvbnNcclxuY29uc3QgT3RoZXJTY2hlbWEgPSAoc3RyaWN0Q2hlY2spID0+XHJcbiAgelxyXG4gICAgLm9iamVjdCh7XHJcbiAgICAgIG5vZGVFbnY6IHZhbGlkYXRvcnMubm9kZUVudihzdHJpY3RDaGVjayksXHJcbiAgICAgIGxpc3RlblRvUHJvY2Vzc0V4aXRzOiB2YWxpZGF0b3JzLmxpc3RlblRvUHJvY2Vzc0V4aXRzKHN0cmljdENoZWNrKSxcclxuICAgICAgbm9Mb2dvOiB2YWxpZGF0b3JzLm5vTG9nbyhzdHJpY3RDaGVjayksXHJcbiAgICAgIGhhcmRSZXNldFBhZ2U6IHZhbGlkYXRvcnMuaGFyZFJlc2V0UGFnZShzdHJpY3RDaGVjayksXHJcbiAgICAgIGJyb3dzZXJTaGVsbE1vZGU6IHZhbGlkYXRvcnMuYnJvd3NlclNoZWxsTW9kZShzdHJpY3RDaGVjayksXHJcbiAgICAgIHZhbGlkYXRpb246IHZhbGlkYXRvcnMudmFsaWRhdGlvbihzdHJpY3RDaGVjaylcclxuICAgIH0pXHJcbiAgICAucGFydGlhbCgpO1xyXG5cclxuLy8gU2NoZW1hIGZvciB0aGUgZGVidWcgc2VjdGlvbiBvZiBvcHRpb25zXHJcbmNvbnN0IERlYnVnU2NoZW1hID0gKHN0cmljdENoZWNrKSA9PlxyXG4gIHpcclxuICAgIC5vYmplY3Qoe1xyXG4gICAgICBlbmFibGU6IHZhbGlkYXRvcnMuZW5hYmxlRGVidWcoc3RyaWN0Q2hlY2spLFxyXG4gICAgICBoZWFkbGVzczogdmFsaWRhdG9ycy5oZWFkbGVzcyhzdHJpY3RDaGVjayksXHJcbiAgICAgIGRldnRvb2xzOiB2YWxpZGF0b3JzLmRldnRvb2xzKHN0cmljdENoZWNrKSxcclxuICAgICAgbGlzdGVuVG9Db25zb2xlOiB2YWxpZGF0b3JzLmxpc3RlblRvQ29uc29sZShzdHJpY3RDaGVjayksXHJcbiAgICAgIGR1bXBpbzogdmFsaWRhdG9ycy5kdW1waW8oc3RyaWN0Q2hlY2spLFxyXG4gICAgICBzbG93TW86IHZhbGlkYXRvcnMuc2xvd01vKHN0cmljdENoZWNrKSxcclxuICAgICAgZGVidWdnaW5nUG9ydDogdmFsaWRhdG9ycy5kZWJ1Z2dpbmdQb3J0KHN0cmljdENoZWNrKVxyXG4gICAgfSlcclxuICAgIC5wYXJ0aWFsKCk7XHJcblxyXG4vLyBTdHJpY3Qgc2NoZW1hIGZvciB0aGUgY29uZmlnXHJcbmV4cG9ydCBjb25zdCBTdHJpY3RDb25maWdTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgcmVxdWVzdElkOiB2YWxpZGF0b3JzLnJlcXVlc3RJZCgpLFxyXG4gIHB1cHBldGVlcjogUHVwcGV0ZWVyU2NoZW1hKHRydWUpLFxyXG4gIGhpZ2hjaGFydHM6IEhpZ2hjaGFydHNTY2hlbWEodHJ1ZSksXHJcbiAgZXhwb3J0OiBFeHBvcnRTY2hlbWEodHJ1ZSksXHJcbiAgY3VzdG9tTG9naWM6IEN1c3RvbUxvZ2ljU2NoZW1hKHRydWUpLFxyXG4gIHNlcnZlcjogU2VydmVyU2NoZW1hKHRydWUpLFxyXG4gIHBvb2w6IFBvb2xTY2hlbWEodHJ1ZSksXHJcbiAgbG9nZ2luZzogTG9nZ2luZ1NjaGVtYSh0cnVlKSxcclxuICB1aTogVWlTY2hlbWEodHJ1ZSksXHJcbiAgb3RoZXI6IE90aGVyU2NoZW1hKHRydWUpLFxyXG4gIGRlYnVnOiBEZWJ1Z1NjaGVtYSh0cnVlKVxyXG59KTtcclxuXHJcbi8vIExvb3NlIHNjaGVtYSBmb3IgdGhlIGNvbmZpZ1xyXG5leHBvcnQgY29uc3QgTG9vc2VDb25maWdTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgcmVxdWVzdElkOiB2YWxpZGF0b3JzLnJlcXVlc3RJZCgpLFxyXG4gIHB1cHBldGVlcjogUHVwcGV0ZWVyU2NoZW1hKGZhbHNlKSxcclxuICBoaWdoY2hhcnRzOiBIaWdoY2hhcnRzU2NoZW1hKGZhbHNlKSxcclxuICBleHBvcnQ6IEV4cG9ydFNjaGVtYShmYWxzZSksXHJcbiAgY3VzdG9tTG9naWM6IEN1c3RvbUxvZ2ljU2NoZW1hKGZhbHNlKSxcclxuICBzZXJ2ZXI6IFNlcnZlclNjaGVtYShmYWxzZSksXHJcbiAgcG9vbDogUG9vbFNjaGVtYShmYWxzZSksXHJcbiAgbG9nZ2luZzogTG9nZ2luZ1NjaGVtYShmYWxzZSksXHJcbiAgdWk6IFVpU2NoZW1hKGZhbHNlKSxcclxuICBvdGhlcjogT3RoZXJTY2hlbWEoZmFsc2UpLFxyXG4gIGRlYnVnOiBEZWJ1Z1NjaGVtYShmYWxzZSlcclxufSk7XHJcblxyXG4vLyBTY2hlbWEgZm9yIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgY29uZmlnXHJcbmV4cG9ydCBjb25zdCBFbnZTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgLy8gcHVwcGV0ZWVyXHJcbiAgUFVQUEVURUVSX0FSR1M6IHZhbGlkYXRvcnMuYXJncyhmYWxzZSksXHJcblxyXG4gIC8vIGhpZ2hjaGFydHNcclxuICBISUdIQ0hBUlRTX1ZFUlNJT046IHZhbGlkYXRvcnMudmVyc2lvbihmYWxzZSksXHJcbiAgSElHSENIQVJUU19DRE5fVVJMOiB2YWxpZGF0b3JzLmNkblVybChmYWxzZSksXHJcbiAgSElHSENIQVJUU19GT1JDRV9GRVRDSDogdmFsaWRhdG9ycy5mb3JjZUZldGNoKGZhbHNlKSxcclxuICBISUdIQ0hBUlRTX0NBQ0hFX1BBVEg6IHZhbGlkYXRvcnMuY2FjaGVQYXRoKGZhbHNlKSxcclxuICBISUdIQ0hBUlRTX0FETUlOX1RPS0VOOiB2YWxpZGF0b3JzLmFkbWluVG9rZW4oZmFsc2UpLFxyXG4gIEhJR0hDSEFSVFNfQ09SRV9TQ1JJUFRTOiB2YWxpZGF0b3JzLmNvcmVTY3JpcHRzKGZhbHNlKSxcclxuICBISUdIQ0hBUlRTX01PRFVMRV9TQ1JJUFRTOiB2YWxpZGF0b3JzLm1vZHVsZVNjcmlwdHMoZmFsc2UpLFxyXG4gIEhJR0hDSEFSVFNfSU5ESUNBVE9SX1NDUklQVFM6IHZhbGlkYXRvcnMuaW5kaWNhdG9yU2NyaXB0cyhmYWxzZSksXHJcbiAgSElHSENIQVJUU19DVVNUT01fU0NSSVBUUzogdmFsaWRhdG9ycy5jdXN0b21TY3JpcHRzKGZhbHNlKSxcclxuXHJcbiAgLy8gZXhwb3J0XHJcbiAgRVhQT1JUX0lORklMRTogdmFsaWRhdG9ycy5pbmZpbGUoZmFsc2UpLFxyXG4gIEVYUE9SVF9JTlNUUjogdmFsaWRhdG9ycy5pbnN0cigpLFxyXG4gIEVYUE9SVF9PUFRJT05TOiB2YWxpZGF0b3JzLm9wdGlvbnMoKSxcclxuICBFWFBPUlRfU1ZHOiB2YWxpZGF0b3JzLnN2ZygpLFxyXG4gIEVYUE9SVF9CQVRDSDogdmFsaWRhdG9ycy5iYXRjaChmYWxzZSksXHJcbiAgRVhQT1JUX09VVEZJTEU6IHZhbGlkYXRvcnMub3V0ZmlsZShmYWxzZSksXHJcbiAgRVhQT1JUX1RZUEU6IHZhbGlkYXRvcnMudHlwZShmYWxzZSksXHJcbiAgRVhQT1JUX0NPTlNUUjogdmFsaWRhdG9ycy5jb25zdHIoZmFsc2UpLFxyXG4gIEVYUE9SVF9CNjQ6IHZhbGlkYXRvcnMuYjY0KGZhbHNlKSxcclxuICBFWFBPUlRfTk9fRE9XTkxPQUQ6IHZhbGlkYXRvcnMubm9Eb3dubG9hZChmYWxzZSksXHJcbiAgRVhQT1JUX0hFSUdIVDogdmFsaWRhdG9ycy5oZWlnaHQoZmFsc2UpLFxyXG4gIEVYUE9SVF9XSURUSDogdmFsaWRhdG9ycy53aWR0aChmYWxzZSksXHJcbiAgRVhQT1JUX1NDQUxFOiB2YWxpZGF0b3JzLnNjYWxlKGZhbHNlKSxcclxuICBFWFBPUlRfREVGQVVMVF9IRUlHSFQ6IHZhbGlkYXRvcnMuZGVmYXVsdEhlaWdodChmYWxzZSksXHJcbiAgRVhQT1JUX0RFRkFVTFRfV0lEVEg6IHZhbGlkYXRvcnMuZGVmYXVsdFdpZHRoKGZhbHNlKSxcclxuICBFWFBPUlRfREVGQVVMVF9TQ0FMRTogdmFsaWRhdG9ycy5kZWZhdWx0U2NhbGUoZmFsc2UpLFxyXG4gIEVYUE9SVF9HTE9CQUxfT1BUSU9OUzogdmFsaWRhdG9ycy5nbG9iYWxPcHRpb25zKCksXHJcbiAgRVhQT1JUX1RIRU1FX09QVElPTlM6IHZhbGlkYXRvcnMudGhlbWVPcHRpb25zKCksXHJcbiAgRVhQT1JUX1JBU1RFUklaQVRJT05fVElNRU9VVDogdmFsaWRhdG9ycy5yYXN0ZXJpemF0aW9uVGltZW91dChmYWxzZSksXHJcblxyXG4gIC8vIGN1c3RvbVxyXG4gIENVU1RPTV9MT0dJQ19BTExPV19DT0RFX0VYRUNVVElPTjogdmFsaWRhdG9ycy5hbGxvd0NvZGVFeGVjdXRpb24oZmFsc2UpLFxyXG4gIENVU1RPTV9MT0dJQ19BTExPV19GSUxFX1JFU09VUkNFUzogdmFsaWRhdG9ycy5hbGxvd0ZpbGVSZXNvdXJjZXMoZmFsc2UpLFxyXG4gIENVU1RPTV9MT0dJQ19DVVNUT01fQ09ERTogdmFsaWRhdG9ycy5jdXN0b21Db2RlKGZhbHNlKSxcclxuICBDVVNUT01fTE9HSUNfQ0FMTEJBQ0s6IHZhbGlkYXRvcnMuY2FsbGJhY2soZmFsc2UpLFxyXG4gIENVU1RPTV9MT0dJQ19SRVNPVVJDRVM6IHZhbGlkYXRvcnMucmVzb3VyY2VzKGZhbHNlKSxcclxuICBDVVNUT01fTE9HSUNfTE9BRF9DT05GSUc6IHZhbGlkYXRvcnMubG9hZENvbmZpZyhmYWxzZSksXHJcbiAgQ1VTVE9NX0xPR0lDX0NSRUFURV9DT05GSUc6IHZhbGlkYXRvcnMuY3JlYXRlQ29uZmlnKGZhbHNlKSxcclxuXHJcbiAgLy8gc2VydmVyXHJcbiAgU0VSVkVSX0VOQUJMRTogdmFsaWRhdG9ycy5lbmFibGVTZXJ2ZXIoZmFsc2UpLFxyXG4gIFNFUlZFUl9IT1NUOiB2YWxpZGF0b3JzLmhvc3QoZmFsc2UpLFxyXG4gIFNFUlZFUl9QT1JUOiB2YWxpZGF0b3JzLnBvcnQoZmFsc2UpLFxyXG4gIFNFUlZFUl9VUExPQURfTElNSVQ6IHZhbGlkYXRvcnMudXBsb2FkTGltaXQoZmFsc2UpLFxyXG4gIFNFUlZFUl9CRU5DSE1BUktJTkc6IHZhbGlkYXRvcnMuc2VydmVyQmVuY2htYXJraW5nKGZhbHNlKSxcclxuXHJcbiAgLy8gc2VydmVyIHByb3h5XHJcbiAgU0VSVkVSX1BST1hZX0hPU1Q6IHZhbGlkYXRvcnMucHJveHlIb3N0KGZhbHNlKSxcclxuICBTRVJWRVJfUFJPWFlfUE9SVDogdmFsaWRhdG9ycy5wcm94eVBvcnQoZmFsc2UpLFxyXG4gIFNFUlZFUl9QUk9YWV9USU1FT1VUOiB2YWxpZGF0b3JzLnByb3h5VGltZW91dChmYWxzZSksXHJcblxyXG4gIC8vIHNlcnZlciByYXRlIGxpbWl0aW5nXHJcbiAgU0VSVkVSX1JBVEVfTElNSVRJTkdfRU5BQkxFOiB2YWxpZGF0b3JzLmVuYWJsZVJhdGVMaW1pdGluZyhmYWxzZSksXHJcbiAgU0VSVkVSX1JBVEVfTElNSVRJTkdfTUFYX1JFUVVFU1RTOiB2YWxpZGF0b3JzLm1heFJlcXVlc3RzKGZhbHNlKSxcclxuICBTRVJWRVJfUkFURV9MSU1JVElOR19XSU5ET1c6IHZhbGlkYXRvcnMud2luZG93KGZhbHNlKSxcclxuICBTRVJWRVJfUkFURV9MSU1JVElOR19ERUxBWTogdmFsaWRhdG9ycy5kZWxheShmYWxzZSksXHJcbiAgU0VSVkVSX1JBVEVfTElNSVRJTkdfVFJVU1RfUFJPWFk6IHZhbGlkYXRvcnMudHJ1c3RQcm94eShmYWxzZSksXHJcbiAgU0VSVkVSX1JBVEVfTElNSVRJTkdfU0tJUF9LRVk6IHZhbGlkYXRvcnMuc2tpcEtleShmYWxzZSksXHJcbiAgU0VSVkVSX1JBVEVfTElNSVRJTkdfU0tJUF9UT0tFTjogdmFsaWRhdG9ycy5za2lwVG9rZW4oZmFsc2UpLFxyXG5cclxuICAvLyBzZXJ2ZXIgc3NsXHJcbiAgU0VSVkVSX1NTTF9FTkFCTEU6IHZhbGlkYXRvcnMuZW5hYmxlU3NsKGZhbHNlKSxcclxuICBTRVJWRVJfU1NMX0ZPUkNFOiB2YWxpZGF0b3JzLnNzbEZvcmNlKGZhbHNlKSxcclxuICBTRVJWRVJfU1NMX1BPUlQ6IHZhbGlkYXRvcnMuc3NsUG9ydChmYWxzZSksXHJcbiAgU0VSVkVSX1NTTF9DRVJUX1BBVEg6IHZhbGlkYXRvcnMuc3NsQ2VydFBhdGgoZmFsc2UpLFxyXG5cclxuICAvLyBwb29sXHJcbiAgUE9PTF9NSU5fV09SS0VSUzogdmFsaWRhdG9ycy5taW5Xb3JrZXJzKGZhbHNlKSxcclxuICBQT09MX01BWF9XT1JLRVJTOiB2YWxpZGF0b3JzLm1heFdvcmtlcnMoZmFsc2UpLFxyXG4gIFBPT0xfV09SS19MSU1JVDogdmFsaWRhdG9ycy53b3JrTGltaXQoZmFsc2UpLFxyXG4gIFBPT0xfQUNRVUlSRV9USU1FT1VUOiB2YWxpZGF0b3JzLmFjcXVpcmVUaW1lb3V0KGZhbHNlKSxcclxuICBQT09MX0NSRUFURV9USU1FT1VUOiB2YWxpZGF0b3JzLmNyZWF0ZVRpbWVvdXQoZmFsc2UpLFxyXG4gIFBPT0xfREVTVFJPWV9USU1FT1VUOiB2YWxpZGF0b3JzLmRlc3Ryb3lUaW1lb3V0KGZhbHNlKSxcclxuICBQT09MX0lETEVfVElNRU9VVDogdmFsaWRhdG9ycy5pZGxlVGltZW91dChmYWxzZSksXHJcbiAgUE9PTF9DUkVBVEVfUkVUUllfSU5URVJWQUw6IHZhbGlkYXRvcnMuY3JlYXRlUmV0cnlJbnRlcnZhbChmYWxzZSksXHJcbiAgUE9PTF9SRUFQRVJfSU5URVJWQUw6IHZhbGlkYXRvcnMucmVhcGVySW50ZXJ2YWwoZmFsc2UpLFxyXG4gIFBPT0xfQkVOQ0hNQVJLSU5HOiB2YWxpZGF0b3JzLnBvb2xCZW5jaG1hcmtpbmcoZmFsc2UpLFxyXG5cclxuICAvLyBsb2dnaW5nXHJcbiAgTE9HR0lOR19MRVZFTDogdmFsaWRhdG9ycy5sb2dMZXZlbChmYWxzZSksXHJcbiAgTE9HR0lOR19GSUxFOiB2YWxpZGF0b3JzLmxvZ0ZpbGUoZmFsc2UpLFxyXG4gIExPR0dJTkdfREVTVDogdmFsaWRhdG9ycy5sb2dEZXN0KGZhbHNlKSxcclxuICBMT0dHSU5HX1RPX0NPTlNPTEU6IHZhbGlkYXRvcnMubG9nVG9Db25zb2xlKGZhbHNlKSxcclxuICBMT0dHSU5HX1RPX0ZJTEU6IHZhbGlkYXRvcnMubG9nVG9GaWxlKGZhbHNlKSxcclxuXHJcbiAgLy8gdWlcclxuICBVSV9FTkFCTEU6IHZhbGlkYXRvcnMuZW5hYmxlVWkoZmFsc2UpLFxyXG4gIFVJX1JPVVRFOiB2YWxpZGF0b3JzLnVpUm91dGUoZmFsc2UpLFxyXG5cclxuICAvLyBvdGhlclxyXG4gIE9USEVSX05PREVfRU5WOiB2YWxpZGF0b3JzLm5vZGVFbnYoZmFsc2UpLFxyXG4gIE9USEVSX0xJU1RFTl9UT19QUk9DRVNTX0VYSVRTOiB2YWxpZGF0b3JzLmxpc3RlblRvUHJvY2Vzc0V4aXRzKGZhbHNlKSxcclxuICBPVEhFUl9OT19MT0dPOiB2YWxpZGF0b3JzLm5vTG9nbyhmYWxzZSksXHJcbiAgT1RIRVJfSEFSRF9SRVNFVF9QQUdFOiB2YWxpZGF0b3JzLmhhcmRSZXNldFBhZ2UoZmFsc2UpLFxyXG4gIE9USEVSX0JST1dTRVJfU0hFTExfTU9ERTogdmFsaWRhdG9ycy5icm93c2VyU2hlbGxNb2RlKGZhbHNlKSxcclxuICBPVEhFUl9WQUxJREFUSU9OOiB2YWxpZGF0b3JzLnZhbGlkYXRpb24oZmFsc2UpLFxyXG5cclxuICAvLyBkZWJ1Z2dlclxyXG4gIERFQlVHX0VOQUJMRTogdmFsaWRhdG9ycy5lbmFibGVEZWJ1ZyhmYWxzZSksXHJcbiAgREVCVUdfSEVBRExFU1M6IHZhbGlkYXRvcnMuaGVhZGxlc3MoZmFsc2UpLFxyXG4gIERFQlVHX0RFVlRPT0xTOiB2YWxpZGF0b3JzLmRldnRvb2xzKGZhbHNlKSxcclxuICBERUJVR19MSVNURU5fVE9fQ09OU09MRTogdmFsaWRhdG9ycy5saXN0ZW5Ub0NvbnNvbGUoZmFsc2UpLFxyXG4gIERFQlVHX0RVTVBJTzogdmFsaWRhdG9ycy5kdW1waW8oZmFsc2UpLFxyXG4gIERFQlVHX1NMT1dfTU86IHZhbGlkYXRvcnMuc2xvd01vKGZhbHNlKSxcclxuICBERUJVR19ERUJVR0dJTkdfUE9SVDogdmFsaWRhdG9ycy5kZWJ1Z2dpbmdQb3J0KGZhbHNlKVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcyBvcHRpb25zIHVzaW5nIHRoZSBFbnZTY2hlbWEuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9jZXNzLmVudiAtIFRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZnJvbSBlbnZpcm9ubWVudFxyXG4gKiB2YXJpYWJsZXMgZmlsZSB0byB2YWxpZGF0ZS5cclxuICpcclxuICogQHJldHVybnMge09iamVjdH0gVGhlIHBhcnNlZCBhbmQgdmFsaWRhdGVkIGVudmlyb25tZW50IHZhcmlhYmxlcy5cclxuICovXHJcbmV4cG9ydCBjb25zdCBlbnZzID0gRW52U2NoZW1hLnBhcnRpYWwoKS5wYXJzZShwcm9jZXNzLmVudik7XHJcblxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgdXNpbmcgdGhlIGBTdHJpY3RDb25maWdTY2hlbWFgLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gc3RyaWN0VmFsaWRhdGVcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ09wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvcHRpb25zIHRvIHZhbGlkYXRlLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgcGFyc2VkIGFuZCB2YWxpZGF0ZWQgY29uZmlndXJhdGlvbiBvcHRpb25zLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHN0cmljdFZhbGlkYXRlKGNvbmZpZ09wdGlvbnMpIHtcclxuICByZXR1cm4gU3RyaWN0Q29uZmlnU2NoZW1hLnBhcnRpYWwoKS5wYXJzZShjb25maWdPcHRpb25zKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIHVzaW5nIHRoZSBgTG9vc2VDb25maWdTY2hlbWFgLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gbG9vc2VWYWxpZGF0ZVxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnT3B0aW9ucyAtIFRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgdG8gdmFsaWRhdGUuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBwYXJzZWQgYW5kIHZhbGlkYXRlZCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbG9vc2VWYWxpZGF0ZShjb25maWdPcHRpb25zKSB7XHJcbiAgcmV0dXJuIExvb3NlQ29uZmlnU2NoZW1hLnBhcnRpYWwoKS5wYXJzZShjb25maWdPcHRpb25zKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEN1c3RvbSBlcnJvciBtYXBwaW5nIGZ1bmN0aW9uIGZvciBab2Qgc2NoZW1hIHZhbGlkYXRpb24uXHJcbiAqXHJcbiAqIFRoaXMgZnVuY3Rpb24gY3VzdG9taXplcyB0aGUgZXJyb3IgbWVzc2FnZXMgcHJvZHVjZWQgYnkgWm9kIHNjaGVtYVxyXG4gKiB2YWxpZGF0aW9uLCBwcm92aWRpbmcgbW9yZSBzcGVjaWZpYyBhbmQgdXNlci1mcmllbmRseSBmZWVkYmFjayBiYXNlZCBvbiB0aGVcclxuICogaXNzdWUgdHlwZSBhbmQgY29udGV4dC5cclxuICpcclxuICogVGhlIGZ1bmN0aW9uIG1vZGlmaWVzIHRoZSBlcnJvciBtZXNzYWdlcyBhcyBmb2xsb3dzOlxyXG4gKlxyXG4gKiAtIEZvciBtaXNzaW5nIHJlcXVpcmVkIHZhbHVlcyAodW5kZWZpbmVkKSwgaXQgcmV0dXJucyBhIG1lc3NhZ2UgaW5kaWNhdGluZ1xyXG4gKiB0aGF0IG5vIHZhbHVlIHdhcyBwcm92aWRlZCBmb3IgdGhlIHNwZWNpZmljIHByb3BlcnR5LlxyXG4gKlxyXG4gKiAtIEZvciBjdXN0b20gdmFsaWRhdGlvbiBlcnJvcnMsIGlmIGEgY3VzdG9tIGVycm9yIG1lc3NhZ2UgaXMgcHJvdmlkZWQgaW4gdGhlXHJcbiAqIGlzc3VlIHBhcmFtZXRlcnMsIGl0IGluY2x1ZGVzIHRoaXMgbWVzc2FnZSBhbG9uZyB3aXRoIHRoZSBpbnZhbGlkIGRhdGFcclxuICogcmVjZWl2ZWQuXHJcbiAqXHJcbiAqIC0gRm9yIGFsbCBvdGhlciBlcnJvcnMsIGl0IGFwcGVuZHMgcHJvcGVydHktc3BlY2lmaWMgaW5mb3JtYXRpb24gdG8gdGhlXHJcbiAqIGRlZmF1bHQgZXJyb3IgbWVzc2FnZSBwcm92aWRlZCBieSBab2QuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfY3VzdG9tRXJyb3JNYXBcclxuICpcclxuICogQHBhcmFtIHt6LlpvZElzc3VlfSBpc3N1ZSAtIFRoZSBpc3N1ZSBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSB2YWxpZGF0aW9uXHJcbiAqIGVycm9yLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dCAtIFRoZSBjb250ZXh0IG9iamVjdCBwcm92aWRpbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gKiBhYm91dCB0aGUgdmFsaWRhdGlvbiBlcnJvci5cclxuICpcclxuICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGN1c3RvbWl6ZWQgZXJyb3IgbWVzc2FnZS5cclxuICovXHJcbmZ1bmN0aW9uIF9jdXN0b21FcnJvck1hcChpc3N1ZSwgY29udGV4dCkge1xyXG4gIC8vIEdldCB0aGUgY2hhaW4gb2YgcHJvcGVydGllcyB3aGljaCBlcnJvciBkaXJlY3RseSByZWZlcnMgdG9cclxuICBjb25zdCBwcm9wZXJ0eU5hbWUgPSBpc3N1ZS5wYXRoLmpvaW4oJy4nKTtcclxuXHJcbiAgLy8gQ3JlYXRlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXNzYWdlIGFib3V0IHRoZSBwcm9wZXJ0eSBpbmZvcm1hdGlvblxyXG4gIGNvbnN0IHByb3BlcnR5SW5mbyA9IGBJbnZhbGlkIHZhbHVlIGZvciB0aGUgJHtwcm9wZXJ0eU5hbWV9YDtcclxuXHJcbiAgLy8gTW9kaWZpZWQgbWVzc2FnZSBmb3IgdGhlIGludmFsaWQgdHlwZVxyXG4gIGlmIChpc3N1ZS5jb2RlID09PSB6LlpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUpIHtcclxuICAgIC8vIE1vZGlmaWVkIG1lc3NhZ2UgZm9yIHRoZSByZXF1aXJlZCB2YWx1ZXNcclxuICAgIGlmIChpc3N1ZS5yZWNlaXZlZCA9PT0gei5ab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG1lc3NhZ2U6IGAke3Byb3BlcnR5SW5mb30gLSBObyB2YWx1ZSB3YXMgcHJvdmlkZWQuYFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1vZGlmaWVkIG1lc3NhZ2UgZm9yIHRoZSBzcGVjaWZpYyBpbnZhbGlkIHR5cGUgd2hlbiB2YWx1ZXMgZXhpc3RcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lc3NhZ2U6IGAke3Byb3BlcnR5SW5mb30gLSBJbnZhbGlkIHR5cGUuICR7Y29udGV4dC5kZWZhdWx0RXJyb3J9LmBcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBNb2RpZmllZCBtZXNzYWdlIGZvciB0aGUgY3VzdG9tIHZhbGlkYXRpb25cclxuICBpZiAoaXNzdWUuY29kZSA9PT0gei5ab2RJc3N1ZUNvZGUuY3VzdG9tKSB7XHJcbiAgICAvLyBJZiB0aGUgY3VzdG9tIG1lc3NhZ2UgZm9yIGVycm9yIGV4aXN0LCBpbmNsdWRlIGl0XHJcbiAgICBpZiAoaXNzdWUucGFyYW1zPy5lcnJvck1lc3NhZ2UpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBtZXNzYWdlOiBgJHtwcm9wZXJ0eUluZm99IC0gJHtpc3N1ZS5wYXJhbXM/LmVycm9yTWVzc2FnZX0sIHJlY2VpdmVkICcke2NvbnRleHQuZGF0YX0nLmBcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIE1vZGlmaWVkIG1lc3NhZ2UgZm9yIHRoZSBpbnZhbGlkIHVuaW9uIGVycm9yXHJcbiAgaWYgKGlzc3VlLmNvZGUgPT09IHouWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24pIHtcclxuICAgIC8vIENyZWF0ZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgbWVzc2FnZSBhYm91dCB0aGUgbXVsdGlwbGUgZXJyb3JzXHJcbiAgICBsZXQgbWVzc2FnZSA9IGBNdWx0aXBsZSBlcnJvcnMgb2NjdXJyZWQgZm9yIHRoZSAke3Byb3BlcnR5TmFtZX06XFxuYDtcclxuXHJcbiAgICAvLyBDeWNsZSB0aHJvdWdoIGFsbCBlcnJvcnMgYW5kIGNyZWF0ZSBhIGNvcnJlY3QgbWVzc2FnZVxyXG4gICAgaXNzdWUudW5pb25FcnJvcnMuZm9yRWFjaCgodmFsdWUpID0+IHtcclxuICAgICAgY29uc3QgaW5kZXggPSB2YWx1ZS5pc3N1ZXNbMF0ubWVzc2FnZS5pbmRleE9mKCctJyk7XHJcbiAgICAgIG1lc3NhZ2UgKz1cclxuICAgICAgICBpbmRleCAhPT0gLTFcclxuICAgICAgICAgID8gYCR7dmFsdWUuaXNzdWVzWzBdLm1lc3NhZ2V9XFxuYC5zdWJzdHJpbmcoaW5kZXgpXHJcbiAgICAgICAgICA6IGAke3ZhbHVlLmlzc3Vlc1swXS5tZXNzYWdlfVxcbmA7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIGZpbmFsIG1lc3NhZ2UgZm9yIHRoZSBpbnZhbGlkIHVuaW9uIGVycm9yXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtZXNzYWdlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGVycm9yIG1lc3NhZ2UsIGV4dGVuZGVkIGJ5IHRoZSBpbmZvIGFib3V0IHRoZSBwcm9wZXJ0eVxyXG4gIHJldHVybiB7XHJcbiAgICBtZXNzYWdlOiBgJHtwcm9wZXJ0eUluZm99IC0gJHtjb250ZXh0LmRlZmF1bHRFcnJvcn0uYFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICB2YWxpZGF0b3JzLFxyXG4gIFN0cmljdENvbmZpZ1NjaGVtYSxcclxuICBMb29zZUNvbmZpZ1NjaGVtYSxcclxuICBFbnZTY2hlbWEsXHJcbiAgZW52cyxcclxuICBzdHJpY3RWYWxpZGF0ZSxcclxuICBsb29zZVZhbGlkYXRlXHJcbn07XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEEgY3VzdG9tIGVycm9yIGNsYXNzIGZvciBoYW5kbGluZyBleHBvcnQtcmVsYXRlZCBlcnJvcnMuIEV4dGVuZHMgdGhlIG5hdGl2ZVxyXG4gKiBgRXJyb3JgIGNsYXNzIHRvIGluY2x1ZGUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGxpa2Ugc3RhdHVzIGNvZGUgYW5kIHN0YWNrXHJcbiAqIHRyYWNlIGRldGFpbHMuXHJcbiAqL1xyXG5jbGFzcyBFeHBvcnRFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAvKipcclxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBgRXhwb3J0RXJyb3JgLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBUaGUgZXJyb3IgbWVzc2FnZSB0byBiZSBkaXNwbGF5ZWQuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXR1c0NvZGUgLSBPcHRpb25hbCBIVFRQIHN0YXR1cyBjb2RlIGFzc29jaWF0ZWRcclxuICAgKiB3aXRoIHRoZSBlcnJvciAoZS5nLiwgNDAwLCA1MDApLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXR1c0NvZGUpIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgLy8gU2V0IHRoZSBgbWVzc2FnZWAgYW5kIGBzdGFja01lc3NhZ2VgIHdpdGggcHJvdmlkZWQgbWVzc2FnZVxyXG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgIHRoaXMuc3RhY2tNZXNzYWdlID0gbWVzc2FnZTtcclxuXHJcbiAgICAvLyBTZXQgdGhlIGBzdGF0dXNDb2RlYCBpZiBwcm92aWRlZFxyXG4gICAgaWYgKHN0YXR1c0NvZGUpIHtcclxuICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgYWRkaXRpb25hbCBlcnJvciBkZXRhaWxzIGJhc2VkIG9uIGFuIGV4aXN0aW5nIGVycm9yIG9iamVjdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIC0gQW4gZXJyb3Igb2JqZWN0IGNvbnRhaW5pbmcgZGV0YWlscyB0byBwb3B1bGF0ZVxyXG4gICAqIHRoZSBgRXhwb3J0RXJyb3JgIGluc3RhbmNlLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge0V4cG9ydEVycm9yfSBUaGUgdXBkYXRlZCBpbnN0YW5jZSBvZiB0aGUgYEV4cG9ydEVycm9yYCBjbGFzcy5cclxuICAgKi9cclxuICBzZXRFcnJvcihlcnJvcikge1xyXG4gICAgLy8gU2F2ZSB0aGUgcHJvdmlkZWQgZXJyb3JcclxuICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcclxuXHJcbiAgICAvLyBTZXQgdGhlIGVycm9yJ3MgbmFtZSBpZiBwcmVzZW50XHJcbiAgICBpZiAoZXJyb3IubmFtZSkge1xyXG4gICAgICB0aGlzLm5hbWUgPSBlcnJvci5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCB0aGUgZXJyb3IncyBzdGF0dXMgY29kZSBpZiBwcmVzZW50XHJcbiAgICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSkge1xyXG4gICAgICB0aGlzLnN0YXR1c0NvZGUgPSBlcnJvci5zdGF0dXNDb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCB0aGUgZXJyb3IncyBzdGFjayBhbmQgc3RhY2sncyBtZXNzYWdlIGlmIHByZXNlbnRcclxuICAgIGlmIChlcnJvci5zdGFjaykge1xyXG4gICAgICB0aGlzLnN0YWNrTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgIHRoaXMuc3RhY2sgPSBlcnJvci5zdGFjaztcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdXBkYXRlZCBgRXhwb3J0RXJyb3JgIGluc3RhbmNlXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEV4cG9ydEVycm9yO1xyXG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5cclxuSGlnaGNoYXJ0cyBFeHBvcnQgU2VydmVyXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMTYtMjAyNSwgSGlnaHNvZnRcclxuXHJcbkxpY2VuY2VkIHVuZGVyIHRoZSBNSVQgbGljZW5jZS5cclxuXHJcbkFkZGl0aW9uYWxseSBhIHZhbGlkIEhpZ2hjaGFydHMgbGljZW5zZSBpcyByZXF1aXJlZCBmb3IgdXNlLlxyXG5cclxuU2VlIExJQ0VOU0UgZmlsZSBpbiByb290IGZvciBkZXRhaWxzLlxyXG5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBAb3ZlcnZpZXcgVGhpcyBtb2R1bGUgbWFuYWdlcyBjb25maWd1cmF0aW9uIGZvciB0aGUgSGlnaGNoYXJ0cyBFeHBvcnQgU2VydmVyXHJcbiAqIGJ5IGxvYWRpbmcgYW5kIG1lcmdpbmcgb3B0aW9ucyBmcm9tIG11bHRpcGxlIHNvdXJjZXMsIHN1Y2ggYXMgdGhlIGRlZmF1bHRcclxuICogc2V0dGluZ3MsIGVudmlyb25tZW50IHZhcmlhYmxlcywgdXNlci1wcm92aWRlZCBvcHRpb25zLCBhbmQgY29tbWFuZC1saW5lXHJcbiAqIGFyZ3VtZW50cy4gRW5zdXJlcyB0aGUgZ2xvYmFsIG9wdGlvbnMgYXJlIHVwLXRvLWRhdGUgd2l0aCB0aGUgaGlnaGVzdFxyXG4gKiBwcmlvcml0eSB2YWx1ZXMuIFByb3ZpZGVzIGZ1bmN0aW9ucyBmb3IgYWNjZXNzaW5nIGFuZCB1cGRhdGluZyBjb25maWd1cmF0aW9uLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IHJlYWRGaWxlU3luYyB9IGZyb20gJ2ZzJztcclxuXHJcbmltcG9ydCB7IGxvZywgbG9nV2l0aFN0YWNrLCBsb2dab2RJc3N1ZXMgfSBmcm9tICcuL2xvZ2dlci5qcyc7XHJcbmltcG9ydCB7IGRlZXBDb3B5LCBnZXRBYnNvbHV0ZVBhdGgsIGlzT2JqZWN0IH0gZnJvbSAnLi91dGlscy5qcyc7XHJcbmltcG9ydCB7XHJcbiAgZW52cyxcclxuICBsb29zZVZhbGlkYXRlLFxyXG4gIHN0cmljdFZhbGlkYXRlLFxyXG4gIHZhbGlkYXRvcnNcclxufSBmcm9tICcuL3ZhbGlkYXRpb24uanMnO1xyXG5cclxuaW1wb3J0IGRlZmF1bHRDb25maWcgZnJvbSAnLi9zY2hlbWFzL2NvbmZpZy5qcyc7XHJcblxyXG5pbXBvcnQgRXhwb3J0RXJyb3IgZnJvbSAnLi9lcnJvcnMvRXhwb3J0RXJyb3IuanMnO1xyXG5cclxuLy8gU2V0cyB0aGUgZ2xvYmFsIG9wdGlvbnMgd2l0aCBpbml0aWFsIHZhbHVlcyBmcm9tIHRoZSBkZWZhdWx0IGNvbmZpZ1xyXG5jb25zdCBnbG9iYWxPcHRpb25zID0gX2luaXRPcHRpb25zKGRlZmF1bHRDb25maWcpO1xyXG5cclxuLy8gUHJvcGVydGllcyBuZXN0aW5nIGxldmVsIG9mIGFsbCBvcHRpb25zXHJcbmNvbnN0IG5lc3RlZFByb3BzID0gX2NyZWF0ZU5lc3RlZFByb3BzKGRlZmF1bHRDb25maWcpO1xyXG5cclxuLy8gUHJvcGVydGllcyBuYW1lcyB0aGF0IHNob3VsZCBub3QgYmUgcmVjdXJzaXZlbHkgbWVyZ2VkXHJcbmNvbnN0IGFic29sdXRlUHJvcHMgPSBfY3JlYXRlQWJzb2x1dGVQcm9wcyhkZWZhdWx0Q29uZmlnKTtcclxuXHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSBjb3B5IG9mIHRoZSBnbG9iYWwgb3B0aW9ucyBvYmplY3Qgb3IgYW4gb3JpZ2luYWwgZ2xvYmFsIG9wdGlvbnNcclxuICogb2JqZWN0LCBiYXNlZCBvbiB0aGUgYGdldENvcHlgIGZsYWcuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBnZXRPcHRpb25zXHJcbiAqXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2dldENvcHk9dHJ1ZV0gLSBTcGVjaWZpZXMgd2hldGhlciB0byByZXR1cm4gYSBjb3BpZWRcclxuICogb2JqZWN0IG9mIHRoZSBnbG9iYWwgb3B0aW9ucyAoYHRydWVgKSBvciBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9wdGlvbnNcclxuICogb2JqZWN0IChgZmFsc2VgKS4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYHRydWVgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBIGNvcHkgb2YgdGhlIGdsb2JhbCBvcHRpb25zIG9iamVjdCwgb3IgYSByZWZlcmVuY2VcclxuICogdG8gdGhlIGdsb2JhbCBvcHRpb25zIG9iamVjdC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRPcHRpb25zKGdldENvcHkgPSB0cnVlKSB7XHJcbiAgLy8gUmV0dXJuIGEgY29weSBvciBhbiBvcmlnaW5hbCBnbG9iYWwgb3B0aW9ucyBvYmplY3RcclxuICByZXR1cm4gZ2V0Q29weSA/IGRlZXBDb3B5KGdsb2JhbE9wdGlvbnMpIDogZ2xvYmFsT3B0aW9ucztcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYW5kIHJldHVybnMgdGhlIGdsb2JhbCBvcHRpb25zIG9iamVjdCBvciBhIGNvcHkgb2YgdGhlIGdsb2JhbCBvcHRpb25zXHJcbiAqIG9iamVjdCwgYmFzZWQgb24gdGhlIGBnZXRDb3B5YCBmbGFnLiBUaGUgYG5ld09wdGlvbnNgIG9iamVjdCBjYW4gYmVcclxuICogc3RyaWN0bHkgdmFsaWRhdGVkIGRlcGVuZGluZyBvbiB0aGUgYHN0cmljdENoZWNrYCBmbGFnLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gdXBkYXRlT3B0aW9uc1xyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gbmV3T3B0aW9ucyAtIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBuZXcgb3B0aW9ucyB0byBiZVxyXG4gKiBtZXJnZWQgaW50byB0aGUgZ2xvYmFsIG9wdGlvbnMuXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2dldENvcHk9ZmFsc2VdIC0gRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIG1lcmdlIHRoZSBuZXdcclxuICogb3B0aW9ucyBpbnRvIGEgY29weSBvZiB0aGUgZ2xvYmFsIG9wdGlvbnMgb2JqZWN0IChgdHJ1ZWApIG9yIGRpcmVjdGx5IGludG9cclxuICogdGhlIGdsb2JhbCBvcHRpb25zIG9iamVjdCAoYGZhbHNlYCkuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0cmljdENoZWNrPXRydWVdIC0gRGV0ZXJtaW5lcyBpZiBzdHJpY3RlciB2YWxpZGF0aW9uXHJcbiAqIHNob3VsZCBiZSBhcHBsaWVkLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdHJ1ZWAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSB1cGRhdGVkIG9wdGlvbnMgb2JqZWN0LCBlaXRoZXIgdGhlIG1vZGlmaWVkIGdsb2JhbFxyXG4gKiBvcHRpb25zIG9yIGEgbW9kaWZpZWQgY29weSwgYmFzZWQgb24gdGhlIHZhbHVlIG9mIGBnZXRDb3B5YC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKG5ld09wdGlvbnMsIGdldENvcHkgPSBmYWxzZSwgc3RyaWN0Q2hlY2sgPSB0cnVlKSB7XHJcbiAgLy8gTWVyZ2UgbmV3IG9wdGlvbnMgdG8gdGhlIGdsb2JhbCBvcHRpb25zIG9yIGl0cyBjb3B5IGFuZCByZXR1cm4gdGhlIHJlc3VsdFxyXG4gIHJldHVybiBfbWVyZ2VPcHRpb25zKFxyXG4gICAgLy8gRmlyc3QsIGdldCB0aGUgb3B0aW9uc1xyXG4gICAgZ2V0T3B0aW9ucyhnZXRDb3B5KSxcclxuICAgIC8vIE5leHQsIHZhbGlkYXRlIHRoZSBuZXcgb3B0aW9uc1xyXG4gICAgdmFsaWRhdGVPcHRpb25zKG5ld09wdGlvbnMsIHN0cmljdENoZWNrKVxyXG4gICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGVzIGFuZCByZXR1cm5zIHRoZSBnbG9iYWwgb3B0aW9ucyBvYmplY3Qgd2l0aCB2YWx1ZXMgcHJvdmlkZWQgdGhyb3VnaFxyXG4gKiB0aGUgQ0xJLCBrZWVwaW5nIHRoZSBwcmluY2lwbGUgb2Ygb3B0aW9ucyBsb2FkIHByaW9yaXR5LiBUaGUgZnVuY3Rpb24gYWNjZXB0c1xyXG4gKiBhIGBjbGlBcmdzYCBhcnJheSBjb250YWluaW5nIGFyZ3VtZW50cyBmcm9tIHRoZSBDTEksIHdoaWNoIHdpbGwgYmUgdmFsaWRhdGVkXHJcbiAqIGFuZCBhcHBsaWVkIGlmIHByb3ZpZGVkLlxyXG4gKlxyXG4gKiBUaGUgZnVuY3Rpb24gcHJpb3JpdGl6ZXMgdmFsdWVzIGluIHRoZSBmb2xsb3dpbmcgb3JkZXI6XHJcbiAqXHJcbiAqIDEuIFZhbHVlcyBmcm9tIHRoZSBjb21tYW5kIGxpbmUgaW50ZXJmYWNlIChDTEkpLlxyXG4gKiAyLiBWYWx1ZXMgZnJvbSBhIGN1c3RvbSBKU09OIGZpbGUgKGxvYWRlZCBieSB0aGUgYC0tbG9hZENvbmZpZ2Agb3B0aW9uKS5cclxuICpcclxuICogQGZ1bmN0aW9uIHNldENsaU9wdGlvbnNcclxuICpcclxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBjbGlBcmdzIC0gQW4gYXJyYXkgb2YgY29tbWFuZCBsaW5lIGFyZ3VtZW50cyB1c2VkXHJcbiAqIGZvciBhZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSB1cGRhdGVkIGdsb2JhbCBvcHRpb25zIG9iamVjdCwgcmVmbGVjdGluZyB0aGUgbWVyZ2VkXHJcbiAqIGNvbmZpZ3VyYXRpb24gZnJvbSBzb3VyY2VzIHByb3ZpZGVkIHRocm91Z2ggdGhlIENMSS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDbGlPcHRpb25zKGNsaUFyZ3MpIHtcclxuICAvLyBPbmx5IGZvciB0aGUgQ0xJIHVzYWdlXHJcbiAgaWYgKGNsaUFyZ3MgJiYgQXJyYXkuaXNBcnJheShjbGlBcmdzKSAmJiBjbGlBcmdzLmxlbmd0aCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gR2V0IG9wdGlvbnMgZnJvbSB0aGUgY3VzdG9tIEpTT04gbG9hZGVkIHZpYSB0aGUgYC0tbG9hZENvbmZpZ2BcclxuICAgICAgY29uc3QgY29uZmlnT3B0aW9ucyA9IF9sb2FkQ29uZmlnRmlsZShjbGlBcmdzKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSBnbG9iYWwgb3B0aW9ucyB3aXRoIHZhbGlkYXRlZCB2YWx1ZXMgZnJvbSB0aGUgYGNvbmZpZ09wdGlvbnNgXHJcbiAgICAgIHVwZGF0ZU9wdGlvbnMoY29uZmlnT3B0aW9ucyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2coMiwgJ1t2YWxpZGF0aW9uXSBObyBvcHRpb25zIGFkZGVkIGZyb20gdGhlIGAtLWxvYWRDb25maWdgIG9wdGlvbi4nKTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBHZXQgb3B0aW9ucyBmcm9tIHRoZSBDTElcclxuICAgICAgY29uc3QgY2xpT3B0aW9ucyA9IF9wYWlyQXJndW1lbnRWYWx1ZShjbGlBcmdzKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSBnbG9iYWwgb3B0aW9ucyB3aXRoIHZhbGlkYXRlZCB2YWx1ZXMgZnJvbSB0aGUgYGNsaU9wdGlvbnNgXHJcbiAgICAgIHVwZGF0ZU9wdGlvbnMoY2xpT3B0aW9ucywgZmFsc2UsIGZhbHNlKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZygyLCAnW3ZhbGlkYXRpb25dIE5vIG9wdGlvbnMgYWRkZWQgZnJvbSB0aGUgQ0xJIGFyZ3VtZW50cy4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFJldHVybiByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvcHRpb25zXHJcbiAgcmV0dXJuIGdldE9wdGlvbnMoZmFsc2UpO1xyXG59XHJcblxyXG4vKipcclxuICogTWFwcyBvbGQtc3RydWN0dXJlZCBjb25maWd1cmF0aW9uIG9wdGlvbnMgKFBoYW50b21KUy1iYXNlZCkgdG8gYSBuZXcgZm9ybWF0XHJcbiAqIChQdXBwZXRlZXItYmFzZWQpLiBUaGlzIGZ1bmN0aW9uIGNvbnZlcnRzIGZsYXQsIG9sZC1zdHJ1Y3R1cmVkIG9wdGlvbnMgaW50b1xyXG4gKiBhIG5ldywgbmVzdGVkIGNvbmZpZ3VyYXRpb24gZm9ybWF0IGJhc2VkIG9uIGEgcHJlZGVmaW5lZCBtYXBwaW5nIHByb3ZpZGVkXHJcbiAqIGluIHRoZSBgbmVzdGVkUHJvcHNgIG9iamVjdC4gVGhlIG5ldyBmb3JtYXQgaXMgdXNlZCBmb3IgUHVwcGV0ZWVyLCB3aGlsZVxyXG4gKiB0aGUgb2xkIGZvcm1hdCB3YXMgdXNlZCBmb3IgUGhhbnRvbUpTLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gbWFwVG9OZXdPcHRpb25zXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvbGRPcHRpb25zIC0gVGhlIG9sZCwgZmxhdCBjb25maWd1cmF0aW9uIG9wdGlvbnNcclxuICogdG8gYmUgY29udmVydGVkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBIG5ldyBvYmplY3QgY29udGFpbmluZyBvcHRpb25zIHN0cnVjdHVyZWQgYWNjb3JkaW5nXHJcbiAqIHRvIHRoZSBtYXBwaW5nIGRlZmluZWQgaW4gdGhlIGBuZXN0ZWRQcm9wc2Agb2JqZWN0IG9yIGFuIGVtcHR5IG9iamVjdFxyXG4gKiBpZiB0aGUgcHJvdmlkZWQgYG9sZE9wdGlvbnNgIGlzIG5vdCBhIGNvcnJlY3Qgb2JqZWN0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1hcFRvTmV3T3B0aW9ucyhvbGRPcHRpb25zKSB7XHJcbiAgLy8gQW4gb2JqZWN0IGZvciB0aGUgbmV3IHN0cnVjdHVyZWQgb3B0aW9uc1xyXG4gIGNvbnN0IG5ld09wdGlvbnMgPSB7fTtcclxuXHJcbiAgLy8gQ2hlY2sgaWYgcHJvdmlkZWQgdmFsdWUgaXMgYSBjb3JyZWN0IG9iamVjdFxyXG4gIGlmIChpc09iamVjdChvbGRPcHRpb25zKSkge1xyXG4gICAgLy8gSXRlcmF0ZSBvdmVyIGVhY2gga2V5LXZhbHVlIHBhaXIgaW4gdGhlIG9sZC1zdHJ1Y3R1cmVkIG9wdGlvbnNcclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9sZE9wdGlvbnMpKSB7XHJcbiAgICAgIC8vIElmIHRoZXJlIGlzIGEgbmVzdGVkIG1hcHBpbmcsIHNwbGl0IGl0IGludG8gYSBwcm9wZXJ0aWVzIGNoYWluXHJcbiAgICAgIGNvbnN0IHByb3BlcnRpZXNDaGFpbiA9IG5lc3RlZFByb3BzW2tleV1cclxuICAgICAgICA/IG5lc3RlZFByb3BzW2tleV0uc3BsaXQoJy4nKVxyXG4gICAgICAgIDogW107XHJcblxyXG4gICAgICAvLyBJZiBpdCBpcyB0aGUgbGFzdCBwcm9wZXJ0eSBpbiB0aGUgY2hhaW4sIGFzc2lnbiB0aGUgdmFsdWUsIG90aGVyd2lzZSxcclxuICAgICAgLy8gY3JlYXRlIG9yIHJldXNlIHRoZSBuZXN0ZWQgb2JqZWN0XHJcbiAgICAgIHByb3BlcnRpZXNDaGFpbi5yZWR1Y2UoXHJcbiAgICAgICAgKG9iaiwgcHJvcCwgaW5kZXgpID0+XHJcbiAgICAgICAgICAob2JqW3Byb3BdID1cclxuICAgICAgICAgICAgcHJvcGVydGllc0NoYWluLmxlbmd0aCAtIDEgPT09IGluZGV4ID8gdmFsdWUgOiBvYmpbcHJvcF0gfHwge30pLFxyXG4gICAgICAgIG5ld09wdGlvbnNcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgbG9nKFxyXG4gICAgICAyLFxyXG4gICAgICAnW2NvbmZpZ10gTm8gY29ycmVjdCBvYmplY3Qgd2l0aCBvcHRpb25zIHdhcyBwcm92aWRlZC4gUmV0dXJuaW5nIGFuIGVtcHR5IG9iamVjdC4nXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJuIHRoZSBuZXcsIHN0cnVjdHVyZWQgb3B0aW9ucyBvYmplY3RcclxuICByZXR1cm4gbmV3T3B0aW9ucztcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyBhIHNwZWNpZmllZCBvcHRpb24gdXNpbmcgdGhlIGNvcnJlc3BvbmRpbmcgdmFsaWRhdG9yIGZyb20gdGhlXHJcbiAqIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBSZXR1cm5zIHRoZSBvcmlnaW5hbCBvcHRpb24gaWYgdGhlIHZhbGlkYXRpb25cclxuICogaXMgZGlzYWJsZWQgZ2xvYmFsbHkuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiB2YWxpZGF0ZU9wdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBvcHRpb24gdG8gdmFsaWRhdGUuXHJcbiAqIEBwYXJhbSB7YW55fSBjb25maWdPcHRpb24gLSBUaGUgdmFsdWUgb2YgdGhlIG9wdGlvbiB0byB2YWxpZGF0ZS5cclxuICogQHBhcmFtIHtib29sZWFufSBbc3RyaWN0Q2hlY2s9dHJ1ZV0gLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb25cclxuICogc2hvdWxkIGJlIGFwcGxpZWQuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0cnVlYC5cclxuICpcclxuICogQHJldHVybnMge2FueX0gVGhlIHBhcnNlZCBhbmQgdmFsaWRhdGVkIHZhbHVlIG9mIHRoZSBvcHRpb24uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVPcHRpb24obmFtZSwgY29uZmlnT3B0aW9uLCBzdHJpY3RDaGVjayA9IHRydWUpIHtcclxuICAvLyBSZXR1cm4gdGhlIG9yaWdpbmFsIG9wdGlvbiBpZiB0aGUgdmFsaWRhdGlvbiBpcyBkaXNhYmxlZFxyXG4gIGlmICghZ2V0T3B0aW9ucygpLm90aGVyLnZhbGlkYXRpb24pIHtcclxuICAgIHJldHVybiBjb25maWdPcHRpb247XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gUmV0dXJuIHZhbGlkYXRlZCBvcHRpb25cclxuICAgIHJldHVybiB2YWxpZGF0b3JzW25hbWVdKHN0cmljdENoZWNrKS5wYXJzZShjb25maWdPcHRpb24pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAvLyBMb2cgWm9kIGlzc3Vlc1xyXG4gICAgbG9nWm9kSXNzdWVzKFxyXG4gICAgICAxLFxyXG4gICAgICBlcnJvci5pc3N1ZXMsXHJcbiAgICAgIGBbdmFsaWRhdGlvbl0gVGhlICR7bmFtZX0gb3B0aW9uIHZhbGlkYXRpb24gZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFRocm93IHZhbGlkYXRpb24gZXJyb3JcclxuICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgYFt2YWxpZGF0aW9uXSBUaGUgJHtuYW1lfSBvcHRpb24gdmFsaWRhdGlvbiBlcnJvcmAsXHJcbiAgICAgIDQwMFxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIGV4cG9ydGluZyBwcm9jZXNzLlxyXG4gKiBSZXR1cm5zIHRoZSBvcmlnaW5hbCBvcHRpb24gaWYgdGhlIHZhbGlkYXRpb24gaXMgZGlzYWJsZWQgZ2xvYmFsbHkuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiB2YWxpZGF0ZU9wdGlvbnNcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ09wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvcHRpb25zIHRvIGJlIHZhbGlkYXRlZC5cclxuICogQHBhcmFtIHtib29sZWFufSBbc3RyaWN0Q2hlY2s9dHJ1ZV0gLSBEZXRlcm1pbmVzIGlmIHN0cmljdGVyIHZhbGlkYXRpb25cclxuICogc2hvdWxkIGJlIGFwcGxpZWQuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0cnVlYC5cclxuICpcclxuICogQHJldHVybnMge09iamVjdH0gVGhlIHBhcnNlZCBhbmQgdmFsaWRhdGVkIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBvYmplY3QuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVPcHRpb25zKGNvbmZpZ09wdGlvbnMsIHN0cmljdENoZWNrID0gdHJ1ZSkge1xyXG4gIC8vIFJldHVybiB0aGUgb3JpZ2luYWwgY29uZmlnIGlmIHRoZSB2YWxpZGF0aW9uIGlzIGRpc2FibGVkXHJcbiAgaWYgKCFnZXRPcHRpb25zKCkub3RoZXIudmFsaWRhdGlvbikge1xyXG4gICAgcmV0dXJuIGNvbmZpZ09wdGlvbnM7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gUmV0dXJuIHZhbGlkYXRlZCBvcHRpb25zXHJcbiAgICByZXR1cm4gc3RyaWN0Q2hlY2tcclxuICAgICAgPyBzdHJpY3RWYWxpZGF0ZShjb25maWdPcHRpb25zKVxyXG4gICAgICA6IGxvb3NlVmFsaWRhdGUoY29uZmlnT3B0aW9ucyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIC8vIExvZyBab2QgaXNzdWVzXHJcbiAgICBsb2dab2RJc3N1ZXMoMSwgZXJyb3IuaXNzdWVzLCAnW3ZhbGlkYXRpb25dIE9wdGlvbnMgdmFsaWRhdGlvbiBlcnJvcicpO1xyXG5cclxuICAgIC8vIFRocm93IHZhbGlkYXRpb24gZXJyb3JcclxuICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcignW3ZhbGlkYXRpb25dIE9wdGlvbnMgdmFsaWRhdGlvbiBlcnJvcicsIDQwMCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGVzLCBwYXJzZXMsIGFuZCBjaGVja3MgaWYgdGhlIHByb3ZpZGVkIGNvbmZpZyBpcyBhbGxvd2VkIHNldFxyXG4gKiBvZiBvcHRpb25zLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gaXNBbGxvd2VkQ29uZmlnXHJcbiAqXHJcbiAqIEBwYXJhbSB7dW5rbm93bn0gY29uZmlnIC0gVGhlIGNvbmZpZyB0byBiZSB2YWxpZGF0ZWQgYW5kIHBhcnNlZCBhcyBhIHNldFxyXG4gKiBvZiBvcHRpb25zLiBNdXN0IGJlIGVpdGhlciBhbiBvYmplY3Qgb3IgYSBzdHJpbmcuXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3RvU3RyaW5nPWZhbHNlXSAtIFdoZXRoZXIgdG8gcmV0dXJuIGEgc3RyaW5naWZpZWQgdmVyc2lvblxyXG4gKiBvZiB0aGUgcGFyc2VkIGNvbmZpZy4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cclxuICogQHBhcmFtIHtib29sZWFufSBbYWxsb3dGdW5jdGlvbnM9ZmFsc2VdIC0gV2hldGhlciB0byBhbGxvdyBmdW5jdGlvbnNcclxuICogaW4gdGhlIHBhcnNlZCBjb25maWcuIElmIGB0cnVlYCwgZnVuY3Rpb25zIGFyZSBwcmVzZXJ2ZWQuIE90aGVyd2lzZSwgd2hlblxyXG4gKiBhIGZ1bmN0aW9uIGlzIGZvdW5kLCBgbnVsbGAgaXMgcmV0dXJuZWQuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHsoT2JqZWN0fHN0cmluZ3xudWxsKX0gUmV0dXJucyBhIHBhcnNlZCBzZXQgb2Ygb3B0aW9ucyBvYmplY3QsXHJcbiAqIGEgc3RyaW5naWZpZWQgc2V0IG9mIG9wdGlvbnMgb2JqZWN0IGlmIHRoZSBgdG9TdHJpbmdgIGlzIGB0cnVlYCwgYW5kIGBudWxsYFxyXG4gKiBpZiB0aGUgY29uZmlnIGlzIG5vdCBhIHZhbGlkIHNldCBvZiBvcHRpb25zIG9yIHBhcnNpbmcgZmFpbHMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNBbGxvd2VkQ29uZmlnKFxyXG4gIGNvbmZpZyxcclxuICB0b1N0cmluZyA9IGZhbHNlLFxyXG4gIGFsbG93RnVuY3Rpb25zID0gZmFsc2VcclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEFjY2VwdCBvbmx5IG9iamVjdHMgYW5kIHN0cmluZ3NcclxuICAgIGlmICghaXNPYmplY3QoY29uZmlnKSAmJiB0eXBlb2YgY29uZmlnICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAvLyBSZXR1cm4gYG51bGxgIGlmIGFueSBvdGhlciB0eXBlXHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB0aGUgb2JqZWN0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvcmlnaW5hbCBjb25maWdcclxuICAgIGNvbnN0IG9iamVjdENvbmZpZyA9XHJcbiAgICAgIHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgPyBhbGxvd0Z1bmN0aW9uc1xyXG4gICAgICAgICAgPyBldmFsKGAoJHtjb25maWd9KWApXHJcbiAgICAgICAgICA6IEpTT04ucGFyc2UoY29uZmlnKVxyXG4gICAgICAgIDogY29uZmlnO1xyXG5cclxuICAgIC8vIFByZXNlcnZlIG9yIHJlbW92ZSBwb3RlbnRpYWwgZnVuY3Rpb25zIGJhc2VkIG9uIHRoZSBgYWxsb3dGdW5jdGlvbnNgIGZsYWdcclxuICAgIGNvbnN0IHN0cmluZ2lmaWVkT3B0aW9ucyA9IF9vcHRpb25zU3RyaW5naWZ5KFxyXG4gICAgICBvYmplY3RDb25maWcsXHJcbiAgICAgIGFsbG93RnVuY3Rpb25zLFxyXG4gICAgICBmYWxzZVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBQYXJzZSB0aGUgY29uZmlnIHRvIGNoZWNrIGlmIGl0IGlzIHZhbGlkIHNldCBvZiBvcHRpb25zXHJcbiAgICBjb25zdCBwYXJzZWRPcHRpb25zID0gYWxsb3dGdW5jdGlvbnNcclxuICAgICAgPyBKU09OLnBhcnNlKFxyXG4gICAgICAgICAgX29wdGlvbnNTdHJpbmdpZnkob2JqZWN0Q29uZmlnLCBhbGxvd0Z1bmN0aW9ucywgdHJ1ZSksXHJcbiAgICAgICAgICAoXywgdmFsdWUpID0+XHJcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuc3RhcnRzV2l0aCgnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICAgID8gZXZhbChgKCR7dmFsdWV9KWApXHJcbiAgICAgICAgICAgICAgOiB2YWx1ZVxyXG4gICAgICAgIClcclxuICAgICAgOiBKU09OLnBhcnNlKHN0cmluZ2lmaWVkT3B0aW9ucyk7XHJcblxyXG4gICAgLy8gUmV0dXJuIHN0cmluZ2lmaWVkIG9yIG9iamVjdCBvcHRpb25zIGJhc2VkIG9uIHRoZSBgdG9TdHJpbmdgIGZsYWdcclxuICAgIHJldHVybiB0b1N0cmluZyA/IHN0cmluZ2lmaWVkT3B0aW9ucyA6IHBhcnNlZE9wdGlvbnM7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIC8vIFJldHVybiBgbnVsbGAgaWYgcGFyc2luZyBmYWlsc1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZXMgYW5kIHJldHVybnMgdGhlIGdsb2JhbCBvcHRpb25zIG9iamVjdCBiYXNlZCBvbiB0aGUgcHJvdmlkZWRcclxuICogY29uZmlndXJhdGlvbiwgc2V0dGluZyB2YWx1ZXMgZnJvbSBuZXN0ZWQgcHJvcGVydGllcyByZWN1cnNpdmVseS5cclxuICpcclxuICogVGhlIGZ1bmN0aW9uIHByaW9yaXRpemVzIHZhbHVlcyBpbiB0aGUgZm9sbG93aW5nIG9yZGVyOlxyXG4gKlxyXG4gKiAxLiBWYWx1ZXMgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgKHNwZWNpZmllZCBpbiB0aGUgYC5lbnZgIGZpbGUpLlxyXG4gKiAyLiBWYWx1ZXMgZnJvbSB0aGUgYC4vbGliL3NjaGVtYXMvY29uZmlnLmpzYCBmaWxlIChkZWZhdWx0cykuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfaW5pdE9wdGlvbnNcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCB1c2VkIGZvciBpbml0aWFsaXppbmdcclxuICogdGhlIGdsb2JhbCBvcHRpb25zLiBJdCBzaG91bGQgaW5jbHVkZSBuZXN0ZWQgcHJvcGVydGllcyB3aXRoIGEgYHZhbHVlYFxyXG4gKiBhbmQgYW4gYGVudkxpbmtgIGZvciBsaW5raW5nIHRvIGVudmlyb25tZW50IHZhcmlhYmxlcy5cclxuICpcclxuICogQHJldHVybnMge09iamVjdH0gVGhlIGluaXRpYWxpemVkIGdsb2JhbCBvcHRpb25zIG9iamVjdCwgcG9wdWxhdGVkIHdpdGhcclxuICogdmFsdWVzIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBjb25maWd1cmF0aW9uIGFuZCB0aGUgZXN0YWJsaXNoZWQgcHJpb3JpdHlcclxuICogb3JkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaW5pdE9wdGlvbnMoY29uZmlnKSB7XHJcbiAgLy8gSW5pdCB0aGUgb2JqZWN0IGZvciBvcHRpb25zXHJcbiAgY29uc3Qgb3B0aW9ucyA9IHt9O1xyXG5cclxuICAvLyBTdGFydCBpbml0aWFsaXppbmcgdGhlIGBvcHRpb25zYCBvYmplY3QgcmVjdXJzaXZlbHlcclxuICBmb3IgKGNvbnN0IFtuYW1lLCBpdGVtXSBvZiBPYmplY3QuZW50cmllcyhjb25maWcpKSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGl0ZW0sICd2YWx1ZScpKSB7XHJcbiAgICAgIC8vIFNldCB0aGUgY29ycmVjdCB2YWx1ZSBiYXNlZCBvbiB0aGUgZXN0YWJsaXNoZWQgcHJpb3JpdHkgb3JkZXJcclxuICAgICAgaWYgKGVudnNbaXRlbS5lbnZMaW5rXSAhPT0gdW5kZWZpbmVkICYmIGVudnNbaXRlbS5lbnZMaW5rXSAhPT0gbnVsbCkge1xyXG4gICAgICAgIC8vIFRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdmFsdWVcclxuICAgICAgICBvcHRpb25zW25hbWVdID0gZW52c1tpdGVtLmVudkxpbmtdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFRoZSB2YWx1ZSBmcm9tIHRoZSBjb25maWcgZmlsZVxyXG4gICAgICAgIG9wdGlvbnNbbmFtZV0gPSBpdGVtLnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBDcmVhdGUgYSBjYXRlZ29yeSBvZiBvcHRpb25zIGluIHRoZSBgb3B0aW9uc2Agb2JqZWN0XHJcbiAgICAgIG9wdGlvbnNbbmFtZV0gPSBfaW5pdE9wdGlvbnMoaXRlbSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm4gdGhlIGNyZWF0ZWQgYG9wdGlvbnNgIG9iamVjdFxyXG4gIHJldHVybiBvcHRpb25zO1xyXG59XHJcblxyXG4vKipcclxuICogUmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBzZXRzIG9mIGNvbmZpZ3VyYXRpb24gb3B0aW9ucywgdGFraW5nIGludG8gYWNjb3VudFxyXG4gKiBwcm9wZXJ0aWVzIHNwZWNpZmllZCBpbiB0aGUgYGFic29sdXRlUHJvcHNgIGFycmF5IHRoYXQgcmVxdWlyZSBhYnNvbHV0ZVxyXG4gKiBtZXJnaW5nLiBUaGUgYG9yaWdpbmFsT3B0aW9uc2Agb2JqZWN0IHdpbGwgYmUgZXh0ZW5kZWQgd2l0aCBvcHRpb25zIGZyb21cclxuICogdGhlIGBuZXdPcHRpb25zYCBvYmplY3QuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfbWVyZ2VPcHRpb25zXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcmlnaW5hbE9wdGlvbnMgLSBUaGUgb3JpZ2luYWwgY29uZmlndXJhdGlvbiBvcHRpb25zIG9iamVjdFxyXG4gKiB0byBiZSBleHRlbmRlZC5cclxuICogQHBhcmFtIHtPYmplY3R9IG5ld09wdGlvbnMgLSBUaGUgbmV3IGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBvYmplY3QgdG8gbWVyZ2UuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBleHRlbmRlZCBgb3JpZ2luYWxPcHRpb25zYCBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBfbWVyZ2VPcHRpb25zKG9yaWdpbmFsT3B0aW9ucywgbmV3T3B0aW9ucykge1xyXG4gIC8vIENoZWNrIGlmIHRoZSBgb3JpZ2luYWxPcHRpb25zYCBhbmQgYG5ld09wdGlvbnNgIGFyZSBjb3JyZWN0IG9iamVjdHNcclxuICBpZiAoaXNPYmplY3Qob3JpZ2luYWxPcHRpb25zKSAmJiBpc09iamVjdChuZXdPcHRpb25zKSkge1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobmV3T3B0aW9ucykpIHtcclxuICAgICAgb3JpZ2luYWxPcHRpb25zW2tleV0gPVxyXG4gICAgICAgIGlzT2JqZWN0KHZhbHVlKSAmJlxyXG4gICAgICAgICFhYnNvbHV0ZVByb3BzLmluY2x1ZGVzKGtleSkgJiZcclxuICAgICAgICBvcmlnaW5hbE9wdGlvbnNba2V5XSAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICA/IF9tZXJnZU9wdGlvbnMob3JpZ2luYWxPcHRpb25zW2tleV0sIHZhbHVlKVxyXG4gICAgICAgICAgOiB2YWx1ZSAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gdmFsdWVcclxuICAgICAgICAgICAgOiBvcmlnaW5hbE9wdGlvbnNba2V5XSB8fCBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJuIHRoZSBvcmlnaW5hbCAobW9kaWZpZWQgb3Igbm90KSBvcHRpb25zXHJcbiAgcmV0dXJuIG9yaWdpbmFsT3B0aW9ucztcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnZlcnRzIHRoZSBwcm92aWRlZCBvcHRpb25zIG9iamVjdCB0byBhIEpTT04gc3RyaW5nIHdpdGggdGhlIG9wdGlvblxyXG4gKiB0byBwcmVzZXJ2ZSBmdW5jdGlvbnMuIEluIG9yZGVyIGZvciBhIGZ1bmN0aW9uIHRvIGJlIHByZXNlcnZlZCwgaXQgbmVlZHNcclxuICogdG8gZm9sbG93IHRoZSBmb3JtYXQgYGZ1bmN0aW9uICguLi4pIHsuLi59YC4gU3VjaCBhIGZ1bmN0aW9uIGNhbiBhbHNvXHJcbiAqIGJlIHN0cmluZ2lmaWVkLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gX29wdGlvbnNTdHJpbmdpZnlcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBvYmplY3QgdG8gYmUgY29udmVydGVkIHRvIGEgc3RyaW5nLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGFsbG93RnVuY3Rpb25zIC0gSWYgc2V0IHRvIGB0cnVlYCwgZnVuY3Rpb25zIGFyZSBwcmVzZXJ2ZWRcclxuICogaW4gdGhlIG91dHB1dC4gT3RoZXJ3aXNlIGFuIGVycm9yIGlzIHRocm93bi5cclxuICogQHBhcmFtIHtib29sZWFufSBzdHJpbmdpZnlGdW5jdGlvbnMgLSBJZiBzZXQgdG8gYHRydWVgLCBmdW5jdGlvbnMgYXJlIHNhdmVkXHJcbiAqIGFzIHN0cmluZ3MuIFRoZSBgYWxsb3dGdW5jdGlvbnNgIG11c3QgYmUgc2V0IHRvIGB0cnVlYCBhcyB3ZWxsIGZvciB0aGlzXHJcbiAqIHRvIHRha2UgYW4gZWZmZWN0LlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgSlNPTi1mb3JtYXR0ZWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgb3B0aW9ucy5cclxuICpcclxuICogQHRocm93cyB7RXJyb3J9IFRocm93cyBhbiBgRXJyb3JgIHdoZW4gZnVuY3Rpb25zIGFyZSBub3QgYWxsb3dlZCBidXQgYXJlXHJcbiAqIGZvdW5kIGluIHByb3ZpZGVkIG9wdGlvbnMgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gX29wdGlvbnNTdHJpbmdpZnkob3B0aW9ucywgYWxsb3dGdW5jdGlvbnMsIHN0cmluZ2lmeUZ1bmN0aW9ucykge1xyXG4gIGNvbnN0IHJlcGxhY2VyQ2FsbGJhY2sgPSAoXywgdmFsdWUpID0+IHtcclxuICAgIC8vIFRyaW0gc3RyaW5nIHZhbHVlc1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uIG9yIHN0cmluZ2lmaWVkIGZ1bmN0aW9uXHJcbiAgICBpZiAoXHJcbiAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyB8fFxyXG4gICAgICAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJlxyXG4gICAgICAgIHZhbHVlLnN0YXJ0c1dpdGgoJ2Z1bmN0aW9uJykgJiZcclxuICAgICAgICB2YWx1ZS5lbmRzV2l0aCgnfScpKVxyXG4gICAgKSB7XHJcbiAgICAgIC8vIElmIHRoZSBgYWxsb3dGdW5jdGlvbnNgIGlzIHNldCB0byBgdHJ1ZWAsIHByZXNlcnZlIGZ1bmN0aW9uc1xyXG4gICAgICBpZiAoYWxsb3dGdW5jdGlvbnMpIHtcclxuICAgICAgICAvLyBCYXNlZCBvbiB0aGUgYHN0cmluZ2lmeUZ1bmN0aW9uc2Agb3B0aW9ucywgc2V0IGZ1bmN0aW9uIHZhbHVlc1xyXG4gICAgICAgIHJldHVybiBzdHJpbmdpZnlGdW5jdGlvbnNcclxuICAgICAgICAgID8gLy8gQXMgc3RyaW5naWZpZWQgZnVuY3Rpb25zXHJcbiAgICAgICAgICAgIGBcIkVYUF9GVU4keyh2YWx1ZSArICcnKS5yZXBsYWNlQWxsKC9cXHMrL2csICcgJyl9RVhQX0ZVTlwiYFxyXG4gICAgICAgICAgOiAvLyBBcyBmdW5jdGlvbnNcclxuICAgICAgICAgICAgYEVYUF9GVU4keyh2YWx1ZSArICcnKS5yZXBsYWNlQWxsKC9cXHMrL2csICcgJyl9RVhQX0ZVTmA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVGhyb3cgYW4gZXJyb3Igb3RoZXJ3aXNlXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJbiBhbGwgb3RoZXIgY2FzZXMsIHNpbXBseSByZXR1cm4gdGhlIHZhbHVlXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfTtcclxuXHJcbiAgLy8gU3RyaW5naWZ5IG9wdGlvbnMgYW5kIGlmIHJlcXVpcmVkLCByZXBsYWNlIHNwZWNpYWwgZnVuY3Rpb25zIG1hcmtzXHJcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMsIHJlcGxhY2VyQ2FsbGJhY2spLnJlcGxhY2VBbGwoXHJcbiAgICBzdHJpbmdpZnlGdW5jdGlvbnMgPyAvXFxcXFwiRVhQX0ZVTnxFWFBfRlVOXFxcXFwiL2cgOiAvXCJFWFBfRlVOfEVYUF9GVU5cIi9nLFxyXG4gICAgJydcclxuICApO1xyXG59XHJcblxyXG4vKipcclxuICogTG9hZHMgYWRkaXRpb25hbCBjb25maWd1cmF0aW9uIGZyb20gYSBzcGVjaWZpZWQgZmlsZSBwcm92aWRlZCB2aWFcclxuICogdGhlIGAtLWxvYWRDb25maWdgIG9wdGlvbiBpbiB0aGUgY29tbWFuZC1saW5lIGFyZ3VtZW50cy5cclxuICpcclxuICogQGZ1bmN0aW9uIF9sb2FkQ29uZmlnRmlsZVxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGNsaUFyZ3MgLSBDb21tYW5kLWxpbmUgYXJndW1lbnRzIHRvIHNlYXJjaFxyXG4gKiBmb3IgdGhlIGAtLWxvYWRDb25maWdgIG9wdGlvbiBhbmQgdGhlIGNvcnJlc3BvbmRpbmcgZmlsZSBwYXRoLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgYWRkaXRpb25hbCBjb25maWd1cmF0aW9uIGxvYWRlZCBmcm9tIHRoZSBzcGVjaWZpZWRcclxuICogZmlsZSwgb3IgYW4gZW1wdHkgb2JqZWN0IGlmIHRoZSBmaWxlIGlzIG5vdCBmb3VuZCwgaW52YWxpZCwgb3IgYW4gZXJyb3JcclxuICogb2NjdXJzLlxyXG4gKi9cclxuZnVuY3Rpb24gX2xvYWRDb25maWdGaWxlKGNsaUFyZ3MpIHtcclxuICAvLyBHZXQgdGhlIGFsbG93IGZsYWdzIGZvciB0aGUgY3VzdG9tIGxvZ2ljIGNoZWNrXHJcbiAgY29uc3QgeyBhbGxvd0NvZGVFeGVjdXRpb24sIGFsbG93RmlsZVJlc291cmNlcyB9ID0gZ2V0T3B0aW9ucygpLmN1c3RvbUxvZ2ljO1xyXG5cclxuICAvLyBDaGVjayBpZiB0aGUgYC0tbG9hZENvbmZpZ2Agb3B0aW9uIHdhcyB1c2VkXHJcbiAgY29uc3QgY29uZmlnSW5kZXggPSBjbGlBcmdzLmZpbmRJbmRleChcclxuICAgIChhcmcpID0+IGFyZy5yZXBsYWNlKC8tL2csICcnKSA9PT0gJ2xvYWRDb25maWcnXHJcbiAgKTtcclxuXHJcbiAgLy8gR2V0IHRoZSBgLS1sb2FkQ29uZmlnYCBvcHRpb24gdmFsdWVcclxuICBjb25zdCBjb25maWdGaWxlTmFtZSA9IGNvbmZpZ0luZGV4ID4gLTEgJiYgY2xpQXJnc1tjb25maWdJbmRleCArIDFdO1xyXG5cclxuICAvLyBDaGVjayBpZiB0aGUgYC0tbG9hZENvbmZpZ2AgaXMgcHJlc2VudCBhbmQgaGFzIGEgY29ycmVjdCB2YWx1ZVxyXG4gIGlmIChjb25maWdGaWxlTmFtZSAmJiBhbGxvd0ZpbGVSZXNvdXJjZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIExvYWQgYW4gb3B0aW9uYWwgY3VzdG9tIEpTT04gY29uZmlnIGZpbGVcclxuICAgICAgcmV0dXJuIGlzQWxsb3dlZENvbmZpZyhcclxuICAgICAgICByZWFkRmlsZVN5bmMoZ2V0QWJzb2x1dGVQYXRoKGNvbmZpZ0ZpbGVOYW1lKSwgJ3V0ZjgnKSxcclxuICAgICAgICBmYWxzZSxcclxuICAgICAgICBhbGxvd0NvZGVFeGVjdXRpb25cclxuICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ1dpdGhTdGFjayhcclxuICAgICAgICAyLFxyXG4gICAgICAgIGVycm9yLFxyXG4gICAgICAgIGBbY29uZmlnXSBVbmFibGUgdG8gbG9hZCB0aGUgY29uZmlndXJhdGlvbiBmcm9tIHRoZSAke2NvbmZpZ0ZpbGVOYW1lfSBmaWxlLmBcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIE5vIGFkZGl0aW9uYWwgb3B0aW9ucyB0byByZXR1cm5cclxuICByZXR1cm4ge307XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQYXJzZXMgY29tbWFuZC1saW5lIGFyZ3VtZW50cyBhbmQgcGFpcnMgZWFjaCBhcmd1bWVudCB3aXRoIGl0cyBjb3JyZXNwb25kaW5nXHJcbiAqIG9wdGlvbiBpbiB0aGUgY29uZmlndXJhdGlvbi4gVGhlIHZhbHVlcyBhcmUgc3RydWN0dXJlZCBpbnRvIGEgbmVzdGVkIG9wdGlvbnNcclxuICogb2JqZWN0LCBiYXNlZCBvbiBwcmVkZWZpbmVkIG1hcHBpbmdzIGluIHRoZSBgbmVzdGVkUHJvcHNgIG9iamVjdC5cclxuICpcclxuICogQGZ1bmN0aW9uIF9wYWlyQXJndW1lbnRWYWx1ZVxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGNsaUFyZ3MgLSBBbiBhcnJheSBvZiBjb21tYW5kLWxpbmUgYXJndW1lbnRzXHJcbiAqIGNvbnRhaW5pbmcgb3B0aW9ucyBhbmQgdGhlaXIgYXNzb2NpYXRlZCB2YWx1ZXMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IEFuIHVwZGF0ZWQgb3B0aW9ucyBvYmplY3Qgd2hlcmUgZWFjaCBvcHRpb24gZnJvbVxyXG4gKiB0aGUgY29tbWFuZC1saW5lIGlzIHBhaXJlZCB3aXRoIGl0cyB2YWx1ZSwgc3RydWN0dXJlZCBpbnRvIG5lc3RlZCBvYmplY3RzXHJcbiAqIGFzIGRlZmluZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBfcGFpckFyZ3VtZW50VmFsdWUoY2xpQXJncykge1xyXG4gIC8vIEFuIGVtcHR5IG9iamVjdCB0byBjb2xsZWN0IGFuZCBzdHJ1Y3R1cml6ZSBkYXRhIGZyb20gdGhlIGFyZ3NcclxuICBjb25zdCBjbGlPcHRpb25zID0ge307XHJcblxyXG4gIC8vIEN5Y2xlIHRocm91Z2ggYWxsIENMSSBhcmdzIGFuZCBmaWx0ZXIgdGhlbVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2xpQXJncy5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gY2xpQXJnc1tpXS5yZXBsYWNlKC8tL2csICcnKTtcclxuXHJcbiAgICAvLyBGaW5kIHRoZSByaWdodCBwbGFjZSBmb3IgcHJvcGVydHkncyB2YWx1ZVxyXG4gICAgY29uc3QgcHJvcGVydGllc0NoYWluID0gbmVzdGVkUHJvcHNbb3B0aW9uXVxyXG4gICAgICA/IG5lc3RlZFByb3BzW29wdGlvbl0uc3BsaXQoJy4nKVxyXG4gICAgICA6IFtdO1xyXG5cclxuICAgIC8vIENyZWF0ZSBvcHRpb25zIG9iamVjdCB3aXRoIHZhbHVlcyBmcm9tIENMSSBmb3IgbGF0ZXIgcGFyc2luZyBhbmQgbWVyZ2luZ1xyXG4gICAgcHJvcGVydGllc0NoYWluLnJlZHVjZSgob2JqLCBwcm9wLCBpbmRleCkgPT4ge1xyXG4gICAgICBpZiAocHJvcGVydGllc0NoYWluLmxlbmd0aCAtIDEgPT09IGluZGV4KSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBjbGlBcmdzWysraV07XHJcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgbG9nKFxyXG4gICAgICAgICAgICAyLFxyXG4gICAgICAgICAgICBgW2NvbmZpZ10gTWlzc2luZyB2YWx1ZSBmb3IgdGhlIENMSSAnLS0ke29wdGlvbn0nIGFyZ3VtZW50LiBVc2luZyB0aGUgZGVmYXVsdCB2YWx1ZS5gXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvYmpbcHJvcF0gPSB2YWx1ZSB8fCBudWxsO1xyXG4gICAgICB9IGVsc2UgaWYgKG9ialtwcm9wXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgb2JqW3Byb3BdID0ge307XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG9ialtwcm9wXTtcclxuICAgIH0sIGNsaU9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgLy8gUmV0dXJuIHBhcnNlZCBDTEkgb3B0aW9uc1xyXG4gIHJldHVybiBjbGlPcHRpb25zO1xyXG59XHJcblxyXG4vKipcclxuICogUmVjdXJzaXZlbHkgZ2VuZXJhdGVzIGEgbWFwcGluZyBvZiBuZXN0ZWQgYXJndW1lbnQgY2hhaW5zIGZyb20gYSBuZXN0ZWRcclxuICogY29uZmlnIG9iamVjdC4gVGhpcyBmdW5jdGlvbiB0cmF2ZXJzZXMgYSBuZXN0ZWQgb2JqZWN0IGFuZCBjcmVhdGVzIGEgbWFwcGluZ1xyXG4gKiB3aGVyZSBlYWNoIGtleSBpcyBhbiBhcmd1bWVudCBuYW1lIChlaXRoZXIgZnJvbSBgY2xpTmFtZWAsIGBsZWdhY3lOYW1lYCxcclxuICogb3IgdGhlIG9yaWdpbmFsIGtleSkgYW5kIGVhY2ggdmFsdWUgaXMgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjaGFpblxyXG4gKiBvZiBuZXN0ZWQgcHJvcGVydGllcyBsZWFkaW5nIHRvIHRoYXQgYXJndW1lbnQuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfY3JlYXRlTmVzdGVkUHJvcHNcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdC5cclxuICogQHBhcmFtIHtPYmplY3R9IFtuZXN0ZWRQcm9wcz17fV0gLSBUaGUgYWNjdW11bGF0b3Igb2JqZWN0IGZvciBzdG9yaW5nXHJcbiAqIHRoZSByZXN1bHRpbmcgYXJndW1lbnRzIGNoYWlucy4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYW4gZW1wdHkgb2JqZWN0LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW3Byb3BDaGFpbj0nJ10gLSBUaGUgY3VycmVudCBjaGFpbiBvZiBuZXN0ZWQgcHJvcGVydGllcyxcclxuICogdXNlZCBpbnRlcm5hbGx5IGR1cmluZyByZWN1cnNpb24uIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGFuIGVtcHR5IHN0cmluZy5cclxuICpcclxuICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IG1hcHBpbmcgYXJndW1lbnQgbmFtZXMgdG8gdGhlaXIgY29ycmVzcG9uZGluZ1xyXG4gKiBuZXN0ZWQgcHJvcGVydHkgY2hhaW5zLlxyXG4gKi9cclxuZnVuY3Rpb24gX2NyZWF0ZU5lc3RlZFByb3BzKGNvbmZpZywgbmVzdGVkUHJvcHMgPSB7fSwgcHJvcENoYWluID0gJycpIHtcclxuICBPYmplY3Qua2V5cyhjb25maWcpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgLy8gR2V0IHRoZSBzcGVjaWZpYyBzZWN0aW9uXHJcbiAgICBjb25zdCBlbnRyeSA9IGNvbmZpZ1trZXldO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIHN0aWxsIG1vcmUgZGVwdGggdG8gdHJhdmVyc2VcclxuICAgIGlmICh0eXBlb2YgZW50cnkudmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIC8vIFJlY3Vyc2UgaW50byBkZWVwZXIgbGV2ZWxzIG9mIG5lc3RlZCBhcmd1bWVudHNcclxuICAgICAgX2NyZWF0ZU5lc3RlZFByb3BzKGVudHJ5LCBuZXN0ZWRQcm9wcywgYCR7cHJvcENoYWlufS4ke2tleX1gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIENyZWF0ZSB0aGUgY2hhaW4gb2YgbmVzdGVkIGFyZ3VtZW50c1xyXG4gICAgICBuZXN0ZWRQcm9wc1tlbnRyeS5jbGlOYW1lIHx8IGtleV0gPSBgJHtwcm9wQ2hhaW59LiR7a2V5fWAuc3Vic3RyaW5nKDEpO1xyXG5cclxuICAgICAgLy8gU3VwcG9ydCBmb3IgdGhlIGxlZ2FjeSwgUGhhbnRvbUpTIHByb3BlcnRpZXMgbmFtZXNcclxuICAgICAgaWYgKGVudHJ5LmxlZ2FjeU5hbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIG5lc3RlZFByb3BzW2VudHJ5LmxlZ2FjeU5hbWVdID0gYCR7cHJvcENoYWlufS4ke2tleX1gLnN1YnN0cmluZygxKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBSZXR1cm4gdGhlIG9iamVjdCB3aXRoIG5lc3RlZCBhcmd1bWVudCBjaGFpbnNcclxuICByZXR1cm4gbmVzdGVkUHJvcHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWN1cnNpdmVseSBnYXRoZXJzIHRoZSBuYW1lcyBvZiBwcm9wZXJ0aWVzIGZyb20gYSBjb25maWd1cmF0aW9uIG9iamVjdCB0aGF0XHJcbiAqIHNob3VsZCBiZSB0cmVhdGVkIGFzIGFic29sdXRlIHByb3BlcnRpZXMuIFRoZXNlIHByb3BlcnRpZXMgaGF2ZSB2YWx1ZXMgdGhhdFxyXG4gKiBhcmUgb2JqZWN0cyBhbmQgZG8gbm90IGNvbnRhaW4gZnVydGhlciBuZXN0ZWQgZGVwdGggd2hlbiBtZXJnaW5nIGFuIG9iamVjdFxyXG4gKiBjb250YWluaW5nIHRoZXNlIG9wdGlvbnMuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfY3JlYXRlQWJzb2x1dGVQcm9wc1xyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIC0gVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0LlxyXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IFthYnNvbHV0ZVByb3BzPVtdXSAtIEFuIGFycmF5IHRvIGNvbGxlY3QgdGhlIG5hbWVzXHJcbiAqIG9mIGFic29sdXRlIHByb3BlcnRpZXMuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGFuIGVtcHR5IGFycmF5LlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7QXJyYXk8c3RyaW5nPn0gQW4gYXJyYXkgY29udGFpbmluZyB0aGUgbmFtZXMgb2YgYWJzb2x1dGVcclxuICogcHJvcGVydGllcy5cclxuICovXHJcbmZ1bmN0aW9uIF9jcmVhdGVBYnNvbHV0ZVByb3BzKGNvbmZpZywgYWJzb2x1dGVQcm9wcyA9IFtdKSB7XHJcbiAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgIC8vIEdldCB0aGUgc3BlY2lmaWMgc2VjdGlvblxyXG4gICAgY29uc3QgZW50cnkgPSBjb25maWdba2V5XTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBzdGlsbCBtb3JlIGRlcHRoIHRvIHRyYXZlcnNlXHJcbiAgICBpZiAodHlwZW9mIGVudHJ5LnR5cGVzID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAvLyBSZWN1cnNlIGludG8gZGVlcGVyIGxldmVsc1xyXG4gICAgICBfY3JlYXRlQWJzb2x1dGVQcm9wcyhlbnRyeSwgYWJzb2x1dGVQcm9wcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBJZiB0aGUgb3B0aW9uIGNhbiBiZSBhbiBvYmplY3QsIHNhdmUgaXRzIHR5cGUgaW4gdGhlIGFycmF5XHJcbiAgICAgIGlmIChlbnRyeS50eXBlcy5pbmNsdWRlcygnT2JqZWN0JykpIHtcclxuICAgICAgICBhYnNvbHV0ZVByb3BzLnB1c2goa2V5KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBSZXR1cm4gdGhlIGFycmF5IHdpdGggdGhlIG5hbWVzIG9mIGFic29sdXRlIHByb3BlcnRpZXNcclxuICByZXR1cm4gYWJzb2x1dGVQcm9wcztcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGdldE9wdGlvbnMsXHJcbiAgdXBkYXRlT3B0aW9ucyxcclxuICBzZXRDbGlPcHRpb25zLFxyXG4gIG1hcFRvTmV3T3B0aW9ucyxcclxuICB2YWxpZGF0ZU9wdGlvbixcclxuICB2YWxpZGF0ZU9wdGlvbnMsXHJcbiAgaXNBbGxvd2VkQ29uZmlnXHJcbn07XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBIVFRQIHV0aWxpdHkgbW9kdWxlIGZvciBmZXRjaGluZyBhbmQgcG9zdGluZyBkYXRhLiBTdXBwb3J0cyBib3RoXHJcbiAqIEhUVFAgYW5kIEhUVFBTIHByb3RvY29scywgcHJvdmlkaW5nIG1ldGhvZHMgdG8gbWFrZSBHRVQgYW5kIFBPU1QgcmVxdWVzdHNcclxuICogd2l0aCBjdXN0b21pemFibGUgb3B0aW9ucy4gSW5jbHVkZXMgcHJvdG9jb2wgZGV0ZXJtaW5hdGlvbiBiYXNlZCBvbiBVUkxcclxuICogYW5kIGF1Z21lbnRzIHJlc3BvbnNlIG9iamVjdHMgd2l0aCBhICd0ZXh0JyBwcm9wZXJ0eSBmb3IgZWFzaWVyIGRhdGEgYWNjZXNzLlxyXG4gKi9cclxuXHJcbmltcG9ydCBodHRwIGZyb20gJ2h0dHAnO1xyXG5pbXBvcnQgaHR0cHMgZnJvbSAnaHR0cHMnO1xyXG5cclxuLyoqXHJcbiAqIFNlbmRzIGEgR0VUIHJlcXVlc3QgdG8gdGhlIHNwZWNpZmllZCBVUkwgdXNpbmcgZWl0aGVyIEhUVFAgb3IgSFRUUFMgcHJvdG9jb2wuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gZ2V0XHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgVVJMIHRvIGdldCBkYXRhIGZyb20uXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdE9wdGlvbnM9e31dIC0gT3B0aW9ucyBmb3IgdGhlIEhUVFAvSFRUUFMgcmVxdWVzdC5cclxuICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYW4gZW1wdHkgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgSFRUUC9IVFRQUyByZXNwb25zZVxyXG4gKiBvYmplY3Qgd2l0aCBhZGRlZCAndGV4dCcgcHJvcGVydHkgb3IgcmVqZWN0aW5nIHdpdGggYW4gZXJyb3IuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0KHVybCwgcmVxdWVzdE9wdGlvbnMgPSB7fSkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAvLyBEZWNpZGUgb24gdGhlIHByb3RvY29sXHJcbiAgICBfZ2V0UHJvdG9jb2xNb2R1bGUodXJsKVxyXG4gICAgICAuZ2V0KHVybCwgcmVxdWVzdE9wdGlvbnMsIChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIGxldCByZXNwb25zZURhdGEgPSAnJztcclxuXHJcbiAgICAgICAgLy8gQSBjaHVuayBvZiBkYXRhIGhhcyBiZWVuIHJlY2VpdmVkXHJcbiAgICAgICAgcmVzcG9uc2Uub24oJ2RhdGEnLCAoY2h1bmspID0+IHtcclxuICAgICAgICAgIHJlc3BvbnNlRGF0YSArPSBjaHVuaztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVGhlIHdob2xlIHJlc3BvbnNlIGhhcyBiZWVuIHJlY2VpdmVkXHJcbiAgICAgICAgcmVzcG9uc2Uub24oJ2VuZCcsICgpID0+IHtcclxuICAgICAgICAgIGlmICghcmVzcG9uc2VEYXRhKSB7XHJcbiAgICAgICAgICAgIHJlamVjdCgnTm90aGluZyB3YXMgZmV0Y2hlZCBmcm9tIHRoZSBVUkwuJyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gR2V0IHRoZSBmdWxsIHJlc3VsdCBhbmQgcmVzb2x2ZSB0aGUgcmVxdWVzdFxyXG4gICAgICAgICAgcmVzcG9uc2UudGV4dCA9IHJlc3BvbnNlRGF0YTtcclxuICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KVxyXG4gICAgICAub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZW5kcyBhIFBPU1QgcmVxdWVzdCB0byB0aGUgc3BlY2lmaWVkIFVSTCB3aXRoIHRoZSBwcm92aWRlZCBKU09OIGJvZHkgdXNpbmdcclxuICogZWl0aGVyIEhUVFAgb3IgSFRUUFMgcHJvdG9jb2wuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gcG9zdFxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIFVSTCB0byBzZW5kIHRoZSBQT1NUIHJlcXVlc3QgdG8uXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYm9keT17fV0gLSBUaGUgSlNPTiBib2R5IHRvIGluY2x1ZGUgaW4gdGhlIFBPU1QgcmVxdWVzdC5cclxuICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYW4gZW1wdHkgb2JqZWN0LlxyXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RPcHRpb25zPXt9XSAtIE9wdGlvbnMgZm9yIHRoZSBIVFRQL0hUVFBTIHJlcXVlc3QuXHJcbiAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGFuIGVtcHR5IG9iamVjdC5cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIEhUVFAvSFRUUFMgcmVzcG9uc2VcclxuICogb2JqZWN0IHdpdGggYWRkZWQgJ3RleHQnIHByb3BlcnR5IG9yIHJlamVjdGluZyB3aXRoIGFuIGVycm9yLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBvc3QodXJsLCBib2R5ID0ge30sIHJlcXVlc3RPcHRpb25zID0ge30pIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xyXG5cclxuICAgIC8vIFNldCBkZWZhdWx0IGhlYWRlcnMgYW5kIG1lcmdlIHdpdGggYHJlcXVlc3RPcHRpb25zYFxyXG4gICAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgJ0NvbnRlbnQtTGVuZ3RoJzogZGF0YS5sZW5ndGhcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHJlcXVlc3RPcHRpb25zXHJcbiAgICApO1xyXG5cclxuICAgIC8vIERlY2lkZSBvbiB0aGUgcHJvdG9jb2xcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBfZ2V0UHJvdG9jb2xNb2R1bGUodXJsKVxyXG4gICAgICAucmVxdWVzdCh1cmwsIG9wdGlvbnMsIChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIGxldCByZXNwb25zZURhdGEgPSAnJztcclxuXHJcbiAgICAgICAgLy8gQSBjaHVuayBvZiBkYXRhIGhhcyBiZWVuIHJlY2VpdmVkXHJcbiAgICAgICAgcmVzcG9uc2Uub24oJ2RhdGEnLCAoY2h1bmspID0+IHtcclxuICAgICAgICAgIHJlc3BvbnNlRGF0YSArPSBjaHVuaztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVGhlIHdob2xlIHJlc3BvbnNlIGhhcyBiZWVuIHJlY2VpdmVkXHJcbiAgICAgICAgcmVzcG9uc2Uub24oJ2VuZCcsICgpID0+IHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEdldCB0aGUgZnVsbCByZXN1bHQgYW5kIHJlc29sdmUgdGhlIHJlcXVlc3RcclxuICAgICAgICAgICAgcmVzcG9uc2UudGV4dCA9IHJlc3BvbnNlRGF0YTtcclxuICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KVxyXG4gICAgICAub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gV3JpdGUgdGhlIHJlcXVlc3QgYm9keSBhbmQgZW5kIHRoZSByZXF1ZXN0XHJcbiAgICByZXF1ZXN0LndyaXRlKGRhdGEpO1xyXG4gICAgcmVxdWVzdC5lbmQoKTtcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIEhUVFAgb3IgSFRUUFMgcHJvdG9jb2wgbW9kdWxlIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBVUkwuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfZ2V0UHJvdG9jb2xNb2R1bGVcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSBVUkwgdG8gZGV0ZXJtaW5lIHRoZSBwcm90b2NvbC5cclxuICpcclxuICogQHJldHVybnMge09iamVjdH0gVGhlIEhUVFAgb3IgSFRUUFMgcHJvdG9jb2wgbW9kdWxlIChgaHR0cGAgb3IgYGh0dHBzYCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdG9jb2xNb2R1bGUodXJsKSB7XHJcbiAgcmV0dXJuIHVybC5zdGFydHNXaXRoKCdodHRwcycpID8gaHR0cHMgOiBodHRwO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgZ2V0LFxyXG4gIHBvc3RcclxufTtcclxuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbkhpZ2hjaGFydHMgRXhwb3J0IFNlcnZlclxyXG5cclxuQ29weXJpZ2h0IChjKSAyMDE2LTIwMjUsIEhpZ2hzb2Z0XHJcblxyXG5MaWNlbmNlZCB1bmRlciB0aGUgTUlUIGxpY2VuY2UuXHJcblxyXG5BZGRpdGlvbmFsbHkgYSB2YWxpZCBIaWdoY2hhcnRzIGxpY2Vuc2UgaXMgcmVxdWlyZWQgZm9yIHVzZS5cclxuXHJcblNlZSBMSUNFTlNFIGZpbGUgaW4gcm9vdCBmb3IgZGV0YWlscy5cclxuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogQG92ZXJ2aWV3IFRoZSBjYWNoZSBtYW5hZ2VyIGlzIHJlc3BvbnNpYmxlIGZvciBoYW5kbGluZyBhbmQgbWFuYWdpbmdcclxuICogdGhlIEhpZ2hjaGFydHMgbGlicmFyeSBhbG9uZyB3aXRoIGl0cyBkZXBlbmRlbmNpZXMuIEl0IGVuc3VyZXMgdGhhdCB0aGVzZVxyXG4gKiByZXNvdXJjZXMgYXJlIHN0b3JlZCBhbmQgcmV0cmlldmVkIGVmZmljaWVudGx5IHRvIG9wdGltaXplIHBlcmZvcm1hbmNlXHJcbiAqIGFuZCByZWR1Y2UgcmVkdW5kYW50IG5ldHdvcmsgcmVxdWVzdHMuIFRoZSBjYWNoZSBpcyBzdG9yZWQgaW4gdGhlIGAuY2FjaGVgXHJcbiAqIGRpcmVjdG9yeSBieSBkZWZhdWx0LCB3aGljaCBzZXJ2ZXMgYXMgYSBkZWRpY2F0ZWQgZm9sZGVyIGZvciBrZWVwaW5nIGNhY2hlZFxyXG4gKiBmaWxlcy5cclxuICovXHJcblxyXG5pbXBvcnQgeyBleGlzdHNTeW5jLCBta2RpclN5bmMsIHJlYWRGaWxlU3luYywgd3JpdGVGaWxlU3luYyB9IGZyb20gJ2ZzJztcclxuaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnO1xyXG5cclxuaW1wb3J0IHsgSHR0cHNQcm94eUFnZW50IH0gZnJvbSAnaHR0cHMtcHJveHktYWdlbnQnO1xyXG5cclxuaW1wb3J0IHsgZ2V0T3B0aW9ucywgdXBkYXRlT3B0aW9ucyB9IGZyb20gJy4vY29uZmlnLmpzJztcclxuaW1wb3J0IHsgZ2V0IH0gZnJvbSAnLi9mZXRjaC5qcyc7XHJcbmltcG9ydCB7IGxvZyB9IGZyb20gJy4vbG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgZ2V0QWJzb2x1dGVQYXRoIH0gZnJvbSAnLi91dGlscy5qcyc7XHJcblxyXG5pbXBvcnQgRXhwb3J0RXJyb3IgZnJvbSAnLi9lcnJvcnMvRXhwb3J0RXJyb3IuanMnO1xyXG5cclxuLy8gVGhlIGluaXRpYWwgY2FjaGUgdGVtcGxhdGVcclxuY29uc3QgY2FjaGUgPSB7XHJcbiAgY2RuVXJsOiAnaHR0cHM6Ly9jb2RlLmhpZ2hjaGFydHMuY29tJyxcclxuICBhY3RpdmVNYW5pZmVzdDoge30sXHJcbiAgc291cmNlczogJycsXHJcbiAgaGNWZXJzaW9uOiAnJ1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyB0aGUgY2FjaGUgZm9yIEhpZ2hjaGFydHMgZGVwZW5kZW5jaWVzLCB1cGRhdGVzIHRoZSBjYWNoZSBpZiBuZWVkZWQsXHJcbiAqIGFuZCBsb2FkcyB0aGUgc291cmNlcy5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBjaGVja0NhY2hlXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBoaWdoY2hhcnRzT3B0aW9ucyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nXHJcbiAqIGBoaWdoY2hhcnRzYCBvcHRpb25zLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gc2VydmVyUHJveHlPcHRpb25zLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZ1xyXG4gKiBgc2VydmVyLnByb3h5YCBvcHRpb25zLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrQ2FjaGUoaGlnaGNoYXJ0c09wdGlvbnMsIHNlcnZlclByb3h5T3B0aW9ucykge1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgZmV0Y2hlZE1vZHVsZXM7XHJcblxyXG4gICAgLy8gR2V0IHRoZSBjYWNoZSBwYXRoXHJcbiAgICBjb25zdCBjYWNoZVBhdGggPSBnZXRDYWNoZVBhdGgoKTtcclxuXHJcbiAgICAvLyBQcmVwYXJlIHBhdGhzIHRvIG1hbmlmZXN0IGFuZCBzb3VyY2VzIGZyb20gdGhlIGNhY2hlIGZvbGRlclxyXG4gICAgY29uc3QgbWFuaWZlc3RQYXRoID0gam9pbihjYWNoZVBhdGgsICdtYW5pZmVzdC5qc29uJyk7XHJcbiAgICBjb25zdCBzb3VyY2VQYXRoID0gam9pbihjYWNoZVBhdGgsICdzb3VyY2VzLmpzJyk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBkZXN0aW5hdGlvbiBpZiBpdCBkb2Vzbid0IGV4aXN0IGFscmVhZHlcclxuICAgICFleGlzdHNTeW5jKGNhY2hlUGF0aCkgJiYgbWtkaXJTeW5jKGNhY2hlUGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcblxyXG4gICAgLy8gRmV0Y2ggYWxsIHRoZSBzY3JpcHRzIGVpdGhlciBpZiB0aGUgYG1hbmlmZXN0Lmpzb25gIGRvZXMgbm90IGV4aXN0XHJcbiAgICAvLyBvciBpZiB0aGUgYGZvcmNlRmV0Y2hgIG9wdGlvbiBpcyBlbmFibGVkXHJcbiAgICBpZiAoIWV4aXN0c1N5bmMobWFuaWZlc3RQYXRoKSB8fCBoaWdoY2hhcnRzT3B0aW9ucy5mb3JjZUZldGNoKSB7XHJcbiAgICAgIGxvZygzLCAnW2NhY2hlXSBGZXRjaGluZyBhbmQgY2FjaGluZyBIaWdoY2hhcnRzIGRlcGVuZGVuY2llcy4nKTtcclxuXHJcbiAgICAgIC8vIFRoZSBpbml0aWFsIGNhY2hlIHVwZGF0ZVxyXG4gICAgICBmZXRjaGVkTW9kdWxlcyA9IGF3YWl0IF91cGRhdGVDYWNoZShcclxuICAgICAgICBoaWdoY2hhcnRzT3B0aW9ucyxcclxuICAgICAgICBzZXJ2ZXJQcm94eU9wdGlvbnMsXHJcbiAgICAgICAgc291cmNlUGF0aFxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHJlcXVlc3RVcGRhdGUgPSBmYWxzZTtcclxuXHJcbiAgICAgIC8vIFJlYWQgdGhlIG1hbmlmZXN0IEpTT05cclxuICAgICAgY29uc3QgbWFuaWZlc3QgPSBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhtYW5pZmVzdFBhdGgpLCAndXRmOCcpO1xyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIG1vZHVsZXMgaXMgYW4gYXJyYXksIGlmIHNvLCB3ZSByZXdyaXRlIGl0IHRvIGEgbWFwIHRvIG1ha2VcclxuICAgICAgLy8gaXQgZWFzaWVyIHRvIHJlc29sdmUgbW9kdWxlc1xyXG4gICAgICBpZiAobWFuaWZlc3QubW9kdWxlcyAmJiBBcnJheS5pc0FycmF5KG1hbmlmZXN0Lm1vZHVsZXMpKSB7XHJcbiAgICAgICAgY29uc3QgbW9kdWxlTWFwID0ge307XHJcbiAgICAgICAgbWFuaWZlc3QubW9kdWxlcy5mb3JFYWNoKChtKSA9PiAobW9kdWxlTWFwW21dID0gMSkpO1xyXG4gICAgICAgIG1hbmlmZXN0Lm1vZHVsZXMgPSBtb2R1bGVNYXA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdldCB0aGUgYWN0dWFsIG51bWJlciBvZiBzY3JpcHRzIHRvIGJlIGZldGNoZWRcclxuICAgICAgY29uc3QgeyBjb3JlU2NyaXB0cywgbW9kdWxlU2NyaXB0cywgaW5kaWNhdG9yU2NyaXB0cyB9ID1cclxuICAgICAgICBoaWdoY2hhcnRzT3B0aW9ucztcclxuICAgICAgY29uc3QgbnVtYmVyT2ZNb2R1bGVzID1cclxuICAgICAgICBjb3JlU2NyaXB0cy5sZW5ndGggKyBtb2R1bGVTY3JpcHRzLmxlbmd0aCArIGluZGljYXRvclNjcmlwdHMubGVuZ3RoO1xyXG5cclxuICAgICAgLy8gQ29tcGFyZSB0aGUgbG9hZGVkIGhpZ2hjaGFydHMgY29uZmlnIHdpdGggdGhlIGNvbnRlbnRzIGluIGNhY2hlLlxyXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgY2hhbmdlcywgZmV0Y2ggcmVxdWVzdGVkIG1vZHVsZXMgYW5kIHByb2R1Y3RzLFxyXG4gICAgICAvLyBhbmQgYmFrZSB0aGVtIGludG8gYSBnaWFudCBibG9iLiBTYXZlIHRoZSBibG9iLlxyXG4gICAgICBpZiAobWFuaWZlc3QudmVyc2lvbiAhPT0gaGlnaGNoYXJ0c09wdGlvbnMudmVyc2lvbikge1xyXG4gICAgICAgIC8vIENoZWNrIHRoZSBIaWdoY2hhcnRzIHZlcnNpb25cclxuICAgICAgICBsb2coXHJcbiAgICAgICAgICAyLFxyXG4gICAgICAgICAgJ1tjYWNoZV0gQSBIaWdoY2hhcnRzIHZlcnNpb24gbWlzbWF0Y2ggaW4gdGhlIGNhY2hlLCBuZWVkIHRvIHJlLWZldGNoLidcclxuICAgICAgICApO1xyXG4gICAgICAgIHJlcXVlc3RVcGRhdGUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIE9iamVjdC5rZXlzKG1hbmlmZXN0Lm1vZHVsZXMgfHwge30pLmxlbmd0aCAhPT0gbnVtYmVyT2ZNb2R1bGVzXHJcbiAgICAgICkge1xyXG4gICAgICAgIC8vIENoZWNrIHRoZSBudW1iZXIgb2YgbW9kdWxlc1xyXG4gICAgICAgIGxvZyhcclxuICAgICAgICAgIDIsXHJcbiAgICAgICAgICAnW2NhY2hlXSBUaGUgY2FjaGUgYW5kIHRoZSByZXF1ZXN0ZWQgbW9kdWxlcyBkbyBub3QgbWF0Y2gsIG5lZWQgdG8gcmUtZmV0Y2guJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmVxdWVzdFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgZWFjaCBtb2R1bGUsIGlmIGFueXRoaW5nIGlzIG1pc3NpbmcgcmVmZXRjaCBldmVyeXRoaW5nXHJcbiAgICAgICAgcmVxdWVzdFVwZGF0ZSA9IChtb2R1bGVTY3JpcHRzIHx8IFtdKS5zb21lKChtb2R1bGVOYW1lKSA9PiB7XHJcbiAgICAgICAgICBpZiAoIW1hbmlmZXN0Lm1vZHVsZXNbbW9kdWxlTmFtZV0pIHtcclxuICAgICAgICAgICAgbG9nKFxyXG4gICAgICAgICAgICAgIDIsXHJcbiAgICAgICAgICAgICAgYFtjYWNoZV0gVGhlICR7bW9kdWxlTmFtZX0gaXMgbWlzc2luZyBpbiB0aGUgY2FjaGUsIG5lZWQgdG8gcmUtZmV0Y2guYFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVXBkYXRlIGNhY2hlIGlmIG5lZWRlZFxyXG4gICAgICBpZiAocmVxdWVzdFVwZGF0ZSkge1xyXG4gICAgICAgIGZldGNoZWRNb2R1bGVzID0gYXdhaXQgX3VwZGF0ZUNhY2hlKFxyXG4gICAgICAgICAgaGlnaGNoYXJ0c09wdGlvbnMsXHJcbiAgICAgICAgICBzZXJ2ZXJQcm94eU9wdGlvbnMsXHJcbiAgICAgICAgICBzb3VyY2VQYXRoXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsb2coMywgJ1tjYWNoZV0gRGVwZW5kZW5jeSBjYWNoZSBpcyB1cCB0byBkYXRlLCBwcm9jZWVkaW5nLicpO1xyXG5cclxuICAgICAgICAvLyBMb2FkIHRoZSBzb3VyY2VzXHJcbiAgICAgICAgY2FjaGUuc291cmNlcyA9IHJlYWRGaWxlU3luYyhzb3VyY2VQYXRoLCAndXRmOCcpO1xyXG5cclxuICAgICAgICAvLyBHZXQgY3VycmVudCBtb2R1bGVzIG1hcFxyXG4gICAgICAgIGZldGNoZWRNb2R1bGVzID0gbWFuaWZlc3QubW9kdWxlcztcclxuXHJcbiAgICAgICAgLy8gRXh0cmFjdCBhbmQgc2F2ZSB2ZXJzaW9uIG9mIGN1cnJlbnRseSB1c2VkIEhpZ2hjaGFydHNcclxuICAgICAgICBjYWNoZS5oY1ZlcnNpb24gPSBfZXh0cmFjdEhjVmVyc2lvbihjYWNoZS5zb3VyY2VzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbmFsbHksIHNhdmUgdGhlIG5ldyBtYW5pZmVzdCwgd2hpY2ggaXMgYmFzaWNhbGx5IG91ciBjdXJyZW50IGNvbmZpZ1xyXG4gICAgLy8gaW4gYSBzbGlnaHRseSBkaWZmZXJlbnQgZm9ybWF0XHJcbiAgICBhd2FpdCBfc2F2ZUNvbmZpZ1RvTWFuaWZlc3QoaGlnaGNoYXJ0c09wdGlvbnMudmVyc2lvbiwgZmV0Y2hlZE1vZHVsZXMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoXHJcbiAgICAgICdbY2FjaGVdIENvdWxkIG5vdCBjb25maWd1cmUgY2FjaGUgYW5kIGNyZWF0ZSBvciB1cGRhdGUgdGhlIGNvbmZpZyBtYW5pZmVzdC4nLFxyXG4gICAgICA1MDBcclxuICAgICkuc2V0RXJyb3IoZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIHZlcnNpb24gb2YgSGlnaGNoYXJ0cyBmcm9tIHRoZSBjYWNoZS5cclxuICpcclxuICogQGZ1bmN0aW9uIGdldEhjVmVyc2lvblxyXG4gKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY2FjaGVkIEhpZ2hjaGFydHMgdmVyc2lvbi5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIY1ZlcnNpb24oKSB7XHJcbiAgcmV0dXJuIGNhY2hlLmhjVmVyc2lvbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIEhpZ2hjaGFydHMgdmVyc2lvbiBpbiB0aGUgYXBwbGllZCBjb25maWd1cmF0aW9uIGFuZCBjaGVja3NcclxuICogdGhlIGNhY2hlIGZvciB0aGUgc2NyaXB0cyBvZiBhIG5ldyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAYXN5bmNcclxuICogQGZ1bmN0aW9uIHVwZGF0ZUhjVmVyc2lvblxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmV3VmVyc2lvbiAtIFRoZSBuZXcgSGlnaGNoYXJ0cyB2ZXJzaW9uIHRvIGJlIGFwcGxpZWQuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlSGNWZXJzaW9uKG5ld1ZlcnNpb24pIHtcclxuICAvLyBVcGRhdGUgdG8gdGhlIG5ldyB2ZXJzaW9uXHJcbiAgY29uc3Qgb3B0aW9ucyA9IHVwZGF0ZU9wdGlvbnMoe1xyXG4gICAgaGlnaGNoYXJ0czoge1xyXG4gICAgICB2ZXJzaW9uOiBuZXdWZXJzaW9uXHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIENoZWNrIGlmIGNhY2hlIG5lZWRzIHRvIGJlIHVwZGF0ZWRcclxuICBhd2FpdCBjaGVja0NhY2hlKG9wdGlvbnMuaGlnaGNoYXJ0cywgb3B0aW9ucy5zZXJ2ZXIucHJveHkpO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0cmlldmVzIHRoZSBjdXJyZW50IGNhY2hlIG9iamVjdC5cclxuICpcclxuICogQGZ1bmN0aW9uIGdldENhY2hlXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBjYWNoZSBvYmplY3QgY29udGFpbmluZyB2YXJpb3VzIGNhY2hlZCBkYXRhLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENhY2hlKCkge1xyXG4gIHJldHVybiBjYWNoZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIGNhY2hlIHBhdGggZm9yIEhpZ2hjaGFydHMuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBnZXRDYWNoZVBhdGhcclxuICpcclxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGFic29sdXRlIHBhdGggdG8gdGhlIGNhY2hlIGRpcmVjdG9yeSBmb3IgSGlnaGNoYXJ0cy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZVBhdGgoKSB7XHJcbiAgcmV0dXJuIGdldEFic29sdXRlUGF0aChnZXRPcHRpb25zKCkuaGlnaGNoYXJ0cy5jYWNoZVBhdGgsICd1dGY4Jyk7IC8vICM1NjJcclxufVxyXG5cclxuLyoqXHJcbiAqIFNhdmVzIHRoZSBwcm92aWRlZCBjb25maWd1cmF0aW9uIGFuZCBmZXRjaGVkIG1vZHVsZXMgdG8gdGhlIGNhY2hlIG1hbmlmZXN0XHJcbiAqIGZpbGUuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gX3NhdmVDb25maWdUb01hbmlmZXN0XHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB2ZXJzaW9uIC0gVGhlIGN1cnJlbnRseSB1c2VkIEhpZ2hjaGFydHMgdmVyc2lvbi5cclxuICogQHBhcmFtIHtPYmplY3R9IFtmZXRjaGVkTW9kdWxlcz17fV0gLSBBbiBvYmplY3Qgd2hpY2ggdHJhY2tzIHdoaWNoIG1vZHVsZXNcclxuICogaGF2ZSBiZWVuIGZldGNoZWQuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGFuIGVtcHR5IG9iamVjdC5cclxuICpcclxuICogQHRocm93cyB7RXhwb3J0RXJyb3J9IFRocm93cyBhbiBgRXhwb3J0RXJyb3JgIGlmIGFuIGVycm9yIG9jY3VycyB3aGlsZVxyXG4gKiB3cml0aW5nIHRoZSBjYWNoZSBtYW5pZmVzdC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9zYXZlQ29uZmlnVG9NYW5pZmVzdCh2ZXJzaW9uLCBmZXRjaGVkTW9kdWxlcyA9IHt9KSB7XHJcbiAgLy8gVXBkYXRlIGNhY2hlIG9iamVjdCB3aXRoIHRoZSBjdXJyZW50IG1vZHVsZXNcclxuICBjYWNoZS5hY3RpdmVNYW5pZmVzdCA9IHtcclxuICAgIHZlcnNpb24sXHJcbiAgICBtb2R1bGVzOiBmZXRjaGVkTW9kdWxlc1xyXG4gIH07XHJcblxyXG4gIGxvZygzLCAnW2NhY2hlXSBXcml0aW5nIGEgbmV3IG1hbmlmZXN0LicpO1xyXG4gIHRyeSB7XHJcbiAgICB3cml0ZUZpbGVTeW5jKFxyXG4gICAgICBqb2luKGdldENhY2hlUGF0aCgpLCAnbWFuaWZlc3QuanNvbicpLFxyXG4gICAgICBKU09OLnN0cmluZ2lmeShjYWNoZS5hY3RpdmVNYW5pZmVzdCksXHJcbiAgICAgICd1dGY4J1xyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAnW2NhY2hlXSBFcnJvciB3cml0aW5nIHRoZSBjYWNoZSBtYW5pZmVzdC4nLFxyXG4gICAgICA1MDBcclxuICAgICkuc2V0RXJyb3IoZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIGxvY2FsIGNhY2hlIHdpdGggSGlnaGNoYXJ0cyBzY3JpcHRzIGNvbnRlbnQgYW5kIGluZm9ybWF0aW9uLFxyXG4gKiBhbmQgdXNlZCBIaWdoY2hhcnRzIHZlcnNpb24uXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gX3VwZGF0ZUNhY2hlXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBoaWdoY2hhcnRzT3B0aW9ucyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nXHJcbiAqIGBoaWdoY2hhcnRzYCBvcHRpb25zLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gc2VydmVyUHJveHlPcHRpb25zIC0gVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmdcclxuICogYHNlcnZlci5wcm94eWAgb3B0aW9ucy5cclxuICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZVBhdGggLSBUaGUgcGF0aCB0byB0aGUgc291cmNlIGZpbGUgaW4gdGhlIGNhY2hlLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBvYmplY3QgcmVwcmVzZW50aW5nXHJcbiAqIHRoZSBmZXRjaGVkIG1vZHVsZXMuXHJcbiAqXHJcbiAqIEB0aHJvd3Mge0V4cG9ydEVycm9yfSBUaHJvd3MgYW4gYEV4cG9ydEVycm9yYCBpZiB0aGVyZSBpcyBhbiBpc3N1ZSB1cGRhdGluZ1xyXG4gKiB0aGUgbG9jYWwgSGlnaGNoYXJ0cyBjYWNoZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF91cGRhdGVDYWNoZShoaWdoY2hhcnRzT3B0aW9ucywgc2VydmVyUHJveHlPcHRpb25zLCBzb3VyY2VQYXRoKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEdldCBIaWdoY2hhcnRzIHZlcnNpb24gZm9yIHNjcmlwdHNcclxuICAgIGNvbnN0IGhjVmVyc2lvbiA9XHJcbiAgICAgIGhpZ2hjaGFydHNPcHRpb25zLnZlcnNpb24gPT09ICdsYXRlc3QnXHJcbiAgICAgICAgPyBudWxsXHJcbiAgICAgICAgOiBgJHtoaWdoY2hhcnRzT3B0aW9ucy52ZXJzaW9ufWA7XHJcblxyXG4gICAgbG9nKFxyXG4gICAgICAzLFxyXG4gICAgICBgW2NhY2hlXSBVcGRhdGluZyBjYWNoZSB2ZXJzaW9uIHRvIEhpZ2hjaGFydHM6ICR7aGNWZXJzaW9uIHx8ICdsYXRlc3QnfS5gXHJcbiAgICApO1xyXG5cclxuICAgIC8vIEdldCB0aGUgQ0ROIHVybCBmb3Igc2NyaXB0c1xyXG4gICAgY29uc3QgY2RuVXJsID0gaGlnaGNoYXJ0c09wdGlvbnMuY2RuVXJsIHx8IGNhY2hlLmNkblVybDtcclxuXHJcbiAgICAvLyBQcmVwYXJlIG9wdGlvbnMgZm9yIGEgcmVxdWVzdFxyXG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSBfY29uZmlndXJlUmVxdWVzdChzZXJ2ZXJQcm94eU9wdGlvbnMpO1xyXG5cclxuICAgIC8vIEFuIG9iamVjdCB0byByZWNvcmQgd2hpY2ggc2NyaXB0cyBhcmUgZmV0Y2hlZFxyXG4gICAgY29uc3QgZmV0Y2hlZE1vZHVsZXMgPSB7fTtcclxuXHJcbiAgICAvLyBKb2luIGFsbCBmZXRjaGVkIHNjcmlwdHMgYW5kIHNhdmUgaW4gdGhlIG1hbmlmZXN0J3Mgc291cmNlc1xyXG4gICAgY2FjaGUuc291cmNlcyA9IChcclxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIC8vIEhpZ2hjaGFydHMgY29yZSBzY3JpcHRzIGZldGNoXHJcbiAgICAgICAgLi4uaGlnaGNoYXJ0c09wdGlvbnMuY29yZVNjcmlwdHMubWFwKChjcykgPT5cclxuICAgICAgICAgIF9mZXRjaFNjcmlwdChcclxuICAgICAgICAgICAgaGNWZXJzaW9uID8gYCR7Y2RuVXJsfS8ke2hjVmVyc2lvbn0vJHtjc31gIDogYCR7Y2RuVXJsfS8ke2NzfWAsXHJcbiAgICAgICAgICAgIHJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBmZXRjaGVkTW9kdWxlcyxcclxuICAgICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgLy8gSGlnaGNoYXJ0cyBtb2R1bGUgc2NyaXB0cyBmZXRjaFxyXG4gICAgICAgIC4uLmhpZ2hjaGFydHNPcHRpb25zLm1vZHVsZVNjcmlwdHMubWFwKChtcykgPT5cclxuICAgICAgICAgIF9mZXRjaFNjcmlwdChcclxuICAgICAgICAgICAgbXMgPT09ICdtYXAnXHJcbiAgICAgICAgICAgICAgPyBoY1ZlcnNpb25cclxuICAgICAgICAgICAgICAgID8gYCR7Y2RuVXJsfS9tYXBzLyR7aGNWZXJzaW9ufS9tb2R1bGVzLyR7bXN9YFxyXG4gICAgICAgICAgICAgICAgOiBgJHtjZG5Vcmx9L21hcHMvbW9kdWxlcy8ke21zfWBcclxuICAgICAgICAgICAgICA6IGhjVmVyc2lvblxyXG4gICAgICAgICAgICAgICAgPyBgJHtjZG5Vcmx9LyR7aGNWZXJzaW9ufS9tb2R1bGVzLyR7bXN9YFxyXG4gICAgICAgICAgICAgICAgOiBgJHtjZG5Vcmx9L21vZHVsZXMvJHttc31gLFxyXG4gICAgICAgICAgICByZXF1ZXN0T3B0aW9ucyxcclxuICAgICAgICAgICAgZmV0Y2hlZE1vZHVsZXNcclxuICAgICAgICAgIClcclxuICAgICAgICApLFxyXG4gICAgICAgIC8vIEhpZ2hjaGFydHMgaW5kaWNhdG9yIHNjcmlwdHMgZmV0Y2hcclxuICAgICAgICAuLi5oaWdoY2hhcnRzT3B0aW9ucy5pbmRpY2F0b3JTY3JpcHRzLm1hcCgoaXMpID0+XHJcbiAgICAgICAgICBfZmV0Y2hTY3JpcHQoXHJcbiAgICAgICAgICAgIGhjVmVyc2lvblxyXG4gICAgICAgICAgICAgID8gYCR7Y2RuVXJsfS9zdG9jay8ke2hjVmVyc2lvbn0vaW5kaWNhdG9ycy8ke2lzfWBcclxuICAgICAgICAgICAgICA6IGAke2NkblVybH0vc3RvY2svaW5kaWNhdG9ycy8ke2lzfWAsXHJcbiAgICAgICAgICAgIHJlcXVlc3RPcHRpb25zLFxyXG4gICAgICAgICAgICBmZXRjaGVkTW9kdWxlc1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgICksXHJcbiAgICAgICAgLy8gQ3VzdG9tIHNjcmlwdHMgZmV0Y2hcclxuICAgICAgICAuLi5oaWdoY2hhcnRzT3B0aW9ucy5jdXN0b21TY3JpcHRzLm1hcCgoY3MpID0+XHJcbiAgICAgICAgICBfZmV0Y2hTY3JpcHQoYCR7Y3N9YCwgcmVxdWVzdE9wdGlvbnMpXHJcbiAgICAgICAgKVxyXG4gICAgICBdKVxyXG4gICAgKS5qb2luKCc7XFxuJyk7XHJcblxyXG4gICAgLy8gRXh0cmFjdCBhbmQgc2F2ZSB2ZXJzaW9uIG9mIGN1cnJlbnRseSB1c2VkIEhpZ2hjaGFydHNcclxuICAgIGNhY2hlLmhjVmVyc2lvbiA9IF9leHRyYWN0SGNWZXJzaW9uKGNhY2hlLnNvdXJjZXMpO1xyXG5cclxuICAgIC8vIFNhdmUgdGhlIGZldGNoZWQgbW9kdWxlcyBpbnRvIGNhY2hlcycgc291cmNlIEpTT05cclxuICAgIHdyaXRlRmlsZVN5bmMoc291cmNlUGF0aCwgY2FjaGUuc291cmNlcyk7XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBmZXRjaGVkIG1vZHVsZXNcclxuICAgIHJldHVybiBmZXRjaGVkTW9kdWxlcztcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAnW2NhY2hlXSBVbmFibGUgdG8gdXBkYXRlIHRoZSBsb2NhbCBIaWdoY2hhcnRzIGNhY2hlLicsXHJcbiAgICAgIDUwMFxyXG4gICAgKS5zZXRFcnJvcihlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRmV0Y2hlcyBhIHNpbmdsZSBzY3JpcHQgYW5kIHVwZGF0ZXMgdGhlIGBmZXRjaGVkTW9kdWxlc2AgYWNjb3JkaW5nbHkuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gX2ZldGNoU2NyaXB0XHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHQgLSBBIHBhdGggdG8gc2NyaXB0IHRvIGdldC5cclxuICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3RPcHRpb25zIC0gQWRkaXRpb25hbCByZXF1ZXN0cyBvcHRpb25zLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gZmV0Y2hlZE1vZHVsZXMgLSBBbiBvYmplY3Qgd2hpY2ggdHJhY2tzIHdoaWNoIEhpZ2hjaGFydHNcclxuICogbW9kdWxlcyBoYXZlIGJlZW4gZmV0Y2hlZC5cclxuICogQHBhcmFtIHtib29sZWFufSBbc2hvdWxkVGhyb3dFcnJvcj1mYWxzZV0gLSBBIGZsYWcgdG8gaW5kaWNhdGUgaWYgdGhlIGVycm9yXHJcbiAqIHNob3VsZCBiZSB0aHJvd24uIFRoaXMgc2hvdWxkIGJlIHVzZWQgb25seSBmb3IgdGhlIGNvcmUgc2NyaXB0cy4gVGhlIGRlZmF1bHRcclxuICogdmFsdWUgaXMgYGZhbHNlYC5cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHRleHQgcmVwcmVzZW50YXRpb25cclxuICogb2YgdGhlIGZldGNoZWQgc2NyaXB0LlxyXG4gKlxyXG4gKiBAdGhyb3dzIHtFeHBvcnRFcnJvcn0gVGhyb3dzIGFuIGBFeHBvcnRFcnJvcmAgaWYgdGhlcmUgaXMgYSBwcm9ibGVtXHJcbiAqIHdpdGggZmV0Y2hpbmcgdGhlIHNjcmlwdC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9mZXRjaFNjcmlwdChcclxuICBzY3JpcHQsXHJcbiAgcmVxdWVzdE9wdGlvbnMsXHJcbiAgZmV0Y2hlZE1vZHVsZXMsXHJcbiAgc2hvdWxkVGhyb3dFcnJvciA9IGZhbHNlXHJcbikge1xyXG4gIC8vIEdldCByaWQgb2YgdGhlIC5qcyBmcm9tIHRoZSBjdXN0b20gc3RyaW5nc1xyXG4gIGlmIChzY3JpcHQuZW5kc1dpdGgoJy5qcycpKSB7XHJcbiAgICBzY3JpcHQgPSBzY3JpcHQuc3Vic3RyaW5nKDAsIHNjcmlwdC5sZW5ndGggLSAzKTtcclxuICB9XHJcbiAgbG9nKDQsIGBbY2FjaGVdIEZldGNoaW5nIHNjcmlwdCAtICR7c2NyaXB0fS5qc2ApO1xyXG5cclxuICAvLyBGZXRjaCB0aGUgc2NyaXB0XHJcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXQoYCR7c2NyaXB0fS5qc2AsIHJlcXVlc3RPcHRpb25zKTtcclxuXHJcbiAgLy8gSWYgT0ssIHJldHVybiBpdHMgdGV4dCByZXByZXNlbnRhdGlvblxyXG4gIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSAyMDAgJiYgdHlwZW9mIHJlc3BvbnNlLnRleHQgPT0gJ3N0cmluZycpIHtcclxuICAgIGlmIChmZXRjaGVkTW9kdWxlcykge1xyXG4gICAgICBjb25zdCBtb2R1bGVOYW1lID0gX2V4dHJhY3RNb2R1bGVOYW1lKHNjcmlwdCk7XHJcbiAgICAgIGZldGNoZWRNb2R1bGVzW21vZHVsZU5hbWVdID0gMTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNwb25zZS50ZXh0O1xyXG4gIH1cclxuXHJcbiAgLy8gQmFzZWQgb24gdGhlIGBzaG91bGRUaHJvd0Vycm9yYCBmbGFnLCBkZWNpZGUgaG93IHRvIHNlcnZlIGVycm9yIG1lc3NhZ2VcclxuICBpZiAoc2hvdWxkVGhyb3dFcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICBgW2NhY2hlXSBDb3VsZCBub3QgZmV0Y2ggdGhlICR7c2NyaXB0fS5qcy4gVGhlIHNjcmlwdCBtaWdodCBub3QgZXhpc3QgaW4gdGhlIHJlcXVlc3RlZCB2ZXJzaW9uIChzdGF0dXMgY29kZTogJHtyZXNwb25zZS5zdGF0dXNDb2RlfSkuYCxcclxuICAgICAgNDA0XHJcbiAgICApLnNldEVycm9yKHJlc3BvbnNlKTtcclxuICB9IGVsc2Uge1xyXG4gICAgbG9nKFxyXG4gICAgICAyLFxyXG4gICAgICBgW2NhY2hlXSBDb3VsZCBub3QgZmV0Y2ggdGhlICR7c2NyaXB0fS5qcy4gVGhlIHNjcmlwdCBtaWdodCBub3QgZXhpc3QgaW4gdGhlIHJlcXVlc3RlZCB2ZXJzaW9uLmBcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29uZmlndXJlcyBhIHByb3h5IGFnZW50IGZvciBvdXRnb2luZyBIVFRQIHJlcXVlc3RzIGJhc2VkIG9uIHRoZSBwcm92aWRlZFxyXG4gKiBgc2VydmVyLnByb3h5YCBvcHRpb25zLiBJZiBhIHZhbGlkIGBob3N0YCBhbmQgYHBvcnRgIGFyZSBzcGVjaWZpZWQsIGl0IHRyaWVzXHJcbiAqIHRvIGNyZWF0ZSBhbiBgSHR0cHNQcm94eUFnZW50YC4gSWYgdGhlIGNyZWF0aW9uIGZhaWxzLCBhbiBgRXhwb3J0RXJyb3JgXHJcbiAqIGlzIHRocm93bi4gSWYgbm8gcHJveHkgaXMgY29uZmlndXJlZCwgYW4gZW1wdHkgb2JqZWN0IGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gX2NvbmZpZ3VyZVJlcXVlc3RcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHNlcnZlclByb3h5T3B0aW9ucy0gVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmdcclxuICogYHNlcnZlci5wcm94eWAgb3B0aW9ucy5cclxuICpcclxuICogQHJldHVybnMge09iamVjdH0gVGhlIHJlcXVlc3Qgb3B0aW9ucywgaW5jbHVkaW5nIHRoZSBwcm94eSBhZ2VudCBpZiBjcmVhdGVkLFxyXG4gKiBvciBhbiBlbXB0eSBvYmplY3QgaWYgbm8gcHJveHkgY29uZmlndXJhdGlvbiBpcyBwcm92aWRlZC5cclxuICpcclxuICogQHRocm93cyB7RXhwb3J0RXJyb3J9IFRocm93cyBhbiBgRXhwb3J0RXJyb3JgIGlmIHRoZSBwcm94eSBhZ2VudCBjcmVhdGlvblxyXG4gKiBmYWlscy5cclxuICovXHJcbmZ1bmN0aW9uIF9jb25maWd1cmVSZXF1ZXN0KHNlcnZlclByb3h5T3B0aW9ucykge1xyXG4gIC8vIEdldCB0aGUgYGhvc3RgIGFuZCBgcG9ydGAgb2YgdGhlIHByb3h5XHJcbiAgY29uc3QgcHJveHlIb3N0ID0gc2VydmVyUHJveHlPcHRpb25zLmhvc3Q7XHJcbiAgY29uc3QgcHJveHlQb3J0ID0gc2VydmVyUHJveHlPcHRpb25zLnBvcnQ7XHJcblxyXG4gIC8vIFRyeSB0byBjcmVhdGUgYSBwcm94eSBhZ2VudFxyXG4gIGlmIChwcm94eUhvc3QgJiYgcHJveHlQb3J0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDcmVhdGUgdGhlIGFnZW50XHJcbiAgICAgIGNvbnN0IHByb3h5QWdlbnQgPSBuZXcgSHR0cHNQcm94eUFnZW50KHtcclxuICAgICAgICBob3N0OiBwcm94eUhvc3QsXHJcbiAgICAgICAgcG9ydDogcHJveHlQb3J0XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWRkIHRoZSBhZ2VudCB0byB0aGUgcmVxdWVzdCdzIG9wdGlvbnNcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhZ2VudDogcHJveHlBZ2VudCxcclxuICAgICAgICB0aW1lb3V0OiBzZXJ2ZXJQcm94eU9wdGlvbnMudGltZW91dFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAgICdbY2FjaGVdIENvdWxkIG5vdCBjcmVhdGUgYSBQcm94eSBBZ2VudC4nLFxyXG4gICAgICAgIDUwMFxyXG4gICAgICApLnNldEVycm9yKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFJldHVybiBhbiBlbXB0eSBvYmplY3Qgd2hlbiBubyBwcm94eSBhZ2VudCBpcyBjcmVhdGVkXHJcbiAgcmV0dXJuIHt9O1xyXG59XHJcblxyXG4vKipcclxuICogRXh0cmFjdHMgSGlnaGNoYXJ0cyB2ZXJzaW9uIGZyb20gdGhlIGNhY2hlJ3Mgc291cmNlcyBzdHJpbmcuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfZXh0cmFjdEhjVmVyc2lvblxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gY2FjaGVTb3VyY2VzIC0gVGhlIGNhY2hlIHNvdXJjZXMgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZXh0cmFjdGVkIEhpZ2hjaGFydHMgdmVyc2lvbi5cclxuICovXHJcbmZ1bmN0aW9uIF9leHRyYWN0SGNWZXJzaW9uKGNhY2hlU291cmNlcykge1xyXG4gIHJldHVybiBjYWNoZVNvdXJjZXNcclxuICAgIC5zdWJzdHJpbmcoMCwgY2FjaGVTb3VyY2VzLmluZGV4T2YoJyovJykpXHJcbiAgICAucmVwbGFjZSgnLyonLCAnJylcclxuICAgIC5yZXBsYWNlKCcqLycsICcnKVxyXG4gICAgLnJlcGxhY2UoL1xcbi9nLCAnJylcclxuICAgIC50cmltKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeHRyYWN0cyB0aGUgSGlnaGNoYXJ0cyBtb2R1bGUgbmFtZSBiYXNlZCBvbiB0aGUgYHNjcmlwdFBhdGhgIHByb3BlcnR5LlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gX2V4dHJhY3RNb2R1bGVOYW1lXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHRQYXRoIC0gVGhlIHBhdGggb2YgdGhlIHNjcmlwdCBmcm9tIHdoaWNoIHRoZSBtb2R1bGVcclxuICogbmFtZSB3aWxsIGJlIGV4dHJhY3RlZC5cclxuICpcclxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGV4dHJhY3RlZCBtb2R1bGUgbmFtZS5cclxuICovXHJcbmZ1bmN0aW9uIF9leHRyYWN0TW9kdWxlTmFtZShzY3JpcHRQYXRoKSB7XHJcbiAgcmV0dXJuIHNjcmlwdFBhdGgucmVwbGFjZShcclxuICAgIC8oLiopXFwvfCguKiltb2R1bGVzXFwvfHN0b2NrXFwvKC4qKWluZGljYXRvcnNcXC98bWFwc1xcLyguKiltb2R1bGVzXFwvL2dpLFxyXG4gICAgJydcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgY2hlY2tDYWNoZSxcclxuICBnZXRIY1ZlcnNpb24sXHJcbiAgdXBkYXRlSGNWZXJzaW9uLFxyXG4gIGdldENhY2hlLFxyXG4gIGdldENhY2hlUGF0aFxyXG59O1xyXG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5cclxuSGlnaGNoYXJ0cyBFeHBvcnQgU2VydmVyXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMTYtMjAyNSwgSGlnaHNvZnRcclxuXHJcbkxpY2VuY2VkIHVuZGVyIHRoZSBNSVQgbGljZW5jZS5cclxuXHJcbkFkZGl0aW9uYWxseSBhIHZhbGlkIEhpZ2hjaGFydHMgbGljZW5zZSBpcyByZXF1aXJlZCBmb3IgdXNlLlxyXG5cclxuU2VlIExJQ0VOU0UgZmlsZSBpbiByb290IGZvciBkZXRhaWxzLlxyXG5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBAb3ZlcnZpZXcgUHJvdmlkZXMgbWV0aG9kcyBmb3IgaW5pdGlhbGl6aW5nIEhpZ2hjaGFydHMgd2l0aCBjdXN0b21pemVkXHJcbiAqIGFuaW1hdGlvbiBzZXR0aW5ncyBhbmQgdHJpZ2dlcmluZyB0aGUgY3JlYXRpb24gb2YgSGlnaGNoYXJ0cyBjaGFydHMgd2l0aFxyXG4gKiBleHBvcnQtc3BlY2lmaWMgY29uZmlndXJhdGlvbnMgaW4gdGhlIHBhZ2UgY29udGV4dC4gU3VwcG9ydHMgZHluYW1pYyBvcHRpb25cclxuICogbWVyZ2luZywgY3VzdG9tIGxvZ2ljIGluamVjdGlvbiwgYW5kIGNvbnRyb2wgb3ZlciByZW5kZXJpbmcgYmVoYXZpb3JzLiBVc2VkXHJcbiAqIGJ5IHRoZSBQdXBwZXRlZXIgcGFnZS5cclxuICovXHJcblxyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xyXG5cclxuLyoqXHJcbiAqIFNldHRpbmcgdGhlIGBIaWdoY2hhcnRzLmFuaW1PYmplY3RgIGZ1bmN0aW9uLiBDYWxsZWQgd2hlbiBpbml0aW5nIHRoZSBwYWdlLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gc2V0dXBIaWdoY2hhcnRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBIaWdoY2hhcnRzKCkge1xyXG4gIEhpZ2hjaGFydHMuYW5pbU9iamVjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB7IGR1cmF0aW9uOiAwIH07XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgdGhlIGFjdHVhbCBIaWdoY2hhcnRzIGNoYXJ0IG9uIGEgcGFnZS5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBjcmVhdGVDaGFydFxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gZXhwb3J0T3B0aW9ucyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIGBleHBvcnRgXHJcbiAqIG9wdGlvbnMuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjdXN0b21Mb2dpY09wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZ1xyXG4gKiBgY3VzdG9tTG9naWNgIG9wdGlvbnMuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ2hhcnQoZXhwb3J0T3B0aW9ucywgY3VzdG9tTG9naWNPcHRpb25zKSB7XHJcbiAgLy8gR2V0IHJlcXVpcmVkIGZ1bmN0aW9uc1xyXG4gIGNvbnN0IHsgZ2V0T3B0aW9ucywgc2V0T3B0aW9ucywgbWVyZ2UsIHdyYXAgfSA9IEhpZ2hjaGFydHM7XHJcblxyXG4gIC8vIENyZWF0ZSBhIHNlcGFyYXRlIG9iamVjdCBmb3IgYSBwb3RlbnRpYWwgYHNldE9wdGlvbnNgIHVzYWdlcyBpbiBvcmRlclxyXG4gIC8vIHRvIHByZXZlbnQgZnJvbSBwb2xsdXRpbmcgb3RoZXIgZXhwb3J0cyB0aGF0IGNhbiBoYXBwZW4gb24gdGhlIHNhbWUgcGFnZVxyXG4gIEhpZ2hjaGFydHMuc2V0T3B0aW9uc09iaiA9IG1lcmdlKGZhbHNlLCB7fSwgZ2V0T3B0aW9ucygpKTtcclxuXHJcbiAgLy8gTk9URTogSXMgdGhpcyB1c2VkIGZvciBhbnl0aGluZyB1c2VmdWw/XHJcbiAgd2luZG93LmlzUmVuZGVyQ29tcGxldGUgPSBmYWxzZTtcclxuICB3cmFwKEhpZ2hjaGFydHMuQ2hhcnQucHJvdG90eXBlLCAnaW5pdCcsIGZ1bmN0aW9uIChwcm9jZWVkLCB1c2VyT3B0aW9ucywgY2IpIHtcclxuICAgIC8vIE92ZXJyaWRlIHRoZSBgdXNlck9wdGlvbnNgIHdpdGggaW1hZ2UgZnJpZW5kbHkgb3B0aW9uc1xyXG4gICAgdXNlck9wdGlvbnMgPSBtZXJnZSh1c2VyT3B0aW9ucywge1xyXG4gICAgICBleHBvcnRpbmc6IHtcclxuICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBwbG90T3B0aW9uczoge1xyXG4gICAgICAgIHNlcmllczoge1xyXG4gICAgICAgICAgbGFiZWw6IHtcclxuICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIC8qIEV4cGVjdHMgdG9vbHRpcCBpbiB0aGUgYHVzZXJPcHRpb25zYCB3aGVuIGBmb3JFeHBvcnRgIGlzIHRydWUuXHJcbiAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2hpZ2hjaGFydHMvaGlnaGNoYXJ0cy9ibG9iLzNhZDQzMGEzNTNiODA1NmI5ZTc2NGFhNGU1Y2Q2ODI4YWE0NzlkYjIvanMvcGFydHMvQ2hhcnQuanMjTDI0MVxyXG4gICAgICAgICovXHJcbiAgICAgIHRvb2x0aXA6IHt9XHJcbiAgICB9KTtcclxuXHJcbiAgICAodXNlck9wdGlvbnMuc2VyaWVzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChzZXJpZXMpIHtcclxuICAgICAgc2VyaWVzLmFuaW1hdGlvbiA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQWRkIGZsYWcgdG8ga25vdyBpZiBjaGFydCByZW5kZXIgaGFzIGJlZW4gY2FsbGVkLlxyXG4gICAgaWYgKCF3aW5kb3cub25IaWdoY2hhcnRzUmVuZGVyKSB7XHJcbiAgICAgIHdpbmRvdy5vbkhpZ2hjaGFydHNSZW5kZXIgPSBIaWdoY2hhcnRzLmFkZEV2ZW50KHRoaXMsICdyZW5kZXInLCAoKSA9PiB7XHJcbiAgICAgICAgd2luZG93LmlzUmVuZGVyQ29tcGxldGUgPSB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm9jZWVkLmFwcGx5KHRoaXMsIFt1c2VyT3B0aW9ucywgY2JdKTtcclxuICB9KTtcclxuXHJcbiAgd3JhcChIaWdoY2hhcnRzLlNlcmllcy5wcm90b3R5cGUsICdpbml0JywgZnVuY3Rpb24gKHByb2NlZWQsIGNoYXJ0LCBvcHRpb25zKSB7XHJcbiAgICBwcm9jZWVkLmFwcGx5KHRoaXMsIFtjaGFydCwgb3B0aW9uc10pO1xyXG4gIH0pO1xyXG5cclxuICAvLyBTb21lIG1hbmRhdG9yeSBhZGRpdGlvbmFsIGBjaGFydGAgYW5kIGBleHBvcnRpbmdgIG9wdGlvbnNcclxuICBjb25zdCBhZGRpdGlvbmFsT3B0aW9ucyA9IHtcclxuICAgIGNoYXJ0OiB7XHJcbiAgICAgIC8vIEJ5IGRlZmF1bHQgYW5pbWF0aW9uIGlzIGRpc2FibGVkXHJcbiAgICAgIGFuaW1hdGlvbjogZmFsc2UsXHJcbiAgICAgIC8vIEdldCB0aGUgcmlnaHQgc2l6ZSB2YWx1ZXNcclxuICAgICAgaGVpZ2h0OiBleHBvcnRPcHRpb25zLmhlaWdodCxcclxuICAgICAgd2lkdGg6IGV4cG9ydE9wdGlvbnMud2lkdGhcclxuICAgIH0sXHJcbiAgICBleHBvcnRpbmc6IHtcclxuICAgICAgLy8gTm8gbmVlZCBmb3IgdGhlIGV4cG9ydGluZyBidXR0b25cclxuICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBHZXQgdGhlIGlucHV0IHRvIGV4cG9ydCBmcm9tIHRoZSBgaW5zdHJgIG9wdGlvblxyXG4gIGNvbnN0IHVzZXJPcHRpb25zID0gbmV3IEZ1bmN0aW9uKGByZXR1cm4gJHtleHBvcnRPcHRpb25zLmluc3RyfWApKCk7XHJcblxyXG4gIC8vIEdldCB0aGUgYHRoZW1lT3B0aW9uc2Agb3B0aW9uXHJcbiAgY29uc3QgdGhlbWVPcHRpb25zID0gbmV3IEZ1bmN0aW9uKGByZXR1cm4gJHtleHBvcnRPcHRpb25zLnRoZW1lT3B0aW9uc31gKSgpO1xyXG5cclxuICAvLyBNZXJnZSB0aGUgZm9sbG93aW5nIG9wdGlvbnMgb2JqZWN0cyB0byBjcmVhdGUgZmluYWwgb3B0aW9uc1xyXG4gIGNvbnN0IGZpbmFsT3B0aW9ucyA9IG1lcmdlKFxyXG4gICAgZmFsc2UsXHJcbiAgICB0aGVtZU9wdGlvbnMsXHJcbiAgICB1c2VyT3B0aW9ucyxcclxuICAgIC8vIFBsYWNlZCBpdCBoZXJlIGluc3RlYWQgaW4gdGhlIGluaXQgYmVjYXVzZSBvZiB0aGUgc2l6ZSBpc3N1ZXNcclxuICAgIGFkZGl0aW9uYWxPcHRpb25zXHJcbiAgKTtcclxuXHJcbiAgLy8gUHJlcGFyZSB0aGUgYGNhbGxiYWNrYCBvcHRpb25cclxuICBjb25zdCBmaW5hbENhbGxiYWNrID0gY3VzdG9tTG9naWNPcHRpb25zLmNhbGxiYWNrXHJcbiAgICA/IG5ldyBGdW5jdGlvbihgcmV0dXJuICR7Y3VzdG9tTG9naWNPcHRpb25zLmNhbGxiYWNrfWApKClcclxuICAgIDogbnVsbDtcclxuXHJcbiAgLy8gVHJpZ2dlciB0aGUgYGN1c3RvbUNvZGVgIG9wdGlvblxyXG4gIGlmIChjdXN0b21Mb2dpY09wdGlvbnMuY3VzdG9tQ29kZSkge1xyXG4gICAgbmV3IEZ1bmN0aW9uKCdvcHRpb25zJywgY3VzdG9tTG9naWNPcHRpb25zLmN1c3RvbUNvZGUpKHVzZXJPcHRpb25zKTtcclxuICB9XHJcblxyXG4gIC8vIEdldCB0aGUgYGdsb2JhbE9wdGlvbnNgIG9wdGlvblxyXG4gIGNvbnN0IGdsb2JhbE9wdGlvbnMgPSBuZXcgRnVuY3Rpb24oYHJldHVybiAke2V4cG9ydE9wdGlvbnMuZ2xvYmFsT3B0aW9uc31gKSgpO1xyXG5cclxuICAvLyBTZXQgdGhlIGdsb2JhbCBvcHRpb25zIGlmIGV4aXN0XHJcbiAgaWYgKGdsb2JhbE9wdGlvbnMpIHtcclxuICAgIHNldE9wdGlvbnMoZ2xvYmFsT3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvLyBDYWxsIHRoZSBjaGFydCBjcmVhdGlvblxyXG4gIEhpZ2hjaGFydHNbZXhwb3J0T3B0aW9ucy5jb25zdHJdKCdjb250YWluZXInLCBmaW5hbE9wdGlvbnMsIGZpbmFsQ2FsbGJhY2spO1xyXG5cclxuICAvLyBHZXQgYWxsIGltYWdlcyBmcm9tIHdpdGhpbiB0aGUgY2hhcnRcclxuICBjb25zdCBpbWFnZXMgPSBBcnJheS5mcm9tKFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhpZ2hjaGFydHMtY29udGFpbmVyIGltYWdlJylcclxuICApO1xyXG5cclxuICAvLyBXYWl0IGZvciBhbGwgaW1hZ2VzIGZvciAyIHNlY29uZHNcclxuICBhd2FpdCBQcm9taXNlLnJhY2UoW1xyXG4gICAgUHJvbWlzZS5hbGwoXHJcbiAgICAgIGltYWdlcy5tYXAoKGltYWdlKSA9PlxyXG4gICAgICAgIGltYWdlLmNvbXBsZXRlICYmIGltYWdlLm5hdHVyYWxIZWlnaHQgIT09IDBcclxuICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgIDogbmV3IFByb21pc2UoKHJlc29sdmUpID0+XHJcbiAgICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlc29sdmUsIHsgb25jZTogdHJ1ZSB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgIClcclxuICAgICksXHJcbiAgICAvLyBQcm9jZWVkIGZ1cnRoZXIgZXZlbiBpZiBpbWFnZXMgZGlkIG5vdCBsb2FkXHJcbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDAwKSlcclxuICBdKTtcclxuXHJcbiAgLy8gR2V0IHRoZSBjdXJyZW50IGdsb2JhbCBvcHRpb25zXHJcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSBnZXRPcHRpb25zKCk7XHJcblxyXG4gIC8vIENsZWFyIGl0IGp1c3QgaW4gY2FzZSAoZS5nLiB0aGUgYHNldE9wdGlvbnNgIHdhcyB1c2VkIGluIHRoZSBgY3VzdG9tQ29kZWApXHJcbiAgZm9yIChjb25zdCBwcm9wIGluIGRlZmF1bHRPcHRpb25zKSB7XHJcbiAgICBpZiAodHlwZW9mIGRlZmF1bHRPcHRpb25zW3Byb3BdICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIGRlbGV0ZSBkZWZhdWx0T3B0aW9uc1twcm9wXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFNldCB0aGUgZGVmYXVsdCBvcHRpb25zIGJhY2tcclxuICBzZXRPcHRpb25zKEhpZ2hjaGFydHMuc2V0T3B0aW9uc09iaik7XHJcblxyXG4gIC8vIEVtcHR5IHRoZSBjdXN0b20gZ2xvYmFsIG9wdGlvbnMgb2JqZWN0XHJcbiAgSGlnaGNoYXJ0cy5zZXRPcHRpb25zT2JqID0ge307XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBzZXR1cEhpZ2hjaGFydHMsXHJcbiAgY3JlYXRlQ2hhcnRcclxufTtcclxuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbkhpZ2hjaGFydHMgRXhwb3J0IFNlcnZlclxyXG5cclxuQ29weXJpZ2h0IChjKSAyMDE2LTIwMjUsIEhpZ2hzb2Z0XHJcblxyXG5MaWNlbmNlZCB1bmRlciB0aGUgTUlUIGxpY2VuY2UuXHJcblxyXG5BZGRpdGlvbmFsbHkgYSB2YWxpZCBIaWdoY2hhcnRzIGxpY2Vuc2UgaXMgcmVxdWlyZWQgZm9yIHVzZS5cclxuXHJcblNlZSBMSUNFTlNFIGZpbGUgaW4gcm9vdCBmb3IgZGV0YWlscy5cclxuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogQG92ZXJ2aWV3IFRoaXMgbW9kdWxlIHByb3ZpZGVzIGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgUHVwcGV0ZWVyIGJyb3dzZXJcclxuICogaW5zdGFuY2UsIGNyZWF0aW5nIGFuZCBjbGVhcmluZyBwYWdlcywgaW5qZWN0aW5nIGN1c3RvbSBKUyBhbmQgQ1NTIHJlc291cmNlcyxcclxuICogYW5kIHNldHRpbmcgdXAgSGlnaGNoYXJ0cyBmb3Igc2VydmVyLXNpZGUgcmVuZGVyaW5nLiBUaGUgbW9kdWxlIGVuc3VyZXNcclxuICogdGhhdCB0aGUgYnJvd3NlciBhbmQgcGFnZXMgYXJlIGNvcnJlY3RseSBtYW5hZ2VkIGFuZCBjYW4gaGFuZGxlIGZhaWx1cmVzXHJcbiAqIGR1cmluZyBvcGVyYXRpb25zIGxpa2UgbGF1bmNoaW5nIHRoZSBicm93c2VyIG9yIGNyZWF0aW5nIG5ldyBwYWdlcy5cclxuICovXHJcblxyXG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tICdmcyc7XHJcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJztcclxuXHJcbmltcG9ydCBwdXBwZXRlZXIgZnJvbSAncHVwcGV0ZWVyJztcclxuXHJcbmltcG9ydCB7IGdldENhY2hlUGF0aCB9IGZyb20gJy4vY2FjaGUuanMnO1xyXG5pbXBvcnQgeyBnZXRPcHRpb25zIH0gZnJvbSAnLi9jb25maWcuanMnO1xyXG5pbXBvcnQgeyBzZXR1cEhpZ2hjaGFydHMgfSBmcm9tICcuL2hpZ2hjaGFydHMuanMnO1xyXG5pbXBvcnQgeyBsb2csIGxvZ1dpdGhTdGFjayB9IGZyb20gJy4vbG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgX19kaXJuYW1lLCBnZXRBYnNvbHV0ZVBhdGggfSBmcm9tICcuL3V0aWxzLmpzJztcclxuXHJcbmltcG9ydCBFeHBvcnRFcnJvciBmcm9tICcuL2Vycm9ycy9FeHBvcnRFcnJvci5qcyc7XHJcblxyXG4vLyBHZXQgdGhlIHRlbXBsYXRlIGZvciBwYWdlc1xyXG5jb25zdCBwYWdlVGVtcGxhdGUgPSByZWFkRmlsZVN5bmMoXHJcbiAgam9pbihfX2Rpcm5hbWUsICd0ZW1wbGF0ZXMnLCAndGVtcGxhdGUuaHRtbCcpLFxyXG4gICd1dGY4J1xyXG4pO1xyXG5cclxuLy8gVG8gc2F2ZSB0aGUgYnJvd3NlclxyXG5sZXQgYnJvd3NlciA9IG51bGw7XHJcblxyXG4vKipcclxuICogUmV0cmlldmVzIHRoZSBleGlzdGluZyBQdXBwZXRlZXIgYnJvd3NlciBpbnN0YW5jZS5cclxuICpcclxuICogQGZ1bmN0aW9uIGdldEJyb3dzZXJcclxuICpcclxuICogQHJldHVybnMge09iamVjdH0gVGhlIFB1cHBldGVlciBicm93c2VyIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAdGhyb3dzIHtFeHBvcnRFcnJvcn0gVGhyb3dzIGFuIGBFeHBvcnRFcnJvcmAgaWYgbm8gdmFsaWQgYnJvd3NlclxyXG4gKiBoYXMgYmVlbiBjcmVhdGVkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJyb3dzZXIoKSB7XHJcbiAgaWYgKCFicm93c2VyKSB7XHJcbiAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoJ1ticm93c2VyXSBObyB2YWxpZCBicm93c2VyIGhhcyBiZWVuIGNyZWF0ZWQuJywgNTAwKTtcclxuICB9XHJcbiAgcmV0dXJuIGJyb3dzZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgUHVwcGV0ZWVyIGJyb3dzZXIgaW5zdGFuY2Ugd2l0aCB0aGUgc3BlY2lmaWVkIGFyZ3VtZW50cy5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBjcmVhdGVCcm93c2VyXHJcbiAqXHJcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gcHVwcGV0ZWVyQXJncyAtIEFkZGl0aW9uYWwgYXJndW1lbnRzIGZvciBQdXBwZXRlZXJcclxuICogYnJvd3NlcidzIGxhdW5jaC5cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIGNyZWF0ZWQgUHVwcGV0ZWVyXHJcbiAqIGJyb3dzZXIgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEB0aHJvd3Mge0V4cG9ydEVycm9yfSBUaHJvd3MgYW4gYEV4cG9ydEVycm9yYCBpZiBtYXggcmV0cmllcyB0byBvcGVuXHJcbiAqIGEgYnJvd3NlciBpbnN0YW5jZSBhcmUgcmVhY2hlZCwgb3IgaWYgbm8gYnJvd3NlciBpbnN0YW5jZSBpcyBmb3VuZCBhZnRlclxyXG4gKiByZXRyaWVzLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJyb3dzZXIocHVwcGV0ZWVyQXJncykge1xyXG4gIC8vIEdldCBgZGVidWdgIGFuZCBgb3RoZXJgIG9wdGlvbnNcclxuICBjb25zdCB7IGRlYnVnLCBvdGhlciB9ID0gZ2V0T3B0aW9ucygpO1xyXG5cclxuICAvLyBHZXQgdGhlIGBkZWJ1Z2Agb3B0aW9uc1xyXG4gIGNvbnN0IHsgZW5hYmxlOiBlbmFibGVkRGVidWcsIC4uLmRlYnVnT3B0aW9ucyB9ID0gZGVidWc7XHJcblxyXG4gIC8vIExhdW5jaCBvcHRpb25zIGZvciB0aGUgYnJvd3NlciBpbnN0YW5jZVxyXG4gIGNvbnN0IGxhdW5jaE9wdGlvbnMgPSB7XHJcbiAgICBoZWFkbGVzczogb3RoZXIuYnJvd3NlclNoZWxsTW9kZSA/ICdzaGVsbCcgOiB0cnVlLFxyXG4gICAgdXNlckRhdGFEaXI6ICd0bXAnLFxyXG4gICAgYXJnczogcHVwcGV0ZWVyQXJncyB8fCBbXSxcclxuICAgIGhhbmRsZVNJR0lOVDogZmFsc2UsXHJcbiAgICBoYW5kbGVTSUdURVJNOiBmYWxzZSxcclxuICAgIGhhbmRsZVNJR0hVUDogZmFsc2UsXHJcbiAgICB3YWl0Rm9ySW5pdGlhbFBhZ2U6IGZhbHNlLFxyXG4gICAgZGVmYXVsdFZpZXdwb3J0OiBudWxsLFxyXG4gICAgLi4uKGVuYWJsZWREZWJ1ZyAmJiBkZWJ1Z09wdGlvbnMpXHJcbiAgfTtcclxuXHJcbiAgLy8gQ3JlYXRlIGEgYnJvd3NlclxyXG4gIGlmICghYnJvd3Nlcikge1xyXG4gICAgLy8gQSBjb3VudGVyIGZvciB0aGUgYnJvd3NlcidzIGxhdW5jaCByZXRyaWVzXHJcbiAgICBsZXQgdHJ5Q291bnQgPSAwO1xyXG4gICAgY29uc3Qgb3BlbkJyb3dzZXIgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbG9nKFxyXG4gICAgICAgICAgMyxcclxuICAgICAgICAgIGBbYnJvd3Nlcl0gQXR0ZW1wdGluZyB0byBsYXVuY2ggYW5kIGdldCBhIGJyb3dzZXIgaW5zdGFuY2UgKHRyeSAkeysrdHJ5Q291bnR9KS5gXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gTGF1bmNoIHRoZSBicm93c2VyXHJcbiAgICAgICAgYnJvd3NlciA9IGF3YWl0IHB1cHBldGVlci5sYXVuY2gobGF1bmNoT3B0aW9ucyk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgbG9nV2l0aFN0YWNrKFxyXG4gICAgICAgICAgMSxcclxuICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgJ1ticm93c2VyXSBGYWlsZWQgdG8gbGF1bmNoIGEgYnJvd3NlciBpbnN0YW5jZS4nXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gUmV0cnkgdG8gbGF1bmNoIGJyb3dzZXIgdW50aWwgcmVhY2hpbmcgbWF4IGF0dGVtcHRzXHJcbiAgICAgICAgaWYgKHRyeUNvdW50IDwgMjUpIHtcclxuICAgICAgICAgIGxvZygzLCBgW2Jyb3dzZXJdIFJldHJ5IHRvIG9wZW4gYSBicm93c2VyICgke3RyeUNvdW50fSBvdXQgb2YgMjUpLmApO1xyXG5cclxuICAgICAgICAgIC8vIFdhaXQgZm9yIGEgNCBzZWNvbmRzIGJlZm9yZSB0cnlpbmcgYWdhaW5cclxuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNwb25zZSkgPT4gc2V0VGltZW91dChyZXNwb25zZSwgNDAwMCkpO1xyXG4gICAgICAgICAgYXdhaXQgb3BlbkJyb3dzZXIoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFRyeSB0byBvcGVuIGEgYnJvd3NlclxyXG4gICAgICBhd2FpdCBvcGVuQnJvd3NlcigpO1xyXG5cclxuICAgICAgLy8gU2hlbGwgbW9kZSBpbmZvcm1cclxuICAgICAgaWYgKGxhdW5jaE9wdGlvbnMuaGVhZGxlc3MgPT09ICdzaGVsbCcpIHtcclxuICAgICAgICBsb2coMywgYFticm93c2VyXSBMYXVuY2hlZCBicm93c2VyIGluIHNoZWxsIG1vZGUuYCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIERlYnVnIG1vZGUgaW5mb3JtXHJcbiAgICAgIGlmIChlbmFibGVkRGVidWcpIHtcclxuICAgICAgICBsb2coMywgYFticm93c2VyXSBMYXVuY2hlZCBicm93c2VyIGluIGRlYnVnIG1vZGUuYCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgICAnW2Jyb3dzZXJdIE1heGltdW0gcmV0cmllcyB0byBvcGVuIGEgYnJvd3NlciBpbnN0YW5jZSByZWFjaGVkLicsXHJcbiAgICAgICAgNTAwXHJcbiAgICAgICkuc2V0RXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5vIGNvcnJlY3QgYnJvd3NlclxyXG4gICAgaWYgKCFicm93c2VyKSB7XHJcbiAgICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcignW2Jyb3dzZXJdIENhbm5vdCBmaW5kIGEgYnJvd3NlciB0byBvcGVuLicsIDUwMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm4gYSBicm93c2VyIGluc3RhbmNlXHJcbiAgcmV0dXJuIGJyb3dzZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbG9zZXMgdGhlIFB1cHBldGVlciBicm93c2VyIGluc3RhbmNlIGlmIGl0IGlzIGNvbm5lY3RlZC5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBjbG9zZUJyb3dzZXJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZUJyb3dzZXIoKSB7XHJcbiAgLy8gQ2xvc2UgdGhlIGJyb3dzZXIgd2hlbiBjb25uZWN0ZWRcclxuICBpZiAoYnJvd3NlciAmJiBicm93c2VyLmNvbm5lY3RlZCkge1xyXG4gICAgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xyXG4gIH1cclxuICBicm93c2VyID0gbnVsbDtcclxuICBsb2coNCwgJ1ticm93c2VyXSBDbG9zZWQgdGhlIGJyb3dzZXIuJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IFB1cHBldGVlciBwYWdlIHdpdGhpbiBhbiBleGlzdGluZyBicm93c2VyIGluc3RhbmNlLlxyXG4gKiBUaGUgZnVuY3Rpb24gY3JlYXRlcyBhIG5ldyBwYWdlLCBkaXNhYmxlcyBjYWNoaW5nLCBzZXRzIGNvbnRlbnQgdXNpbmdcclxuICogdGhlIGBfc2V0UGFnZUNvbnRlbnQoKWAsIGFuZCByZXR1cm5zIHRoZSBjcmVhdGVkIFB1cHBldGVlciBwYWdlLlxyXG4gKlxyXG4gKiBAYXN5bmNcclxuICogQGZ1bmN0aW9uIG5ld1BhZ2VcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHBvb2xSZXNvdXJjZSAtIFRoZSBwb29sIHJlc291cmNlIHRoYXQgY29udGFpbnMgYGlkYCxcclxuICogYHdvcmtDb3VudGAsIGFuZCBgcGFnZWAuXHJcbiAqXHJcbiAqIEB0aHJvd3Mge0V4cG9ydEVycm9yfSBUaHJvd3MgYW4gYEV4cG9ydEVycm9yYCBpZiBubyB2YWxpZCBicm93c2VyXHJcbiAqIGhhcyBiZWVuIGNvbm5lY3RlZCBvciBpZiBhIHBhZ2UgaXMgaW52YWxpZCBvciBjbG9zZWQuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbmV3UGFnZShwb29sUmVzb3VyY2UpIHtcclxuICAvLyBFcnJvciBpbiBjYXNlIG9mIG5vIGNvbm5lY3RlZCBicm93c2VyXHJcbiAgaWYgKCFicm93c2VyIHx8ICFicm93c2VyLmNvbm5lY3RlZCkge1xyXG4gICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKGBbYnJvd3Nlcl0gQnJvd3NlciBpcyBub3QgeWV0IGNvbm5lY3RlZC5gLCA1MDApO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGEgcGFnZVxyXG4gIHBvb2xSZXNvdXJjZS5wYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XHJcblxyXG4gIC8vIERpc2FibGUgY2FjaGVcclxuICBhd2FpdCBwb29sUmVzb3VyY2UucGFnZS5zZXRDYWNoZUVuYWJsZWQoZmFsc2UpO1xyXG5cclxuICAvLyBTZXQgdGhlIGNvbnRlbnRcclxuICBhd2FpdCBfc2V0UGFnZUNvbnRlbnQocG9vbFJlc291cmNlLnBhZ2UpO1xyXG5cclxuICAvLyBTZXQgcGFnZSBldmVudHNcclxuICBfc2V0UGFnZUV2ZW50cyhwb29sUmVzb3VyY2UucGFnZSk7XHJcblxyXG4gIC8vIENoZWNrIGlmIHRoZSBwYWdlIGlzIGNvcnJlY3RseSBjcmVhdGVkXHJcbiAgaWYgKCFwb29sUmVzb3VyY2UucGFnZSB8fCBwb29sUmVzb3VyY2UucGFnZS5pc0Nsb3NlZCgpKSB7XHJcbiAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoJ1ticm93c2VyXSBUaGUgcGFnZSBpcyBpbnZhbGlkIG9yIGNsb3NlZC4nLCA0MDApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENsZWFycyB0aGUgY29udGVudCBvZiBhIFB1cHBldGVlciBwYWdlIGJhc2VkIG9uIHRoZSBzcGVjaWZpZWQgbW9kZS4gTG9nc1xyXG4gKiB0aHJvd24gZXJyb3IgaWYgY2xlYXJpbmcgb2YgYSBwYWdlJ3MgY29udGVudCBmYWlscy5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBjbGVhclBhZ2VcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHBvb2xSZXNvdXJjZSAtIFRoZSBwb29sIHJlc291cmNlIHRoYXQgY29udGFpbnMgcGFnZSBhbmQgaWQuXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2hhcmRSZXNldD1mYWxzZV0gLSBBIGZsYWcgaW5kaWNhdGluZyB0aGUgdHlwZSBvZiBjbGVhcmluZ1xyXG4gKiB0byBiZSBwZXJmb3JtZWQuIElmIGB0cnVlYCwgbmF2aWdhdGVzIHRvIGBhYm91dDpibGFua2AgYW5kIHJlc2V0cyBjb250ZW50XHJcbiAqIGFuZCBzY3JpcHRzLiBJZiBgZmFsc2VgLCBjbGVhcnMgdGhlIGJvZHkgY29udGVudCBieSBzZXR0aW5nIGEgcHJlZGVmaW5lZCBIVE1MXHJcbiAqIHN0cnVjdHVyZS4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGB0cnVlYCB3aGVuIHBhZ2VcclxuICogaXMgY29ycmVjdGx5IGNsZWFyZWQgYW5kIGBmYWxzZWAgd2hlbiBpdCBpcyBub3QuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJQYWdlKHBvb2xSZXNvdXJjZSwgaGFyZFJlc2V0ID0gZmFsc2UpIHtcclxuICB0cnkge1xyXG4gICAgaWYgKHBvb2xSZXNvdXJjZS5wYWdlICYmICFwb29sUmVzb3VyY2UucGFnZS5pc0Nsb3NlZCgpKSB7XHJcbiAgICAgIGlmIChoYXJkUmVzZXQpIHtcclxuICAgICAgICAvLyBOYXZpZ2F0ZSB0byBgYWJvdXQ6YmxhbmtgXHJcbiAgICAgICAgYXdhaXQgcG9vbFJlc291cmNlLnBhZ2UuZ290bygnYWJvdXQ6YmxhbmsnLCB7XHJcbiAgICAgICAgICB3YWl0VW50aWw6ICdkb21jb250ZW50bG9hZGVkJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIGNvbnRlbnQgYW5kIGFuZCBzY3JpcHRzIGFnYWluXHJcbiAgICAgICAgYXdhaXQgX3NldFBhZ2VDb250ZW50KHBvb2xSZXNvdXJjZS5wYWdlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBDbGVhciBib2R5IGNvbnRlbnRcclxuICAgICAgICBhd2FpdCBwb29sUmVzb3VyY2UucGFnZS5ldmFsdWF0ZSgoKSA9PiB7XHJcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9XHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiY2hhcnQtY29udGFpbmVyXCI+PGRpdiBpZD1cImNvbnRhaW5lclwiPjwvZGl2PjwvZGl2Pic7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ1dpdGhTdGFjayhcclxuICAgICAgMixcclxuICAgICAgZXJyb3IsXHJcbiAgICAgIGBbcG9vbF0gUG9vbCByZXNvdXJjZSBbJHtwb29sUmVzb3VyY2UuaWR9XSAtIENvbnRlbnQgb2YgdGhlIHBhZ2UgY291bGQgbm90IGJlIGNsZWFyZWQuYFxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBTZXQgdGhlIGB3b3JrTGltaXRgIHRvIGV4Y2VlZGVkIGluIG9yZGVyIHRvIHJlY3JlYXRlIHRoZSByZXNvdXJjZVxyXG4gICAgcG9vbFJlc291cmNlLndvcmtDb3VudCA9IGdldE9wdGlvbnMoKS5wb29sLndvcmtMaW1pdCArIDE7XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZHMgY3VzdG9tIEpTIGFuZCBDU1MgcmVzb3VyY2VzIHRvIGEgUHVwcGV0ZWVyIHBhZ2UgYmFzZWQgb24gdGhlIHNwZWNpZmllZFxyXG4gKiBvcHRpb25zLlxyXG4gKlxyXG4gKiBAYXN5bmNcclxuICogQGZ1bmN0aW9uIGFkZFBhZ2VSZXNvdXJjZXNcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2UgLSBUaGUgUHVwcGV0ZWVyIHBhZ2Ugb2JqZWN0IHRvIHdoaWNoIHJlc291cmNlcyB3aWxsXHJcbiAqIGJlIGFkZGVkLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gY3VzdG9tTG9naWNPcHRpb25zIC0gVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmdcclxuICogYGN1c3RvbUxvZ2ljYCBvcHRpb25zLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheTxPYmplY3Q+Pn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXlcclxuICogb2YgaW5qZWN0ZWQgcmVzb3VyY2VzLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFBhZ2VSZXNvdXJjZXMocGFnZSwgY3VzdG9tTG9naWNPcHRpb25zKSB7XHJcbiAgLy8gSW5qZWN0ZWQgcmVzb3VyY2VzIGFycmF5XHJcbiAgY29uc3QgaW5qZWN0ZWRSZXNvdXJjZXMgPSBbXTtcclxuXHJcbiAgLy8gVXNlIHRoZSBjb250ZW50IG9mIHRoZSBgcmVzb3VyY2VzYFxyXG4gIGNvbnN0IHJlc291cmNlcyA9IGN1c3RvbUxvZ2ljT3B0aW9ucy5yZXNvdXJjZXM7XHJcbiAgaWYgKHJlc291cmNlcykge1xyXG4gICAgY29uc3QgaW5qZWN0ZWRKcyA9IFtdO1xyXG5cclxuICAgIC8vIExvYWQgY3VzdG9tIEpTIGNvZGVcclxuICAgIGlmIChyZXNvdXJjZXMuanMpIHtcclxuICAgICAgaW5qZWN0ZWRKcy5wdXNoKHtcclxuICAgICAgICBjb250ZW50OiByZXNvdXJjZXMuanNcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTG9hZCBzY3JpcHRzIGZyb20gYWxsIGN1c3RvbSBmaWxlc1xyXG4gICAgaWYgKHJlc291cmNlcy5maWxlcykge1xyXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgcmVzb3VyY2VzLmZpbGVzKSB7XHJcbiAgICAgICAgY29uc3QgaXNMb2NhbCA9IGZpbGUuc3RhcnRzV2l0aCgnaHR0cCcpID8gZmFsc2UgOiB0cnVlO1xyXG5cclxuICAgICAgICAvLyBBZGQgZWFjaCBjdXN0b20gc2NyaXB0IGZyb20gcmVzb3VyY2VzJyBmaWxlc1xyXG4gICAgICAgIGluamVjdGVkSnMucHVzaChcclxuICAgICAgICAgIGlzTG9jYWxcclxuICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiByZWFkRmlsZVN5bmMoZ2V0QWJzb2x1dGVQYXRoKGZpbGUpLCAndXRmOCcpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA6IHtcclxuICAgICAgICAgICAgICAgIHVybDogZmlsZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGhlIGFjdHVhbCBpbmplY3Rpb24gb2YgY29sbGVjdGVkIHNjcmlwdHNcclxuICAgIGZvciAoY29uc3QganNSZXNvdXJjZSBvZiBpbmplY3RlZEpzKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaW5qZWN0ZWRSZXNvdXJjZXMucHVzaChhd2FpdCBwYWdlLmFkZFNjcmlwdFRhZyhqc1Jlc291cmNlKSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgbG9nV2l0aFN0YWNrKDIsIGVycm9yLCBgW2Jyb3dzZXJdIFRoZSBKUyByZXNvdXJjZSBjYW5ub3QgYmUgbG9hZGVkLmApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpbmplY3RlZEpzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgLy8gTG9hZCBDU1NcclxuICAgIGNvbnN0IGluamVjdGVkQ3NzID0gW107XHJcbiAgICBpZiAocmVzb3VyY2VzLmNzcykge1xyXG4gICAgICBjb25zdCBjc3NJbXBvcnRzID0gcmVzb3VyY2VzLmNzcy5tYXRjaCgvQGltcG9ydFxccyooW147XSopOy9nKTtcclxuICAgICAgaWYgKGNzc0ltcG9ydHMpIHtcclxuICAgICAgICAvLyBIYW5kbGUgY3NzIHNlY3Rpb25cclxuICAgICAgICBmb3IgKGxldCBjc3NJbXBvcnRQYXRoIG9mIGNzc0ltcG9ydHMpIHtcclxuICAgICAgICAgIGlmIChjc3NJbXBvcnRQYXRoKSB7XHJcbiAgICAgICAgICAgIGNzc0ltcG9ydFBhdGggPSBjc3NJbXBvcnRQYXRoXHJcbiAgICAgICAgICAgICAgLnJlcGxhY2UoJ3VybCgnLCAnJylcclxuICAgICAgICAgICAgICAucmVwbGFjZSgnQGltcG9ydCcsICcnKVxyXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJylcclxuICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCAnJylcclxuICAgICAgICAgICAgICAucmVwbGFjZSgvOy8sICcnKVxyXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCkvZywgJycpXHJcbiAgICAgICAgICAgICAgLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBlYWNoIGN1c3RvbSBjc3MgZnJvbSByZXNvdXJjZXNcclxuICAgICAgICAgICAgaWYgKGNzc0ltcG9ydFBhdGguc3RhcnRzV2l0aCgnaHR0cCcpKSB7XHJcbiAgICAgICAgICAgICAgaW5qZWN0ZWRDc3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGNzc0ltcG9ydFBhdGhcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXN0b21Mb2dpY09wdGlvbnMuYWxsb3dGaWxlUmVzb3VyY2VzKSB7XHJcbiAgICAgICAgICAgICAgaW5qZWN0ZWRDc3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBnZXRBYnNvbHV0ZVBhdGgoY3NzSW1wb3J0UGF0aClcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIENTUyBzZWN0aW9uIHdpbGwgYmUgY29udGVudCBieSBub3dcclxuICAgICAgaW5qZWN0ZWRDc3MucHVzaCh7XHJcbiAgICAgICAgY29udGVudDogcmVzb3VyY2VzLmNzcy5yZXBsYWNlKC9AaW1wb3J0XFxzKihbXjtdKik7L2csICcnKSB8fCAnICdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBUaGUgYWN0dWFsIGluamVjdGlvbiBvZiBjb2xsZWN0ZWQgQ1NTXHJcbiAgICAgIGZvciAoY29uc3QgY3NzUmVzb3VyY2Ugb2YgaW5qZWN0ZWRDc3MpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgaW5qZWN0ZWRSZXNvdXJjZXMucHVzaChhd2FpdCBwYWdlLmFkZFN0eWxlVGFnKGNzc1Jlc291cmNlKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGxvZ1dpdGhTdGFjayhcclxuICAgICAgICAgICAgMixcclxuICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgIGBbYnJvd3Nlcl0gVGhlIENTUyByZXNvdXJjZSBjYW5ub3QgYmUgbG9hZGVkLmBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGluamVjdGVkQ3NzLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBpbmplY3RlZFJlc291cmNlcztcclxufVxyXG5cclxuLyoqXHJcbiAqIENsZWFycyBvdXQgYWxsIHN0YXRlIHNldCBvbiB0aGUgcGFnZSB3aXRoIGBhZGRTY3JpcHRUYWdgIGFuZCBgYWRkU3R5bGVUYWdgLlxyXG4gKiBSZW1vdmVzIGluamVjdGVkIHJlc291cmNlcyBhbmQgcmVzZXRzIENTUyBhbmQgc2NyaXB0IHRhZ3Mgb24gdGhlIHBhZ2UuXHJcbiAqIEFkZGl0aW9uYWxseSwgaXQgZGVzdHJveXMgcHJldmlvdXNseSBleGlzdGluZyBjaGFydHMuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gY2xlYXJQYWdlUmVzb3VyY2VzXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlIC0gVGhlIFB1cHBldGVlciBwYWdlIG9iamVjdCBmcm9tIHdoaWNoIHJlc291cmNlcyB3aWxsXHJcbiAqIGJlIGNsZWFyZWQuXHJcbiAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gaW5qZWN0ZWRSZXNvdXJjZXMgLSBBcnJheSBvZiBpbmplY3RlZCByZXNvdXJjZXNcclxuICogdG8gYmUgY2xlYXJlZC5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhclBhZ2VSZXNvdXJjZXMocGFnZSwgaW5qZWN0ZWRSZXNvdXJjZXMpIHtcclxuICB0cnkge1xyXG4gICAgZm9yIChjb25zdCByZXNvdXJjZSBvZiBpbmplY3RlZFJlc291cmNlcykge1xyXG4gICAgICBhd2FpdCByZXNvdXJjZS5kaXNwb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVzdHJveSBvbGQgY2hhcnRzIGFmdGVyIGV4cG9ydCBpcyBkb25lIGFuZCByZXNldCBhbGwgQ1NTIGFuZCBzY3JpcHQgdGFnc1xyXG4gICAgYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7XHJcbiAgICAgIC8vIFdlIGFyZSBub3QgZ3VhcmFudGVlZCB0aGF0IEhpZ2hjaGFydHMgaXMgbG9hZGVkLCB3aGVuIGRvaW5nIFNWRyBleHBvcnRzXHJcbiAgICAgIGlmICh0eXBlb2YgSGlnaGNoYXJ0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcclxuICAgICAgICBjb25zdCBvbGRDaGFydHMgPSBIaWdoY2hhcnRzLmNoYXJ0cztcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaW4gYW55IGFscmVhZHkgZXhpc3RpbmcgY2hhcnRzXHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2xkQ2hhcnRzKSAmJiBvbGRDaGFydHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAvLyBEZXN0cm95IG9sZCBjaGFydHNcclxuICAgICAgICAgIGZvciAoY29uc3Qgb2xkQ2hhcnQgb2Ygb2xkQ2hhcnRzKSB7XHJcbiAgICAgICAgICAgIG9sZENoYXJ0ICYmIG9sZENoYXJ0LmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXHJcbiAgICAgICAgICAgIEhpZ2hjaGFydHMuY2hhcnRzLnNoaWZ0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcclxuICAgICAgY29uc3QgWy4uLnNjcmlwdHNUb1JlbW92ZV0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG4gICAgICBjb25zdCBbLCAuLi5zdHlsZXNUb1JlbW92ZV0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3R5bGUnKTtcclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXHJcbiAgICAgIGNvbnN0IFsuLi5saW5rc1RvUmVtb3ZlXSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsaW5rJyk7XHJcblxyXG4gICAgICAvLyBSZW1vdmUgdGFnc1xyXG4gICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgW1xyXG4gICAgICAgIC4uLnNjcmlwdHNUb1JlbW92ZSxcclxuICAgICAgICAuLi5zdHlsZXNUb1JlbW92ZSxcclxuICAgICAgICAuLi5saW5rc1RvUmVtb3ZlXHJcbiAgICAgIF0pIHtcclxuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nV2l0aFN0YWNrKDIsIGVycm9yLCBgW2Jyb3dzZXJdIENvdWxkIG5vdCBjbGVhciBwYWdlJ3MgcmVzb3VyY2VzLmApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHMgdGhlIGNvbnRlbnQgZm9yIGEgUHVwcGV0ZWVyIHBhZ2UgdXNpbmcgYSBwcmVkZWZpbmVkIHRlbXBsYXRlXHJcbiAqIGFuZCBhZGRpdGlvbmFsIHNjcmlwdHMuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gX3NldFBhZ2VDb250ZW50XHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlIC0gVGhlIFB1cHBldGVlciBwYWdlIG9iamVjdCB0byB3aGljaCB0aGUgY29udGVudFxyXG4gKiBpcyBiZWluZyBzZXQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfc2V0UGFnZUNvbnRlbnQocGFnZSkge1xyXG4gIC8vIFNldCB0aGUgaW5pdGlhbCBwYWdlIGNvbnRlbnRcclxuICBhd2FpdCBwYWdlLnNldENvbnRlbnQocGFnZVRlbXBsYXRlLCB7IHdhaXRVbnRpbDogJ2RvbWNvbnRlbnRsb2FkZWQnIH0pO1xyXG5cclxuICAvLyBBZGQgYWxsIHJlZ2lzdGVyZWQgSGlnY2hhcnRzIHNjcmlwdHMsIHF1aXRlIGRlbWFuZGluZ1xyXG4gIGF3YWl0IHBhZ2UuYWRkU2NyaXB0VGFnKHsgcGF0aDogam9pbihnZXRDYWNoZVBhdGgoKSwgJ3NvdXJjZXMuanMnKSB9KTtcclxuXHJcbiAgLy8gU2V0IHRoZSBpbml0aWFsIGBhbmltT2JqZWN0YCBmb3IgSGlnaGNoYXJ0c1xyXG4gIGF3YWl0IHBhZ2UuZXZhbHVhdGUoc2V0dXBIaWdoY2hhcnRzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBldmVudHMgKGxpa2UgYHBhZ2VlcnJvcmAgYW5kIGBjb25zb2xlYCkgZm9yIGEgUHVwcGV0ZWVyIHBhZ2UgaW4gb3JkZXJcclxuICogdG8gY2F0Y2ggYW5kIGRpc3BsYXkgZXJyb3JzIGFuZCBjb25zb2xlIGxvZ3MgZnJvbSB0aGUgd2luZG93IGNvbnRleHQuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfc2V0UGFnZUV2ZW50c1xyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZSAtIFRoZSBQdXBwZXRlZXIgcGFnZSBvYmplY3QgdG8gd2hpY2ggdGhlIGxpc3RlbmVyc1xyXG4gKiBhcmUgYmVpbmcgc2V0LlxyXG4gKi9cclxuZnVuY3Rpb24gX3NldFBhZ2VFdmVudHMocGFnZSkge1xyXG4gIC8vIEdldCBgZGVidWdgIG9wdGlvbnNcclxuICBjb25zdCB7IGRlYnVnIH0gPSBnZXRPcHRpb25zKCk7XHJcblxyXG4gIC8vIFNldCB0aGUgYHBhZ2VlcnJvcmAgbGlzdGVuZXJcclxuICBwYWdlLm9uKCdwYWdlZXJyb3InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBJdCB3b3VsZCBzZWVtIGxpa2UgdGhpcyBtYXkgZmlyZSBhdCB0aGUgc2FtZSB0aW1lIG9yIHNob3J0bHkgYmVmb3JlXHJcbiAgICAvLyBhIHBhZ2UgaXMgY2xvc2VkLlxyXG4gICAgaWYgKHBhZ2UuaXNDbG9zZWQoKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIFNldCB0aGUgYGNvbnNvbGVgIGxpc3RlbmVyLCBpZiBuZWVkZWRcclxuICBpZiAoZGVidWcuZW5hYmxlICYmIGRlYnVnLmxpc3RlblRvQ29uc29sZSkge1xyXG4gICAgcGFnZS5vbignY29uc29sZScsIChtZXNzYWdlKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBbZGVidWddICR7bWVzc2FnZS50ZXh0KCl9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBnZXRCcm93c2VyLFxyXG4gIGNyZWF0ZUJyb3dzZXIsXHJcbiAgY2xvc2VCcm93c2VyLFxyXG4gIG5ld1BhZ2UsXHJcbiAgY2xlYXJQYWdlLFxyXG4gIGFkZFBhZ2VSZXNvdXJjZXMsXHJcbiAgY2xlYXJQYWdlUmVzb3VyY2VzXHJcbn07XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIFRoZSBDU1MgdG8gYmUgdXNlZCBvbiB0aGUgZXhwb3J0ZWQgcGFnZS5cclxuICpcclxuICogQHJldHVybnMge3N0cmluZ30gVGhlIENTUyBjb25maWd1cmF0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKCkgPT4gYFxyXG5cclxuaHRtbCwgYm9keSB7XHJcbiAgbWFyZ2luOiAwO1xyXG4gIHBhZGRpbmc6IDA7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxufVxyXG5cclxuI3RhYmxlLWRpdiwgI3NsaWRlcnMsICNkYXRhdGFibGUsICNjb250cm9scywgLmxkLXJvdyB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxuICBoZWlnaHQ6IDA7XHJcbn1cclxuXHJcbiNjaGFydC1jb250YWluZXIge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgbWFyZ2luOiAwO1xyXG4gIG92ZXJmbG93OiBhdXRvO1xyXG4gIGZvbnQtc2l6ZTogMDtcclxufVxyXG5cclxuI2NoYXJ0LWNvbnRhaW5lciA+IGZpZ3VyZSwgZGl2IHtcclxuICBtYXJnaW4tdG9wOiAwICFpbXBvcnRhbnQ7XHJcbiAgbWFyZ2luLWJvdHRvbTogMCAhaW1wb3J0YW50O1xyXG59XHJcblxyXG5gO1xyXG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5cclxuSGlnaGNoYXJ0cyBFeHBvcnQgU2VydmVyXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMTYtMjAyNSwgSGlnaHNvZnRcclxuXHJcbkxpY2VuY2VkIHVuZGVyIHRoZSBNSVQgbGljZW5jZS5cclxuXHJcbkFkZGl0aW9uYWxseSBhIHZhbGlkIEhpZ2hjaGFydHMgbGljZW5zZSBpcyByZXF1aXJlZCBmb3IgdXNlLlxyXG5cclxuU2VlIExJQ0VOU0UgZmlsZSBpbiByb290IGZvciBkZXRhaWxzLlxyXG5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmltcG9ydCBjc3NUZW1wbGF0ZSBmcm9tICcuL2Nzcy5qcyc7XHJcblxyXG4vKipcclxuICogVGhlIFNWRyB0ZW1wbGF0ZSB0byB1c2Ugd2hlbiBsb2FkaW5nIFNWRyBjb250ZW50IHRvIGJlIGV4cG9ydGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3ZnIC0gVGhlIFNWRyBpbnB1dCBjb250ZW50IHRvIGJlIGV4cG9ydGVkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgU1ZHIHRlbXBsYXRlLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKHN2ZykgPT4gYFxyXG48IURPQ1RZUEUgaHRtbD5cclxuPGh0bWwgbGFuZz0nZW4tVVMnPlxyXG4gIDxoZWFkPlxyXG4gICAgPG1ldGEgaHR0cC1lcXVpdj1cIkNvbnRlbnQtVHlwZVwiIGNvbnRlbnQ9XCJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLThcIj5cclxuICAgIDx0aXRsZT5IaWdoY2hhcnRzIEV4cG9ydDwvdGl0bGU+XHJcbiAgPC9oZWFkPlxyXG4gIDxzdHlsZT5cclxuICAgICR7Y3NzVGVtcGxhdGUoKX1cclxuICA8L3N0eWxlPlxyXG4gIDxib2R5PlxyXG4gICAgPGRpdiBpZD1cImNoYXJ0LWNvbnRhaW5lclwiPlxyXG4gICAgICAke3N2Z31cclxuICAgIDwvZGl2PlxyXG4gIDwvYm9keT5cclxuPC9odG1sPlxyXG5cclxuYDtcclxuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbkhpZ2hjaGFydHMgRXhwb3J0IFNlcnZlclxyXG5cclxuQ29weXJpZ2h0IChjKSAyMDE2LTIwMjUsIEhpZ2hzb2Z0XHJcblxyXG5MaWNlbmNlZCB1bmRlciB0aGUgTUlUIGxpY2VuY2UuXHJcblxyXG5BZGRpdGlvbmFsbHkgYSB2YWxpZCBIaWdoY2hhcnRzIGxpY2Vuc2UgaXMgcmVxdWlyZWQgZm9yIHVzZS5cclxuXHJcblNlZSBMSUNFTlNFIGZpbGUgaW4gcm9vdCBmb3IgZGV0YWlscy5cclxuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogQG92ZXJ2aWV3IFRoaXMgbW9kdWxlIGhhbmRsZXMgY2hhcnQgZXhwb3J0IGZ1bmN0aW9uYWxpdHkgdXNpbmcgUHVwcGV0ZWVyLlxyXG4gKiBJdCBzdXBwb3J0cyBleHBvcnRpbmcgY2hhcnRzIGFzIFNWRywgUE5HLCBKUEVHLCBhbmQgUERGIGZvcm1hdHMuIFRoZSBtb2R1bGVcclxuICogbWFuYWdlcyBwYWdlIHJlc291cmNlcywgc2V0cyB1cCB0aGUgZXhwb3J0IGVudmlyb25tZW50LCBhbmQgcHJvY2Vzc2VzIGNoYXJ0XHJcbiAqIGNvbmZpZ3VyYXRpb25zIG9yIFNWRyBpbnB1dHMgZm9yIHJlbmRlcmluZy4gRXhwb3J0cyB0byBhIGNoYXJ0IGZyb20gYSBwYWdlXHJcbiAqIHVzaW5nIFB1cHBldGVlci5cclxuICovXHJcblxyXG5pbXBvcnQgeyBhZGRQYWdlUmVzb3VyY2VzLCBjbGVhclBhZ2VSZXNvdXJjZXMgfSBmcm9tICcuL2Jyb3dzZXIuanMnO1xyXG5pbXBvcnQgeyBjcmVhdGVDaGFydCB9IGZyb20gJy4vaGlnaGNoYXJ0cy5qcyc7XHJcbmltcG9ydCB7IGxvZyB9IGZyb20gJy4vbG9nZ2VyLmpzJztcclxuXHJcbmltcG9ydCBzdmdUZW1wbGF0ZSBmcm9tICcuLi90ZW1wbGF0ZXMvc3ZnRXhwb3J0L3N2Z0V4cG9ydC5qcyc7XHJcblxyXG5pbXBvcnQgRXhwb3J0RXJyb3IgZnJvbSAnLi9lcnJvcnMvRXhwb3J0RXJyb3IuanMnO1xyXG5cclxuLyoqXHJcbiAqIEV4cG9ydHMgdG8gYSBjaGFydCBmcm9tIGEgcGFnZSB1c2luZyBQdXBwZXRlZXIuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gcHVwcGV0ZWVyRXhwb3J0XHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlIC0gUHVwcGV0ZWVyIHBhZ2Ugb2JqZWN0LlxyXG4gKiBAcGFyYW0ge09iamVjdH0gZXhwb3J0T3B0aW9ucyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIGBleHBvcnRgXHJcbiAqIG9wdGlvbnMuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjdXN0b21Mb2dpY09wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZ1xyXG4gKiBgY3VzdG9tTG9naWNgIG9wdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPChzdHJpbmd8QnVmZmVyfEV4cG9ydEVycm9yKT59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzXHJcbiAqIHRvIHRoZSBleHBvcnRlZCBkYXRhIG9yIHJlamVjdGluZyB3aXRoIGFuIGBFeHBvcnRFcnJvcmAuXHJcbiAqXHJcbiAqIEB0aHJvd3Mge0V4cG9ydEVycm9yfSBUaHJvd3MgYW4gYEV4cG9ydEVycm9yYCBpZiBleHBvcnQgdG8gYW4gdW5zdXBwb3J0ZWRcclxuICogb3V0cHV0IGZvcm1hdCBvY2N1cnMuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVwcGV0ZWVyRXhwb3J0KHBhZ2UsIGV4cG9ydE9wdGlvbnMsIGN1c3RvbUxvZ2ljT3B0aW9ucykge1xyXG4gIC8vIEluamVjdGVkIHJlc291cmNlcyBhcnJheSAoYWRkaXRpb25hbCBKUyBhbmQgQ1NTKVxyXG4gIGNvbnN0IGluamVjdGVkUmVzb3VyY2VzID0gW107XHJcblxyXG4gIHRyeSB7XHJcbiAgICBsZXQgaXNTVkcgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBEZWNpZGUgb24gdGhlIGV4cG9ydCBtZXRob2RcclxuICAgIGlmIChleHBvcnRPcHRpb25zLnN2Zykge1xyXG4gICAgICBsb2coNCwgJ1tleHBvcnRdIFRyZWF0aW5nIGFzIFNWRyBpbnB1dC4nKTtcclxuXHJcbiAgICAgIC8vIElmIHRoZSBgdHlwZWAgaXMgYWxzbyBTVkcsIHJldHVybiB0aGUgaW5wdXRcclxuICAgICAgaWYgKGV4cG9ydE9wdGlvbnMudHlwZSA9PT0gJ3N2ZycpIHtcclxuICAgICAgICByZXR1cm4gZXhwb3J0T3B0aW9ucy5zdmc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIE1hcmsgYXMgU1ZHIGV4cG9ydCBmb3IgdGhlIGxhdGVyIHNpemUgY29ycmVjdGlvbnNcclxuICAgICAgaXNTVkcgPSB0cnVlO1xyXG5cclxuICAgICAgLy8gU1ZHIGV4cG9ydFxyXG4gICAgICBhd2FpdCBwYWdlLnNldENvbnRlbnQoc3ZnVGVtcGxhdGUoZXhwb3J0T3B0aW9ucy5zdmcpLCB7XHJcbiAgICAgICAgd2FpdFVudGlsOiAnZG9tY29udGVudGxvYWRlZCdcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsb2coNCwgJ1tleHBvcnRdIFRyZWF0aW5nIGFzIEpTT04gY29uZmlnLicpO1xyXG5cclxuICAgICAgLy8gT3B0aW9ucyBleHBvcnRcclxuICAgICAgYXdhaXQgcGFnZS5ldmFsdWF0ZShjcmVhdGVDaGFydCwgZXhwb3J0T3B0aW9ucywgY3VzdG9tTG9naWNPcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBLZWVwcyB0cmFjayBvZiBhbGwgcmVzb3VyY2VzIGFkZGVkIG9uIHRoZSBwYWdlIHdpdGggYWRkWFhYVGFnLiBldGNcclxuICAgIC8vIEl0J3MgVklUQUwgdGhhdCBhbGwgYWRkZWQgcmVzb3VyY2VzIGVuZHMgdXAgaGVyZSBzbyB3ZSBjYW4gY2xlYXIgdGhpbmdzXHJcbiAgICAvLyBvdXQgd2hlbiBkb2luZyBhIG5ldyBleHBvcnQgaW4gdGhlIHNhbWUgcGFnZSFcclxuICAgIGluamVjdGVkUmVzb3VyY2VzLnB1c2goXHJcbiAgICAgIC4uLihhd2FpdCBhZGRQYWdlUmVzb3VyY2VzKHBhZ2UsIGN1c3RvbUxvZ2ljT3B0aW9ucykpXHJcbiAgICApO1xyXG5cclxuICAgIC8vIEdldCB0aGUgcmVhbCBjaGFydCBzaXplIGFuZCBzZXQgdGhlIHpvb20gYWNjb3JkaW5nbHlcclxuICAgIGNvbnN0IHNpemUgPSBhd2FpdCBfZ2V0Q2hhcnRTaXplKHBhZ2UsIGlzU1ZHLCBleHBvcnRPcHRpb25zLnNjYWxlKTtcclxuXHJcbiAgICAvLyBHZXQgdGhlIGNsaXAgcmVnaW9uIGZvciB0aGUgcGFnZVxyXG4gICAgY29uc3QgeyB4LCB5IH0gPSBhd2FpdCBfZ2V0Q2xpcFJlZ2lvbihwYWdlKTtcclxuXHJcbiAgICAvLyBTZXQgZmluYWwgYGhlaWdodGAgZm9yIHZpZXdwb3J0XHJcbiAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IE1hdGguYWJzKFxyXG4gICAgICBNYXRoLmNlaWwoc2l6ZS5jaGFydEhlaWdodCB8fCBleHBvcnRPcHRpb25zLmhlaWdodClcclxuICAgICk7XHJcblxyXG4gICAgLy8gU2V0IGZpbmFsIGB3aWR0aGAgZm9yIHZpZXdwb3J0XHJcbiAgICBjb25zdCB2aWV3cG9ydFdpZHRoID0gTWF0aC5hYnMoXHJcbiAgICAgIE1hdGguY2VpbChzaXplLmNoYXJ0V2lkdGggfHwgZXhwb3J0T3B0aW9ucy53aWR0aClcclxuICAgICk7XHJcblxyXG4gICAgLy8gU2V0IHRoZSBmaW5hbCB2aWV3cG9ydCBub3cgdGhhdCB3ZSBoYXZlIHRoZSByZWFsIGhlaWdodFxyXG4gICAgYXdhaXQgcGFnZS5zZXRWaWV3cG9ydCh7XHJcbiAgICAgIGhlaWdodDogdmlld3BvcnRIZWlnaHQsXHJcbiAgICAgIHdpZHRoOiB2aWV3cG9ydFdpZHRoLFxyXG4gICAgICBkZXZpY2VTY2FsZUZhY3RvcjogaXNTVkcgPyAxIDogcGFyc2VGbG9hdChleHBvcnRPcHRpb25zLnNjYWxlKVxyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHJlc3VsdDtcclxuICAgIC8vIFJhc3Rlcml6YXRpb24gcHJvY2Vzc1xyXG4gICAgc3dpdGNoIChleHBvcnRPcHRpb25zLnR5cGUpIHtcclxuICAgICAgY2FzZSAnc3ZnJzpcclxuICAgICAgICByZXN1bHQgPSBhd2FpdCBfY3JlYXRlU1ZHKHBhZ2UpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdwbmcnOlxyXG4gICAgICBjYXNlICdqcGVnJzpcclxuICAgICAgICByZXN1bHQgPSBhd2FpdCBfY3JlYXRlSW1hZ2UoXHJcbiAgICAgICAgICBwYWdlLFxyXG4gICAgICAgICAgZXhwb3J0T3B0aW9ucy50eXBlLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB3aWR0aDogdmlld3BvcnRXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiB2aWV3cG9ydEhlaWdodCxcclxuICAgICAgICAgICAgeCxcclxuICAgICAgICAgICAgeVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGV4cG9ydE9wdGlvbnMucmFzdGVyaXphdGlvblRpbWVvdXRcclxuICAgICAgICApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdwZGYnOlxyXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IF9jcmVhdGVQREYoXHJcbiAgICAgICAgICBwYWdlLFxyXG4gICAgICAgICAgdmlld3BvcnRIZWlnaHQsXHJcbiAgICAgICAgICB2aWV3cG9ydFdpZHRoLFxyXG4gICAgICAgICAgZXhwb3J0T3B0aW9ucy5yYXN0ZXJpemF0aW9uVGltZW91dFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAgICAgYFtleHBvcnRdIFVuc3VwcG9ydGVkIG91dHB1dCBmb3JtYXQ6ICR7ZXhwb3J0T3B0aW9ucy50eXBlfS5gLFxyXG4gICAgICAgICAgNDAwXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGVhciBwcmV2aW91c2x5IGluamVjdGVkIEpTIGFuZCBDU1MgcmVzb3VyY2VzXHJcbiAgICBhd2FpdCBjbGVhclBhZ2VSZXNvdXJjZXMocGFnZSwgaW5qZWN0ZWRSZXNvdXJjZXMpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgYXdhaXQgY2xlYXJQYWdlUmVzb3VyY2VzKHBhZ2UsIGluamVjdGVkUmVzb3VyY2VzKTtcclxuICAgIHJldHVybiBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgdGhlIGNsaXBwaW5nIHJlZ2lvbiBjb29yZGluYXRlcyBvZiB0aGUgc3BlY2lmaWVkIHBhZ2UgZWxlbWVudFxyXG4gKiB3aXRoIHRoZSAnY2hhcnQtY29udGFpbmVyJyBpZC5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBfZ2V0Q2xpcFJlZ2lvblxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZSAtIFB1cHBldGVlciBwYWdlIG9iamVjdC5cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gb2JqZWN0IGNvbnRhaW5pbmdcclxuICogYHhgLCBgeWAsIGB3aWR0aGAsIGFuZCBgaGVpZ2h0YCBwcm9wZXJ0aWVzLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2dldENsaXBSZWdpb24ocGFnZSkge1xyXG4gIHJldHVybiBwYWdlLiRldmFsKCcjY2hhcnQtY29udGFpbmVyJywgKGVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHgsXHJcbiAgICAgIHksXHJcbiAgICAgIHdpZHRoLFxyXG4gICAgICBoZWlnaHQ6IE1hdGgudHJ1bmMoaGVpZ2h0ID4gMSA/IGhlaWdodCA6IDUwMClcclxuICAgIH07XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgdGhlIHJlYWwgY2hhcnQgZGltZW5zaW9ucyBmcm9tIGEgUHVwcGV0ZWVyIHBhZ2UuIFRoZSBmdW5jdGlvblxyXG4gKiBiZWhhdmVzIGRpZmZlcmVudGx5IGJhc2VkIG9uIHdoZXRoZXIgdGhlIGV4cG9ydCB0eXBlIGlzIFNWRyBvciBhbm90aGVyXHJcbiAqIGZvcm1hdC5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBfZ2V0Q2hhcnRTaXplXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlIC0gUHVwcGV0ZWVyIHBhZ2Ugb2JqZWN0LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzU1ZHIC0gRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBjaGFydCBiZWluZyBwcm9jZXNzZWRcclxuICogaXMgYW4gU1ZHIG9yIGFub3RoZXIgZm9ybWF0LlxyXG4gKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgLSBUaGUgc2NhbGUgZmFjdG9yIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGNoYXJ0XHJcbiAqIGRpbWVuc2lvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nXHJcbiAqIHRoZSBhY3R1YWwgaGVpZ2h0IGFuZCB3aWR0aCBvZiB0aGUgY2hhcnQgYWZ0ZXIgc2NhbGluZy5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRDaGFydFNpemUocGFnZSwgaXNTVkcsIHNjYWxlKSB7XHJcbiAgLy8gVHJpZ2dlciBhcHByb3ByaWF0ZSBmdW5jdGlvbiBiYXNlZCBvbiB0aGUgYGlzU3ZnYCBmbGFnIHRvIGdldCBjaGFydCBzaXplXHJcbiAgcmV0dXJuIGlzU1ZHXHJcbiAgICA/IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKHNjYWxlKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3ZnRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAnI2NoYXJ0LWNvbnRhaW5lciBzdmc6Zmlyc3Qtb2YtdHlwZSdcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBHZXQgdGhlIHZhbHVlcyBjb3JyZWN0bHkgc2NhbGVkXHJcbiAgICAgICAgY29uc3QgY2hhcnRIZWlnaHQgPSBzdmdFbGVtZW50LmhlaWdodC5iYXNlVmFsLnZhbHVlICogc2NhbGU7XHJcbiAgICAgICAgY29uc3QgY2hhcnRXaWR0aCA9IHN2Z0VsZW1lbnQud2lkdGguYmFzZVZhbC52YWx1ZSAqIHNjYWxlO1xyXG5cclxuICAgICAgICAvLyBJbiBjYXNlIG9mIFNWRyB0aGUgem9vbSBtdXN0IGJlIHNldCBkaXJlY3RseSBmb3IgYm9keSBhcyBzY2FsZVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuem9vbSA9IHNjYWxlO1xyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIG1hcmdpbiB0byAwcHhcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbiA9ICcwcHgnO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgY2hhcnRIZWlnaHQsXHJcbiAgICAgICAgICBjaGFydFdpZHRoXHJcbiAgICAgICAgfTtcclxuICAgICAgfSwgcGFyc2VGbG9hdChzY2FsZSkpXHJcbiAgICA6IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG4gICAgICAgIGNvbnN0IHsgY2hhcnRIZWlnaHQsIGNoYXJ0V2lkdGggfSA9IHdpbmRvdy5IaWdoY2hhcnRzLmNoYXJ0c1swXTtcclxuXHJcbiAgICAgICAgLy8gTm8gbmVlZCBmb3Igc3VjaCBzY2FsZSBtYW5pcHVsYXRpb24gaW4gY2FzZSBvZiBvdGhlciB0eXBlc1xyXG4gICAgICAgIC8vIG9mIGV4cG9ydHMuIFJlc2V0IHRoZSB6b29tIGZvciBvdGhlciBleHBvcnRzIHRoYW4gdG8gU1ZHc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuem9vbSA9IDE7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBjaGFydEhlaWdodCxcclxuICAgICAgICAgIGNoYXJ0V2lkdGhcclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gU1ZHIGJ5IGV2YWx1YXRpbmcgdGhlIGBvdXRlckhUTUxgIG9mIHRoZSBmaXJzdCAnc3ZnJyBlbGVtZW50XHJcbiAqIGluc2lkZSBhbiBlbGVtZW50IHdpdGggdGhlIGlkICdjb250YWluZXInLlxyXG4gKlxyXG4gKiBAYXN5bmNcclxuICogQGZ1bmN0aW9uIF9jcmVhdGVTVkdcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHBhZ2UgLSBQdXBwZXRlZXIgcGFnZSBvYmplY3QuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBTVkcgc3RyaW5nLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2NyZWF0ZVNWRyhwYWdlKSB7XHJcbiAgcmV0dXJuIHBhZ2UuJGV2YWwoXHJcbiAgICAnI2NvbnRhaW5lciBzdmc6Zmlyc3Qtb2YtdHlwZScsXHJcbiAgICAoZWxlbWVudCkgPT4gZWxlbWVudC5vdXRlckhUTUxcclxuICApO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhbiBpbWFnZSB1c2luZyBQdXBwZXRlZXIncyBwYWdlIGBzY3JlZW5zaG90YCBmdW5jdGlvbmFsaXR5IHdpdGhcclxuICogc3BlY2lmaWVkIG9wdGlvbnMuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gX2NyZWF0ZUltYWdlXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdlIC0gUHVwcGV0ZWVyIHBhZ2Ugb2JqZWN0LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIEltYWdlIHR5cGUuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjbGlwIC0gQ2xpcHBpbmcgcmVnaW9uIGNvb3JkaW5hdGVzLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gcmFzdGVyaXphdGlvblRpbWVvdXQgLSBUaW1lb3V0IGZvciByYXN0ZXJpemF0aW9uXHJcbiAqIGluIG1pbGxpc2Vjb25kcy5cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2U8QnVmZmVyPn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIGltYWdlIGJ1ZmZlclxyXG4gKiBvciByZWplY3Rpbmcgd2l0aCBhbiBgRXhwb3J0RXJyb3JgIGZvciB0aW1lb3V0LlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2NyZWF0ZUltYWdlKHBhZ2UsIHR5cGUsIGNsaXAsIHJhc3Rlcml6YXRpb25UaW1lb3V0KSB7XHJcbiAgcmV0dXJuIFByb21pc2UucmFjZShbXHJcbiAgICBwYWdlLnNjcmVlbnNob3Qoe1xyXG4gICAgICB0eXBlLFxyXG4gICAgICBjbGlwLFxyXG4gICAgICBlbmNvZGluZzogJ2Jhc2U2NCcsXHJcbiAgICAgIGZ1bGxQYWdlOiBmYWxzZSxcclxuICAgICAgb3B0aW1pemVGb3JTcGVlZDogdHJ1ZSxcclxuICAgICAgY2FwdHVyZUJleW9uZFZpZXdwb3J0OiB0cnVlLFxyXG4gICAgICAuLi4odHlwZSAhPT0gJ3BuZycgPyB7IHF1YWxpdHk6IDgwIH0gOiB7fSksXHJcbiAgICAgIC8vIEFsd2F5cyByZW5kZXIgb24gYSB0cmFuc3BhcmVudCBwYWdlIGlmIHRoZSBleHBlY3RlZCB0eXBlIGZvcm1hdCBpcyBQTkdcclxuICAgICAgb21pdEJhY2tncm91bmQ6IHR5cGUgPT0gJ3BuZycgLy8gIzQ0NywgIzQ2M1xyXG4gICAgfSksXHJcbiAgICBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT5cclxuICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAoKSA9PiByZWplY3QobmV3IEV4cG9ydEVycm9yKCdSYXN0ZXJpemF0aW9uIHRpbWVvdXQnLCA0MDgpKSxcclxuICAgICAgICByYXN0ZXJpemF0aW9uVGltZW91dCB8fCAxNTAwXHJcbiAgICAgIClcclxuICAgIClcclxuICBdKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBQREYgdXNpbmcgUHVwcGV0ZWVyJ3MgcGFnZSBgcGRmYCBmdW5jdGlvbmFsaXR5IHdpdGggc3BlY2lmaWVkXHJcbiAqIG9wdGlvbnMuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gX2NyZWF0ZVBERlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnZSAtIFB1cHBldGVlciBwYWdlIG9iamVjdC5cclxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFBERiBoZWlnaHQuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFBERiB3aWR0aC5cclxuICogQHBhcmFtIHtudW1iZXJ9IHJhc3Rlcml6YXRpb25UaW1lb3V0IC0gVGltZW91dCBmb3IgcmFzdGVyaXphdGlvblxyXG4gKiBpbiBtaWxsaXNlY29uZHMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPEJ1ZmZlcj59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBQREYgYnVmZmVyLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2NyZWF0ZVBERihwYWdlLCBoZWlnaHQsIHdpZHRoLCByYXN0ZXJpemF0aW9uVGltZW91dCkge1xyXG4gIGF3YWl0IHBhZ2UuZW11bGF0ZU1lZGlhVHlwZSgnc2NyZWVuJyk7XHJcbiAgcmV0dXJuIHBhZ2UucGRmKHtcclxuICAgIC8vIFRoaXMgd2lsbCByZW1vdmUgYW4gZXh0cmEgZW1wdHkgcGFnZSBpbiBQREYgZXhwb3J0c1xyXG4gICAgaGVpZ2h0OiBoZWlnaHQgKyAxLFxyXG4gICAgd2lkdGgsXHJcbiAgICBlbmNvZGluZzogJ2Jhc2U2NCcsXHJcbiAgICB0aW1lb3V0OiByYXN0ZXJpemF0aW9uVGltZW91dCB8fCAxNTAwXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBwdXBwZXRlZXJFeHBvcnRcclxufTtcclxuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbkhpZ2hjaGFydHMgRXhwb3J0IFNlcnZlclxyXG5cclxuQ29weXJpZ2h0IChjKSAyMDE2LTIwMjUsIEhpZ2hzb2Z0XHJcblxyXG5MaWNlbmNlZCB1bmRlciB0aGUgTUlUIGxpY2VuY2UuXHJcblxyXG5BZGRpdGlvbmFsbHkgYSB2YWxpZCBIaWdoY2hhcnRzIGxpY2Vuc2UgaXMgcmVxdWlyZWQgZm9yIHVzZS5cclxuXHJcblNlZSBMSUNFTlNFIGZpbGUgaW4gcm9vdCBmb3IgZGV0YWlscy5cclxuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogQG92ZXJ2aWV3IFRoaXMgbW9kdWxlIHByb3ZpZGVzIGEgd29ya2VyIHBvb2wgaW1wbGVtZW50YXRpb24gZm9yIG1hbmFnaW5nXHJcbiAqIHRoZSBicm93c2VyIGluc3RhbmNlIGFuZCBwYWdlcywgc3BlY2lmaWNhbGx5IGRlc2lnbmVkIGZvciB1c2Ugd2l0aFxyXG4gKiB0aGUgSGlnaGNoYXJ0cyBFeHBvcnQgU2VydmVyLiBJdCBvcHRpbWl6ZXMgcmVzb3VyY2VzIHVzYWdlIGFuZCBwZXJmb3JtYW5jZVxyXG4gKiBieSBtYWludGFpbmluZyBhIHBvb2wgb2Ygd29ya2VycyB0aGF0IGNhbiBoYW5kbGUgY29uY3VycmVudCBleHBvcnQgdGFza3NcclxuICogdXNpbmcgUHVwcGV0ZWVyLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFBvb2wgfSBmcm9tICd0YXJuJztcclxuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ3V1aWQnO1xyXG5cclxuaW1wb3J0IHsgY2xlYXJQYWdlLCBjcmVhdGVCcm93c2VyLCBjbG9zZUJyb3dzZXIsIG5ld1BhZ2UgfSBmcm9tICcuL2Jyb3dzZXIuanMnO1xyXG5pbXBvcnQgeyBwdXBwZXRlZXJFeHBvcnQgfSBmcm9tICcuL2V4cG9ydC5qcyc7XHJcbmltcG9ydCB7IGxvZywgbG9nV2l0aFN0YWNrIH0gZnJvbSAnLi9sb2dnZXIuanMnO1xyXG5pbXBvcnQgeyBnZXROZXdEYXRlVGltZSwgbWVhc3VyZVRpbWUgfSBmcm9tICcuL3V0aWxzLmpzJztcclxuXHJcbmltcG9ydCBFeHBvcnRFcnJvciBmcm9tICcuL2Vycm9ycy9FeHBvcnRFcnJvci5qcyc7XHJcblxyXG4vLyBUaGUgcG9vbCBpbnN0YW5jZVxyXG5sZXQgcG9vbCA9IG51bGw7XHJcblxyXG4vLyBQb29sIHN0YXRpc3RpY3NcclxuY29uc3QgcG9vbFN0YXRzID0ge1xyXG4gIGV4cG9ydHNBdHRlbXB0ZWQ6IDAsXHJcbiAgZXhwb3J0c1BlcmZvcm1lZDogMCxcclxuICBleHBvcnRzRHJvcHBlZDogMCxcclxuICBleHBvcnRzRnJvbVN2ZzogMCxcclxuICBleHBvcnRzRnJvbU9wdGlvbnM6IDAsXHJcbiAgZXhwb3J0c0Zyb21TdmdBdHRlbXB0czogMCxcclxuICBleHBvcnRzRnJvbU9wdGlvbnNBdHRlbXB0czogMCxcclxuICB0aW1lU3BlbnQ6IDAsXHJcbiAgdGltZVNwZW50QXZlcmFnZTogMFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemVzIHRoZSBleHBvcnQgcG9vbCB3aXRoIHRoZSBwcm92aWRlZCBjb25maWd1cmF0aW9uLCBjcmVhdGluZ1xyXG4gKiBhIGJyb3dzZXIgaW5zdGFuY2UgYW5kIHNldHRpbmcgdXAgd29ya2VyIHJlc291cmNlcy5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBpbml0UG9vbFxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gcG9vbE9wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZyBgcG9vbGBcclxuICogb3B0aW9ucy5cclxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBwdXBwZXRlZXJBcmdzIC0gQWRkaXRpb25hbCBhcmd1bWVudHMgZm9yIFB1cHBldGVlclxyXG4gKiBsYXVuY2guXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBlbmRpbmcgdGhlIGZ1bmN0aW9uXHJcbiAqIGV4ZWN1dGlvbiB3aGVuIGFuIGFscmVhZHkgaW5pdGlhbGl6ZWQgcG9vbCBvZiByZXNvdXJjZXMgaXMgZm91bmQuXHJcbiAqXHJcbiAqIEB0aHJvd3Mge0V4cG9ydEVycm9yfSBUaHJvd3MgYW4gYEV4cG9ydEVycm9yYCBpZiBjb3VsZCBub3QgY3JlYXRlIHRoZSBwb29sXHJcbiAqIG9mIHdvcmtlcnMuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdFBvb2wocG9vbE9wdGlvbnMsIHB1cHBldGVlckFyZ3MpIHtcclxuICAvLyBDcmVhdGUgYSBicm93c2VyIGluc3RhbmNlIHdpdGggdGhlIHB1cHBldGVlciBhcmd1bWVudHNcclxuICBhd2FpdCBjcmVhdGVCcm93c2VyKHB1cHBldGVlckFyZ3MpO1xyXG5cclxuICB0cnkge1xyXG4gICAgbG9nKFxyXG4gICAgICAzLFxyXG4gICAgICBgW3Bvb2xdIEluaXRpYWxpemluZyBwb29sIHdpdGggd29ya2VyczogbWluICR7cG9vbE9wdGlvbnMubWluV29ya2Vyc30sIG1heCAke3Bvb2xPcHRpb25zLm1heFdvcmtlcnN9LmBcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHBvb2wpIHtcclxuICAgICAgbG9nKFxyXG4gICAgICAgIDQsXHJcbiAgICAgICAgJ1twb29sXSBBbHJlYWR5IGluaXRpYWxpemVkLCBwbGVhc2Uga2lsbCBpdCBiZWZvcmUgY3JlYXRpbmcgYSBuZXcgb25lLidcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEtlZXAgYW4gZXllIG9uIGEgY29ycmVjdCBtaW4gYW5kIG1heCB3b3JrZXJzIG51bWJlclxyXG4gICAgaWYgKHBvb2xPcHRpb25zLm1pbldvcmtlcnMgPiBwb29sT3B0aW9ucy5tYXhXb3JrZXJzKSB7XHJcbiAgICAgIHBvb2xPcHRpb25zLm1pbldvcmtlcnMgPSBwb29sT3B0aW9ucy5tYXhXb3JrZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSBhIHBvb2wgYWxvbmcgd2l0aCBhIG1pbmltYWwgbnVtYmVyIG9mIHJlc291cmNlc1xyXG4gICAgcG9vbCA9IG5ldyBQb29sKHtcclxuICAgICAgLy8gR2V0IHRoZSBgY3JlYXRlYCwgYHZhbGlkYXRlYCwgYW5kIGBkZXN0cm95YCBmdW5jdGlvbnNcclxuICAgICAgLi4uX2ZhY3RvcnkocG9vbE9wdGlvbnMpLFxyXG4gICAgICBtaW46IHBvb2xPcHRpb25zLm1pbldvcmtlcnMsXHJcbiAgICAgIG1heDogcG9vbE9wdGlvbnMubWF4V29ya2VycyxcclxuICAgICAgYWNxdWlyZVRpbWVvdXRNaWxsaXM6IHBvb2xPcHRpb25zLmFjcXVpcmVUaW1lb3V0LFxyXG4gICAgICBjcmVhdGVUaW1lb3V0TWlsbGlzOiBwb29sT3B0aW9ucy5jcmVhdGVUaW1lb3V0LFxyXG4gICAgICBkZXN0cm95VGltZW91dE1pbGxpczogcG9vbE9wdGlvbnMuZGVzdHJveVRpbWVvdXQsXHJcbiAgICAgIGlkbGVUaW1lb3V0TWlsbGlzOiBwb29sT3B0aW9ucy5pZGxlVGltZW91dCxcclxuICAgICAgY3JlYXRlUmV0cnlJbnRlcnZhbE1pbGxpczogcG9vbE9wdGlvbnMuY3JlYXRlUmV0cnlJbnRlcnZhbCxcclxuICAgICAgcmVhcEludGVydmFsTWlsbGlzOiBwb29sT3B0aW9ucy5yZWFwZXJJbnRlcnZhbCxcclxuICAgICAgcHJvcGFnYXRlQ3JlYXRlRXJyb3I6IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBTZXQgZXZlbnRzXHJcbiAgICBwb29sLm9uKCdyZWxlYXNlJywgYXN5bmMgKHJlc291cmNlKSA9PiB7XHJcbiAgICAgIC8vIENsZWFyIHBhZ2VcclxuICAgICAgY29uc3QgY2xlYXJTdGF0dXMgPSBhd2FpdCBjbGVhclBhZ2UocmVzb3VyY2UsIGZhbHNlKTtcclxuICAgICAgbG9nKFxyXG4gICAgICAgIDQsXHJcbiAgICAgICAgYFtwb29sXSBQb29sIHJlc291cmNlIFske3Jlc291cmNlLmlkfV0gLSBSZWxlYXNpbmcgYSB3b3JrZXIuIENsZWFyIHBhZ2Ugc3RhdHVzOiAke2NsZWFyU3RhdHVzfS5gXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBwb29sLm9uKCdkZXN0cm95U3VjY2VzcycsIChfZXZlbnRJZCwgcmVzb3VyY2UpID0+IHtcclxuICAgICAgbG9nKFxyXG4gICAgICAgIDQsXHJcbiAgICAgICAgYFtwb29sXSBQb29sIHJlc291cmNlIFske3Jlc291cmNlLmlkfV0gLSBEZXN0cm95ZWQgYSB3b3JrZXIgc3VjY2Vzc2Z1bGx5LmBcclxuICAgICAgKTtcclxuICAgICAgcmVzb3VyY2UucGFnZSA9IG51bGw7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBpbml0aWFsUmVzb3VyY2VzID0gW107XHJcbiAgICAvLyBDcmVhdGUgYW4gaW5pdGlhbCBudW1iZXIgb2YgcmVzb3VyY2VzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvb2xPcHRpb25zLm1pbldvcmtlcnM7IGkrKykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc291cmNlID0gYXdhaXQgcG9vbC5hY3F1aXJlKCkucHJvbWlzZTtcclxuICAgICAgICBpbml0aWFsUmVzb3VyY2VzLnB1c2gocmVzb3VyY2UpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGxvZ1dpdGhTdGFjaygyLCBlcnJvciwgJ1twb29sXSBDb3VsZCBub3QgY3JlYXRlIGFuIGluaXRpYWwgcmVzb3VyY2UuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBSZWxlYXNlIHRoZSBpbml0aWFsIG51bWJlciBvZiByZXNvdXJjZXMgYmFjayB0byB0aGUgcG9vbFxyXG4gICAgaW5pdGlhbFJlc291cmNlcy5mb3JFYWNoKChyZXNvdXJjZSkgPT4ge1xyXG4gICAgICBwb29sLnJlbGVhc2UocmVzb3VyY2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbG9nKFxyXG4gICAgICAzLFxyXG4gICAgICBgW3Bvb2xdIFRoZSBwb29sIGlzIHJlYWR5JHtpbml0aWFsUmVzb3VyY2VzLmxlbmd0aCA/IGAgd2l0aCAke2luaXRpYWxSZXNvdXJjZXMubGVuZ3RofSBpbml0aWFsIHJlc291cmNlcyB3YWl0aW5nLmAgOiAnLid9YFxyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAnW3Bvb2xdIENvdWxkIG5vdCBjb25maWd1cmUgYW5kIGNyZWF0ZSB0aGUgcG9vbCBvZiB3b3JrZXJzLicsXHJcbiAgICAgIDUwMFxyXG4gICAgKS5zZXRFcnJvcihlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVGVybWluYXRlcyBhbGwgd29ya2VycyBpbiB0aGUgcG9vbCwgZGVzdHJveXMgdGhlIHBvb2wsIGFuZCBjbG9zZXMgdGhlIGJyb3dzZXJcclxuICogaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24ga2lsbFBvb2xcclxuICpcclxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIHdvcmtlcnMgYXJlXHJcbiAqIHRlcm1pbmF0ZWQsIHRoZSBwb29sIGlzIGRlc3Ryb3llZCwgYW5kIHRoZSBicm93c2VyIGlzIHN1Y2Nlc3NmdWxseSBjbG9zZWQuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga2lsbFBvb2woKSB7XHJcbiAgbG9nKDMsICdbcG9vbF0gS2lsbGluZyBwb29sIHdpdGggYWxsIHdvcmtlcnMgYW5kIGNsb3NpbmcgYnJvd3Nlci4nKTtcclxuXHJcbiAgLy8gSWYgc3RpbGwgYWxpdmUsIGRlc3Ryb3kgdGhlIHBvb2wgb2YgcGFnZXMgYmVmb3JlIGNsb3NpbmcgYSBicm93c2VyXHJcbiAgaWYgKHBvb2wpIHtcclxuICAgIC8vIEZyZWUgdXAgbm90IHJlbGVhc2VkIHdvcmtlcnNcclxuICAgIGZvciAoY29uc3Qgd29ya2VyIG9mIHBvb2wudXNlZCkge1xyXG4gICAgICBwb29sLnJlbGVhc2Uod29ya2VyLnJlc291cmNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZXN0cm95IHRoZSBwb29sIGlmIGl0IGlzIHN0aWxsIGF2YWlsYWJsZVxyXG4gICAgaWYgKCFwb29sLmRlc3Ryb3llZCkge1xyXG4gICAgICBhd2FpdCBwb29sLmRlc3Ryb3koKTtcclxuICAgICAgbG9nKDQsICdbcG9vbF0gRGVzdHJveWVkIHRoZSBwb29sIG9mIHJlc291cmNlcy4nKTtcclxuICAgIH1cclxuICAgIHBvb2wgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2xvc2UgdGhlIGJyb3dzZXIgaW5zdGFuY2VcclxuICBhd2FpdCBjbG9zZUJyb3dzZXIoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByb2Nlc3NlcyB0aGUgZXhwb3J0IHdvcmsgdXNpbmcgYSB3b3JrZXIgZnJvbSB0aGUgcG9vbC4gQWNxdWlyZXMgYSB3b3JrZXJcclxuICogaGFuZGxlIGZyb20gdGhlIHBvb2wsIHBlcmZvcm1zIHRoZSBleHBvcnQgdXNpbmcgcHVwcGV0ZWVyLCBhbmQgcmVsZWFzZXNcclxuICogdGhlIHdvcmtlciBoYW5kbGUgYmFjayB0byB0aGUgcG9vbC5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBwb3N0V29ya1xyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIGNvbXBsZXRlIHNldFxyXG4gKiBvZiBvcHRpb25zLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgZXhwb3J0IHJlc3VsdFxyXG4gKiBhbmQgb3B0aW9ucy5cclxuICpcclxuICogQHRocm93cyB7RXhwb3J0RXJyb3J9IFRocm93cyBhbiBgRXhwb3J0RXJyb3JgIGlmIGFuIGVycm9yIG9jY3VycyBkdXJpbmdcclxuICogdGhlIGV4cG9ydCBwcm9jZXNzLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBvc3RXb3JrKG9wdGlvbnMpIHtcclxuICBsZXQgd29ya2VySGFuZGxlO1xyXG5cclxuICB0cnkge1xyXG4gICAgbG9nKDQsICdbcG9vbF0gV29yayByZWNlaXZlZCwgc3RhcnRpbmcgdG8gcHJvY2Vzcy4nKTtcclxuXHJcbiAgICAvLyBBbiBleHBvcnQgYXR0ZW1wdCBjb3VudGVkXHJcbiAgICArK3Bvb2xTdGF0cy5leHBvcnRzQXR0ZW1wdGVkO1xyXG5cclxuICAgIC8vIERpc3BsYXkgdGhlIHBvb2wgaW5mb3JtYXRpb24gaWYgbmVlZGVkXHJcbiAgICBpZiAob3B0aW9ucy5wb29sLmJlbmNobWFya2luZykge1xyXG4gICAgICBfZ2V0UG9vbEluZm8oKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUaHJvdyBhbiBlcnJvciBpbiBjYXNlIG9mIGxhY2tpbmcgdGhlIHBvb2wgaW5zdGFuY2VcclxuICAgIGlmICghcG9vbCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoXHJcbiAgICAgICAgJ1twb29sXSBXb3JrIHJlY2VpdmVkLCBidXQgcG9vbCBoYXMgbm90IGJlZW4gc3RhcnRlZC4nLFxyXG4gICAgICAgIDUwMFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRoZSBhY3F1aXJlIGNvdW50ZXJcclxuICAgIGNvbnN0IGFjcXVpcmVDb3VudGVyID0gbWVhc3VyZVRpbWUoKTtcclxuXHJcbiAgICAvLyBUcnkgdG8gYWNxdWlyZSB0aGUgd29ya2VyIGFsb25nIHdpdGggdGhlIGlkLCB3b3JrcyBjb3VudCBhbmQgcGFnZVxyXG4gICAgdHJ5IHtcclxuICAgICAgbG9nKDQsICdbcG9vbF0gQWNxdWlyaW5nIGEgd29ya2VyIGhhbmRsZS4nKTtcclxuXHJcbiAgICAgIC8vIEFjcXVpcmUgYSBwb29sIHJlc291cmNlXHJcbiAgICAgIHdvcmtlckhhbmRsZSA9IGF3YWl0IHBvb2wuYWNxdWlyZSgpLnByb21pc2U7XHJcblxyXG4gICAgICAvLyBDaGVjayB0aGUgcGFnZSBhY3F1aXJlIHRpbWVcclxuICAgICAgaWYgKG9wdGlvbnMuc2VydmVyLmJlbmNobWFya2luZykge1xyXG4gICAgICAgIGxvZyhcclxuICAgICAgICAgIDUsXHJcbiAgICAgICAgICBgW2JlbmNobWFya10gJHtvcHRpb25zLnJlcXVlc3RJZCA/IGBSZXF1ZXN0IFske29wdGlvbnMucmVxdWVzdElkfV0gLSBgIDogJyd9YCxcclxuICAgICAgICAgIGBBY3F1aXJpbmcgYSB3b3JrZXIgaGFuZGxlIHRvb2sgJHthY3F1aXJlQ291bnRlcigpfW1zLmBcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoXHJcbiAgICAgICAgYFtwb29sXSAke1xyXG4gICAgICAgICAgb3B0aW9ucy5yZXF1ZXN0SWQgPyBgUmVxdWVzdCBbJHtvcHRpb25zLnJlcXVlc3RJZH1dIC0gYCA6ICcnXHJcbiAgICAgICAgfUVycm9yIGVuY291bnRlcmVkIHdoZW4gYWNxdWlyaW5nIGFuIGF2YWlsYWJsZSBlbnRyeTogJHthY3F1aXJlQ291bnRlcigpfW1zLmAsXHJcbiAgICAgICAgNDAwXHJcbiAgICAgICkuc2V0RXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgbG9nKDQsICdbcG9vbF0gQWNxdWlyZWQgYSB3b3JrZXIgaGFuZGxlLicpO1xyXG5cclxuICAgIGlmICghd29ya2VySGFuZGxlLnBhZ2UpIHtcclxuICAgICAgLy8gU2V0IHRoZSBgd29ya0xpbWl0YCB0byBleGNlZWRlZCBpbiBvcmRlciB0byByZWNyZWF0ZSB0aGUgcmVzb3VyY2VcclxuICAgICAgd29ya2VySGFuZGxlLndvcmtDb3VudCA9IG9wdGlvbnMucG9vbC53b3JrTGltaXQgKyAxO1xyXG4gICAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoXHJcbiAgICAgICAgJ1twb29sXSBSZXNvbHZlZCB3b3JrZXIgcGFnZSBpcyBpbnZhbGlkOiB0aGUgcG9vbCBzZXR1cCBpcyB3b25reS4nLFxyXG4gICAgICAgIDQwMFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGxvZyhcclxuICAgICAgNCxcclxuICAgICAgYFtwb29sXSBQb29sIHJlc291cmNlIFske3dvcmtlckhhbmRsZS5pZH1dIC0gU3RhcnRpbmcgd29yayBvbiB0aGlzIHBvb2wgZW50cnkuYFxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBTdGFydCBtZWFzdXJpbmcgZXhwb3J0IHRpbWVcclxuICAgIGNvbnN0IGV4cG9ydENvdW50ZXIgPSBtZWFzdXJlVGltZSgpO1xyXG5cclxuICAgIC8vIFBlcmZvcm0gYW4gZXhwb3J0IG9uIGEgcHVwcGV0ZWVyIGxldmVsXHJcbiAgICBjb25zdCBleHBvcnRSZXN1bHQgPSBhd2FpdCBwdXBwZXRlZXJFeHBvcnQoXHJcbiAgICAgIHdvcmtlckhhbmRsZS5wYWdlLFxyXG4gICAgICBvcHRpb25zLmV4cG9ydCxcclxuICAgICAgb3B0aW9ucy5jdXN0b21Mb2dpY1xyXG4gICAgKTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiBpdCdzIGFuIGVycm9yXHJcbiAgICBpZiAoZXhwb3J0UmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgLy8gTk9URTpcclxuICAgICAgLy8gSWYgdGhlcmUncyBhIHJhc3Rlcml6YXRpb24gdGltZW91dCwgd2Ugd2FudCBuZWVkIHRvIGZsdXNoIHRoZSBwYWdlLlxyXG4gICAgICAvLyBUaGlzIGlzIGJlY2F1c2UgdGhlIHBhZ2UgbWF5IGJlIGluIGEgc3RhdGUgd2hlcmUgaXQncyB3YWl0aW5nIGZvclxyXG4gICAgICAvLyB0aGUgc2NyZWVuc2hvdCB0byBmaW5pc2ggZXZlbiB0aG91Z2ggdGhlIHRpbWVvdXQgaGFzIG9jY3VyZWQuXHJcbiAgICAgIC8vIFdoaWNoIG9mIGNvdXJzZSBjYXVzZXMgYSBsb3Qgb2YgaXNzdWVzIHdpdGggdGhlIGV2ZW50IHN5c3RlbSxcclxuICAgICAgLy8gYW5kIHBhZ2UgY29uc2lzdGVuY3kuXHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIE9ubHkgYHBhZ2Uuc2NyZWVuc2hvdGAgd2lsbCB0aHJvdyB0aGlzLCB0aW1lb3V0cyBmb3IgUERGJ3MgYXJlXHJcbiAgICAgIC8vIGhhbmRsZWQgYnkgdGhlIGBwYWdlLnBkZmAgZnVuY3Rpb24gaXRzZWxmLlxyXG4gICAgICAvL1xyXG4gICAgICAvLyAuLi55ZXMsIHRoaXMgaXMgdWdseS5cclxuICAgICAgaWYgKGV4cG9ydFJlc3VsdC5tZXNzYWdlID09PSAnUmFzdGVyaXphdGlvbiB0aW1lb3V0Jykge1xyXG4gICAgICAgIC8vIFNldCB0aGUgYHdvcmtMaW1pdGAgdG8gZXhjZWVkZWQgaW4gb3JkZXIgdG8gcmVjcmVhdGUgdGhlIHJlc291cmNlXHJcbiAgICAgICAgd29ya2VySGFuZGxlLndvcmtDb3VudCA9IG9wdGlvbnMucG9vbC53b3JrTGltaXQgKyAxO1xyXG4gICAgICAgIHdvcmtlckhhbmRsZS5wYWdlID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV4cG9ydFJlc3VsdC5uYW1lID09PSAnVGltZW91dEVycm9yJyB8fFxyXG4gICAgICAgIGV4cG9ydFJlc3VsdC5tZXNzYWdlID09PSAnUmFzdGVyaXphdGlvbiB0aW1lb3V0J1xyXG4gICAgICApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoXHJcbiAgICAgICAgICBgW3Bvb2xdICR7XHJcbiAgICAgICAgICAgIG9wdGlvbnMucmVxdWVzdElkID8gYFJlcXVlc3QgWyR7b3B0aW9ucy5yZXF1ZXN0SWR9XSAtIGAgOiAnJ1xyXG4gICAgICAgICAgfVJhc3Rlcml6YXRpb24gdGltZW91dDogeW91ciBjaGFydCBtYXkgYmUgdG9vIGNvbXBsZXggb3IgbGFyZ2UsIGFuZCBmYWlsZWQgdG8gcmVuZGVyIHdpdGhpbiB0aGUgYWxsb3R0ZWQgdGltZS5gXHJcbiAgICAgICAgKS5zZXRFcnJvcihleHBvcnRSZXN1bHQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgICAgIGBbcG9vbF0gJHtcclxuICAgICAgICAgICAgb3B0aW9ucy5yZXF1ZXN0SWQgPyBgUmVxdWVzdCBbJHtvcHRpb25zLnJlcXVlc3RJZH1dIC0gYCA6ICcnXHJcbiAgICAgICAgICB9RXJyb3IgZW5jb3VudGVyZWQgZHVyaW5nIGV4cG9ydDogJHtleHBvcnRDb3VudGVyKCl9bXMuYFxyXG4gICAgICAgICkuc2V0RXJyb3IoZXhwb3J0UmVzdWx0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIHRoZSBQdXBwZXRlZXIgZXhwb3J0IHRpbWVcclxuICAgIGlmIChvcHRpb25zLnNlcnZlci5iZW5jaG1hcmtpbmcpIHtcclxuICAgICAgbG9nKFxyXG4gICAgICAgIDUsXHJcbiAgICAgICAgYFtiZW5jaG1hcmtdICR7b3B0aW9ucy5yZXF1ZXN0SWQgPyBgUmVxdWVzdCBbJHtvcHRpb25zLnJlcXVlc3RJZH1dIC0gYCA6ICcnfWAsXHJcbiAgICAgICAgYEV4cG9ydGluZyBhIGNoYXJ0IHN1Y2Vzc2Z1bGx5IHRvb2sgJHtleHBvcnRDb3VudGVyKCl9bXMuYFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlbGVhc2UgdGhlIHJlc291cmNlIGJhY2sgdG8gdGhlIHBvb2xcclxuICAgIHBvb2wucmVsZWFzZSh3b3JrZXJIYW5kbGUpO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBzdGF0aXN0aWNzXHJcbiAgICBwb29sU3RhdHMudGltZVNwZW50ICs9IGV4cG9ydENvdW50ZXIoKTtcclxuICAgIHBvb2xTdGF0cy50aW1lU3BlbnRBdmVyYWdlID1cclxuICAgICAgcG9vbFN0YXRzLnRpbWVTcGVudCAvICsrcG9vbFN0YXRzLmV4cG9ydHNQZXJmb3JtZWQ7XHJcblxyXG4gICAgbG9nKDQsIGBbcG9vbF0gV29yayBjb21wbGV0ZWQgaW4gJHtleHBvcnRDb3VudGVyKCl9bXMuYCk7XHJcblxyXG4gICAgLy8gT3RoZXJ3aXNlIHJldHVybiBhbiBvYmplY3Qgd2l0aCB0aGUgcmVzdWx0IGFuZCBvcHRpb25zXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN1bHQ6IGV4cG9ydFJlc3VsdCxcclxuICAgICAgb3B0aW9uc1xyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgKytwb29sU3RhdHMuZXhwb3J0c0Ryb3BwZWQ7XHJcblxyXG4gICAgLy8gVHJ5IHRvIHJlbGVhc2UgdGhlIHdvcmtlciwgaWYgaXQgZXhpc3RzXHJcbiAgICBpZiAod29ya2VySGFuZGxlKSB7XHJcbiAgICAgIHBvb2wucmVsZWFzZSh3b3JrZXJIYW5kbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHJpZXZlcyB0aGUgY3VycmVudCBwb29sIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gZ2V0UG9vbFxyXG4gKlxyXG4gKiBAcmV0dXJucyB7KE9iamVjdHxudWxsKX0gVGhlIGN1cnJlbnQgcG9vbCBpbnN0YW5jZSBpZiBpbml0aWFsaXplZCwgb3IgYG51bGxgXHJcbiAqIGlmIHRoZSBwb29sIGhhcyBub3QgYmVlbiBjcmVhdGVkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvb2woKSB7XHJcbiAgcmV0dXJuIHBvb2w7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBzdGF0aXN0aWMgb2YgYSBwb29sIGluc3RhY2UgYWJvdXQgZXhwb3J0cy5cclxuICpcclxuICogQGZ1bmN0aW9uIGdldFBvb2xTdGF0c1xyXG4gKlxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgY3VycmVudCBwb29sIHN0YXRpc3RpY3MuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9vbFN0YXRzKCkge1xyXG4gIHJldHVybiBwb29sU3RhdHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgcG9vbCBpbmZvcm1hdGlvbiBpbiBKU09OIGZvcm1hdCwgaW5jbHVkaW5nIG1pbmltdW0gYW5kIG1heGltdW1cclxuICogd29ya2VycywgYXZhaWxhYmxlIHdvcmtlcnMsIHdvcmtlcnMgaW4gdXNlLCBhbmQgcGVuZGluZyBhY3F1aXJlIHJlcXVlc3RzLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gZ2V0UG9vbEluZm9KU09OXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFBvb2wgaW5mb3JtYXRpb24gaW4gSlNPTiBmb3JtYXQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9vbEluZm9KU09OKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICBtaW46IHBvb2wubWluLFxyXG4gICAgbWF4OiBwb29sLm1heCxcclxuICAgIHVzZWQ6IHBvb2wubnVtVXNlZCgpLFxyXG4gICAgYXZhaWxhYmxlOiBwb29sLm51bUZyZWUoKSxcclxuICAgIGFsbENyZWF0ZWQ6IHBvb2wubnVtVXNlZCgpICsgcG9vbC5udW1GcmVlKCksXHJcbiAgICBwZW5kaW5nQWNxdWlyZXM6IHBvb2wubnVtUGVuZGluZ0FjcXVpcmVzKCksXHJcbiAgICBwZW5kaW5nQ3JlYXRlczogcG9vbC5udW1QZW5kaW5nQ3JlYXRlcygpLFxyXG4gICAgcGVuZGluZ1ZhbGlkYXRpb25zOiBwb29sLm51bVBlbmRpbmdWYWxpZGF0aW9ucygpLFxyXG4gICAgcGVuZGluZ0Rlc3Ryb3lzOiBwb29sLnBlbmRpbmdEZXN0cm95cy5sZW5ndGgsXHJcbiAgICBhYnNvbHV0ZUFsbDpcclxuICAgICAgcG9vbC5udW1Vc2VkKCkgK1xyXG4gICAgICBwb29sLm51bUZyZWUoKSArXHJcbiAgICAgIHBvb2wubnVtUGVuZGluZ0FjcXVpcmVzKCkgK1xyXG4gICAgICBwb29sLm51bVBlbmRpbmdDcmVhdGVzKCkgK1xyXG4gICAgICBwb29sLm51bVBlbmRpbmdWYWxpZGF0aW9ucygpICtcclxuICAgICAgcG9vbC5wZW5kaW5nRGVzdHJveXMubGVuZ3RoXHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIExvZ3MgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHBvb2wsIGluY2x1ZGluZyB0aGUgbWluaW11bVxyXG4gKiBhbmQgbWF4aW11bSB3b3JrZXJzLCBhdmFpbGFibGUgd29ya2Vycywgd29ya2VycyBpbiB1c2UsIGFuZCBwZW5kaW5nIGFjcXVpcmVcclxuICogcmVxdWVzdHMuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfZ2V0UG9vbEluZm9cclxuICovXHJcbmZ1bmN0aW9uIF9nZXRQb29sSW5mbygpIHtcclxuICBjb25zdCB7XHJcbiAgICBtaW4sXHJcbiAgICBtYXgsXHJcbiAgICB1c2VkLFxyXG4gICAgYXZhaWxhYmxlLFxyXG4gICAgYWxsQ3JlYXRlZCxcclxuICAgIHBlbmRpbmdBY3F1aXJlcyxcclxuICAgIHBlbmRpbmdDcmVhdGVzLFxyXG4gICAgcGVuZGluZ1ZhbGlkYXRpb25zLFxyXG4gICAgcGVuZGluZ0Rlc3Ryb3lzLFxyXG4gICAgYWJzb2x1dGVBbGxcclxuICB9ID0gZ2V0UG9vbEluZm9KU09OKCk7XHJcblxyXG4gIGxvZyg1LCBgW3Bvb2xdIFRoZSBtaW5pbXVtIG51bWJlciBvZiByZXNvdXJjZXMgYWxsb3dlZCBieSBwb29sOiAke21pbn0uYCk7XHJcbiAgbG9nKDUsIGBbcG9vbF0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHJlc291cmNlcyBhbGxvd2VkIGJ5IHBvb2w6ICR7bWF4fS5gKTtcclxuICBsb2coNSwgYFtwb29sXSBUaGUgbnVtYmVyIG9mIHVzZWQgcmVzb3VyY2VzOiAke3VzZWR9LmApO1xyXG4gIGxvZyg1LCBgW3Bvb2xdIFRoZSBudW1iZXIgb2YgZnJlZSByZXNvdXJjZXM6ICR7YXZhaWxhYmxlfS5gKTtcclxuICBsb2coXHJcbiAgICA1LFxyXG4gICAgYFtwb29sXSBUaGUgbnVtYmVyIG9mIGFsbCBjcmVhdGVkICh1c2VkIGFuZCBmcmVlKSByZXNvdXJjZXM6ICR7YWxsQ3JlYXRlZH0uYFxyXG4gICk7XHJcbiAgbG9nKFxyXG4gICAgNSxcclxuICAgIGBbcG9vbF0gVGhlIG51bWJlciBvZiByZXNvdXJjZXMgd2FpdGluZyB0byBiZSBhY3F1aXJlZDogJHtwZW5kaW5nQWNxdWlyZXN9LmBcclxuICApO1xyXG4gIGxvZyhcclxuICAgIDUsXHJcbiAgICBgW3Bvb2xdIFRoZSBudW1iZXIgb2YgcmVzb3VyY2VzIHdhaXRpbmcgdG8gYmUgY3JlYXRlZDogJHtwZW5kaW5nQ3JlYXRlc30uYFxyXG4gICk7XHJcbiAgbG9nKFxyXG4gICAgNSxcclxuICAgIGBbcG9vbF0gVGhlIG51bWJlciBvZiByZXNvdXJjZXMgd2FpdGluZyB0byBiZSB2YWxpZGF0ZWQ6ICR7cGVuZGluZ1ZhbGlkYXRpb25zfS5gXHJcbiAgKTtcclxuICBsb2coXHJcbiAgICA1LFxyXG4gICAgYFtwb29sXSBUaGUgbnVtYmVyIG9mIHJlc291cmNlcyB3YWl0aW5nIHRvIGJlIGRlc3Ryb3llZDogJHtwZW5kaW5nRGVzdHJveXN9LmBcclxuICApO1xyXG4gIGxvZyg1LCBgW3Bvb2xdIFRoZSBudW1iZXIgb2YgYWxsIHJlc291cmNlczogJHthYnNvbHV0ZUFsbH0uYCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGYWN0b3J5IGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBvYmplY3Qgd2l0aCBgY3JlYXRlYCwgYHZhbGlkYXRlYCwgYGRlc3Ryb3lgXHJcbiAqIGZ1bmN0aW9ucyBmb3IgdGhlIHBvb2wgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfZmFjdG9yeVxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gcG9vbE9wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZyBgcG9vbGBcclxuICogb3B0aW9ucy5cclxuICovXHJcbmZ1bmN0aW9uIF9mYWN0b3J5KHBvb2xPcHRpb25zKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyB3b3JrZXIgcGFnZSBmb3IgdGhlIGV4cG9ydCBwb29sLlxyXG4gICAgICpcclxuICAgICAqIEBhc3luY1xyXG4gICAgICogQGZ1bmN0aW9uIGNyZWF0ZVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIG9iamVjdFxyXG4gICAgICogY29udGFpbmluZyB0aGUgd29ya2VyIElELCBhIHJlZmVyZW5jZSB0byB0aGUgYnJvd3NlciBwYWdlLCBhbmQgaW5pdGlhbFxyXG4gICAgICogd29yayBjb3VudC5cclxuICAgICAqXHJcbiAgICAgKiBAdGhyb3dzIHtFeHBvcnRFcnJvcn0gVGhyb3dzIGFuIGBFeHBvcnRFcnJvcmAgaWYgdGhlcmUgaXMgYW4gZXJyb3IgZHVyaW5nXHJcbiAgICAgKiB0aGUgY3JlYXRpb24gb2YgdGhlIG5ldyBwYWdlLlxyXG4gICAgICovXHJcbiAgICBjcmVhdGU6IGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gSW5pdCB0aGUgcmVzb3VyY2Ugd2l0aCB1bmlxdWUgaWQgYW5kIHdvcmsgY291bnRcclxuICAgICAgY29uc3QgcG9vbFJlc291cmNlID0ge1xyXG4gICAgICAgIGlkOiB1dWlkKCksXHJcbiAgICAgICAgLy8gVHJ5IHRvIGRpc3RyaWJ1dGUgdGhlIGluaXRpYWwgd29yayBjb3VudFxyXG4gICAgICAgIHdvcmtDb3VudDogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKHBvb2xPcHRpb25zLndvcmtMaW1pdCAvIDIpKVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBTdGFydCBtZWFzdXJpbmcgYSBwYWdlIGNyZWF0aW9uIHRpbWVcclxuICAgICAgICBjb25zdCBzdGFydERhdGUgPSBnZXROZXdEYXRlVGltZSgpO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFnZVxyXG4gICAgICAgIGF3YWl0IG5ld1BhZ2UocG9vbFJlc291cmNlKTtcclxuXHJcbiAgICAgICAgLy8gTWVhc3VyZSB0aGUgdGltZSBvZiBmdWxsIGNyZWF0aW9uIGFuZCBjb25maWd1cmF0aW9uIG9mIGEgcGFnZVxyXG4gICAgICAgIGxvZyhcclxuICAgICAgICAgIDMsXHJcbiAgICAgICAgICBgW3Bvb2xdIFBvb2wgcmVzb3VyY2UgWyR7cG9vbFJlc291cmNlLmlkfV0gLSBTdWNjZXNzZnVsbHkgY3JlYXRlZCBhIHdvcmtlciwgdG9vayAke1xyXG4gICAgICAgICAgICBnZXROZXdEYXRlVGltZSgpIC0gc3RhcnREYXRlXHJcbiAgICAgICAgICB9bXMuYFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiByZWFkeSBwb29sIHJlc291cmNlXHJcbiAgICAgICAgcmV0dXJuIHBvb2xSZXNvdXJjZTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBsb2coXHJcbiAgICAgICAgICAzLFxyXG4gICAgICAgICAgYFtwb29sXSBQb29sIHJlc291cmNlIFske3Bvb2xSZXNvdXJjZS5pZH1dIC0gRXJyb3IgZW5jb3VudGVyZWQgd2hlbiBjcmVhdGluZyBhIG5ldyBwYWdlLmBcclxuICAgICAgICApO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGVzIGEgd29ya2VyIHBhZ2UgaW4gdGhlIGV4cG9ydCBwb29sLCBjaGVja2luZyBpZiBpdCBoYXMgZXhjZWVkZWRcclxuICAgICAqIHRoZSB3b3JrIGxpbWl0LlxyXG4gICAgICpcclxuICAgICAqIEBhc3luY1xyXG4gICAgICogQGZ1bmN0aW9uIHZhbGlkYXRlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBvb2xSZXNvdXJjZSAtIFRoZSBoYW5kbGUgdG8gdGhlIHdvcmtlciwgY29udGFpbmluZ1xyXG4gICAgICogdGhlIHdvcmtlcidzIElELCBhIHJlZmVyZW5jZSB0byB0aGUgYnJvd3NlciBwYWdlLCBhbmQgd29yayBjb3VudC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdHJ1ZSBpZiB0aGUgd29ya2VyXHJcbiAgICAgKiBpcyB2YWxpZCBhbmQgd2l0aGluIHRoZSB3b3JrIGxpbWl0OyBvdGhlcndpc2UsIHRvIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICB2YWxpZGF0ZTogYXN5bmMgKHBvb2xSZXNvdXJjZSkgPT4ge1xyXG4gICAgICAvLyBOT1RFOlxyXG4gICAgICAvLyBJbiBjZXJ0YWluIGNhc2VzIGFjcXVpcmluZyB0aHJvd3MgYSBgVGFyZ2V0Q2xvc2VFcnJvcmAsIHdoaWNoIG1heVxyXG4gICAgICAvLyBiZSBjYXVzZWQgYnkgdHdvIHRoaW5nczpcclxuICAgICAgLy8gLSBUaGUgcGFnZSBpcyBjbG9zZWQgYW5kIGF0dGVtcHRlZCB0byBiZSByZXVzZWQuXHJcbiAgICAgIC8vIC0gTG9zdCBjb250YWN0IHdpdGggdGhlIGJyb3dzZXIuXHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIFdoYXQgd2UncmUgc2VlaW5nIGluIGxvZ3MgaXMgdGhhdCBzdWNjZXNzaXZlIGV4cG9ydHMgdHlwaWNhbGx5XHJcbiAgICAgIC8vIHN1Y2NlZWRzLCBhbmQgdGhlIHNlcnZlciByZWNvdmVycywgaW5kaWNhdGluZyB0aGF0IGl0J3MgbGlrZWx5XHJcbiAgICAgIC8vIHRoZSBmaXJzdCBjYXNlLiBUaGlzIGlzIGFuIGF0dGVtcHQgYXQgYWxsaWV2YXRpbmcgdGhlIGlzc3VlIGJ5XHJcbiAgICAgIC8vIHNpbXBseSBub3QgdmFsaWRhdGluZyB0aGUgd29ya2VyIGlmIHRoZSBwYWdlIGlzIG51bGwgb3IgY2xvc2VkLlxyXG4gICAgICAvL1xyXG4gICAgICAvLyBUaGUgYWN0dWFsIHJlc3VsdCBmcm9tIHdoZW4gdGhpcyBoYXBwZW5lZCwgd2FzIHRoYXQgYSB3b3JrZXIgd291bGRcclxuICAgICAgLy8gYmUgY29tcGxldGVseSBsb2NrZWQsIHN0b3BwaW5nIGl0IGZyb20gYmVpbmcgYWNxdWlyZWQgdW50aWxcclxuICAgICAgLy8gaXRzIHdvcmsgY291bnQgcmVhY2hlZCB0aGUgbGltaXQuXHJcblxyXG4gICAgICAvLyBDaGVjayBpZiB0aGUgYHBhZ2VgIGlzIHZhbGlkXHJcbiAgICAgIGlmICghcG9vbFJlc291cmNlLnBhZ2UpIHtcclxuICAgICAgICBsb2coXHJcbiAgICAgICAgICAzLFxyXG4gICAgICAgICAgYFtwb29sXSBQb29sIHJlc291cmNlIFske3Bvb2xSZXNvdXJjZS5pZH1dIC0gVmFsaWRhdGlvbiBmYWlsZWQgKG5vIHZhbGlkIHBhZ2UgaXMgZm91bmQpLmBcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGBwYWdlYCBpcyBjbG9zZWRcclxuICAgICAgaWYgKHBvb2xSZXNvdXJjZS5wYWdlLmlzQ2xvc2VkKCkpIHtcclxuICAgICAgICBsb2coXHJcbiAgICAgICAgICAzLFxyXG4gICAgICAgICAgYFtwb29sXSBQb29sIHJlc291cmNlIFske3Bvb2xSZXNvdXJjZS5pZH1dIC0gVmFsaWRhdGlvbiBmYWlsZWQgKHBhZ2UgaXMgY2xvc2VkIG9yIGludmFsaWQpLmBcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGBtYWluRnJhbWVgIGlzIGRldGFjaGVkXHJcbiAgICAgIGlmIChwb29sUmVzb3VyY2UucGFnZS5tYWluRnJhbWUoKS5kZXRhY2hlZCkge1xyXG4gICAgICAgIGxvZyhcclxuICAgICAgICAgIDMsXHJcbiAgICAgICAgICBgW3Bvb2xdIFBvb2wgcmVzb3VyY2UgWyR7cG9vbFJlc291cmNlLmlkfV0gLSBWYWxpZGF0aW9uIGZhaWxlZCAocGFnZSdzIGZyYW1lIGlzIGRldGFjaGVkKS5gXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBgd29ya0xpbWl0YCBpcyBleGNlZWRlZFxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgcG9vbE9wdGlvbnMud29ya0xpbWl0ICYmXHJcbiAgICAgICAgKytwb29sUmVzb3VyY2Uud29ya0NvdW50ID4gcG9vbE9wdGlvbnMud29ya0xpbWl0XHJcbiAgICAgICkge1xyXG4gICAgICAgIGxvZyhcclxuICAgICAgICAgIDMsXHJcbiAgICAgICAgICBgW3Bvb2xdIFBvb2wgcmVzb3VyY2UgWyR7cG9vbFJlc291cmNlLmlkfV0gLSBWYWxpZGF0aW9uIGZhaWxlZCAoZXhjZWVkZWQgdGhlICR7cG9vbE9wdGlvbnMud29ya0xpbWl0fSB3b3JrcyBwZXIgcmVzb3VyY2UgbGltaXQpLmBcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVGhlIGBwb29sUmVzb3VyY2VgIGlzIHZhbGlkYXRlZFxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXN0cm95cyBhIHdvcmtlciBlbnRyeSBpbiB0aGUgZXhwb3J0IHBvb2wsIGNsb3NpbmcgaXRzIGFzc29jaWF0ZWQgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAYXN5bmNcclxuICAgICAqIEBmdW5jdGlvbiBkZXN0cm95XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBvb2xSZXNvdXJjZSAtIFRoZSBoYW5kbGUgdG8gdGhlIHdvcmtlciwgY29udGFpbmluZ1xyXG4gICAgICogdGhlIHdvcmtlcidzIElELCBhIHJlZmVyZW5jZSB0byB0aGUgYnJvd3NlciBwYWdlLCBhbmQgd29yayBjb3VudC5cclxuICAgICAqL1xyXG4gICAgZGVzdHJveTogYXN5bmMgKHBvb2xSZXNvdXJjZSkgPT4ge1xyXG4gICAgICBsb2coXHJcbiAgICAgICAgMyxcclxuICAgICAgICBgW3Bvb2xdIFBvb2wgcmVzb3VyY2UgWyR7cG9vbFJlc291cmNlLmlkfV0gLSBEZXN0cm95aW5nIGEgd29ya2VyLmBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChwb29sUmVzb3VyY2UucGFnZSAmJiAhcG9vbFJlc291cmNlLnBhZ2UuaXNDbG9zZWQoKSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyBSZW1vdmUgYWxsIGF0dGFjaGVkIGV2ZW50IGxpc3RlbmVycyBmcm9tIHRoZSByZXNvdXJjZVxyXG4gICAgICAgICAgcG9vbFJlc291cmNlLnBhZ2UucmVtb3ZlQWxsTGlzdGVuZXJzKCdwYWdlZXJyb3InKTtcclxuICAgICAgICAgIHBvb2xSZXNvdXJjZS5wYWdlLnJlbW92ZUFsbExpc3RlbmVycygnY29uc29sZScpO1xyXG4gICAgICAgICAgcG9vbFJlc291cmNlLnBhZ2UucmVtb3ZlQWxsTGlzdGVuZXJzKCdmcmFtZWRldGFjaGVkJyk7XHJcblxyXG4gICAgICAgICAgLy8gV2UgbmVlZCB0byB3YWl0IGFyb3VuZCBmb3IgdGhpc1xyXG4gICAgICAgICAgYXdhaXQgcG9vbFJlc291cmNlLnBhZ2UuY2xvc2UoKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgbG9nKFxyXG4gICAgICAgICAgICAzLFxyXG4gICAgICAgICAgICBgW3Bvb2xdIFBvb2wgcmVzb3VyY2UgWyR7cG9vbFJlc291cmNlLmlkfV0gLSBQYWdlIGNvdWxkIG5vdCBiZSBjbG9zZWQgdXBvbiBkZXN0cm95aW5nLmBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgaW5pdFBvb2wsXHJcbiAga2lsbFBvb2wsXHJcbiAgcG9zdFdvcmssXHJcbiAgZ2V0UG9vbCxcclxuICBnZXRQb29sU3RhdHMsXHJcbiAgZ2V0UG9vbEluZm9KU09OXHJcbn07XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBVc2VkIHRvIHNhbml0aXplIHRoZSBzdHJpbmdzIGNvbWluZyBmcm9tIHRoZSBleHBvcnRpbmcgbW9kdWxlXHJcbiAqIHRvIHByZXZlbnQgWFNTIGF0dGFja3MgKHdpdGggdGhlIERPTVB1cmlmeSBsaWJyYXJ5KS5cclxuICovXHJcblxyXG5pbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7XHJcbmltcG9ydCB7IEpTRE9NIH0gZnJvbSAnanNkb20nO1xyXG5cclxuLyoqXHJcbiAqIFNhbml0aXplcyBhIGdpdmVuIEhUTUwgc3RyaW5nIGJ5IHJlbW92aW5nIDxzY3JpcHQ+IHRhZ3MuIFRoaXMgZnVuY3Rpb24gdXNlc1xyXG4gKiBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBmaW5kIGFuZCByZW1vdmUgYWxsIG9jY3VycmVuY2VzIG9mIDxzY3JpcHQ+PC9zY3JpcHQ+XHJcbiAqIHRhZ3MgYW5kIGFueSBjb250ZW50IHdpdGhpbiB0aGVtLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gc2FuaXRpemVcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGlucHV0IC0gVGhlIEhUTUwgc3RyaW5nIHRvIGJlIHNhbml0aXplZC5cclxuICpcclxuICogQHJldHVybnMge3N0cmluZ30gVGhlIHNhbml0aXplZCBIVE1MIHN0cmluZy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZShpbnB1dCkge1xyXG4gIC8vIEdldCB0aGUgdmlydHVhbCBET01cclxuICBjb25zdCB3aW5kb3cgPSBuZXcgSlNET00oJycpLndpbmRvdztcclxuXHJcbiAgLy8gQ3JlYXRlIGEgcHVyaWZ5aW5nIGluc3RhbmNlXHJcbiAgY29uc3QgcHVyaWZ5ID0gRE9NUHVyaWZ5KHdpbmRvdyk7XHJcblxyXG4gIC8vIFJldHVybiBzYW5pdGl6ZWQgaW5wdXQsIGFsbG93aW5nIGZvciB0aGUgYGZvcmVpZ25PYmplY3RgIGVsZW1lbnRzXHJcbiAgcmV0dXJuIHB1cmlmeS5zYW5pdGl6ZShpbnB1dCwgeyBBRERfVEFHUzogWydmb3JlaWduT2JqZWN0J10gfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBzYW5pdGl6ZVxyXG59O1xyXG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5cclxuSGlnaGNoYXJ0cyBFeHBvcnQgU2VydmVyXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMTYtMjAyNSwgSGlnaHNvZnRcclxuXHJcbkxpY2VuY2VkIHVuZGVyIHRoZSBNSVQgbGljZW5jZS5cclxuXHJcbkFkZGl0aW9uYWxseSBhIHZhbGlkIEhpZ2hjaGFydHMgbGljZW5zZSBpcyByZXF1aXJlZCBmb3IgdXNlLlxyXG5cclxuU2VlIExJQ0VOU0UgZmlsZSBpbiByb290IGZvciBkZXRhaWxzLlxyXG5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBAb3ZlcnZpZXcgVGhpcyBtb2R1bGUgcHJvdmlkZXMgZnVuY3Rpb25zIHRoYXQgcHJlcGFyZSBmb3IgdGhlIGV4cG9ydGluZ1xyXG4gKiBjaGFydHMgaW50byB2YXJpb3VzIGltYWdlIG91dHB1dCBmb3JtYXRzIHN1Y2ggYXMgSlBFRywgUE5HLCBQREYsIGFuZCBTVkdzLlxyXG4gKiBJdCBzdXBwb3J0cyBzaW5nbGUgYW5kIGJhdGNoIGV4cG9ydCBvcGVyYXRpb25zIGFuZCBhbGxvd3MgY3VzdG9taXphdGlvblxyXG4gKiB0aHJvdWdoIG9wdGlvbnMgcGFzc2VkIGZyb20gY29uZmlndXJhdGlvbnMgb3IgQVBJcy5cclxuICovXHJcblxyXG5pbXBvcnQgeyByZWFkRmlsZVN5bmMsIHdyaXRlRmlsZVN5bmMgfSBmcm9tICdmcyc7XHJcblxyXG5pbXBvcnQgeyBpc0FsbG93ZWRDb25maWcsIHVwZGF0ZU9wdGlvbnMsIHZhbGlkYXRlT3B0aW9uIH0gZnJvbSAnLi9jb25maWcuanMnO1xyXG5pbXBvcnQgeyBsb2csIGxvZ1dpdGhTdGFjayB9IGZyb20gJy4vbG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgZ2V0UG9vbFN0YXRzLCBraWxsUG9vbCwgcG9zdFdvcmsgfSBmcm9tICcuL3Bvb2wuanMnO1xyXG5pbXBvcnQgeyBzYW5pdGl6ZSB9IGZyb20gJy4vc2FuaXRpemUuanMnO1xyXG5pbXBvcnQgeyBnZXRBYnNvbHV0ZVBhdGgsIGdldEJhc2U2NCwgaXNPYmplY3QsIHJvdW5kTnVtYmVyIH0gZnJvbSAnLi91dGlscy5qcyc7XHJcblxyXG5pbXBvcnQgRXhwb3J0RXJyb3IgZnJvbSAnLi9lcnJvcnMvRXhwb3J0RXJyb3IuanMnO1xyXG5cclxuLy8gVGhlIGdsb2JhbCBmbGFnIGZvciB0aGUgY29kZSBleGVjdXRpb24gcGVybWlzc2lvblxyXG5sZXQgYWxsb3dDb2RlRXhlY3V0aW9uID0gZmFsc2U7XHJcblxyXG4vKipcclxuICogU3RhcnRzIGEgc2luZ2xlIGV4cG9ydCBwcm9jZXNzIGJhc2VkIG9uIHRoZSBzcGVjaWZpZWQgb3B0aW9ucyBhbmQgc2F2ZXNcclxuICogdGhlIHJlc3VsdGluZyBpbWFnZSB0byB0aGUgcHJvdmlkZWQgb3V0cHV0IGZpbGUuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gc2luZ2xlRXhwb3J0XHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gVGhlIGBvcHRpb25zYCBvYmplY3QsIHdoaWNoIHNob3VsZCBpbmNsdWRlIHNldHRpbmdzXHJcbiAqIGZyb20gdGhlIGBleHBvcnRgIGFuZCBgY3VzdG9tTG9naWNgIHNlY3Rpb25zLiBJdCBjYW4gYmUgYSBwYXJ0aWFsIG9yIGNvbXBsZXRlXHJcbiAqIHNldCBvZiBvcHRpb25zIGZyb20gdGhlc2Ugc2VjdGlvbnMuIFRoZSBvYmplY3QgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZVxyXG4gKiBvZiB0aGUgZm9sbG93aW5nIGBleHBvcnRgIHByb3BlcnRpZXM6IGBpbmZpbGVgLCBgaW5zdHJgLCBgb3B0aW9uc2AsIG9yIGBzdmdgXHJcbiAqIHRvIGdlbmVyYXRlIGEgdmFsaWQgaW1hZ2UuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBzaW5nbGUgZXhwb3J0XHJcbiAqIHByb2Nlc3MgaXMgY29tcGxldGVkLlxyXG4gKlxyXG4gKiBAdGhyb3dzIHtFeHBvcnRFcnJvcn0gVGhyb3dzIGFuIGBFeHBvcnRFcnJvcmAgaWYgYW4gZXJyb3Igb2NjdXJzIGR1cmluZ1xyXG4gKiB0aGUgc2luZ2xlIGV4cG9ydCBwcm9jZXNzLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpbmdsZUV4cG9ydChvcHRpb25zKSB7XHJcbiAgLy8gQ2hlY2sgaWYgdGhlIGV4cG9ydCBtYWtlcyBzZW5zZVxyXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZXhwb3J0KSB7XHJcbiAgICAvLyBQZXJmb3JtIGFuIGV4cG9ydFxyXG4gICAgYXdhaXQgc3RhcnRFeHBvcnQoXHJcbiAgICAgIHsgZXhwb3J0OiBvcHRpb25zLmV4cG9ydCwgY3VzdG9tTG9naWM6IG9wdGlvbnMuY3VzdG9tTG9naWMgfSxcclxuICAgICAgYXN5bmMgKGVycm9yLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8gRXhpdCBwcm9jZXNzIHdoZW4gZXJyb3IgZXhpc3RzXHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCB0aGUgYGI2NGAsIGBvdXRmaWxlYCwgYW5kIGB0eXBlYCBmb3IgYSBjaGFydFxyXG4gICAgICAgIGNvbnN0IHsgYjY0LCBvdXRmaWxlLCB0eXBlIH0gPSBkYXRhLm9wdGlvbnMuZXhwb3J0O1xyXG5cclxuICAgICAgICAvLyBTYXZlIHRoZSByZXN1bHRcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgaWYgKGI2NCkge1xyXG4gICAgICAgICAgICAvLyBBcyBhIEJhc2U2NCBzdHJpbmcgdG8gYSB0eHQgZmlsZVxyXG4gICAgICAgICAgICB3cml0ZUZpbGVTeW5jKFxyXG4gICAgICAgICAgICAgIGAke291dGZpbGUuc3BsaXQoJy4nKS5zaGlmdCgpIHx8ICdjaGFydCd9LnR4dGAsXHJcbiAgICAgICAgICAgICAgZ2V0QmFzZTY0KGRhdGEucmVzdWx0LCB0eXBlKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQXMgYSBjb3JyZWN0IGltYWdlIGZvcm1hdFxyXG4gICAgICAgICAgICB3cml0ZUZpbGVTeW5jKFxyXG4gICAgICAgICAgICAgIG91dGZpbGUgfHwgYGNoYXJ0LiR7dHlwZX1gLFxyXG4gICAgICAgICAgICAgIHR5cGUgIT09ICdzdmcnID8gQnVmZmVyLmZyb20oZGF0YS5yZXN1bHQsICdiYXNlNjQnKSA6IGRhdGEucmVzdWx0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgICAgICAgJ1tjaGFydF0gRXJyb3Igd2hpbGUgc2F2aW5nIGEgY2hhcnQuJyxcclxuICAgICAgICAgICAgNTAwXHJcbiAgICAgICAgICApLnNldEVycm9yKGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEtpbGwgcG9vbCBhbmQgY2xvc2UgYnJvd3NlciBhZnRlciBmaW5pc2hpbmcgc2luZ2xlIGV4cG9ydFxyXG4gICAgICAgIGF3YWl0IGtpbGxQb29sKCk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgJ1tjaGFydF0gTm8gZXhwZWN0ZWQgYGV4cG9ydGAgb3B0aW9ucyB3ZXJlIGZvdW5kLiBQbGVhc2UgcHJvdmlkZSBvbmUgb2YgdGhlIGZvbGxvd2luZyBvcHRpb25zOiBgaW5maWxlYCwgYGluc3RyYCwgYG9wdGlvbnNgLCBvciBgc3ZnYCB0byBnZW5lcmF0ZSBhIHZhbGlkIGltYWdlLicsXHJcbiAgICAgIDQwMFxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGFydHMgYSBiYXRjaCBleHBvcnQgcHJvY2VzcyBmb3IgbXVsdGlwbGUgY2hhcnRzIGJhc2VkIG9uIGluZm9ybWF0aW9uXHJcbiAqIHByb3ZpZGVkIGluIHRoZSBgYmF0Y2hgIG9wdGlvbi4gVGhlIGBiYXRjaGAgaXMgYSBzdHJpbmcgaW4gdGhlIGZvbGxvd2luZ1xyXG4gKiBmb3JtYXQ6IFwiaW5maWxlMS5qc29uPW91dGZpbGUxLnBuZztpbmZpbGUyLmpzb249b3V0ZmlsZTIucG5nOy4uLlwiLiBSZXN1bHRzXHJcbiAqIGFyZSBzYXZlZCB0byB0aGUgc3BlY2lmaWVkIG91dHB1dCBmaWxlcy5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBiYXRjaEV4cG9ydFxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFRoZSBgb3B0aW9uc2Agb2JqZWN0LCB3aGljaCBzaG91bGQgaW5jbHVkZSBzZXR0aW5nc1xyXG4gKiBmcm9tIHRoZSBgZXhwb3J0YCBhbmQgYGN1c3RvbUxvZ2ljYCBzZWN0aW9ucy4gSXQgY2FuIGJlIGEgcGFydGlhbCBvciBjb21wbGV0ZVxyXG4gKiBzZXQgb2Ygb3B0aW9ucyBmcm9tIHRoZXNlIHNlY3Rpb25zLiBJdCBtdXN0IGNvbnRhaW4gdGhlIGBiYXRjaGAgb3B0aW9uIGZyb21cclxuICogdGhlIGBleHBvcnRgIHNlY3Rpb24gdG8gZ2VuZXJhdGUgdmFsaWQgaW1hZ2VzLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgYmF0Y2ggZXhwb3J0XHJcbiAqIHByb2Nlc3NlcyBhcmUgY29tcGxldGVkLlxyXG4gKlxyXG4gKiBAdGhyb3dzIHtFeHBvcnRFcnJvcn0gVGhyb3dzIGFuIGBFeHBvcnRFcnJvcmAgaWYgYW4gZXJyb3Igb2NjdXJzIGR1cmluZ1xyXG4gKiBhbnkgb2YgdGhlIGJhdGNoIGV4cG9ydCBwcm9jZXNzLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJhdGNoRXhwb3J0KG9wdGlvbnMpIHtcclxuICAvLyBDaGVjayBpZiB0aGUgZXhwb3J0IG1ha2VzIHNlbnNlXHJcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5leHBvcnQgJiYgb3B0aW9ucy5leHBvcnQuYmF0Y2gpIHtcclxuICAgIC8vIEFuIGFycmF5IGZvciBjb2xsZWN0aW5nIGJhdGNoIGV4cG9ydHNcclxuICAgIGNvbnN0IGJhdGNoRnVuY3Rpb25zID0gW107XHJcblxyXG4gICAgLy8gU3BsaXQgYW5kIHBhaXIgdGhlIGBiYXRjaGAgYXJndW1lbnRzXHJcbiAgICBmb3IgKGxldCBwYWlyIG9mIG9wdGlvbnMuZXhwb3J0LmJhdGNoLnNwbGl0KCc7JykgfHwgW10pIHtcclxuICAgICAgcGFpciA9IHBhaXIuc3BsaXQoJz0nKTtcclxuICAgICAgaWYgKHBhaXIubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgYmF0Y2hGdW5jdGlvbnMucHVzaChcclxuICAgICAgICAgIHN0YXJ0RXhwb3J0KFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZXhwb3J0OiB7XHJcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLmV4cG9ydCxcclxuICAgICAgICAgICAgICAgIGluZmlsZTogcGFpclswXSxcclxuICAgICAgICAgICAgICAgIG91dGZpbGU6IHBhaXJbMV1cclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGN1c3RvbUxvZ2ljOiBvcHRpb25zLmN1c3RvbUxvZ2ljXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIChlcnJvciwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgIC8vIEV4aXQgcHJvY2VzcyB3aGVuIGVycm9yIGV4aXN0c1xyXG4gICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAvLyBHZXQgdGhlIGBiNjRgLCBgb3V0ZmlsZWAsIGFuZCBgdHlwZWAgZm9yIGEgY2hhcnRcclxuICAgICAgICAgICAgICBjb25zdCB7IGI2NCwgb3V0ZmlsZSwgdHlwZSB9ID0gZGF0YS5vcHRpb25zLmV4cG9ydDtcclxuXHJcbiAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgcmVzdWx0XHJcbiAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChiNjQpIHtcclxuICAgICAgICAgICAgICAgICAgLy8gQXMgYSBCYXNlNjQgc3RyaW5nIHRvIGEgdHh0IGZpbGVcclxuICAgICAgICAgICAgICAgICAgd3JpdGVGaWxlU3luYyhcclxuICAgICAgICAgICAgICAgICAgICBgJHtvdXRmaWxlLnNwbGl0KCcuJykuc2hpZnQoKSB8fCAnY2hhcnQnfS50eHRgLFxyXG4gICAgICAgICAgICAgICAgICAgIGdldEJhc2U2NChkYXRhLnJlc3VsdCwgdHlwZSlcclxuICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIEFzIGEgY29ycmVjdCBpbWFnZSBmb3JtYXRcclxuICAgICAgICAgICAgICAgICAgd3JpdGVGaWxlU3luYyhcclxuICAgICAgICAgICAgICAgICAgICBvdXRmaWxlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgIT09ICdzdmcnXHJcbiAgICAgICAgICAgICAgICAgICAgICA/IEJ1ZmZlci5mcm9tKGRhdGEucmVzdWx0LCAnYmFzZTY0JylcclxuICAgICAgICAgICAgICAgICAgICAgIDogZGF0YS5yZXN1bHRcclxuICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAnW2NoYXJ0XSBFcnJvciB3aGlsZSBzYXZpbmcgYSBjaGFydC4nLFxyXG4gICAgICAgICAgICAgICAgICA1MDBcclxuICAgICAgICAgICAgICAgICkuc2V0RXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbG9nKDIsICdbY2hhcnRdIE5vIGNvcnJlY3QgcGFpciBmb3VuZCBmb3IgdGhlIGJhdGNoIGV4cG9ydC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEF3YWl0IGFsbCBleHBvcnRzIGFyZSBkb25lXHJcbiAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoYmF0Y2hGdW5jdGlvbnMpO1xyXG5cclxuICAgIC8vIEtpbGwgcG9vbCBhbmQgY2xvc2UgYnJvd3NlciBhZnRlciBmaW5pc2hpbmcgYmF0Y2ggZXhwb3J0XHJcbiAgICBhd2FpdCBraWxsUG9vbCgpO1xyXG5cclxuICAgIC8vIExvZyBlcnJvcnMgaWYgZm91bmRcclxuICAgIGJhdGNoUmVzdWx0cy5mb3JFYWNoKChyZXN1bHQsIGluZGV4KSA9PiB7XHJcbiAgICAgIC8vIExvZyB0aGUgZXJyb3Igd2l0aCBzdGFjayBhYm91dCB0aGUgc3BlY2lmaWMgYmF0Y2ggZXhwb3J0XHJcbiAgICAgIGlmIChyZXN1bHQucmVhc29uKSB7XHJcbiAgICAgICAgbG9nV2l0aFN0YWNrKFxyXG4gICAgICAgICAgMSxcclxuICAgICAgICAgIHJlc3VsdC5yZWFzb24sXHJcbiAgICAgICAgICBgW2NoYXJ0XSBCYXRjaCBleHBvcnQgbnVtYmVyICR7aW5kZXggKyAxfSBjb3VsZCBub3QgYmUgY29ycmVjdGx5IGNvbXBsZXRlZC5gXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgJ1tjaGFydF0gTm8gZXhwZWN0ZWQgYGV4cG9ydGAgb3B0aW9ucyB3ZXJlIGZvdW5kLiBQbGVhc2UgcHJvdmlkZSB0aGUgYGJhdGNoYCBvcHRpb24gdG8gZ2VuZXJhdGUgdmFsaWQgaW1hZ2VzLicsXHJcbiAgICAgIDQwMFxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGFydHMgYW4gZXhwb3J0IHByb2Nlc3MuIFRoZSBgaW1hZ2VPcHRpb25zYCBwYXJhbWV0ZXIgaXMgYW4gb2JqZWN0IHRoYXRcclxuICogc2hvdWxkIGluY2x1ZGUgc2V0dGluZ3MgZnJvbSB0aGUgYGV4cG9ydGAgYW5kIGBjdXN0b21Mb2dpY2Agc2VjdGlvbnMuIEl0IGNhblxyXG4gKiBiZSBhIHBhcnRpYWwgb3IgY29tcGxldGUgc2V0IG9mIG9wdGlvbnMgZnJvbSB0aGVzZSBzZWN0aW9ucy4gSWYgcGFydGlhbFxyXG4gKiBvcHRpb25zIGFyZSBwcm92aWRlZCwgbWlzc2luZyB2YWx1ZXMgd2lsbCBiZSBtZXJnZWQgd2l0aCB0aGUgY3VycmVudCBnbG9iYWxcclxuICogb3B0aW9ucy5cclxuICpcclxuICogVGhlIGBlbmRDYWxsYmFja2AgZnVuY3Rpb24gaXMgaW52b2tlZCB1cG9uIHRoZSBjb21wbGV0aW9uIG9mIHRoZSBleHBvcnQsXHJcbiAqIGVpdGhlciBzdWNjZXNzZnVsbHkgb3Igd2l0aCBhbiBlcnJvci4gVGhlIGBlcnJvcmAgb2JqZWN0IGlzIHByb3ZpZGVkXHJcbiAqIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgYW5kIHRoZSBgZGF0YWAgb2JqZWN0IGlzIHRoZSBzZWNvbmQsIGNvbnRhaW5pbmdcclxuICogdGhlIEJhc2U2NCByZXByZXNlbnRhdGlvbiBvZiB0aGUgY2hhcnQgaW4gdGhlIGByZXN1bHRgIHByb3BlcnR5XHJcbiAqIGFuZCB0aGUgY29tcGxldGUgc2V0IG9mIG9wdGlvbnMgaW4gdGhlIGBvcHRpb25zYCBwcm9wZXJ0eS5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBzdGFydEV4cG9ydFxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gaW1hZ2VPcHRpb25zIC0gVGhlIGBpbWFnZU9wdGlvbnNgIG9iamVjdCwgd2hpY2ggc2hvdWxkXHJcbiAqIGluY2x1ZGUgc2V0dGluZ3MgZnJvbSB0aGUgYGV4cG9ydGAgYW5kIGBjdXN0b21Mb2dpY2Agc2VjdGlvbnMuIEl0IGNhblxyXG4gKiBiZSBhIHBhcnRpYWwgb3IgY29tcGxldGUgc2V0IG9mIG9wdGlvbnMgZnJvbSB0aGVzZSBzZWN0aW9ucy4gSWYgdGhlIHByb3ZpZGVkXHJcbiAqIG9wdGlvbnMgYXJlIHBhcnRpYWwsIG1pc3NpbmcgdmFsdWVzIHdpbGwgYmUgbWVyZ2VkIHdpdGggdGhlIGN1cnJlbnQgZ2xvYmFsXHJcbiAqIG9wdGlvbnMuXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVuZENhbGxiYWNrIC0gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgdXBvblxyXG4gKiBmaW5hbGl6aW5nIHRoZSBleHBvcnQgcHJvY2VzcyBvciB1cG9uIGVuY291bnRlcmluZyBhbiBlcnJvci4gVGhlIGZpcnN0XHJcbiAqIGFyZ3VtZW50IGlzIHRoZSBgZXJyb3JgIG9iamVjdCwgYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgaXMgdGhlIGBkYXRhYCBvYmplY3QsXHJcbiAqIHdoaWNoIGluY2x1ZGVzIHRoZSBCYXNlNjQgcmVwcmVzZW50YXRpb24gb2YgdGhlIGNoYXJ0IGluIHRoZSBgcmVzdWx0YFxyXG4gKiBwcm9wZXJ0eSBhbmQgdGhlIGZ1bGwgc2V0IG9mIG9wdGlvbnMgaW4gdGhlIGBvcHRpb25zYCBwcm9wZXJ0eS5cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59IFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgcmV0dXJuIGEgdmFsdWUgZGlyZWN0bHkuXHJcbiAqIEluc3RlYWQsIGl0IGNvbW11bmljYXRlcyByZXN1bHRzIHZpYSB0aGUgYGVuZENhbGxiYWNrYC5cclxuICpcclxuICogQHRocm93cyB7RXhwb3J0RXJyb3J9IFRocm93cyBhbiBgRXhwb3J0RXJyb3JgIGlmIHRoZXJlIGlzIGEgcHJvYmxlbSB3aXRoXHJcbiAqIHByb2Nlc3NpbmcgaW5wdXQgb2YgYW55IHR5cGUuIFRoZSBlcnJvciBpcyBwYXNzZWQgaW50byB0aGUgYGVuZENhbGxiYWNrYFxyXG4gKiBmdW5jdGlvbiBhbmQgcHJvY2Vzc2VkIHRoZXJlLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0YXJ0RXhwb3J0KGltYWdlT3B0aW9ucywgZW5kQ2FsbGJhY2spIHtcclxuICB0cnkge1xyXG4gICAgLy8gQ2hlY2sgaWYgcHJvdmlkZWQgb3B0aW9ucyBhcmUgaW4gYW4gb2JqZWN0XHJcbiAgICBpZiAoIWlzT2JqZWN0KGltYWdlT3B0aW9ucykpIHtcclxuICAgICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAgICdbY2hhcnRdIEluY29ycmVjdCB2YWx1ZSBvZiB0aGUgcHJvdmlkZWQgYGltYWdlT3B0aW9uc2AuIE5lZWRzIHRvIGJlIGFuIG9iamVjdC4nLFxyXG4gICAgICAgIDQwMFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1lcmdlIGFkZGl0aW9uYWwgb3B0aW9ucyB0byB0aGUgY29weSBvZiB0aGUgaW5zdGFuY2Ugb3B0aW9uc1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHVwZGF0ZU9wdGlvbnMoXHJcbiAgICAgIHtcclxuICAgICAgICBleHBvcnQ6IGltYWdlT3B0aW9ucy5leHBvcnQsXHJcbiAgICAgICAgY3VzdG9tTG9naWM6IGltYWdlT3B0aW9ucy5jdXN0b21Mb2dpY1xyXG4gICAgICB9LFxyXG4gICAgICB0cnVlXHJcbiAgICApO1xyXG5cclxuICAgIC8vIEdldCB0aGUgYGV4cG9ydGAgb3B0aW9uc1xyXG4gICAgY29uc3QgZXhwb3J0T3B0aW9ucyA9IG9wdGlvbnMuZXhwb3J0O1xyXG5cclxuICAgIC8vIFN0YXJ0aW5nIGV4cG9ydGluZyBwcm9jZXNzIG1lc3NhZ2VcclxuICAgIGxvZyg0LCAnW2NoYXJ0XSBTdGFydGluZyB0aGUgZXhwb3J0aW5nIHByb2Nlc3MuJyk7XHJcblxyXG4gICAgLy8gRXhwb3J0IHVzaW5nIG9wdGlvbnMgZnJvbSB0aGUgZmlsZSBhcyBhbiBpbnB1dFxyXG4gICAgaWYgKGV4cG9ydE9wdGlvbnMuaW5maWxlICE9PSBudWxsKSB7XHJcbiAgICAgIGxvZyg0LCAnW2NoYXJ0XSBBdHRlbXB0aW5nIHRvIGV4cG9ydCBmcm9tIGEgZmlsZSBpbnB1dC4nKTtcclxuXHJcbiAgICAgIGxldCBmaWxlQ29udGVudDtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBUcnkgdG8gcmVhZCB0aGUgZmlsZSB0byBnZXQgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvblxyXG4gICAgICAgIGZpbGVDb250ZW50ID0gcmVhZEZpbGVTeW5jKFxyXG4gICAgICAgICAgZ2V0QWJzb2x1dGVQYXRoKGV4cG9ydE9wdGlvbnMuaW5maWxlKSxcclxuICAgICAgICAgICd1dGY4J1xyXG4gICAgICAgICk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAgICAgJ1tjaGFydF0gRXJyb3IgbG9hZGluZyBjb250ZW50IGZyb20gYSBmaWxlIGlucHV0LicsXHJcbiAgICAgICAgICA0MDBcclxuICAgICAgICApLnNldEVycm9yKGVycm9yKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2hlY2sgdGhlIGZpbGUncyBleHRlbnNpb25cclxuICAgICAgaWYgKGV4cG9ydE9wdGlvbnMuaW5maWxlLmVuZHNXaXRoKCcuc3ZnJykpIHtcclxuICAgICAgICAvLyBTZXQgdG8gdGhlIGBzdmdgIG9wdGlvblxyXG4gICAgICAgIGV4cG9ydE9wdGlvbnMuc3ZnID0gdmFsaWRhdGVPcHRpb24oJ3N2ZycsIGZpbGVDb250ZW50KTtcclxuICAgICAgfSBlbHNlIGlmIChleHBvcnRPcHRpb25zLmluZmlsZS5lbmRzV2l0aCgnLmpzb24nKSkge1xyXG4gICAgICAgIC8vIFNldCB0byB0aGUgYGluc3RyYCBvcHRpb25cclxuICAgICAgICBleHBvcnRPcHRpb25zLmluc3RyID0gdmFsaWRhdGVPcHRpb24oJ2luc3RyJywgZmlsZUNvbnRlbnQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgICAgICdbY2hhcnRdIEluY29ycmVjdCB2YWx1ZSBvZiB0aGUgYGluZmlsZWAgb3B0aW9uLicsXHJcbiAgICAgICAgICA0MDBcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXhwb3J0IHVzaW5nIFNWRyBhcyBhbiBpbnB1dFxyXG4gICAgaWYgKGV4cG9ydE9wdGlvbnMuc3ZnICE9PSBudWxsKSB7XHJcbiAgICAgIGxvZyg0LCAnW2NoYXJ0XSBBdHRlbXB0aW5nIHRvIGV4cG9ydCBmcm9tIGFuIFNWRyBpbnB1dC4nKTtcclxuXHJcbiAgICAgIC8vIFNWRyBleHBvcnRzIGF0dGVtcHRzIGNvdW50ZXJcclxuICAgICAgKytnZXRQb29sU3RhdHMoKS5leHBvcnRzRnJvbVN2Z0F0dGVtcHRzO1xyXG5cclxuICAgICAgLy8gRXhwb3J0IGZyb20gYW4gU1ZHIHN0cmluZ1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBfZXhwb3J0RnJvbVN2ZyhcclxuICAgICAgICBzYW5pdGl6ZShleHBvcnRPcHRpb25zLnN2ZyksIC8vICMyMDlcclxuICAgICAgICBvcHRpb25zXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBTVkcgZXhwb3J0cyBjb3VudGVyXHJcbiAgICAgICsrZ2V0UG9vbFN0YXRzKCkuZXhwb3J0c0Zyb21Tdmc7XHJcblxyXG4gICAgICAvLyBQYXNzIFNWRyBleHBvcnQgcmVzdWx0IHRvIHRoZSBlbmQgY2FsbGJhY2tcclxuICAgICAgcmV0dXJuIGVuZENhbGxiYWNrKG51bGwsIHJlc3VsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXhwb3J0IHVzaW5nIG9wdGlvbnMgYXMgYW4gaW5wdXRcclxuICAgIGlmIChleHBvcnRPcHRpb25zLmluc3RyICE9PSBudWxsIHx8IGV4cG9ydE9wdGlvbnMub3B0aW9ucyAhPT0gbnVsbCkge1xyXG4gICAgICBsb2coNCwgJ1tjaGFydF0gQXR0ZW1wdGluZyB0byBleHBvcnQgZnJvbSBvcHRpb25zIGlucHV0LicpO1xyXG5cclxuICAgICAgLy8gT3B0aW9ucyBleHBvcnRzIGF0dGVtcHRzIGNvdW50ZXJcclxuICAgICAgKytnZXRQb29sU3RhdHMoKS5leHBvcnRzRnJvbU9wdGlvbnNBdHRlbXB0cztcclxuXHJcbiAgICAgIC8vIEV4cG9ydCBmcm9tIG9wdGlvbnNcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgX2V4cG9ydEZyb21PcHRpb25zKFxyXG4gICAgICAgIGV4cG9ydE9wdGlvbnMuaW5zdHIgfHwgZXhwb3J0T3B0aW9ucy5vcHRpb25zLFxyXG4gICAgICAgIG9wdGlvbnNcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIE9wdGlvbnMgZXhwb3J0cyBjb3VudGVyXHJcbiAgICAgICsrZ2V0UG9vbFN0YXRzKCkuZXhwb3J0c0Zyb21PcHRpb25zO1xyXG5cclxuICAgICAgLy8gUGFzcyBvcHRpb25zIGV4cG9ydCByZXN1bHQgdG8gdGhlIGVuZCBjYWxsYmFja1xyXG4gICAgICByZXR1cm4gZW5kQ2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBObyBpbnB1dCBzcGVjaWZpZWQsIHBhc3MgYW4gZXJyb3IgbWVzc2FnZSB0byB0aGUgY2FsbGJhY2tcclxuICAgIHJldHVybiBlbmRDYWxsYmFjayhcclxuICAgICAgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAgIGBbY2hhcnRdIE5vIHZhbGlkIGlucHV0IHNwZWNpZmllZC4gQ2hlY2sgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVycyBpcyBjb3JyZWN0bHkgc2V0OiAnaW5maWxlJywgJ2luc3RyJywgJ29wdGlvbnMnLCBvciAnc3ZnJy5gLFxyXG4gICAgICAgIDQwMFxyXG4gICAgICApXHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4gZW5kQ2FsbGJhY2soZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHJpZXZlcyBhbmQgcmV0dXJucyB0aGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIGNvZGUgZXhlY3V0aW9uIHBlcm1pc3Npb24uXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBnZXRBbGxvd0NvZGVFeGVjdXRpb25cclxuICpcclxuICogQHJldHVybnMge2Jvb2xlYW59IFRoZSB2YWx1ZSBvZiB0aGUgZ2xvYmFsIGBhbGxvd0NvZGVFeGVjdXRpb25gIG9wdGlvbi5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxvd0NvZGVFeGVjdXRpb24oKSB7XHJcbiAgcmV0dXJuIGFsbG93Q29kZUV4ZWN1dGlvbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHMgdGhlIGNvZGUgZXhlY3V0aW9uIHBlcm1pc3Npb24gYmFzZWQgb24gdGhlIHByb3ZpZGVkIGJvb2xlYW4gdmFsdWUuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBzZXRBbGxvd0NvZGVFeGVjdXRpb25cclxuICpcclxuICogQHBhcmFtIHtib29sZWFufSB2YWx1ZSAtIFRoZSBib29sZWFuIHZhbHVlIHRvIGJlIGFzc2lnbmVkIHRvIHRoZSBnbG9iYWxcclxuICogYGFsbG93Q29kZUV4ZWN1dGlvbmAgb3B0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEFsbG93Q29kZUV4ZWN1dGlvbih2YWx1ZSkge1xyXG4gIGFsbG93Q29kZUV4ZWN1dGlvbiA9IHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogRXhwb3J0cyBmcm9tIGFuIFNWRyBiYXNlZCBpbnB1dCB3aXRoIHRoZSBwcm92aWRlZCBvcHRpb25zLlxyXG4gKlxyXG4gKiBAYXN5bmNcclxuICogQGZ1bmN0aW9uIF9leHBvcnRGcm9tU3ZnXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dFRvRXhwb3J0IC0gVGhlIFNWRyBiYXNlZCBpbnB1dCB0byBiZSBleHBvcnRlZC5cclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZyBjb21wbGV0ZSBzZXRcclxuICogb2Ygb3B0aW9ucy5cclxuICpcclxuICogQHJldHVybnMge1Byb21pc2U8dW5rbm93bj59IEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgcmVzdWx0IG9mIHRoZSBleHBvcnRcclxuICogcHJvY2Vzcy5cclxuICpcclxuICogQHRocm93cyB7RXhwb3J0RXJyb3J9IFRocm93cyBhbiBgRXhwb3J0RXJyb3JgIGlmIHRoZXJlIGlzIG5vdCBhIGNvcnJlY3QgU1ZHXHJcbiAqIGlucHV0LlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2V4cG9ydEZyb21TdmcoaW5wdXRUb0V4cG9ydCwgb3B0aW9ucykge1xyXG4gIC8vIENoZWNrIGlmIGl0IGlzIFNWR1xyXG4gIGlmIChcclxuICAgIHR5cGVvZiBpbnB1dFRvRXhwb3J0ID09PSAnc3RyaW5nJyAmJlxyXG4gICAgKGlucHV0VG9FeHBvcnQuaW5kZXhPZignPHN2ZycpID49IDAgfHwgaW5wdXRUb0V4cG9ydC5pbmRleE9mKCc8P3htbCcpID49IDApXHJcbiAgKSB7XHJcbiAgICBsb2coNCwgJ1tjaGFydF0gUGFyc2luZyBpbnB1dCBhcyBTVkcuJyk7XHJcblxyXG4gICAgLy8gU2V0IHRoZSBleHBvcnQgaW5wdXQgYXMgU1ZHXHJcbiAgICBvcHRpb25zLmV4cG9ydC5zdmcgPSBpbnB1dFRvRXhwb3J0O1xyXG5cclxuICAgIC8vIFJlc2V0IHRoZSByZXN0IG9mIHRoZSBleHBvcnQgaW5wdXQgb3B0aW9uc1xyXG4gICAgb3B0aW9ucy5leHBvcnQub3B0aW9ucyA9IG51bGw7XHJcbiAgICBvcHRpb25zLmV4cG9ydC5pbnN0ciA9IG51bGw7XHJcblxyXG4gICAgLy8gQ2FsbCB0aGUgZnVuY3Rpb24gd2l0aCBhbiBTVkcgc3RyaW5nIGFzIGFuIGV4cG9ydCBpbnB1dFxyXG4gICAgcmV0dXJuIF9wcmVwYXJlRXhwb3J0KG9wdGlvbnMpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoJ1tjaGFydF0gTm90IGEgY29ycmVjdCBTVkcgaW5wdXQuJywgNDAwKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeHBvcnRzIGZyb20gYW4gb3B0aW9ucyBiYXNlZCBpbnB1dCB3aXRoIHRoZSBwcm92aWRlZCBvcHRpb25zLlxyXG4gKlxyXG4gKiBAYXN5bmNcclxuICogQGZ1bmN0aW9uIF9leHBvcnRGcm9tT3B0aW9uc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5wdXRUb0V4cG9ydCAtIFRoZSBvcHRpb25zIGJhc2VkIGlucHV0IHRvIGJlIGV4cG9ydGVkLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIGNvbXBsZXRlIHNldFxyXG4gKiBvZiBvcHRpb25zLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx1bmtub3duPn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSByZXN1bHQgb2YgdGhlIGV4cG9ydFxyXG4gKiBwcm9jZXNzLlxyXG4gKlxyXG4gKiBAdGhyb3dzIHtFeHBvcnRFcnJvcn0gVGhyb3dzIGFuIGBFeHBvcnRFcnJvcmAgaWYgdGhlcmUgaXMgbm90IGEgY29ycmVjdFxyXG4gKiBjaGFydCBvcHRpb25zIGlucHV0LlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2V4cG9ydEZyb21PcHRpb25zKGlucHV0VG9FeHBvcnQsIG9wdGlvbnMpIHtcclxuICBsb2coNCwgJ1tjaGFydF0gUGFyc2luZyBpbnB1dCBmcm9tIG9wdGlvbnMuJyk7XHJcblxyXG4gIC8vIFRyeSB0byBjaGVjaywgdmFsaWRhdGUgYW5kIHBhcnNlIHRvIHN0cmluZ2lmaWVkIG9wdGlvbnNcclxuICBjb25zdCBzdHJpbmdpZmllZE9wdGlvbnMgPSBpc0FsbG93ZWRDb25maWcoXHJcbiAgICBpbnB1dFRvRXhwb3J0LFxyXG4gICAgdHJ1ZSxcclxuICAgIG9wdGlvbnMuY3VzdG9tTG9naWMuYWxsb3dDb2RlRXhlY3V0aW9uXHJcbiAgKTtcclxuXHJcbiAgLy8gQ2hlY2sgaWYgYSBjb3JyZWN0IHN0cmluZ2lmaWVkIG9wdGlvbnNcclxuICBpZiAoXHJcbiAgICBzdHJpbmdpZmllZE9wdGlvbnMgPT09IG51bGwgfHxcclxuICAgIHR5cGVvZiBzdHJpbmdpZmllZE9wdGlvbnMgIT09ICdzdHJpbmcnIHx8XHJcbiAgICAhc3RyaW5naWZpZWRPcHRpb25zLnN0YXJ0c1dpdGgoJ3snKSB8fFxyXG4gICAgIXN0cmluZ2lmaWVkT3B0aW9ucy5lbmRzV2l0aCgnfScpXHJcbiAgKSB7XHJcbiAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoXHJcbiAgICAgICdbY2hhcnRdIEludmFsaWQgY29uZmlndXJhdGlvbiBwcm92aWRlZCAtIE9ubHkgb3B0aW9ucyBjb25maWd1cmF0aW9ucyBhbmQgU1ZHIGFyZSBhbGxvd2VkIGZvciB0aGlzIHNlcnZlci4gSWYgdGhpcyBpcyB5b3VyIHNlcnZlciwgSmF2YVNjcmlwdCBjdXN0b20gY29kZSBjYW4gYmUgZW5hYmxlZCBieSBzdGFydGluZyB0aGUgc2VydmVyIHdpdGggdGhlIGBhbGxvd0NvZGVFeGVjdXRpb25gIG9wdGlvbnMgc2V0IHRvIHRydWUuJyxcclxuICAgICAgNDAzXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gU2V0IHRoZSBleHBvcnQgaW5wdXQgYXMgYSBzdHJpbmdpZmllZCBjaGFydCBvcHRpb25zXHJcbiAgb3B0aW9ucy5leHBvcnQuaW5zdHIgPSBzdHJpbmdpZmllZE9wdGlvbnM7XHJcblxyXG4gIC8vIFJlc2V0IHRoZSByZXN0IG9mIHRoZSBleHBvcnQgaW5wdXQgb3B0aW9uc1xyXG4gIG9wdGlvbnMuZXhwb3J0Lm9wdGlvbnMgPSBudWxsO1xyXG4gIG9wdGlvbnMuZXhwb3J0LnN2ZyA9IG51bGw7XHJcblxyXG4gIC8vIENhbGwgdGhlIGZ1bmN0aW9uIHdpdGggYSBzdHJpbmdpZmllZCBjaGFydCBvcHRpb25zXHJcbiAgcmV0dXJuIF9wcmVwYXJlRXhwb3J0KG9wdGlvbnMpO1xyXG59XHJcblxyXG4vKipcclxuICogRnVuY3Rpb24gZm9yIGZpbmFsaXppbmcgb3B0aW9ucyBhbmQgY29uZmlndXJhdGlvbnMgYmVmb3JlIGV4cG9ydC5cclxuICpcclxuICogQGFzeW5jXHJcbiAqIEBmdW5jdGlvbiBfcHJlcGFyZUV4cG9ydFxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIGNvbXBsZXRlIHNldFxyXG4gKiBvZiBvcHRpb25zLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx1bmtub3duPn0gQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSByZXN1bHQgb2YgdGhlIGV4cG9ydFxyXG4gKiBwcm9jZXNzLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3ByZXBhcmVFeHBvcnQob3B0aW9ucykge1xyXG4gIC8vIEdldCB0aGUgYGV4cG9ydGAgYW5kIGBjdXN0b21Mb2dpY2Agb3B0aW9uc1xyXG4gIGNvbnN0IHsgZXhwb3J0OiBleHBvcnRPcHRpb25zLCBjdXN0b21Mb2dpYzogY3VzdG9tTG9naWNPcHRpb25zIH0gPSBvcHRpb25zO1xyXG5cclxuICAvLyBQcmVwYXJlIHRoZSBgY29uc3RyYCBvcHRpb25cclxuICBleHBvcnRPcHRpb25zLmNvbnN0ciA9IF9maXhDb25zdHIoZXhwb3J0T3B0aW9ucy5jb25zdHIpO1xyXG5cclxuICAvLyBQcmVwYXJlIHRoZSBgdHlwZWAgb3B0aW9uXHJcbiAgZXhwb3J0T3B0aW9ucy50eXBlID0gX2ZpeFR5cGUoZXhwb3J0T3B0aW9ucy50eXBlLCBleHBvcnRPcHRpb25zLm91dGZpbGUpO1xyXG5cclxuICAvLyBQcmVwYXJlIHRoZSBgb3V0ZmlsZWAgb3B0aW9uXHJcbiAgZXhwb3J0T3B0aW9ucy5vdXRmaWxlID0gX2ZpeE91dGZpbGUoXHJcbiAgICBleHBvcnRPcHRpb25zLnR5cGUsXHJcbiAgICBleHBvcnRPcHRpb25zLm91dGZpbGVcclxuICApO1xyXG5cclxuICAvLyBOb3RpZnkgYWJvdXQgdGhlIGN1c3RvbSBsb2dpYyB1c2FnZSBzdGF0dXNcclxuICBsb2coXHJcbiAgICAzLFxyXG4gICAgYFtjaGFydF0gVGhlIGN1c3RvbSBsb2dpYyBpcyAke2N1c3RvbUxvZ2ljT3B0aW9ucy5hbGxvd0NvZGVFeGVjdXRpb24gPyAnYWxsb3dlZCcgOiAnZGlzYWxsb3dlZCd9LmBcclxuICApO1xyXG5cclxuICAvLyBQcmVwYXJlIHRoZSBgY3VzdG9tQ29kZWAsIGBjYWxsYmFja2AsIGFuZCBgcmVzb3VyY2VzYCBvcHRpb25zXHJcbiAgX2hhbmRsZUN1c3RvbUxvZ2ljKGN1c3RvbUxvZ2ljT3B0aW9ucyk7XHJcblxyXG4gIC8vIFByZXBhcmUgdGhlIGBnbG9iYWxPcHRpb25zYCBhbmQgYHRoZW1lT3B0aW9uc2Agb3B0aW9uc1xyXG4gIF9oYW5kbGVHbG9iYWxBbmRUaGVtZShleHBvcnRPcHRpb25zLCBjdXN0b21Mb2dpY09wdGlvbnMpO1xyXG5cclxuICAvLyBQcmVwYXJlIHRoZSBgaGVpZ2h0YCwgYHdpZHRoYCwgYW5kIGBzY2FsZWAgb3B0aW9uc1xyXG4gIF9oYW5kbGVTaXplKGV4cG9ydE9wdGlvbnMpO1xyXG5cclxuICAvLyBDaGVjayBpZiB0aGUgaW1hZ2Ugb3B0aW9ucyBvYmplY3QgZG9lcyBub3QgZXhjZWVkIHRoZSBzaXplIGxpbWl0XHJcbiAgX2NoZWNrRGF0YVNpemUoeyBleHBvcnQ6IGV4cG9ydE9wdGlvbnMsIGN1c3RvbUxvZ2ljOiBjdXN0b21Mb2dpY09wdGlvbnMgfSk7XHJcblxyXG4gIC8vIFBvc3QgdGhlIHdvcmsgdG8gdGhlIHBvb2xcclxuICByZXR1cm4gcG9zdFdvcmsob3B0aW9ucyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIGFkanVzdGluZyB0aGUgY29uc3RydWN0b3IgbmFtZSBieSB0cmFuc2Zvcm1pbmcgYW5kIG5vcm1hbGl6aW5nXHJcbiAqIGl0IGJhc2VkIG9uIGNvbW1vbiBjaGFydCB0eXBlcy5cclxuICpcclxuICogQGZ1bmN0aW9uIF9maXhDb25zdHJcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGNvbnN0ciAtIFRoZSBvcmlnaW5hbCBjb25zdHJ1Y3RvciBuYW1lIHRvIGJlIGFkanVzdGVkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29ycmVjdGVkIGNvbnN0cnVjdG9yIG5hbWUsIG9yICdjaGFydCcgaWYgdGhlIGlucHV0XHJcbiAqIGlzIG5vdCByZWNvZ25pemVkLlxyXG4gKi9cclxuZnVuY3Rpb24gX2ZpeENvbnN0cihjb25zdHIpIHtcclxuICB0cnkge1xyXG4gICAgLy8gRml4IHRoZSBjb25zdHJ1Y3RvciBieSBsb3dlcmluZyBjYXNpbmdcclxuICAgIGNvbnN0IGZpeGVkQ29uc3RyID0gYCR7Y29uc3RyLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnY2hhcnQnLCAnJyl9Q2hhcnRgO1xyXG5cclxuICAgIC8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgcmVzdWx0IGlzIGp1c3QgJ0NoYXJ0J1xyXG4gICAgaWYgKGZpeGVkQ29uc3RyID09PSAnQ2hhcnQnKSB7XHJcbiAgICAgIGZpeGVkQ29uc3RyLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBjb3JyZWN0ZWQgY29uc3RydWN0b3IsIG90aGVyd2lzZSBkZWZhdWx0IHRvICdjaGFydCdcclxuICAgIHJldHVybiBbJ2NoYXJ0JywgJ3N0b2NrQ2hhcnQnLCAnbWFwQ2hhcnQnLCAnZ2FudHRDaGFydCddLmluY2x1ZGVzKFxyXG4gICAgICBmaXhlZENvbnN0clxyXG4gICAgKVxyXG4gICAgICA/IGZpeGVkQ29uc3RyXHJcbiAgICAgIDogJ2NoYXJ0JztcclxuICB9IGNhdGNoIHtcclxuICAgIC8vIERlZmF1bHQgdG8gJ2NoYXJ0JyBpbiBjYXNlIG9mIGFueSBlcnJvclxyXG4gICAgcmV0dXJuICdjaGFydCc7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlcyBmaXhpbmcgdGhlIG91dGZpbGUgYmFzZWQgb24gcHJvdmlkZWQgdHlwZS5cclxuICpcclxuICogQGZ1bmN0aW9uIF9maXhPdXRmaWxlXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVGhlIG9yaWdpbmFsIGV4cG9ydCB0eXBlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gb3V0ZmlsZSAtIFRoZSBmaWxlIHBhdGggb3IgbmFtZS5cclxuICpcclxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvcnJlY3RlZCBvdXRmaWxlLCBvciAnY2hhcnQucG5nJyBpZiB0aGUgaW5wdXRcclxuICogaXMgbm90IHJlY29nbml6ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZml4T3V0ZmlsZSh0eXBlLCBvdXRmaWxlKSB7XHJcbiAgLy8gR2V0IHRoZSBmaWxlIG5hbWUgZnJvbSB0aGUgYG91dGZpbGVgIG9wdGlvblxyXG4gIGNvbnN0IGZpbGVOYW1lID0gZ2V0QWJzb2x1dGVQYXRoKG91dGZpbGUgfHwgJ2NoYXJ0JylcclxuICAgIC5zcGxpdCgnLicpXHJcbiAgICAuc2hpZnQoKTtcclxuXHJcbiAgLy8gUmV0dXJuIGEgY29ycmVjdCBvdXRmaWxlXHJcbiAgcmV0dXJuIGAke2ZpbGVOYW1lfS4ke3R5cGUgfHwgJ3BuZyd9YDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgZml4aW5nIHRoZSBleHBvcnQgdHlwZSBiYXNlZCBvbiBNSU1FIHR5cGVzIGFuZCBmaWxlIGV4dGVuc2lvbnMuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfZml4VHlwZVxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFRoZSBvcmlnaW5hbCBleHBvcnQgdHlwZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IFtvdXRmaWxlPW51bGxdIC0gVGhlIGZpbGUgcGF0aCBvciBuYW1lLiBUaGUgZGVmYXVsdCB2YWx1ZVxyXG4gKiBpcyBgbnVsbGAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb3JyZWN0ZWQgZXhwb3J0IHR5cGUsIG9yICdwbmcnIGlmIHRoZSBpbnB1dFxyXG4gKiBpcyBub3QgcmVjb2duaXplZC5cclxuICovXHJcbmZ1bmN0aW9uIF9maXhUeXBlKHR5cGUsIG91dGZpbGUgPSBudWxsKSB7XHJcbiAgLy8gTUlNRSB0eXBlc1xyXG4gIGNvbnN0IG1pbWVUeXBlcyA9IHtcclxuICAgICdpbWFnZS9wbmcnOiAncG5nJyxcclxuICAgICdpbWFnZS9qcGVnJzogJ2pwZWcnLFxyXG4gICAgJ2FwcGxpY2F0aW9uL3BkZic6ICdwZGYnLFxyXG4gICAgJ2ltYWdlL3N2Zyt4bWwnOiAnc3ZnJ1xyXG4gIH07XHJcblxyXG4gIC8vIEdldCBmb3JtYXRzXHJcbiAgY29uc3QgZm9ybWF0cyA9IE9iamVjdC52YWx1ZXMobWltZVR5cGVzKTtcclxuXHJcbiAgLy8gQ2hlY2sgaWYgdHlwZSBhbmQgb3V0ZmlsZSdzIGV4dGVuc2lvbnMgYXJlIHRoZSBzYW1lXHJcbiAgaWYgKG91dGZpbGUpIHtcclxuICAgIGNvbnN0IG91dFR5cGUgPSBvdXRmaWxlLnNwbGl0KCcuJykucG9wKCk7XHJcblxyXG4gICAgLy8gU3VwcG9ydCB0aGUgSlBHIHR5cGVcclxuICAgIGlmIChvdXRUeXBlID09PSAnanBnJykge1xyXG4gICAgICB0eXBlID0gJ2pwZWcnO1xyXG4gICAgfSBlbHNlIGlmIChmb3JtYXRzLmluY2x1ZGVzKG91dFR5cGUpICYmIHR5cGUgIT09IG91dFR5cGUpIHtcclxuICAgICAgdHlwZSA9IG91dFR5cGU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm4gYSBjb3JyZWN0IHR5cGVcclxuICByZXR1cm4gbWltZVR5cGVzW3R5cGVdIHx8IGZvcm1hdHMuZmluZCgodCkgPT4gdCA9PT0gdHlwZSkgfHwgJ3BuZyc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGUgY2FsY3VsYXRpbmcgdGhlIGBoZWlnaHRgLCBgd2lkdGhgIGFuZCBgc2NhbGVgIGZvciBjaGFydCBleHBvcnRzIGJhc2VkXHJcbiAqIG9uIHRoZSBwcm92aWRlZCBleHBvcnQgb3B0aW9ucy5cclxuICpcclxuICogVGhlIGZ1bmN0aW9uIHByaW9yaXRpemVzIHZhbHVlcyBpbiB0aGUgZm9sbG93aW5nIG9yZGVyOlxyXG4gKlxyXG4gKiAxLiBUaGUgYGhlaWdodGAsIGB3aWR0aGAsIGBzY2FsZWAgZnJvbSB0aGUgYGV4cG9ydE9wdGlvbnNgLlxyXG4gKiAyLiBPcHRpb25zIGZyb20gdGhlIGNoYXJ0IGNvbmZpZ3VyYXRpb24gKGZyb20gYGV4cG9ydGluZ2AgYW5kIGBjaGFydGApLlxyXG4gKiAzLiBPcHRpb25zIGZyb20gdGhlIGdsb2JhbCBvcHRpb25zIChmcm9tIGBleHBvcnRpbmdgIGFuZCBgY2hhcnRgKS5cclxuICogNC4gT3B0aW9ucyBmcm9tIHRoZSB0aGVtZSBvcHRpb25zIChmcm9tIGBleHBvcnRpbmdgIGFuZCBgY2hhcnRgIHNlY3Rpb25zKS5cclxuICogNS4gRmFsbGJhY2sgZGVmYXVsdCB2YWx1ZXMgKGBoZWlnaHQgPSA0MDBgLCBgd2lkdGggPSA2MDBgLCBgc2NhbGUgPSAxYCkuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfaGFuZGxlU2l6ZVxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gZXhwb3J0T3B0aW9ucyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIGBleHBvcnRgXHJcbiAqIG9wdGlvbnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaGFuZGxlU2l6ZShleHBvcnRPcHRpb25zKSB7XHJcbiAgLy8gQ2hlY2sgdGhlIGBvcHRpb25zYCBhbmQgYGluc3RyYCBmb3IgY2hhcnQgYW5kIGV4cG9ydGluZyBzZWN0aW9uc1xyXG4gIGNvbnN0IHsgY2hhcnQ6IG9wdGlvbnNDaGFydCwgZXhwb3J0aW5nOiBvcHRpb25zRXhwb3J0aW5nIH0gPVxyXG4gICAgaXNBbGxvd2VkQ29uZmlnKGV4cG9ydE9wdGlvbnMuaW5zdHIpIHx8IGZhbHNlO1xyXG5cclxuICAvLyBDaGVjayB0aGUgYGdsb2JhbE9wdGlvbnNgIGZvciBjaGFydCBhbmQgZXhwb3J0aW5nIHNlY3Rpb25zXHJcbiAgY29uc3QgeyBjaGFydDogZ2xvYmFsT3B0aW9uc0NoYXJ0LCBleHBvcnRpbmc6IGdsb2JhbE9wdGlvbnNFeHBvcnRpbmcgfSA9XHJcbiAgICBpc0FsbG93ZWRDb25maWcoZXhwb3J0T3B0aW9ucy5nbG9iYWxPcHRpb25zKSB8fCBmYWxzZTtcclxuXHJcbiAgLy8gQ2hlY2sgdGhlIGB0aGVtZU9wdGlvbnNgIGZvciBjaGFydCBhbmQgZXhwb3J0aW5nIHNlY3Rpb25zXHJcbiAgY29uc3QgeyBjaGFydDogdGhlbWVPcHRpb25zQ2hhcnQsIGV4cG9ydGluZzogdGhlbWVPcHRpb25zRXhwb3J0aW5nIH0gPVxyXG4gICAgaXNBbGxvd2VkQ29uZmlnKGV4cG9ydE9wdGlvbnMudGhlbWVPcHRpb25zKSB8fCBmYWxzZTtcclxuXHJcbiAgLy8gRmluZCB0aGUgYGhlaWdodGAgdmFsdWVcclxuICBjb25zdCBoZWlnaHQgPVxyXG4gICAgZXhwb3J0T3B0aW9ucy5oZWlnaHQgfHxcclxuICAgIG9wdGlvbnNFeHBvcnRpbmc/LnNvdXJjZUhlaWdodCB8fFxyXG4gICAgb3B0aW9uc0NoYXJ0Py5oZWlnaHQgfHxcclxuICAgIGdsb2JhbE9wdGlvbnNFeHBvcnRpbmc/LnNvdXJjZUhlaWdodCB8fFxyXG4gICAgZ2xvYmFsT3B0aW9uc0NoYXJ0Py5oZWlnaHQgfHxcclxuICAgIHRoZW1lT3B0aW9uc0V4cG9ydGluZz8uc291cmNlSGVpZ2h0IHx8XHJcbiAgICB0aGVtZU9wdGlvbnNDaGFydD8uaGVpZ2h0IHx8XHJcbiAgICBleHBvcnRPcHRpb25zLmRlZmF1bHRIZWlnaHQgfHxcclxuICAgIDQwMDtcclxuXHJcbiAgLy8gRmluZCB0aGUgYHdpZHRoYCB2YWx1ZVxyXG4gIGNvbnN0IHdpZHRoID1cclxuICAgIGV4cG9ydE9wdGlvbnMud2lkdGggfHxcclxuICAgIG9wdGlvbnNFeHBvcnRpbmc/LnNvdXJjZVdpZHRoIHx8XHJcbiAgICBvcHRpb25zQ2hhcnQ/LndpZHRoIHx8XHJcbiAgICBnbG9iYWxPcHRpb25zRXhwb3J0aW5nPy5zb3VyY2VXaWR0aCB8fFxyXG4gICAgZ2xvYmFsT3B0aW9uc0NoYXJ0Py53aWR0aCB8fFxyXG4gICAgdGhlbWVPcHRpb25zRXhwb3J0aW5nPy5zb3VyY2VXaWR0aCB8fFxyXG4gICAgdGhlbWVPcHRpb25zQ2hhcnQ/LndpZHRoIHx8XHJcbiAgICBleHBvcnRPcHRpb25zLmRlZmF1bHRXaWR0aCB8fFxyXG4gICAgNjAwO1xyXG5cclxuICAvLyBGaW5kIHRoZSBgc2NhbGVgIHZhbHVlOlxyXG4gIC8vIC0gQ2Fubm90IGJlIGxvd2VyIHRoYW4gMC4xXHJcbiAgLy8gLSBDYW5ub3QgYmUgaGlnaGVyIHRoYW4gNS4wXHJcbiAgLy8gLSBNdXN0IGJlIHJvdW5kZWQgdG8gMiBkZWNpbWFsIHBsYWNlcyAoZS5nLiAwLjIzMjM0IC0+IDAuMjMpXHJcbiAgY29uc3Qgc2NhbGUgPSByb3VuZE51bWJlcihcclxuICAgIE1hdGgubWF4KFxyXG4gICAgICAwLjEsXHJcbiAgICAgIE1hdGgubWluKFxyXG4gICAgICAgIGV4cG9ydE9wdGlvbnMuc2NhbGUgfHxcclxuICAgICAgICAgIG9wdGlvbnNFeHBvcnRpbmc/LnNjYWxlIHx8XHJcbiAgICAgICAgICBnbG9iYWxPcHRpb25zRXhwb3J0aW5nPy5zY2FsZSB8fFxyXG4gICAgICAgICAgdGhlbWVPcHRpb25zRXhwb3J0aW5nPy5zY2FsZSB8fFxyXG4gICAgICAgICAgZXhwb3J0T3B0aW9ucy5kZWZhdWx0U2NhbGUgfHxcclxuICAgICAgICAgIDEsXHJcbiAgICAgICAgNS4wXHJcbiAgICAgIClcclxuICAgICksXHJcbiAgICAyXHJcbiAgKTtcclxuXHJcbiAgLy8gVXBkYXRlIGBoZWlnaHRgLCBgd2lkdGhgLCBhbmQgYHNjYWxlYCBpbmZvcm1hdGlvbiBpbiB0aGUgYGV4cG9ydGAgb3B0aW9uc1xyXG4gIGV4cG9ydE9wdGlvbnMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gIGV4cG9ydE9wdGlvbnMud2lkdGggPSB3aWR0aDtcclxuICBleHBvcnRPcHRpb25zLnNjYWxlID0gc2NhbGU7XHJcblxyXG4gIC8vIEdldCByaWQgb2YgcG90ZW50aWFsIGBweGAgYW5kIGAlYFxyXG4gIGZvciAobGV0IHBhcmFtIG9mIFsnaGVpZ2h0JywgJ3dpZHRoJywgJ3NjYWxlJ10pIHtcclxuICAgIGlmICh0eXBlb2YgZXhwb3J0T3B0aW9uc1twYXJhbV0gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGV4cG9ydE9wdGlvbnNbcGFyYW1dID0gK2V4cG9ydE9wdGlvbnNbcGFyYW1dLnJlcGxhY2UoL3B4fCUvZ2ksICcnKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHRoZSBleGVjdXRpb24gb2YgY3VzdG9tIGxvZ2ljIG9wdGlvbnMsIGluY2x1ZGluZyBsb2FkaW5nIGByZXNvdXJjZXNgLFxyXG4gKiBgY3VzdG9tQ29kZWAsIGFuZCBgY2FsbGJhY2tgLiBJZiBjb2RlIGV4ZWN1dGlvbiBpcyBhbGxvd2VkLCBpdCBwcm9jZXNzZXNcclxuICogdGhlIGN1c3RvbSBsb2dpYyBvcHRpb25zIGFjY29yZGluZ2x5LiBJZiBjb2RlIGV4ZWN1dGlvbiBpcyBub3QgYWxsb3dlZCxcclxuICogaXQgZGlzYWJsZXMgdGhlIHVzYWdlIG9mIHJlc291cmNlcywgY3VzdG9tIGNvZGUgYW5kIGNhbGxiYWNrLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gX2hhbmRsZUN1c3RvbUxvZ2ljXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBjdXN0b21Mb2dpY09wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZ1xyXG4gKiBgY3VzdG9tTG9naWNgIG9wdGlvbnMuXHJcbiAqXHJcbiAqIEB0aHJvd3Mge0V4cG9ydEVycm9yfSBUaHJvd3MgYW4gYEV4cG9ydEVycm9yYCBpZiBjb2RlIGV4ZWN1dGlvblxyXG4gKiBpcyBub3QgYWxsb3dlZCBidXQgY3VzdG9tIGxvZ2ljIG9wdGlvbnMgYXJlIHN0aWxsIHByb3ZpZGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gX2hhbmRsZUN1c3RvbUxvZ2ljKGN1c3RvbUxvZ2ljT3B0aW9ucykge1xyXG4gIC8vIEluIGNhc2Ugb2YgYWxsb3dpbmcgY29kZSBleGVjdXRpb25cclxuICBpZiAoY3VzdG9tTG9naWNPcHRpb25zLmFsbG93Q29kZUV4ZWN1dGlvbikge1xyXG4gICAgLy8gUHJvY2VzcyB0aGUgYHJlc291cmNlc2Agb3B0aW9uXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBUcnkgdG8gaGFuZGxlIHJlc291cmNlc1xyXG4gICAgICBjdXN0b21Mb2dpY09wdGlvbnMucmVzb3VyY2VzID0gX2hhbmRsZVJlc291cmNlcyhcclxuICAgICAgICBjdXN0b21Mb2dpY09wdGlvbnMucmVzb3VyY2VzLFxyXG4gICAgICAgIGN1c3RvbUxvZ2ljT3B0aW9ucy5hbGxvd0ZpbGVSZXNvdXJjZXMsXHJcbiAgICAgICAgdHJ1ZVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gVmFsaWRhdGUgb3B0aW9uXHJcbiAgICAgIGN1c3RvbUxvZ2ljT3B0aW9ucy5yZXNvdXJjZXMgPSB2YWxpZGF0ZU9wdGlvbihcclxuICAgICAgICAncmVzb3VyY2VzJyxcclxuICAgICAgICBjdXN0b21Mb2dpY09wdGlvbnMucmVzb3VyY2VzXHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2coMiwgJ1tjaGFydF0gVGhlIGByZXNvdXJjZXNgIGNhbm5vdCBiZSBsb2FkZWQuJyk7XHJcblxyXG4gICAgICAvLyBJbiBjYXNlIG9mIGFuIGVycm9yLCBzZXQgdGhlIG9wdGlvbiB3aXRoIG51bGxcclxuICAgICAgY3VzdG9tTG9naWNPcHRpb25zLnJlc291cmNlcyA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJvY2VzcyB0aGUgYGN1c3RvbUNvZGVgIG9wdGlvblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVHJ5IHRvIGxvYWQgY3VzdG9tIGNvZGUgYW5kIHdyYXAgYXJvdW5kIGl0IGluIGEgc2VsZiBpbnZva2luZyBmdW5jdGlvblxyXG4gICAgICBjdXN0b21Mb2dpY09wdGlvbnMuY3VzdG9tQ29kZSA9IF9oYW5kbGVDdXN0b21Db2RlKFxyXG4gICAgICAgIGN1c3RvbUxvZ2ljT3B0aW9ucy5jdXN0b21Db2RlLFxyXG4gICAgICAgIGN1c3RvbUxvZ2ljT3B0aW9ucy5hbGxvd0ZpbGVSZXNvdXJjZXNcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIFZhbGlkYXRlIHRoZSBvcHRpb25cclxuICAgICAgY3VzdG9tTG9naWNPcHRpb25zLmN1c3RvbUNvZGUgPSB2YWxpZGF0ZU9wdGlvbihcclxuICAgICAgICAnY3VzdG9tQ29kZScsXHJcbiAgICAgICAgY3VzdG9tTG9naWNPcHRpb25zLmN1c3RvbUNvZGVcclxuICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ1dpdGhTdGFjaygyLCBlcnJvciwgJ1tjaGFydF0gVGhlIGBjdXN0b21Db2RlYCBjYW5ub3QgYmUgbG9hZGVkLicpO1xyXG5cclxuICAgICAgLy8gSW4gY2FzZSBvZiBhbiBlcnJvciwgc2V0IHRoZSBvcHRpb24gd2l0aCBudWxsXHJcbiAgICAgIGN1c3RvbUxvZ2ljT3B0aW9ucy5jdXN0b21Db2RlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcm9jZXNzIHRoZSBgY2FsbGJhY2tgIG9wdGlvblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVHJ5IHRvIGxvYWQgY2FsbGJhY2sgZnVuY3Rpb25cclxuICAgICAgY3VzdG9tTG9naWNPcHRpb25zLmNhbGxiYWNrID0gX2hhbmRsZUN1c3RvbUNvZGUoXHJcbiAgICAgICAgY3VzdG9tTG9naWNPcHRpb25zLmNhbGxiYWNrLFxyXG4gICAgICAgIGN1c3RvbUxvZ2ljT3B0aW9ucy5hbGxvd0ZpbGVSZXNvdXJjZXMsXHJcbiAgICAgICAgdHJ1ZVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gVmFsaWRhdGUgdGhlIG9wdGlvblxyXG4gICAgICBjdXN0b21Mb2dpY09wdGlvbnMuY2FsbGJhY2sgPSB2YWxpZGF0ZU9wdGlvbihcclxuICAgICAgICAnY2FsbGJhY2snLFxyXG4gICAgICAgIGN1c3RvbUxvZ2ljT3B0aW9ucy5jYWxsYmFja1xyXG4gICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nV2l0aFN0YWNrKDIsIGVycm9yLCAnW2NoYXJ0XSBUaGUgYGNhbGxiYWNrYCBjYW5ub3QgYmUgbG9hZGVkLicpO1xyXG5cclxuICAgICAgLy8gSW4gY2FzZSBvZiBhbiBlcnJvciwgc2V0IHRoZSBvcHRpb24gd2l0aCBudWxsXHJcbiAgICAgIGN1c3RvbUxvZ2ljT3B0aW9ucy5jYWxsYmFjayA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgdGhlIGBjdXN0b21Db2RlYCBwcmVzZW50XHJcbiAgICBpZiAoW251bGwsIHVuZGVmaW5lZF0uaW5jbHVkZXMoY3VzdG9tTG9naWNPcHRpb25zLmN1c3RvbUNvZGUpKSB7XHJcbiAgICAgIGxvZygzLCAnW2NoYXJ0XSBObyB2YWx1ZSBmb3IgdGhlIGBjdXN0b21Db2RlYCBvcHRpb24gZm91bmQuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgdGhlIGBjYWxsYmFja2AgcHJlc2VudFxyXG4gICAgaWYgKFtudWxsLCB1bmRlZmluZWRdLmluY2x1ZGVzKGN1c3RvbUxvZ2ljT3B0aW9ucy5jYWxsYmFjaykpIHtcclxuICAgICAgbG9nKDMsICdbY2hhcnRdIE5vIHZhbHVlIGZvciB0aGUgYGNhbGxiYWNrYCBvcHRpb24gZm91bmQuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgdGhlIGByZXNvdXJjZXNgIHByZXNlbnRcclxuICAgIGlmIChbbnVsbCwgdW5kZWZpbmVkXS5pbmNsdWRlcyhjdXN0b21Mb2dpY09wdGlvbnMucmVzb3VyY2VzKSkge1xyXG4gICAgICBsb2coMywgJ1tjaGFydF0gTm8gdmFsdWUgZm9yIHRoZSBgcmVzb3VyY2VzYCBvcHRpb24gZm91bmQuJyk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIElmIHRoZSBgYWxsb3dDb2RlRXhlY3V0aW9uYCBmbGFnIGlzIHNldCB0byBmYWxzZSwgd2Ugc2hvdWxkIHJlZnVzZVxyXG4gICAgLy8gdGhlIHVzYWdlIG9mIHRoZSBgY2FsbGJhY2tgLCBgcmVzb3VyY2VzYCwgYW5kIGBjdXN0b21Db2RlYCBvcHRpb25zLlxyXG4gICAgLy8gQWRkaXRpb25hbGx5LCB0aGUgd29ya2VyIHdpbGwgcmVmdXNlIHRvIHJ1biBhcmJpdHJhcnkgSmF2YVNjcmlwdC5cclxuICAgIGlmIChcclxuICAgICAgY3VzdG9tTG9naWNPcHRpb25zLmNhbGxiYWNrIHx8XHJcbiAgICAgIGN1c3RvbUxvZ2ljT3B0aW9ucy5yZXNvdXJjZXMgfHxcclxuICAgICAgY3VzdG9tTG9naWNPcHRpb25zLmN1c3RvbUNvZGVcclxuICAgICkge1xyXG4gICAgICAvLyBSZXNldCBhbGwgY3VzdG9tIGNvZGUgb3B0aW9uc1xyXG4gICAgICBjdXN0b21Mb2dpY09wdGlvbnMuY2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICBjdXN0b21Mb2dpY09wdGlvbnMucmVzb3VyY2VzID0gbnVsbDtcclxuICAgICAgY3VzdG9tTG9naWNPcHRpb25zLmN1c3RvbUNvZGUgPSBudWxsO1xyXG5cclxuICAgICAgLy8gU2VuZCBhIG1lc3NhZ2Ugc2F5aW5nIHRoYXQgdGhlIGV4cG9ydGVyIGRvZXMgbm90IHN1cHBvcnQgdGhlc2Ugc2V0dGluZ3NcclxuICAgICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAgIGBbY2hhcnRdIFRoZSAnY2FsbGJhY2snLCAncmVzb3VyY2VzJywgYW5kICdjdXN0b21Db2RlJyBvcHRpb25zIGhhdmUgYmVlbiBkaXNhYmxlZCBmb3IgdGhpcyBzZXJ2ZXIuYCxcclxuICAgICAgICA0MDNcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIGFuZCB2YWxpZGF0ZXMgcmVzb3VyY2VzIGZyb20gdGhlIGByZXNvdXJjZXNgIG9wdGlvbiBmb3IgZXhwb3J0LlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gX2hhbmRsZVJlc291cmNlc1xyXG4gKlxyXG4gKiBAcGFyYW0geyhPYmplY3R8c3RyaW5nfG51bGwpfSBbcmVzb3VyY2VzPW51bGxdIC0gVGhlIHJlc291cmNlcyB0byBiZSBoYW5kbGVkLlxyXG4gKiBDYW4gYmUgZWl0aGVyIGEgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkIEpTT04sIGEgcGF0aCB0byBhIEpTT04gZmlsZSxcclxuICogb3IgbnVsbC4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgYG51bGxgLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGFsbG93RmlsZVJlc291cmNlcyAtIEEgZmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgbG9hZGluZ1xyXG4gKiByZXNvdXJjZXMgZnJvbSBmaWxlcyBpcyBhbGxvd2VkLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGFsbG93Q29kZUV4ZWN1dGlvbiAtIEEgZmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgY29kZVxyXG4gKiBleGVjdXRpb24gaXMgYWxsb3dlZC5cclxuICpcclxuICogQHJldHVybnMgeyhPYmplY3R8bnVsbCl9IFRoZSBoYW5kbGVkIHJlc291cmNlcyBvciBudWxsIGlmIG5vIHZhbGlkIHJlc291cmNlc1xyXG4gKiBhcmUgZm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaGFuZGxlUmVzb3VyY2VzKFxyXG4gIHJlc291cmNlcyA9IG51bGwsXHJcbiAgYWxsb3dGaWxlUmVzb3VyY2VzLFxyXG4gIGFsbG93Q29kZUV4ZWN1dGlvblxyXG4pIHtcclxuICBsZXQgaGFuZGxlZFJlc291cmNlcyA9IHJlc291cmNlcztcclxuXHJcbiAgLy8gSWYgbm8gcmVzb3VyY2VzIGZvdW5kLCB0cnkgdG8gbG9hZCB0aGUgZGVmYXVsdCByZXNvdXJjZXNcclxuICBpZiAoIWhhbmRsZWRSZXNvdXJjZXMpIHtcclxuICAgIHJlc291cmNlcyA9ICdyZXNvdXJjZXMuanNvbic7XHJcbiAgfVxyXG5cclxuICAvLyBMaXN0IG9mIGFsbG93ZWQgc2VjdGlvbnMgaW4gdGhlIHJlc291cmNlcyBKU09OXHJcbiAgY29uc3QgYWxsb3dlZFByb3BzID0gWydqcycsICdjc3MnLCAnZmlsZXMnXTtcclxuXHJcbiAgLy8gQSBmbGFnIHRoYXQgZGVjaWRlcyBiYXNlZCB0byByZXR1cm4gcmVzb3VyY2VzIG9yIGBudWxsYFxyXG4gIGxldCBjb3JyZWN0UmVzb3VyY2VzID0gZmFsc2U7XHJcblxyXG4gIC8vIFRyeSB0byBsb2FkIHJlc291cmNlcyBmcm9tIGEgZmlsZVxyXG4gIGlmIChcclxuICAgIGFsbG93RmlsZVJlc291cmNlcyAmJlxyXG4gICAgdHlwZW9mIHJlc291cmNlcyA9PT0gJ3N0cmluZycgJiZcclxuICAgIHJlc291cmNlcy5lbmRzV2l0aCgnLmpzb24nKVxyXG4gICkge1xyXG4gICAgaGFuZGxlZFJlc291cmNlcyA9IGlzQWxsb3dlZENvbmZpZyhcclxuICAgICAgcmVhZEZpbGVTeW5jKGdldEFic29sdXRlUGF0aChyZXNvdXJjZXMpLCAndXRmOCcpLFxyXG4gICAgICBmYWxzZSxcclxuICAgICAgYWxsb3dDb2RlRXhlY3V0aW9uXHJcbiAgICApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBUcnkgdG8gZ2V0IEpTT05cclxuICAgIGhhbmRsZWRSZXNvdXJjZXMgPSBpc0FsbG93ZWRDb25maWcocmVzb3VyY2VzLCBmYWxzZSwgYWxsb3dDb2RlRXhlY3V0aW9uKTtcclxuXHJcbiAgICAvLyBHZXQgcmlkIG9mIHRoZSBmaWxlcyBzZWN0aW9uXHJcbiAgICBpZiAoaGFuZGxlZFJlc291cmNlcyAmJiAhYWxsb3dGaWxlUmVzb3VyY2VzKSB7XHJcbiAgICAgIGRlbGV0ZSBoYW5kbGVkUmVzb3VyY2VzLmZpbGVzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRmlsdGVyIGZyb20gdW5uZWNlc3NhcnkgcHJvcGVydGllc1xyXG4gIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gaGFuZGxlZFJlc291cmNlcykge1xyXG4gICAgaWYgKCFhbGxvd2VkUHJvcHMuaW5jbHVkZXMocHJvcE5hbWUpKSB7XHJcbiAgICAgIGRlbGV0ZSBoYW5kbGVkUmVzb3VyY2VzW3Byb3BOYW1lXTtcclxuICAgIH0gZWxzZSBpZiAoIWNvcnJlY3RSZXNvdXJjZXMpIHtcclxuICAgICAgY29ycmVjdFJlc291cmNlcyA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiBhdCBsZWFzdCBvbmUgb2YgYWxsb3dlZCBwcm9wZXJ0aWVzIGlzIHByZXNlbnRcclxuICBpZiAoIWNvcnJlY3RSZXNvdXJjZXMpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLy8gSGFuZGxlIGZpbGVzIHNlY3Rpb25cclxuICBpZiAoaGFuZGxlZFJlc291cmNlcy5maWxlcykge1xyXG4gICAgaGFuZGxlZFJlc291cmNlcy5maWxlcyA9IGhhbmRsZWRSZXNvdXJjZXMuZmlsZXMubWFwKChpdGVtKSA9PiBpdGVtLnRyaW0oKSk7XHJcbiAgICBpZiAoIWhhbmRsZWRSZXNvdXJjZXMuZmlsZXMgfHwgaGFuZGxlZFJlc291cmNlcy5maWxlcy5sZW5ndGggPD0gMCkge1xyXG4gICAgICBkZWxldGUgaGFuZGxlZFJlc291cmNlcy5maWxlcztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFJldHVybiByZXNvdXJjZXNcclxuICByZXR1cm4gaGFuZGxlZFJlc291cmNlcztcclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgY3VzdG9tIGNvZGUgdG8gZXhlY3V0ZSBpdCBzYWZlbHkuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfaGFuZGxlQ3VzdG9tQ29kZVxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY3VzdG9tQ29kZSAtIFRoZSBjdXN0b20gY29kZSB0byBiZSB3cmFwcGVkLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGFsbG93RmlsZVJlc291cmNlcyAtIEZsYWcgdG8gYWxsb3cgbG9hZGluZyBjb2RlIGZyb20gYSBmaWxlLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0NhbGxiYWNrPWZhbHNlXSAtIEZsYWcgdGhhdCBpbmRpY2F0ZXMgdGhlIHJldHVybmVkIGNvZGVcclxuICogbXVzdCBiZSBpbiBhIGNhbGxiYWNrIGZvcm1hdC5cclxuICpcclxuICogQHJldHVybnMgeyhzdHJpbmd8bnVsbCl9IFRoZSB3cmFwcGVkIGN1c3RvbSBjb2RlIG9yIG51bGwgaWYgd3JhcHBpbmcgZmFpbHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaGFuZGxlQ3VzdG9tQ29kZShjdXN0b21Db2RlLCBhbGxvd0ZpbGVSZXNvdXJjZXMsIGlzQ2FsbGJhY2sgPSBmYWxzZSkge1xyXG4gIGlmIChjdXN0b21Db2RlICYmIHR5cGVvZiBjdXN0b21Db2RlID09PSAnc3RyaW5nJykge1xyXG4gICAgY3VzdG9tQ29kZSA9IGN1c3RvbUNvZGUudHJpbSgpO1xyXG5cclxuICAgIGlmIChjdXN0b21Db2RlLmVuZHNXaXRoKCcuanMnKSkge1xyXG4gICAgICAvLyBMb2FkIGEgZmlsZSBpZiB0aGUgZmlsZSByZXNvdXJjZXMgYXJlIGFsbG93ZWRcclxuICAgICAgcmV0dXJuIGFsbG93RmlsZVJlc291cmNlc1xyXG4gICAgICAgID8gX2hhbmRsZUN1c3RvbUNvZGUoXHJcbiAgICAgICAgICAgIHJlYWRGaWxlU3luYyhnZXRBYnNvbHV0ZVBhdGgoY3VzdG9tQ29kZSksICd1dGY4JyksXHJcbiAgICAgICAgICAgIGFsbG93RmlsZVJlc291cmNlcyxcclxuICAgICAgICAgICAgaXNDYWxsYmFja1xyXG4gICAgICAgICAgKVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICFpc0NhbGxiYWNrICYmXHJcbiAgICAgIChjdXN0b21Db2RlLnN0YXJ0c1dpdGgoJ2Z1bmN0aW9uKCknKSB8fFxyXG4gICAgICAgIGN1c3RvbUNvZGUuc3RhcnRzV2l0aCgnZnVuY3Rpb24gKCknKSB8fFxyXG4gICAgICAgIGN1c3RvbUNvZGUuc3RhcnRzV2l0aCgnKCk9PicpIHx8XHJcbiAgICAgICAgY3VzdG9tQ29kZS5zdGFydHNXaXRoKCcoKSA9PicpKVxyXG4gICAgKSB7XHJcbiAgICAgIC8vIFRyZWF0IGEgZnVuY3Rpb24gYXMgYSBzZWxmLWludm9raW5nIGV4cHJlc3Npb25cclxuICAgICAgcmV0dXJuIGAoJHtjdXN0b21Db2RlfSkoKWA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT3IgcmV0dXJuIGFzIGEgc3RyaW5naWZpZWQgY29kZVxyXG4gICAgcmV0dXJuIGN1c3RvbUNvZGUucmVwbGFjZSgvOyQvLCAnJyk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlcyB0aGUgbG9hZGluZyBhbmQgdmFsaWRhdGlvbiBvZiB0aGUgYGdsb2JhbE9wdGlvbnNgIGFuZCBgdGhlbWVPcHRpb25zYFxyXG4gKiBpbiB0aGUgZXhwb3J0IG9wdGlvbnMuIElmIHRoZSBvcHRpb24gaXMgYSBzdHJpbmcgYW5kIHJlZmVyZW5jZXMgYSBKU09OIGZpbGVcclxuICogKHdoZW4gdGhlIGBhbGxvd0ZpbGVSZXNvdXJjZXNgIGlzIGB0cnVlYCksIGl0IHJlYWRzIGFuZCBwYXJzZXMgdGhlIGZpbGUuXHJcbiAqIE90aGVyd2lzZSwgaXQgYXR0ZW1wdHMgdG8gcGFyc2UgdGhlIHN0cmluZyBvciBvYmplY3QgYXMgSlNPTi4gSWYgYW55IGVycm9yc1xyXG4gKiBvY2N1ciBkdXJpbmcgdGhpcyBwcm9jZXNzLCB0aGUgb3B0aW9uIGlzIHNldCB0byBgbnVsbGAuIElmIHRoZXJlIGlzIGFuIGVycm9yXHJcbiAqIGxvYWRpbmcgb3IgcGFyc2luZyB0aGUgYGdsb2JhbE9wdGlvbnNgIG9yIGB0aGVtZU9wdGlvbnNgLCB0aGUgZXJyb3IgaXMgbG9nZ2VkXHJcbiAqIGFuZCB0aGUgb3B0aW9uIGlzIHNldCB0byBgbnVsbGAuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBfaGFuZGxlR2xvYmFsQW5kVGhlbWVcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGV4cG9ydE9wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZyBgZXhwb3J0YFxyXG4gKiBvcHRpb25zLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gY3VzdG9tTG9naWNPcHRpb25zIC0gVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmdcclxuICogYGN1c3RvbUxvZ2ljYCBvcHRpb25zLlxyXG4gKi9cclxuZnVuY3Rpb24gX2hhbmRsZUdsb2JhbEFuZFRoZW1lKGV4cG9ydE9wdGlvbnMsIGN1c3RvbUxvZ2ljT3B0aW9ucykge1xyXG4gIC8vIEdldCB0aGUgYGFsbG93RmlsZVJlc291cmNlc2AgYW5kIGBhbGxvd0NvZGVFeGVjdXRpb25gIGZsYWdzXHJcbiAgY29uc3QgeyBhbGxvd0ZpbGVSZXNvdXJjZXMsIGFsbG93Q29kZUV4ZWN1dGlvbiB9ID0gY3VzdG9tTG9naWNPcHRpb25zO1xyXG5cclxuICAvLyBDaGVjayB0aGUgYGdsb2JhbE9wdGlvbnNgIGFuZCBgdGhlbWVPcHRpb25zYCBvcHRpb25zXHJcbiAgWydnbG9iYWxPcHRpb25zJywgJ3RoZW1lT3B0aW9ucyddLmZvckVhY2goKG9wdGlvbnNOYW1lKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDaGVjayBpZiB0aGUgb3B0aW9uIGV4aXN0c1xyXG4gICAgICBpZiAoZXhwb3J0T3B0aW9uc1tvcHRpb25zTmFtZV0pIHtcclxuICAgICAgICAvLyBDaGVjayBpZiBpdCBpcyBhIHN0cmluZyBhbmQgYSBmaWxlIG5hbWUgd2l0aCB0aGUgYC5qc29uYCBleHRlbnNpb25cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBhbGxvd0ZpbGVSZXNvdXJjZXMgJiZcclxuICAgICAgICAgIHR5cGVvZiBleHBvcnRPcHRpb25zW29wdGlvbnNOYW1lXSA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICAgIGV4cG9ydE9wdGlvbnNbb3B0aW9uc05hbWVdLmVuZHNXaXRoKCcuanNvbicpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZmlsZSBjb250ZW50IGNhbiBiZSBhIGNvbmZpZywgYW5kIHNhdmUgaXQgYXMgYSBzdHJpbmdcclxuICAgICAgICAgIGV4cG9ydE9wdGlvbnNbb3B0aW9uc05hbWVdID0gaXNBbGxvd2VkQ29uZmlnKFxyXG4gICAgICAgICAgICByZWFkRmlsZVN5bmMoZ2V0QWJzb2x1dGVQYXRoKGV4cG9ydE9wdGlvbnNbb3B0aW9uc05hbWVdKSwgJ3V0ZjgnKSxcclxuICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgYWxsb3dDb2RlRXhlY3V0aW9uXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgdmFsdWUgY2FuIGJlIGEgY29uZmlnLCBhbmQgc2F2ZSBpdCBhcyBhIHN0cmluZ1xyXG4gICAgICAgICAgZXhwb3J0T3B0aW9uc1tvcHRpb25zTmFtZV0gPSBpc0FsbG93ZWRDb25maWcoXHJcbiAgICAgICAgICAgIGV4cG9ydE9wdGlvbnNbb3B0aW9uc05hbWVdLFxyXG4gICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICBhbGxvd0NvZGVFeGVjdXRpb25cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWYWxpZGF0ZSB0aGUgb3B0aW9uXHJcbiAgICAgICAgZXhwb3J0T3B0aW9uc1tvcHRpb25zTmFtZV0gPSB2YWxpZGF0ZU9wdGlvbihcclxuICAgICAgICAgIG9wdGlvbnNOYW1lLFxyXG4gICAgICAgICAgZXhwb3J0T3B0aW9uc1tvcHRpb25zTmFtZV1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dXaXRoU3RhY2soXHJcbiAgICAgICAgMixcclxuICAgICAgICBlcnJvcixcclxuICAgICAgICBgW2NoYXJ0XSBUaGUgXFxgJHtvcHRpb25zTmFtZX1cXGAgY2Fubm90IGJlIGxvYWRlZC5gXHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBJbiBjYXNlIG9mIGFuIGVycm9yLCBzZXQgdGhlIG9wdGlvbiB3aXRoIG51bGxcclxuICAgICAgZXhwb3J0T3B0aW9uc1tvcHRpb25zTmFtZV0gPSBudWxsO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBDaGVjayBpZiB0aGVyZSBpcyB0aGUgYGdsb2JhbE9wdGlvbnNgIHByZXNlbnRcclxuICBpZiAoW251bGwsIHVuZGVmaW5lZF0uaW5jbHVkZXMoZXhwb3J0T3B0aW9ucy5nbG9iYWxPcHRpb25zKSkge1xyXG4gICAgbG9nKDMsICdbY2hhcnRdIE5vIHZhbHVlIGZvciB0aGUgYGdsb2JhbE9wdGlvbnNgIG9wdGlvbiBmb3VuZC4nKTtcclxuICB9XHJcblxyXG4gIC8vIENoZWNrIGlmIHRoZXJlIGlzIHRoZSBgdGhlbWVPcHRpb25zYCBwcmVzZW50XHJcbiAgaWYgKFtudWxsLCB1bmRlZmluZWRdLmluY2x1ZGVzKGV4cG9ydE9wdGlvbnMudGhlbWVPcHRpb25zKSkge1xyXG4gICAgbG9nKDMsICdbY2hhcnRdIE5vIHZhbHVlIGZvciB0aGUgYHRoZW1lT3B0aW9uc2Agb3B0aW9uIGZvdW5kLicpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgc2l6ZSBvZiB0aGUgZGF0YSBmb3IgdGhlIGV4cG9ydCBwcm9jZXNzIGFnYWluc3QgYSBmaXhlZCBsaW1pdFxyXG4gKiBvZiAxMDBNQi5cclxuICpcclxuICogQGZ1bmN0aW9uIF9jaGVja0RhdGFTaXplXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbWFnZU9wdGlvbnMgLSBUaGUgZGF0YSBvYmplY3QsIHdoaWNoIGluY2x1ZGVzIG9wdGlvbnMgZnJvbVxyXG4gKiB0aGUgYGV4cG9ydGAgYW5kIGBjdXN0b21Mb2dpY2Agc2VjdGlvbnMgYW5kIHdpbGwgYmUgc2VudCB0byBhIFB1cHBldGVlciBwYWdlLlxyXG4gKlxyXG4gKiBAdGhyb3dzIHtFeHBvcnRFcnJvcn0gVGhyb3dzIGFuIGBFeHBvcnRFcnJvcmAgaWYgdGhlIHNpemUgb2YgdGhlIGRhdGEgZm9yXHJcbiAqIHRoZSBleHBvcnQgcHJvY2VzcyBvYmplY3QgZXhjZWVkcyB0aGUgMTAwTUIgbGltaXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2hlY2tEYXRhU2l6ZShpbWFnZU9wdGlvbnMpIHtcclxuICAvLyBTZXQgdGhlIGZpeGVkIGRhdGEgbGltaXQgKDEwME1CKSBmb3IgdGhlIGRldi10b29scyBwcm90b2NvbFxyXG4gIGNvbnN0IGRhdGFMaW1pdCA9IDEwMCAqIDEwMjQgKiAxMDI0O1xyXG5cclxuICAvLyBHZXQgdGhlIHNpemUgb2YgdGhlIGRhdGFcclxuICBjb25zdCB0b3RhbFNpemUgPSBCdWZmZXIuYnl0ZUxlbmd0aChKU09OLnN0cmluZ2lmeShpbWFnZU9wdGlvbnMpLCAndXRmLTgnKTtcclxuXHJcbiAgLy8gTG9nIHRoZSBzaXplIGluIE1CXHJcbiAgbG9nKFxyXG4gICAgMyxcclxuICAgIGBbY2hhcnRdIFRoZSBjdXJyZW50IHRvdGFsIHNpemUgb2YgdGhlIGRhdGEgZm9yIHRoZSBleHBvcnQgcHJvY2VzcyBpcyBhcm91bmQgJHsoXHJcbiAgICAgIHRvdGFsU2l6ZSAvXHJcbiAgICAgICgxMDI0ICogMTAyNClcclxuICAgICkudG9GaXhlZCgyKX1NQi5gXHJcbiAgKTtcclxuXHJcbiAgLy8gQ2hlY2sgdGhlIHNpemUgb2YgZGF0YSBiZWZvcmUgcGFzc2luZyB0byBhIHBhZ2VcclxuICBpZiAodG90YWxTaXplID49IGRhdGFMaW1pdCkge1xyXG4gICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICBgW2NoYXJ0XSBUaGUgZGF0YSBmb3IgdGhlIGV4cG9ydCBwcm9jZXNzIGV4Y2VlZHMgMTAwTUIgbGltaXQuYFxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBzaW5nbGVFeHBvcnQsXHJcbiAgYmF0Y2hFeHBvcnQsXHJcbiAgc3RhcnRFeHBvcnQsXHJcbiAgZ2V0QWxsb3dDb2RlRXhlY3V0aW9uLFxyXG4gIHNldEFsbG93Q29kZUV4ZWN1dGlvblxyXG59O1xyXG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5cclxuSGlnaGNoYXJ0cyBFeHBvcnQgU2VydmVyXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMTYtMjAyNSwgSGlnaHNvZnRcclxuXHJcbkxpY2VuY2VkIHVuZGVyIHRoZSBNSVQgbGljZW5jZS5cclxuXHJcbkFkZGl0aW9uYWxseSBhIHZhbGlkIEhpZ2hjaGFydHMgbGljZW5zZSBpcyByZXF1aXJlZCBmb3IgdXNlLlxyXG5cclxuU2VlIExJQ0VOU0UgZmlsZSBpbiByb290IGZvciBkZXRhaWxzLlxyXG5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8qKlxyXG4gKiBAb3ZlcnZpZXcgVGhpcyBtb2R1bGUgcHJvdmlkZXMgdXRpbGl0eSBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGludGVydmFsc1xyXG4gKiBhbmQgdGltZW91dHMgaW4gYSBjZW50cmFsaXplZCBtYW5uZXIuIEl0IG1haW50YWlucyBhIHJlZ2lzdHJ5IG9mIGFsbCBhY3RpdmVcclxuICogdGltZXJzIGFuZCBhbGxvd3MgZm9yIHRoZWlyIGVmZmljaWVudCBjbGVhbnVwIHdoZW4gbmVlZGVkIHRvIGF2b2lkIHBvdGVudGlhbFxyXG4gKiBtZW1vcnkgbGVha3MsIHVuaW50ZW5kZWQgYmVoYXZpb3Igb3IgYSBwcm9jZXNzIGZyb20gYmVpbmcgc3RvcHBlZC5cclxuICovXHJcblxyXG5pbXBvcnQgeyBsb2cgfSBmcm9tICcuL2xvZ2dlci5qcyc7XHJcblxyXG4vLyBBcnJheSB0aGF0IGNvbnRhaW5zIGlkcyBvZiBhbGwgb25nb2luZyBpbnRlcnZhbHMgYW5kIHRpbWVvdXRzXHJcbmNvbnN0IHRpbWVySWRzID0gW107XHJcblxyXG4vKipcclxuICogQWRkcyBpZCBvZiB0aGUgYHNldEludGVydmFsYCBvciBgc2V0VGltZW91dGAgYW5kIHRvIHRoZSBgdGltZXJJZHNgIGFycmF5LlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gYWRkVGltZXJcclxuICpcclxuICogQHBhcmFtIHtOb2RlSlMuVGltZW91dH0gaWQgLSBJZCBvZiBhbiBpbnRlcnZhbCBvciBhIHRpbWVvdXQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkVGltZXIoaWQpIHtcclxuICB0aW1lcklkcy5wdXNoKGlkKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENsZWFycyBhbGwgb2Ygb25nb2luZyBpbnRlcnZhbHMgYW5kIHRpbWVvdXRzIGJ5IGlkcyBnYXRoZXJlZFxyXG4gKiBpbiB0aGUgYHRpbWVySWRzYCBhcnJheS5cclxuICpcclxuICogQGZ1bmN0aW9uIGNsZWFyQWxsVGltZXJzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBbGxUaW1lcnMoKSB7XHJcbiAgbG9nKDQsIGBbdGltZXJdIENsZWFyaW5nIGFsbCByZWdpc3RlcmVkIGludGVydmFscyBhbmQgdGltZW91dHMuYCk7XHJcbiAgZm9yIChjb25zdCBpZCBvZiB0aW1lcklkcykge1xyXG4gICAgY2xlYXJJbnRlcnZhbChpZCk7XHJcbiAgICBjbGVhclRpbWVvdXQoaWQpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGFkZFRpbWVyLFxyXG4gIGNsZWFyQWxsVGltZXJzXHJcbn07XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBQcm92aWRlcyBtaWRkbGV3YXJlIGZ1bmN0aW9ucyBmb3IgbG9nZ2luZyBlcnJvcnMgd2l0aCBzdGFjayB0cmFjZXNcclxuICogYW5kIGhhbmRsaW5nIGVycm9yIHJlc3BvbnNlcyBpbiBhbiBFeHByZXNzIGFwcGxpY2F0aW9uLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldE9wdGlvbnMgfSBmcm9tICcuLi8uLi9jb25maWcuanMnO1xyXG5pbXBvcnQgeyBsb2dXaXRoU3RhY2sgfSBmcm9tICcuLi8uLi9sb2dnZXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIE1pZGRsZXdhcmUgZm9yIGxvZ2dpbmcgZXJyb3JzIHdpdGggc3RhY2sgdHJhY2UgYW5kIGhhbmRsaW5nIGVycm9yIHJlc3BvbnNlLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gbG9nRXJyb3JNaWRkbGV3YXJlXHJcbiAqXHJcbiAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIC0gVGhlIGVycm9yIG9iamVjdC5cclxuICogQHBhcmFtIHtFeHByZXNzLlJlcXVlc3R9IHJlcXVlc3QgLSBUaGUgRXhwcmVzcyByZXF1ZXN0IG9iamVjdC5cclxuICogQHBhcmFtIHtFeHByZXNzLlJlc3BvbnNlfSByZXNwb25zZSAtIFRoZSBFeHByZXNzIHJlc3BvbnNlIG9iamVjdC5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dCAtIFRoZSBuZXh0IG1pZGRsZXdhcmUgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9IFRoZSBjYWxsIHRvIHRoZSBuZXh0IG1pZGRsZXdhcmUgZnVuY3Rpb24gd2l0aFxyXG4gKiB0aGUgcGFzc2VkIGVycm9yLlxyXG4gKi9cclxuZnVuY3Rpb24gbG9nRXJyb3JNaWRkbGV3YXJlKGVycm9yLCByZXF1ZXN0LCByZXNwb25zZSwgbmV4dCkge1xyXG4gIC8vIERpc3BsYXkgdGhlIGVycm9yIHdpdGggc3RhY2sgaW4gYSBjb3JyZWN0IGZvcm1hdFxyXG4gIGxvZ1dpdGhTdGFjaygxLCBlcnJvcik7XHJcblxyXG4gIC8vIERlbGV0ZSB0aGUgc3RhY2sgZm9yIHRoZSBlbnZpcm9ubWVudCBvdGhlciB0aGFuIHRoZSBkZXZlbG9wbWVudFxyXG4gIGlmIChnZXRPcHRpb25zKCkub3RoZXIubm9kZUVudiAhPT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgZGVsZXRlIGVycm9yLnN0YWNrO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FsbCB0aGUgYHJldHVybkVycm9yTWlkZGxld2FyZWAgbWlkZGxld2FyZVxyXG4gIHJldHVybiBuZXh0KGVycm9yKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE1pZGRsZXdhcmUgZm9yIHJldHVybmluZyBlcnJvciByZXNwb25zZS5cclxuICpcclxuICogQGZ1bmN0aW9uIHJldHVybkVycm9yTWlkZGxld2FyZVxyXG4gKlxyXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciAtIFRoZSBlcnJvciBvYmplY3QuXHJcbiAqIEBwYXJhbSB7RXhwcmVzcy5SZXF1ZXN0fSByZXF1ZXN0IC0gVGhlIEV4cHJlc3MgcmVxdWVzdCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7RXhwcmVzcy5SZXNwb25zZX0gcmVzcG9uc2UgLSBUaGUgRXhwcmVzcyByZXNwb25zZSBvYmplY3QuXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHQgLSBUaGUgbmV4dCBtaWRkbGV3YXJlIGZ1bmN0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gcmV0dXJuRXJyb3JNaWRkbGV3YXJlKGVycm9yLCByZXF1ZXN0LCByZXNwb25zZSwgbmV4dCkge1xyXG4gIC8vIEdhdGhlciBhbGwgcmVxdWllZCBpbmZvcm1hdGlvbiBmb3IgdGhlIHJlc3BvbnNlXHJcbiAgY29uc3QgeyBtZXNzYWdlLCBzdGFjayB9ID0gZXJyb3I7XHJcblxyXG4gIC8vIFVzZSB0aGUgZXJyb3IncyBzdGF0dXMgY29kZSBvciB0aGUgZGVmYXVsdCA0MDBcclxuICBjb25zdCBzdGF0dXNDb2RlID0gZXJyb3Iuc3RhdHVzQ29kZSB8fCA0MDA7XHJcblxyXG4gIC8vIFNldCBhbmQgcmV0dXJuIHJlc3BvbnNlXHJcbiAgcmVzcG9uc2Uuc3RhdHVzKHN0YXR1c0NvZGUpLmpzb24oeyBzdGF0dXNDb2RlLCBtZXNzYWdlLCBzdGFjayB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZHMgdGhlIGVycm9yIG1pZGRsZXdhcmVzIHRvIHRoZSBwYXNzZWQgZXhwcmVzcyBhcHAgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RXhwcmVzc30gYXBwIC0gVGhlIEV4cHJlc3MgYXBwIGluc3RhbmNlLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXJyb3JNaWRkbGV3YXJlKGFwcCkge1xyXG4gIC8vIEFkZCBsb2cgZXJyb3IgbWlkZGxld2FyZVxyXG4gIGFwcC51c2UobG9nRXJyb3JNaWRkbGV3YXJlKTtcclxuXHJcbiAgLy8gQWRkIHNldCBzdGF0dXMgYW5kIHJldHVybiBlcnJvciBtaWRkbGV3YXJlXHJcbiAgYXBwLnVzZShyZXR1cm5FcnJvck1pZGRsZXdhcmUpO1xyXG59XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBQcm92aWRlcyBtaWRkbGV3YXJlIGZ1bmN0aW9ucyBmb3IgY29uZmlndXJpbmcgYW5kIGVuYWJsaW5nIHJhdGVcclxuICogbGltaXRpbmcgaW4gYW4gRXhwcmVzcyBhcHBsaWNhdGlvbi5cclxuICovXHJcblxyXG5pbXBvcnQgcmF0ZUxpbWl0IGZyb20gJ2V4cHJlc3MtcmF0ZS1saW1pdCc7XHJcblxyXG5pbXBvcnQgeyBsb2cgfSBmcm9tICcuLi8uLi9sb2dnZXIuanMnO1xyXG5cclxuaW1wb3J0IEV4cG9ydEVycm9yIGZyb20gJy4uLy4uL2Vycm9ycy9FeHBvcnRFcnJvci5qcyc7XHJcblxyXG4vKipcclxuICogTWlkZGxld2FyZSBmb3IgZW5hYmxpbmcgcmF0ZSBsaW1pdGluZyBvbiB0aGUgc3BlY2lmaWVkIEV4cHJlc3MgYXBwLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0V4cHJlc3N9IGFwcCAtIFRoZSBFeHByZXNzIGFwcCBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtPYmplY3R9IHJhdGVMaW1pdGluZ09wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZ1xyXG4gKiBgcmF0ZUxpbWl0aW5nYCBvcHRpb25zLlxyXG4gKlxyXG4gKiBAdGhyb3dzIHtFeHBvcnRFcnJvcn0gVGhyb3dzIGFuIGBFeHBvcnRFcnJvcmAgaWYgY291bGQgbm90IGNvbmZpZ3VyZSBhbmQgc2V0XHJcbiAqIHRoZSByYXRlIGxpbWl0aW5nIG9wdGlvbnMuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByYXRlTGltaXRpbmdNaWRkbGV3YXJlKGFwcCwgcmF0ZUxpbWl0aW5nT3B0aW9ucykge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBDaGVjayBpZiB0aGUgcmF0ZSBsaW1pdGluZyBpcyBlbmFibGVkIGFuZCB0aGUgYXBwIGV4aXN0c1xyXG4gICAgaWYgKGFwcCAmJiByYXRlTGltaXRpbmdPcHRpb25zLmVuYWJsZSkge1xyXG4gICAgICBjb25zdCBtZXNzYWdlID1cclxuICAgICAgICAnVG9vIG1hbnkgcmVxdWVzdHMsIHlvdSBoYXZlIGJlZW4gcmF0ZSBsaW1pdGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLic7XHJcblxyXG4gICAgICAvLyBPcHRpb25zIGZvciB0aGUgcmF0ZSBsaW1pdGVyXHJcbiAgICAgIGNvbnN0IHJhdGVPcHRpb25zID0ge1xyXG4gICAgICAgIHdpbmRvdzogcmF0ZUxpbWl0aW5nT3B0aW9ucy53aW5kb3cgfHwgMSxcclxuICAgICAgICBtYXhSZXF1ZXN0czogcmF0ZUxpbWl0aW5nT3B0aW9ucy5tYXhSZXF1ZXN0cyB8fCAzMCxcclxuICAgICAgICBkZWxheTogcmF0ZUxpbWl0aW5nT3B0aW9ucy5kZWxheSB8fCAwLFxyXG4gICAgICAgIHRydXN0UHJveHk6IHJhdGVMaW1pdGluZ09wdGlvbnMudHJ1c3RQcm94eSB8fCBmYWxzZSxcclxuICAgICAgICBza2lwS2V5OiByYXRlTGltaXRpbmdPcHRpb25zLnNraXBLZXkgfHwgbnVsbCxcclxuICAgICAgICBza2lwVG9rZW46IHJhdGVMaW1pdGluZ09wdGlvbnMuc2tpcFRva2VuIHx8IG51bGxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIFNldCBpZiBiZWhpbmQgYSBwcm94eVxyXG4gICAgICBpZiAocmF0ZU9wdGlvbnMudHJ1c3RQcm94eSkge1xyXG4gICAgICAgIGFwcC5lbmFibGUoJ3RydXN0IHByb3h5Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENyZWF0ZSBhIGxpbWl0ZXJcclxuICAgICAgY29uc3QgbGltaXRlciA9IHJhdGVMaW1pdCh7XHJcbiAgICAgICAgLy8gVGltZSBmcmFtZSBmb3Igd2hpY2ggcmVxdWVzdHMgYXJlIGNoZWNrZWQgYW5kIHJlbWVtYmVyZWRcclxuICAgICAgICB3aW5kb3dNczogcmF0ZU9wdGlvbnMud2luZG93ICogNjAgKiAxMDAwLFxyXG4gICAgICAgIC8vIExpbWl0IGVhY2ggSVAgdG8gMTAwIHJlcXVlc3RzIHBlciBgd2luZG93TXNgXHJcbiAgICAgICAgbGltaXQ6IHJhdGVPcHRpb25zLm1heFJlcXVlc3RzLFxyXG4gICAgICAgIC8vIERpc2FibGUgZGVsYXlpbmcsIGZ1bGwgc3BlZWQgdW50aWwgdGhlIG1heCBsaW1pdCBpcyByZWFjaGVkXHJcbiAgICAgICAgZGVsYXlNczogcmF0ZU9wdGlvbnMuZGVsYXksXHJcbiAgICAgICAgaGFuZGxlcjogKHJlcXVlc3QsIHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICByZXNwb25zZS5mb3JtYXQoe1xyXG4gICAgICAgICAgICBqc29uOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzKDQyOSkuc2VuZCh7IG1lc3NhZ2UgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMoNDI5KS5zZW5kKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNraXA6IChyZXF1ZXN0KSA9PiB7XHJcbiAgICAgICAgICAvLyBBbGxvdyBieXBhc3NpbmcgdGhlIGxpbWl0ZXIgaWYgYSB2YWxpZCBrZXkvdG9rZW4gaGFzIGJlZW4gc2VudFxyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICByYXRlT3B0aW9ucy5za2lwS2V5ICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgIHJhdGVPcHRpb25zLnNraXBUb2tlbiAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICByZXF1ZXN0LnF1ZXJ5LmtleSA9PT0gcmF0ZU9wdGlvbnMuc2tpcEtleSAmJlxyXG4gICAgICAgICAgICByZXF1ZXN0LnF1ZXJ5LmFjY2Vzc190b2tlbiA9PT0gcmF0ZU9wdGlvbnMuc2tpcFRva2VuXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgbG9nKDQsICdbcmF0ZSBsaW1pdGluZ10gU2tpcHBpbmcgcmF0ZSBsaW1pdGVyLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVXNlIGEgbGltaXRlciBhcyBhIG1pZGRsZXdhcmVcclxuICAgICAgYXBwLnVzZShsaW1pdGVyKTtcclxuXHJcbiAgICAgIGxvZyhcclxuICAgICAgICAzLFxyXG4gICAgICAgIGBbcmF0ZSBsaW1pdGluZ10gRW5hYmxlZCByYXRlIGxpbWl0aW5nIHdpdGggJHtyYXRlT3B0aW9ucy5tYXhSZXF1ZXN0c30gcmVxdWVzdHMgcGVyICR7cmF0ZU9wdGlvbnMud2luZG93fSBtaW51dGUgZm9yIGVhY2ggSVAsIHRydXN0aW5nIHByb3h5OiAke3JhdGVPcHRpb25zLnRydXN0UHJveHl9LmBcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAnW3JhdGUgbGltaXRpbmddIENvdWxkIG5vdCBjb25maWd1cmUgYW5kIHNldCB0aGUgcmF0ZSBsaW1pdGluZyBvcHRpb25zLicsXHJcbiAgICAgIDUwMFxyXG4gICAgKS5zZXRFcnJvcihlcnJvcik7XHJcbiAgfVxyXG59XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBQcm92aWRlcyBtaWRkbGV3YXJlIGZ1bmN0aW9ucyBmb3IgdmFsaWRhdGluZyBpbmNvbWluZyBIVFRQIHJlcXVlc3RzXHJcbiAqIGluIGFuIEV4cHJlc3MgYXBwbGljYXRpb24uIFRoaXMgbW9kdWxlIGVuc3VyZXMgdGhhdCByZXF1ZXN0cyBjb250YWluXHJcbiAqIGFwcHJvcHJpYXRlIGNvbnRlbnQgdHlwZXMgYW5kIHZhbGlkIHJlcXVlc3QgYm9kaWVzLCBpbmNsdWRpbmcgcHJvcGVyIEpTT05cclxuICogc3RydWN0dXJlcyBhbmQgY2hhcnQgZGF0YSBmb3IgZXhwb3J0cy4gSXQgY2hlY2tzIGZvciBwb3RlbnRpYWwgaXNzdWVzIHN1Y2hcclxuICogYXMgbWlzc2luZyBvciBtYWxmb3JtZWQgZGF0YSwgcHJpdmF0ZSByYW5nZSBVUkxzIGluIFNWRyBwYXlsb2FkcywgYW5kIGFsbG93c1xyXG4gKiBmb3IgZmxleGlibGUgb3B0aW9ucyB2YWxpZGF0aW9uLiBUaGUgbWlkZGxld2FyZSBsb2dzIGRldGFpbGVkIGluZm9ybWF0aW9uXHJcbiAqIGFuZCBoYW5kbGVzIGVycm9ycyByZWxhdGVkIHRvIGluY29ycmVjdCBwYXlsb2FkcywgY2hhcnQgZGF0YSwgYW5kIHByaXZhdGUgVVJMXHJcbiAqIHVzYWdlLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICd1dWlkJztcclxuXHJcbmltcG9ydCB7IGdldEFsbG93Q29kZUV4ZWN1dGlvbiB9IGZyb20gJy4uLy4uL2NoYXJ0LmpzJztcclxuaW1wb3J0IHsgaXNBbGxvd2VkQ29uZmlnIH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJztcclxuaW1wb3J0IHsgbG9nIH0gZnJvbSAnLi4vLi4vbG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgaXNPYmplY3RFbXB0eSwgaXNQcml2YXRlUmFuZ2VVcmxGb3VuZCB9IGZyb20gJy4uLy4uL3V0aWxzLmpzJztcclxuXHJcbmltcG9ydCBFeHBvcnRFcnJvciBmcm9tICcuLi8uLi9lcnJvcnMvRXhwb3J0RXJyb3IuanMnO1xyXG5cclxuLyoqXHJcbiAqIE1pZGRsZXdhcmUgZm9yIHZhbGlkYXRpbmcgdGhlIGNvbnRlbnQtdHlwZSBoZWFkZXIuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBjb250ZW50VHlwZU1pZGRsZXdhcmVcclxuICpcclxuICogQHBhcmFtIHtFeHByZXNzLlJlcXVlc3R9IHJlcXVlc3QgLSBUaGUgRXhwcmVzcyByZXF1ZXN0IG9iamVjdC5cclxuICogQHBhcmFtIHtFeHByZXNzLlJlc3BvbnNlfSByZXNwb25zZSAtIFRoZSBFeHByZXNzIHJlc3BvbnNlIG9iamVjdC5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dCAtIFRoZSBuZXh0IG1pZGRsZXdhcmUgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9IFRoZSBjYWxsIHRvIHRoZSBuZXh0IG1pZGRsZXdhcmUgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3Mge0V4cG9ydEVycm9yfSBUaHJvd3MgYW4gYEV4cG9ydEVycm9yYCBpZiB0aGUgY29udGVudC10eXBlXHJcbiAqIGlzIG5vdCBjb3JyZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gY29udGVudFR5cGVNaWRkbGV3YXJlKHJlcXVlc3QsIHJlc3BvbnNlLCBuZXh0KSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEdldCB0aGUgY29udGVudCB0eXBlIGhlYWRlclxyXG4gICAgY29uc3QgY29udGVudFR5cGUgPSByZXF1ZXN0LmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddIHx8ICcnO1xyXG5cclxuICAgIC8vIEFsbG93IG9ubHkgSlNPTiwgVVJMLWVuY29kZWQgYW5kIGZvcm0gZGF0YSB3aXRob3V0IGZpbGVzIHR5cGVzIG9mIGRhdGFcclxuICAgIGlmIChcclxuICAgICAgIWNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykgJiZcclxuICAgICAgIWNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKSAmJlxyXG4gICAgICAhY29udGVudFR5cGUuaW5jbHVkZXMoJ211bHRpcGFydC9mb3JtLWRhdGEnKVxyXG4gICAgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgICAnW3ZhbGlkYXRpb25dIENvbnRlbnQtVHlwZSBtdXN0IGJlIGFwcGxpY2F0aW9uL2pzb24sIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCwgb3IgbXVsdGlwYXJ0L2Zvcm0tZGF0YS4nLFxyXG4gICAgICAgIDQxNVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbGwgdGhlIGByZXF1ZXN0Qm9keU1pZGRsZXdhcmVgIG1pZGRsZXdhcmVcclxuICAgIHJldHVybiBuZXh0KCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiBuZXh0KGVycm9yKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNaWRkbGV3YXJlIGZvciB2YWxpZGF0aW5nIHRoZSByZXF1ZXN0J3MgYm9keS5cclxuICpcclxuICogQGZ1bmN0aW9uIHJlcXVlc3RCb2R5TWlkZGxld2FyZVxyXG4gKlxyXG4gKiBAcGFyYW0ge0V4cHJlc3MuUmVxdWVzdH0gcmVxdWVzdCAtIFRoZSBFeHByZXNzIHJlcXVlc3Qgb2JqZWN0LlxyXG4gKiBAcGFyYW0ge0V4cHJlc3MuUmVzcG9uc2V9IHJlc3BvbnNlIC0gVGhlIEV4cHJlc3MgcmVzcG9uc2Ugb2JqZWN0LlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0IC0gVGhlIG5leHQgbWlkZGxld2FyZSBmdW5jdGlvbi5cclxuICpcclxuICogQHJldHVybnMge3VuZGVmaW5lZH0gVGhlIGNhbGwgdG8gdGhlIG5leHQgbWlkZGxld2FyZSBmdW5jdGlvbi5cclxuICpcclxuICogQHRocm93cyB7RXhwb3J0RXJyb3J9IFRocm93cyBhbiBgRXhwb3J0RXJyb3JgIGlmIHRoZSBib2R5IGlzIG5vdCBjb3JyZWN0LlxyXG4gKiBAdGhyb3dzIHtFeHBvcnRFcnJvcn0gVGhyb3dzIGFuIGBFeHBvcnRFcnJvcmAgaWYgdGhlIGNoYXJ0IGRhdGEgZnJvbSB0aGUgYm9keVxyXG4gKiBpcyBub3QgY29ycmVjdC5cclxuICogQHRocm93cyB7RXhwb3J0RXJyb3J9IFRocm93cyBhbiBgRXhwb3J0RXJyb3JgIGluIGNhc2Ugb2YgdGhlIHByaXZhdGUgcmFuZ2VcclxuICogdXJsIGVycm9yLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVxdWVzdEJvZHlNaWRkbGV3YXJlKHJlcXVlc3QsIHJlc3BvbnNlLCBuZXh0KSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEdldCB0aGUgcmVxdWVzdCBib2R5XHJcbiAgICBjb25zdCBib2R5ID0gcmVxdWVzdC5ib2R5O1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIHVuaXF1ZSBJRCBmb3IgYSByZXF1ZXN0XHJcbiAgICBjb25zdCByZXF1ZXN0SWQgPSB1dWlkKCk7XHJcblxyXG4gICAgLy8gVGhyb3cgYW4gZXJyb3IgaWYgdGhlcmUgaXMgbm8gY29ycmVjdCBib2R5XHJcbiAgICBpZiAoIWJvZHkgfHwgaXNPYmplY3RFbXB0eShib2R5KSkge1xyXG4gICAgICBsb2coXHJcbiAgICAgICAgMixcclxuICAgICAgICBgW3ZhbGlkYXRpb25dIFJlcXVlc3QgWyR7cmVxdWVzdElkfV0gLSBUaGUgcmVxdWVzdCBmcm9tICR7XHJcbiAgICAgICAgICByZXF1ZXN0LmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8IHJlcXVlc3QuY29ubmVjdGlvbi5yZW1vdGVBZGRyZXNzXHJcbiAgICAgICAgfSB3YXMgaW5jb3JyZWN0LiBSZWNlaXZlZCBwYXlsb2FkIGlzIGVtcHR5LmBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgICBgW3ZhbGlkYXRpb25dIFJlcXVlc3QgWyR7cmVxdWVzdElkfV0gLSBUaGUgcmVxdWVzdCBib2R5IGlzIHJlcXVpcmVkLiBQbGVhc2UgZW5zdXJlIHRoYXQgeW91ciBDb250ZW50LVR5cGUgaGVhZGVyIGlzIGNvcnJlY3QuIEFjY2VwdGVkIHR5cGVzIGFyZSAnYXBwbGljYXRpb24vanNvbicgYW5kICdtdWx0aXBhcnQvZm9ybS1kYXRhJy5gLFxyXG4gICAgICAgIDQwMFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB0aGUgYGFsbG93Q29kZUV4ZWN1dGlvbmAgb3B0aW9uIGZvciB0aGUgc2VydmVyXHJcbiAgICBjb25zdCBhbGxvd0NvZGVFeGVjdXRpb24gPSBnZXRBbGxvd0NvZGVFeGVjdXRpb24oKTtcclxuXHJcbiAgICAvLyBGaW5kIGEgY29ycmVjdCBjaGFydCBvcHRpb25zXHJcbiAgICBjb25zdCBpbnN0ciA9IGlzQWxsb3dlZENvbmZpZyhcclxuICAgICAgLy8gVXNlIG9uZSBvZiB0aGUgYmVsb3dcclxuICAgICAgYm9keS5pbnN0ciB8fCBib2R5Lm9wdGlvbnMgfHwgYm9keS5pbmZpbGUgfHwgYm9keS5kYXRhLFxyXG4gICAgICAvLyBTdHJpbmdpZnkgb3B0aW9uc1xyXG4gICAgICB0cnVlLFxyXG4gICAgICAvLyBBbGxvdyBvciBkaXNhbGxvdyBmdW5jdGlvbnNcclxuICAgICAgYWxsb3dDb2RlRXhlY3V0aW9uXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFRocm93IGFuIGVycm9yIGlmIHRoZXJlIGlzIG5vIGNvcnJlY3QgY2hhcnQgZGF0YVxyXG4gICAgaWYgKGluc3RyID09PSBudWxsICYmICFib2R5LnN2Zykge1xyXG4gICAgICBsb2coXHJcbiAgICAgICAgMixcclxuICAgICAgICBgW3ZhbGlkYXRpb25dIFJlcXVlc3QgWyR7cmVxdWVzdElkfV0gLSBUaGUgcmVxdWVzdCBmcm9tICR7XHJcbiAgICAgICAgICByZXF1ZXN0LmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8IHJlcXVlc3QuY29ubmVjdGlvbi5yZW1vdGVBZGRyZXNzXHJcbiAgICAgICAgfSB3YXMgaW5jb3JyZWN0LiBSZWNlaXZlZCBwYXlsb2FkIGlzIG1pc3NpbmcgY29ycmVjdCBjaGFydCBkYXRhIGZvciBleHBvcnQ6ICR7SlNPTi5zdHJpbmdpZnkoYm9keSl9LmBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgICBgW3ZhbGlkYXRpb25dIFJlcXVlc3QgWyR7cmVxdWVzdElkfV0gLSBObyBjb3JyZWN0IGNoYXJ0IGRhdGEgZm91bmQuIEVuc3VyZSB0aGF0IHlvdSBhcmUgdXNpbmcgZWl0aGVyIGFwcGxpY2F0aW9uL2pzb24gb3IgbXVsdGlwYXJ0L2Zvcm0tZGF0YSBoZWFkZXJzLiBJZiBzZW5kaW5nIEpTT04sIG1ha2Ugc3VyZSB0aGUgY2hhcnQgZGF0YSBpcyBpbiB0aGUgJ2luZmlsZScsICdvcHRpb25zJywgb3IgJ2RhdGEnIGF0dHJpYnV0ZS4gSWYgc2VuZGluZyBTVkcsIGVuc3VyZSBpdCBpcyBpbiB0aGUgJ3N2ZycgYXR0cmlidXRlLmAsXHJcbiAgICAgICAgNDAwXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGhyb3cgYW4gZXJyb3IgaWYgdGVzdCBvZiB4bGluazpocmVmIGVsZW1lbnRzIGZyb20gcGF5bG9hZCdzIFNWRyBmYWlsc1xyXG4gICAgaWYgKGJvZHkuc3ZnICYmIGlzUHJpdmF0ZVJhbmdlVXJsRm91bmQoYm9keS5zdmcpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgICBgW3ZhbGlkYXRpb25dIFJlcXVlc3QgWyR7cmVxdWVzdElkfV0gLSBTVkcgcG90ZW50aWFsbHkgY29udGFpbiBhdCBsZWFzdCBvbmUgZm9yYmlkZGVuIFVSTCBpbiAneGxpbms6aHJlZicgZWxlbWVudC4gUGxlYXNlIHJldmlldyB0aGUgU1ZHIGNvbnRlbnQgYW5kIGVuc3VyZSB0aGF0IGFsbCByZWZlcmVuY2VkIFVSTHMgY29tcGx5IHdpdGggc2VjdXJpdHkgcG9saWNpZXMuYCxcclxuICAgICAgICA0MDBcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgYW5kIHByZS12YWxpZGF0ZSB0aGUgb3B0aW9ucyBhbmQgc3RvcmUgdGhlbSBpbiB0aGUgcmVxdWVzdFxyXG4gICAgcmVxdWVzdC52YWxpZGF0ZWRPcHRpb25zID0ge1xyXG4gICAgICAvLyBTZXQgdGhlIGNyZWF0ZWQgSUQgYXMgYSBgcmVxdWVzdElkYCBwcm9wZXJ0eSBpbiB0aGUgb3B0aW9uc1xyXG4gICAgICByZXF1ZXN0SWQsXHJcbiAgICAgIGV4cG9ydDoge1xyXG4gICAgICAgIGluc3RyLFxyXG4gICAgICAgIHN2ZzogYm9keS5zdmcsXHJcbiAgICAgICAgb3V0ZmlsZTpcclxuICAgICAgICAgIGJvZHkub3V0ZmlsZSB8fFxyXG4gICAgICAgICAgYCR7cmVxdWVzdC5wYXJhbXMuZmlsZW5hbWUgfHwgJ2NoYXJ0J30uJHtib2R5LnR5cGUgfHwgJ3BuZyd9YCxcclxuICAgICAgICB0eXBlOiBib2R5LnR5cGUsXHJcbiAgICAgICAgY29uc3RyOiBib2R5LmNvbnN0cixcclxuICAgICAgICBiNjQ6IGJvZHkuYjY0LFxyXG4gICAgICAgIG5vRG93bmxvYWQ6IGJvZHkubm9Eb3dubG9hZCxcclxuICAgICAgICBoZWlnaHQ6IGJvZHkuaGVpZ2h0LFxyXG4gICAgICAgIHdpZHRoOiBib2R5LndpZHRoLFxyXG4gICAgICAgIHNjYWxlOiBib2R5LnNjYWxlLFxyXG4gICAgICAgIGdsb2JhbE9wdGlvbnM6IGlzQWxsb3dlZENvbmZpZyhcclxuICAgICAgICAgIGJvZHkuZ2xvYmFsT3B0aW9ucyxcclxuICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICBhbGxvd0NvZGVFeGVjdXRpb25cclxuICAgICAgICApLFxyXG4gICAgICAgIHRoZW1lT3B0aW9uczogaXNBbGxvd2VkQ29uZmlnKFxyXG4gICAgICAgICAgYm9keS50aGVtZU9wdGlvbnMsXHJcbiAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgYWxsb3dDb2RlRXhlY3V0aW9uXHJcbiAgICAgICAgKVxyXG4gICAgICB9LFxyXG4gICAgICBjdXN0b21Mb2dpYzoge1xyXG4gICAgICAgIGFsbG93Q29kZUV4ZWN1dGlvbixcclxuICAgICAgICBhbGxvd0ZpbGVSZXNvdXJjZXM6IGZhbHNlLFxyXG4gICAgICAgIGN1c3RvbUNvZGU6IGJvZHkuY3VzdG9tQ29kZSxcclxuICAgICAgICBjYWxsYmFjazogYm9keS5jYWxsYmFjayxcclxuICAgICAgICByZXNvdXJjZXM6IGlzQWxsb3dlZENvbmZpZyhib2R5LnJlc291cmNlcywgdHJ1ZSwgYWxsb3dDb2RlRXhlY3V0aW9uKVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIENhbGwgdGhlIG5leHQgbWlkZGxld2FyZVxyXG4gICAgcmV0dXJuIG5leHQoKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmV0dXJuIG5leHQoZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZHMgdGhlIHZhbGlkYXRpb24gbWlkZGxld2FyZXMgdG8gdGhlIHBhc3NlZCBleHByZXNzIGFwcCBpbnN0YW5jZS5cclxuICpcclxuICogQHBhcmFtIHtFeHByZXNzfSBhcHAgLSBUaGUgRXhwcmVzcyBhcHAgaW5zdGFuY2UuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB2YWxpZGF0aW9uTWlkZGxld2FyZShhcHApIHtcclxuICAvLyBBZGQgY29udGVudCB0eXBlIHZhbGlkYXRpb24gbWlkZGxld2FyZVxyXG4gIGFwcC5wb3N0KFsnLycsICcvOmZpbGVuYW1lJ10sIGNvbnRlbnRUeXBlTWlkZGxld2FyZSk7XHJcblxyXG4gIC8vIEFkZCByZXF1ZXN0IGJvZHkgcmVxdWVzdCB2YWxpZGF0aW9uIG1pZGRsZXdhcmVcclxuICBhcHAucG9zdChbJy8nLCAnLzpmaWxlbmFtZSddLCByZXF1ZXN0Qm9keU1pZGRsZXdhcmUpO1xyXG59XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBEZWZpbmVzIHRoZSBleHBvcnQgcm91dGVzIGFuZCBsb2dpYyBmb3IgaGFuZGxpbmcgY2hhcnQgZXhwb3J0XHJcbiAqIHJlcXVlc3RzIGluIGFuIEV4cHJlc3Mgc2VydmVyLiBUaGlzIG1vZHVsZSBwcm9jZXNzZXMgaW5jb21pbmcgcmVxdWVzdHNcclxuICogdG8gZXhwb3J0IGNoYXJ0cyBpbiB2YXJpb3VzIGZvcm1hdHMgKGUuZy4gSlBFRywgUE5HLCBQREYsIFNWRykuIEl0IGludGVncmF0ZXNcclxuICogd2l0aCBIaWdoY2hhcnRzJyBjb3JlIGZ1bmN0aW9uYWxpdGllcyBhbmQgc3VwcG9ydHMgYm90aCBpbW1lZGlhdGUgZG93bmxvYWRcclxuICogcmVzcG9uc2VzIGFuZCBCYXNlNjQtZW5jb2RlZCBjb250ZW50IHJldHVybnMuIFRoZSBjb2RlIGFsc28gZmVhdHVyZXNcclxuICogYmVuY2htYXJraW5nIGZvciBwZXJmb3JtYW5jZSBtb25pdG9yaW5nLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IHN0YXJ0RXhwb3J0IH0gZnJvbSAnLi4vLi4vY2hhcnQuanMnO1xyXG5pbXBvcnQgeyBsb2cgfSBmcm9tICcuLi8uLi9sb2dnZXIuanMnO1xyXG5pbXBvcnQgeyBnZXRCYXNlNjQsIG1lYXN1cmVUaW1lIH0gZnJvbSAnLi4vLi4vdXRpbHMuanMnO1xyXG5cclxuaW1wb3J0IEV4cG9ydEVycm9yIGZyb20gJy4uLy4uL2Vycm9ycy9FeHBvcnRFcnJvci5qcyc7XHJcblxyXG4vLyBSZXZlcnNlZCBNSU1FIHR5cGVzXHJcbmNvbnN0IHJldmVyc2VkTWltZSA9IHtcclxuICBwbmc6ICdpbWFnZS9wbmcnLFxyXG4gIGpwZWc6ICdpbWFnZS9qcGVnJyxcclxuICBnaWY6ICdpbWFnZS9naWYnLFxyXG4gIHBkZjogJ2FwcGxpY2F0aW9uL3BkZicsXHJcbiAgc3ZnOiAnaW1hZ2Uvc3ZnK3htbCdcclxufTtcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHRoZSBleHBvcnQgcmVxdWVzdHMgZnJvbSB0aGUgY2xpZW50LlxyXG4gKlxyXG4gKiBAYXN5bmNcclxuICogQGZ1bmN0aW9uIHJlcXVlc3RFeHBvcnRcclxuICpcclxuICogQHBhcmFtIHtFeHByZXNzLlJlcXVlc3R9IHJlcXVlc3QgLSBUaGUgRXhwcmVzcyByZXF1ZXN0IG9iamVjdC5cclxuICogQHBhcmFtIHtFeHByZXNzLlJlc3BvbnNlfSByZXNwb25zZSAtIFRoZSBFeHByZXNzIHJlc3BvbnNlIG9iamVjdC5cclxuICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dCAtIFRoZSBuZXh0IG1pZGRsZXdhcmUgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBleHBvcnQgcHJvY2Vzc1xyXG4gKiBpcyBjb21wbGV0ZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RFeHBvcnQocmVxdWVzdCwgcmVzcG9uc2UsIG5leHQpIHtcclxuICB0cnkge1xyXG4gICAgLy8gU3RhcnQgY291bnRpbmcgdGltZSBmb3IgYSByZXF1ZXN0XHJcbiAgICBjb25zdCByZXF1ZXN0Q291bnRlciA9IG1lYXN1cmVUaW1lKCk7XHJcblxyXG4gICAgLy8gSW4gY2FzZSB0aGUgY29ubmVjdGlvbiBpcyBjbG9zZWQsIGZvcmNlIHRvIGFib3J0IGZ1cnRoZXIgYWN0aW9uc1xyXG4gICAgbGV0IGNvbm5lY3Rpb25BYm9ydGVkID0gZmFsc2U7XHJcbiAgICByZXF1ZXN0LnNvY2tldC5vbignY2xvc2UnLCAoaGFkRXJyb3JzKSA9PiB7XHJcbiAgICAgIGlmIChoYWRFcnJvcnMpIHtcclxuICAgICAgICBjb25uZWN0aW9uQWJvcnRlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEdldCB0aGUgb3B0aW9ucyBwcmV2aW91c2x5IHZhbGlkYXRlZCBpbiB0aGUgdmFsaWRhdGlvbiBtaWRkbGV3YXJlXHJcbiAgICBjb25zdCBvcHRpb25zID0gcmVxdWVzdC52YWxpZGF0ZWRPcHRpb25zO1xyXG5cclxuICAgIC8vIEdldCB0aGUgcmVxdWVzdCBpZFxyXG4gICAgY29uc3QgcmVxdWVzdElkID0gb3B0aW9ucy5yZXF1ZXN0SWQ7XHJcblxyXG4gICAgLy8gSW5mbyBhYm91dCBhbiBpbmNvbWluZyByZXF1ZXN0IHdpdGggY29ycmVjdCBkYXRhXHJcbiAgICBsb2coNCwgYFtleHBvcnRdIFJlcXVlc3QgWyR7cmVxdWVzdElkfV0gLSBHb3QgYW4gaW5jb21pbmcgSFRUUCByZXF1ZXN0LmApO1xyXG5cclxuICAgIC8vIFN0YXJ0IHRoZSBleHBvcnQgcHJvY2Vzc1xyXG4gICAgYXdhaXQgc3RhcnRFeHBvcnQob3B0aW9ucywgKGVycm9yLCBkYXRhKSA9PiB7XHJcbiAgICAgIC8vIFJlbW92ZSB0aGUgY2xvc2UgZXZlbnQgZnJvbSB0aGUgc29ja2V0XHJcbiAgICAgIHJlcXVlc3Quc29ja2V0LnJlbW92ZUFsbExpc3RlbmVycygnY2xvc2UnKTtcclxuXHJcbiAgICAgIC8vIElmIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQsIGRvIG5vdGhpbmdcclxuICAgICAgaWYgKGNvbm5lY3Rpb25BYm9ydGVkKSB7XHJcbiAgICAgICAgbG9nKFxyXG4gICAgICAgICAgMyxcclxuICAgICAgICAgIGBbZXhwb3J0XSBSZXF1ZXN0IFske3JlcXVlc3RJZH1dIC0gVGhlIGNsaWVudCBjbG9zZWQgdGhlIGNvbm5lY3Rpb24gYmVmb3JlIHRoZSBjaGFydCBmaW5pc2hlZCBwcm9jZXNzaW5nLmBcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgZXJyb3IsIGxvZyBpdCBhbmQgc2VuZCBpdCB0byB0aGUgZXJyb3IgbWlkZGxld2FyZVxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgZGF0YSBpcyBtaXNzaW5nLCBsb2cgdGhlIG1lc3NhZ2UgYW5kIHNlbmQgaXQgdG8gdGhlIGVycm9yIG1pZGRsZXdhcmVcclxuICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLnJlc3VsdCkge1xyXG4gICAgICAgIGxvZyhcclxuICAgICAgICAgIDIsXHJcbiAgICAgICAgICBgW2V4cG9ydF0gUmVxdWVzdCBbJHtyZXF1ZXN0SWR9XSAtIFJlcXVlc3QgZnJvbSAke1xyXG4gICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8XHJcbiAgICAgICAgICAgIHJlcXVlc3QuY29ubmVjdGlvbi5yZW1vdGVBZGRyZXNzXHJcbiAgICAgICAgICB9IHdhcyBpbmNvcnJlY3QuIFJlY2VpdmVkIHJlc3VsdCBpcyAke2RhdGEucmVzdWx0fS5gXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAgICAgYFtleHBvcnRdIFJlcXVlc3QgWyR7cmVxdWVzdElkfV0gLSBVbmV4cGVjdGVkIHJldHVybiBvZiB0aGUgZXhwb3J0IHJlc3VsdCBmcm9tIHRoZSBjaGFydCBnZW5lcmF0aW9uLiBQbGVhc2UgY2hlY2sgeW91ciByZXF1ZXN0IGRhdGEuYCxcclxuICAgICAgICAgIDQwMFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJldHVybiB0aGUgcmVzdWx0IGluIGFuIGFwcHJvcHJpYXRlIGZvcm1hdFxyXG4gICAgICBpZiAoZGF0YS5yZXN1bHQpIHtcclxuICAgICAgICBsb2coXHJcbiAgICAgICAgICAzLFxyXG4gICAgICAgICAgYFtleHBvcnRdIFJlcXVlc3QgWyR7cmVxdWVzdElkfV0gLSBUaGUgd2hvbGUgZXhwb3J0aW5nIHByb2Nlc3MgdG9vayAke3JlcXVlc3RDb3VudGVyKCl9bXMuYFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIEdldCB0aGUgYHR5cGVgLCBgYjY0YCwgYG5vRG93bmxvYWRgLCBhbmQgYG91dGZpbGVgIGZyb20gb3B0aW9uc1xyXG4gICAgICAgIGNvbnN0IHsgdHlwZSwgYjY0LCBub0Rvd25sb2FkLCBvdXRmaWxlIH0gPSBkYXRhLm9wdGlvbnMuZXhwb3J0O1xyXG5cclxuICAgICAgICAvLyBJZiBvbmx5IEJhc2U2NCBpcyByZXF1aXJlZCwgcmV0dXJuIGl0XHJcbiAgICAgICAgaWYgKGI2NCkge1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnNlbmQoZ2V0QmFzZTY0KGRhdGEucmVzdWx0LCB0eXBlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXQgY29ycmVjdCBjb250ZW50IHR5cGVcclxuICAgICAgICByZXNwb25zZS5oZWFkZXIoJ0NvbnRlbnQtVHlwZScsIHJldmVyc2VkTWltZVt0eXBlXSB8fCAnaW1hZ2UvcG5nJyk7XHJcblxyXG4gICAgICAgIC8vIERlY2lkZSB3aGV0aGVyIHRvIGRvd25sb2FkIG9yIG5vdCBjaGFydCBmaWxlXHJcbiAgICAgICAgaWYgKCFub0Rvd25sb2FkKSB7XHJcbiAgICAgICAgICByZXNwb25zZS5hdHRhY2htZW50KG91dGZpbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgU1ZHLCByZXR1cm4gcGxhaW4gY29udGVudCwgb3RoZXJ3aXNlIGEgYjY0IHN0cmluZyBmcm9tIGEgYnVmZmVyXHJcbiAgICAgICAgcmV0dXJuIHR5cGUgPT09ICdzdmcnXHJcbiAgICAgICAgICA/IHJlc3BvbnNlLnNlbmQoZGF0YS5yZXN1bHQpXHJcbiAgICAgICAgICA6IHJlc3BvbnNlLnNlbmQoQnVmZmVyLmZyb20oZGF0YS5yZXN1bHQsICdiYXNlNjQnKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4gbmV4dChlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQWRkcyB0aGUgYGV4cG9ydGAgcm91dGVzLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gZXhwb3J0Um91dGVzXHJcbiAqXHJcbiAqIEBwYXJhbSB7RXhwcmVzc30gYXBwIC0gVGhlIEV4cHJlc3MgYXBwIGluc3RhbmNlLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXhwb3J0Um91dGVzKGFwcCkge1xyXG4gIC8qKlxyXG4gICAqIEFkZHMgdGhlIFBPU1QgJy8nIC0gQSByb3V0ZSBmb3IgaGFuZGxpbmcgUE9TVCByZXF1ZXN0cyBhdCB0aGUgcm9vdFxyXG4gICAqIGVuZHBvaW50LlxyXG4gICAqL1xyXG4gIGFwcC5wb3N0KCcvJywgcmVxdWVzdEV4cG9ydCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgdGhlIFBPU1QgJy86ZmlsZW5hbWUnIC0gQSByb3V0ZSBmb3IgaGFuZGxpbmcgUE9TVCByZXF1ZXN0cyB3aXRoXHJcbiAgICogYSBzcGVjaWZpZWQgZmlsZW5hbWUgcGFyYW1ldGVyLlxyXG4gICAqL1xyXG4gIGFwcC5wb3N0KCcvOmZpbGVuYW1lJywgcmVxdWVzdEV4cG9ydCk7XHJcbn1cclxuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbkhpZ2hjaGFydHMgRXhwb3J0IFNlcnZlclxyXG5cclxuQ29weXJpZ2h0IChjKSAyMDE2LTIwMjUsIEhpZ2hzb2Z0XHJcblxyXG5MaWNlbmNlZCB1bmRlciB0aGUgTUlUIGxpY2VuY2UuXHJcblxyXG5BZGRpdGlvbmFsbHkgYSB2YWxpZCBIaWdoY2hhcnRzIGxpY2Vuc2UgaXMgcmVxdWlyZWQgZm9yIHVzZS5cclxuXHJcblNlZSBMSUNFTlNFIGZpbGUgaW4gcm9vdCBmb3IgZGV0YWlscy5cclxuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vKipcclxuICogQG92ZXJ2aWV3IERlZmluZXMgYW4gRXhwcmVzcyByb3V0ZSBmb3Igc2VydmVyIGhlYWx0aCBtb25pdG9yaW5nLCBpbmNsdWRpbmdcclxuICogdXB0aW1lLCBzdWNjZXNzIHJhdGVzLCBhbmQgb3RoZXIgc2VydmVyIHN0YXRpc3RpY3MuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnO1xyXG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XHJcblxyXG5pbXBvcnQgeyBnZXRIY1ZlcnNpb24gfSBmcm9tICcuLi8uLi9jYWNoZS5qcyc7XHJcbmltcG9ydCB7IGxvZyB9IGZyb20gJy4uLy4uL2xvZ2dlci5qcyc7XHJcbmltcG9ydCB7IGdldFBvb2xJbmZvSlNPTiwgZ2V0UG9vbFN0YXRzIH0gZnJvbSAnLi4vLi4vcG9vbC5qcyc7XHJcbmltcG9ydCB7IGFkZFRpbWVyIH0gZnJvbSAnLi4vLi4vdGltZXIuanMnO1xyXG5pbXBvcnQgeyBfX2Rpcm5hbWUsIGdldE5ld0RhdGVUaW1lIH0gZnJvbSAnLi4vLi4vdXRpbHMuanMnO1xyXG5cclxuLy8gU2V0IHRoZSBzdGFydCBkYXRlIG9mIHRoZSBzZXJ2ZXJcclxuY29uc3Qgc2VydmVyU3RhcnRUaW1lID0gbmV3IERhdGUoKTtcclxuXHJcbi8vIEdldCB0aGUgYHBhY2thZ2UuanNvbmAgY29udGVudFxyXG5jb25zdCBwYWNrYWdlRmlsZSA9IEpTT04ucGFyc2UoXHJcbiAgcmVhZEZpbGVTeW5jKGpvaW4oX19kaXJuYW1lLCAncGFja2FnZS5qc29uJyksICd1dGY4JylcclxuKTtcclxuXHJcbi8vIEFuIGFycmF5IGZvciBzdWNjZXNzIHJhdGUgcmF0aW9zXHJcbmNvbnN0IHN1Y2Nlc3NSYXRlcyA9IFtdO1xyXG5cclxuLy8gUmVjb3JkIGV2ZXJ5IG1pbnV0ZVxyXG5jb25zdCByZWNvcmRJbnRlcnZhbCA9IDYwICogMTAwMDtcclxuXHJcbi8vIDMwIG1pbnV0ZXNcclxuY29uc3Qgd2luZG93U2l6ZSA9IDMwO1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgbW92aW5nIGF2ZXJhZ2UgaW5kaWNhdG9yIGJhc2VkIG9uIHRoZSBkYXRhIGZyb20gdGhlIGBzdWNjZXNzUmF0ZXNgXHJcbiAqIGFycmF5LlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gX2NhbGN1bGF0ZU1vdmluZ0F2ZXJhZ2VcclxuICpcclxuICogQHJldHVybnMge251bWJlcn0gQSBtb3ZpbmcgYXZlcmFnZSBmb3Igc3VjY2VzcyByYXRpbyBvZiB0aGUgc2VydmVyIGV4cG9ydHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2FsY3VsYXRlTW92aW5nQXZlcmFnZSgpIHtcclxuICByZXR1cm4gc3VjY2Vzc1JhdGVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gc3VjY2Vzc1JhdGVzLmxlbmd0aDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0YXJ0cyB0aGUgaW50ZXJ2YWwgcmVzcG9uc2libGUgZm9yIGNhbGN1bGF0aW5nIGN1cnJlbnQgc3VjY2VzcyByYXRlIHJhdGlvXHJcbiAqIGFuZCBjb2xsZWN0cyByZWNvcmRzIHRvIHRoZSBgc3VjY2Vzc1JhdGVzYCBhcnJheS5cclxuICpcclxuICogQGZ1bmN0aW9uIF9zdGFydFN1Y2Nlc3NSYXRlXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtOb2RlSlMuVGltZW91dH0gSWQgb2YgYW4gaW50ZXJ2YWwuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc3RhcnRTdWNjZXNzUmF0ZSgpIHtcclxuICByZXR1cm4gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgY29uc3Qgc3RhdHMgPSBnZXRQb29sU3RhdHMoKTtcclxuICAgIGNvbnN0IHN1Y2Nlc3NSYXRpbyA9XHJcbiAgICAgIHN0YXRzLmV4cG9ydHNBdHRlbXB0ZWQgPT09IDBcclxuICAgICAgICA/IDFcclxuICAgICAgICA6IChzdGF0cy5leHBvcnRzUGVyZm9ybWVkIC8gc3RhdHMuZXhwb3J0c0F0dGVtcHRlZCkgKiAxMDA7XHJcblxyXG4gICAgc3VjY2Vzc1JhdGVzLnB1c2goc3VjY2Vzc1JhdGlvKTtcclxuICAgIGlmIChzdWNjZXNzUmF0ZXMubGVuZ3RoID4gd2luZG93U2l6ZSkge1xyXG4gICAgICBzdWNjZXNzUmF0ZXMuc2hpZnQoKTtcclxuICAgIH1cclxuICB9LCByZWNvcmRJbnRlcnZhbCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGRzIHRoZSBgaGVhbHRoYCByb3V0ZXMuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBoZWFsdGhSb3V0ZXNcclxuICpcclxuICogQHBhcmFtIHtFeHByZXNzfSBhcHAgLSBUaGUgRXhwcmVzcyBhcHAgaW5zdGFuY2UuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoZWFsdGhSb3V0ZXMoYXBwKSB7XHJcbiAgLy8gU3RhcnQgcHJvY2Vzc2luZyBzdWNjZXNzIHJhdGUgcmF0aW8gaW50ZXJ2YWwgYW5kIHNhdmUgaXRzIGlkIHRvIHRoZSBhcnJheVxyXG4gIC8vIGZvciB0aGUgZ3JhY2VmdWwgY2xlYXJpbmcgb24gc2h1dGRvd24gd2l0aCBpbmplY3RlZCBgYWRkVGltZXJgIGZ1bnRpb25cclxuICBhZGRUaW1lcihfc3RhcnRTdWNjZXNzUmF0ZSgpKTtcclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyB0aGUgR0VUICcvaGVhbHRoJyAtIEEgcm91dGUgZm9yIGdldHRpbmcgdGhlIGJhc2ljIHN0YXRzIG9mIHRoZSBzZXJ2ZXIuXHJcbiAgICovXHJcbiAgYXBwLmdldCgnL2hlYWx0aCcsIChyZXF1ZXN0LCByZXNwb25zZSwgbmV4dCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgbG9nKDQsICdbaGVhbHRoXSBSZXR1cm5pbmcgc2VydmVyIGhlYWx0aC4nKTtcclxuXHJcbiAgICAgIGNvbnN0IHN0YXRzID0gZ2V0UG9vbFN0YXRzKCk7XHJcbiAgICAgIGNvbnN0IHBlcmlvZCA9IHN1Y2Nlc3NSYXRlcy5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IG1vdmluZ0F2ZXJhZ2UgPSBfY2FsY3VsYXRlTW92aW5nQXZlcmFnZSgpO1xyXG5cclxuICAgICAgLy8gU2VuZCB0aGUgc2VydmVyJ3Mgc3RhdGlzdGljc1xyXG4gICAgICByZXNwb25zZS5zZW5kKHtcclxuICAgICAgICAvLyBTdGF0dXMgYW5kIHRpbWVzXHJcbiAgICAgICAgc3RhdHVzOiAnT0snLFxyXG4gICAgICAgIGJvb3RUaW1lOiBzZXJ2ZXJTdGFydFRpbWUsXHJcbiAgICAgICAgdXB0aW1lOiBgJHtNYXRoLmZsb29yKChnZXROZXdEYXRlVGltZSgpIC0gc2VydmVyU3RhcnRUaW1lLmdldFRpbWUoKSkgLyAxMDAwIC8gNjApfSBtaW51dGVzYCxcclxuXHJcbiAgICAgICAgLy8gVmVyc2lvbnNcclxuICAgICAgICBzZXJ2ZXJWZXJzaW9uOiBwYWNrYWdlRmlsZS52ZXJzaW9uLFxyXG4gICAgICAgIGhpZ2hjaGFydHNWZXJzaW9uOiBnZXRIY1ZlcnNpb24oKSxcclxuXHJcbiAgICAgICAgLy8gRXhwb3J0c1xyXG4gICAgICAgIGF2ZXJhZ2VFeHBvcnRUaW1lOiBzdGF0cy50aW1lU3BlbnRBdmVyYWdlLFxyXG4gICAgICAgIGF0dGVtcHRlZEV4cG9ydHM6IHN0YXRzLmV4cG9ydHNBdHRlbXB0ZWQsXHJcbiAgICAgICAgcGVyZm9ybWVkRXhwb3J0czogc3RhdHMuZXhwb3J0c1BlcmZvcm1lZCxcclxuICAgICAgICBmYWlsZWRFeHBvcnRzOiBzdGF0cy5leHBvcnRzRHJvcHBlZCxcclxuICAgICAgICBzdWNlc3NSYXRpbzogKHN0YXRzLmV4cG9ydHNQZXJmb3JtZWQgLyBzdGF0cy5leHBvcnRzQXR0ZW1wdGVkKSAqIDEwMCxcclxuXHJcbiAgICAgICAgLy8gUG9vbFxyXG4gICAgICAgIHBvb2w6IGdldFBvb2xJbmZvSlNPTigpLFxyXG5cclxuICAgICAgICAvLyBNb3ZpbmcgYXZlcmFnZVxyXG4gICAgICAgIHBlcmlvZCxcclxuICAgICAgICBtb3ZpbmdBdmVyYWdlLFxyXG4gICAgICAgIG1lc3NhZ2U6XHJcbiAgICAgICAgICBpc05hTihtb3ZpbmdBdmVyYWdlKSB8fCAhc3VjY2Vzc1JhdGVzLmxlbmd0aFxyXG4gICAgICAgICAgICA/ICdUb28gZWFybHkgdG8gcmVwb3J0LiBObyBleHBvcnRzIG1hZGUgeWV0LiBQbGVhc2UgY2hlY2sgYmFjayBzb29uLidcclxuICAgICAgICAgICAgOiBgTGFzdCAke3BlcmlvZH0gbWludXRlcyBoYWQgYSBzdWNjZXNzIHJhdGUgb2YgJHttb3ZpbmdBdmVyYWdlLnRvRml4ZWQoMil9JS5gLFxyXG5cclxuICAgICAgICAvLyBTVkcgYW5kIEpTT04gZXhwb3J0c1xyXG4gICAgICAgIHN2Z0V4cG9ydHM6IHN0YXRzLmV4cG9ydHNGcm9tU3ZnLFxyXG4gICAgICAgIGpzb25FeHBvcnRzOiBzdGF0cy5leHBvcnRzRnJvbU9wdGlvbnMsXHJcbiAgICAgICAgc3ZnRXhwb3J0c0F0dGVtcHRzOiBzdGF0cy5leHBvcnRzRnJvbVN2Z0F0dGVtcHRzLFxyXG4gICAgICAgIGpzb25FeHBvcnRzQXR0ZW1wdHM6IHN0YXRzLmV4cG9ydHNGcm9tT3B0aW9uc0F0dGVtcHRzXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG5leHQoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBEZWZpbmVzIGFuIEV4cHJlc3Mgcm91dGUgZm9yIHNlcnZpbmcgdGhlIFVJIGZvciB0aGUgZXhwb3J0IHNlcnZlclxyXG4gKiB3aGVuIGVuYWJsZWQuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGgnO1xyXG5cclxuaW1wb3J0IHsgZ2V0T3B0aW9ucyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcyc7XHJcbmltcG9ydCB7IGxvZyB9IGZyb20gJy4uLy4uL2xvZ2dlci5qcyc7XHJcbmltcG9ydCB7IF9fZGlybmFtZSB9IGZyb20gJy4uLy4uL3V0aWxzLmpzJztcclxuXHJcbi8qKlxyXG4gKiBBZGRzIHRoZSBgdWlgIHJvdXRlcy5cclxuICpcclxuICogQGZ1bmN0aW9uIHVpUm91dGVzXHJcbiAqXHJcbiAqIEBwYXJhbSB7RXhwcmVzc30gYXBwIC0gVGhlIEV4cHJlc3MgYXBwIGluc3RhbmNlLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdWlSb3V0ZXMoYXBwKSB7XHJcbiAgLy8gQWRkIHRoZSBVSSBlbmRwb2ludCBvbmx5IGlmIHJlcXVpcmVkXHJcbiAgaWYgKGdldE9wdGlvbnMoKS51aS5lbmFibGUpIHtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgR0VUICcvJyAtIEEgcm91dGUgZm9yIGEgVUkgd2hlbiBlbmFibGVkIG9uIHRoZSBleHBvcnQgc2VydmVyLlxyXG4gICAgICovXHJcbiAgICBhcHAuZ2V0KGdldE9wdGlvbnMoKS51aS5yb3V0ZSB8fCAnLycsIChyZXF1ZXN0LCByZXNwb25zZSwgbmV4dCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxvZyg0LCAnW3VpXSBSZXR1cm5pbmcgVUkgZm9yIHRoZSBleHBvcnQuJyk7XHJcblxyXG4gICAgICAgIHJlc3BvbnNlLnNlbmRGaWxlKGpvaW4oX19kaXJuYW1lLCAncHVibGljJywgJ2luZGV4Lmh0bWwnKSwge1xyXG4gICAgICAgICAgYWNjZXB0UmFuZ2VzOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBuZXh0KGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBEZWZpbmVzIGFuIEV4cHJlc3Mgcm91dGUgZm9yIHVwZGF0aW5nIHRoZSBIaWdoY2hhcnRzIHZlcnNpb25cclxuICogb24gdGhlIHNlcnZlciwgd2l0aCBhdXRoZW50aWNhdGlvbiBhbmQgdmFsaWRhdGlvbi5cclxuICovXHJcblxyXG5pbXBvcnQgeyBnZXRIY1ZlcnNpb24sIHVwZGF0ZUhjVmVyc2lvbiB9IGZyb20gJy4uLy4uL2NhY2hlLmpzJztcclxuaW1wb3J0IHsgbG9nIH0gZnJvbSAnLi4vLi4vbG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgZW52cyB9IGZyb20gJy4uLy4uL3ZhbGlkYXRpb24uanMnO1xyXG5cclxuaW1wb3J0IEV4cG9ydEVycm9yIGZyb20gJy4uLy4uL2Vycm9ycy9FeHBvcnRFcnJvci5qcyc7XHJcblxyXG4vKipcclxuICogQWRkcyB0aGUgYHZlcnNpb25fY2hhbmdlYCByb3V0ZXMuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiB2ZXJzaW9uQ2hhbmdlUm91dGVzXHJcbiAqXHJcbiAqIEBwYXJhbSB7RXhwcmVzc30gYXBwIC0gVGhlIEV4cHJlc3MgYXBwIGluc3RhbmNlLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdmVyc2lvbkNoYW5nZVJvdXRlcyhhcHApIHtcclxuICAvKipcclxuICAgKiBBZGRzIHRoZSBQT1NUICcvdmVyc2lvbl9jaGFuZ2UvOm5ld1ZlcnNpb24nIC0gQSByb3V0ZSBmb3IgY2hhbmdpbmdcclxuICAgKiB0aGUgSGlnaGNoYXJ0cyB2ZXJzaW9uIG9uIHRoZSBzZXJ2ZXIuXHJcbiAgICovXHJcbiAgYXBwLnBvc3QoJy92ZXJzaW9uX2NoYW5nZS86bmV3VmVyc2lvbicsIGFzeW5jIChyZXF1ZXN0LCByZXNwb25zZSwgbmV4dCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgbG9nKDQsICdbdmVyc2lvbl0gQ2hhbmdpbmcgSGlnaGNoYXJ0cyB2ZXJzaW9uLicpO1xyXG5cclxuICAgICAgLy8gR2V0IHRoZSB0b2tlbiBkaXJlY3RseSBmcm9tIGVudnNcclxuICAgICAgY29uc3QgYWRtaW5Ub2tlbiA9IGVudnMuSElHSENIQVJUU19BRE1JTl9UT0tFTjtcclxuXHJcbiAgICAgIC8vIENoZWNrIHRoZSBleGlzdGVuY2Ugb2YgdGhlIHRva2VuXHJcbiAgICAgIGlmICghYWRtaW5Ub2tlbiB8fCAhYWRtaW5Ub2tlbi5sZW5ndGgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoXHJcbiAgICAgICAgICAnW3ZlcnNpb25dIFRoZSBzZXJ2ZXIgaXMgbm90IGNvbmZpZ3VyZWQgdG8gcGVyZm9ybSBydW4tdGltZSB2ZXJzaW9uIGNoYW5nZXM6IGBISUdIQ0hBUlRTX0FETUlOX1RPS0VOYCBpcyBub3Qgc2V0LicsXHJcbiAgICAgICAgICA0MDFcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBHZXQgdGhlIHRva2VuIGZyb20gdGhlIGhjLWF1dGggaGVhZGVyXHJcbiAgICAgIGNvbnN0IHRva2VuID0gcmVxdWVzdC5nZXQoJ2hjLWF1dGgnKTtcclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBoYy1hdXRoIGhlYWRlciBjb250YWluIGEgY29ycmVjdCB0b2tlblxyXG4gICAgICBpZiAoIXRva2VuIHx8IHRva2VuICE9PSBhZG1pblRva2VuKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAgICAgJ1t2ZXJzaW9uXSBJbnZhbGlkIG9yIG1pc3NpbmcgdG9rZW46IFNldCB0aGUgdG9rZW4gaW4gdGhlIGhjLWF1dGggaGVhZGVyLicsXHJcbiAgICAgICAgICA0MDFcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBHZXQgdGhlIG5ldyB2ZXJzaW9uIGZyb20gdGhlIHBhcmFtc1xyXG4gICAgICBjb25zdCBuZXdWZXJzaW9uID0gcmVxdWVzdC5wYXJhbXMubmV3VmVyc2lvbjtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSB2ZXJzaW9uXHJcbiAgICAgIGlmIChuZXdWZXJzaW9uKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHVwZGF0ZUhjVmVyc2lvbihuZXdWZXJzaW9uKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKFxyXG4gICAgICAgICAgICBgW3ZlcnNpb25dIFZlcnNpb24gY2hhbmdlOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgNDAwXHJcbiAgICAgICAgICApLnNldEVycm9yKGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN1Y2Nlc3NcclxuICAgICAgICByZXNwb25zZS5zdGF0dXMoMjAwKS5zZW5kKHtcclxuICAgICAgICAgIHN0YXR1c0NvZGU6IDIwMCxcclxuICAgICAgICAgIGhpZ2hjaGFydHNWZXJzaW9uOiBnZXRIY1ZlcnNpb24oKSxcclxuICAgICAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgdXBkYXRlZCBIaWdoY2hhcnRzIHRvIHZlcnNpb246ICR7bmV3VmVyc2lvbn0uYFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIE5vIHZlcnNpb24gc3BlY2lmaWVkXHJcbiAgICAgICAgdGhyb3cgbmV3IEV4cG9ydEVycm9yKCdbdmVyc2lvbl0gTm8gbmV3IHZlcnNpb24gc3VwcGxpZWQuJywgNDAwKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIG5leHQoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBBIG1vZHVsZSB0aGF0IHNldHMgdXAgYW5kIG1hbmFnZXMgSFRUUCBhbmQgSFRUUFMgc2VydmVyc1xyXG4gKiBmb3IgdGhlIEhpZ2hjaGFydHMgRXhwb3J0IFNlcnZlci4gSXQgaGFuZGxlcyBzZXJ2ZXIgaW5pdGlhbGl6YXRpb24sXHJcbiAqIGNvbmZpZ3VyYXRpb24sIGVycm9yIGhhbmRsaW5nLCBtaWRkbGV3YXJlcyBzZXR1cCwgcm91dGUgZGVmaW5pdGlvbiwgYW5kIHJhdGVcclxuICogbGltaXRpbmcuIFRoZSBtb2R1bGUgZXhwb3J0cyBmdW5jdGlvbnMgdG8gc3RhcnQsIHN0b3AsIGFuZCBtYW5hZ2Ugc2VydmVyXHJcbiAqIGluc3RhbmNlcywgYXMgd2VsbCBhcyB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgZGVmaW5pbmcgcm91dGVzIGFuZCBhdHRhY2hpbmdcclxuICogbWlkZGxld2FyZXMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnO1xyXG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XHJcblxyXG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcclxuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XHJcbmltcG9ydCBodHRwIGZyb20gJ2h0dHAnO1xyXG5pbXBvcnQgaHR0cHMgZnJvbSAnaHR0cHMnO1xyXG5pbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XHJcblxyXG5pbXBvcnQgeyB1cGRhdGVPcHRpb25zIH0gZnJvbSAnLi4vY29uZmlnLmpzJztcclxuaW1wb3J0IHsgbG9nLCBsb2dXaXRoU3RhY2sgfSBmcm9tICcuLi9sb2dnZXIuanMnO1xyXG5pbXBvcnQgeyBfX2Rpcm5hbWUsIGdldEFic29sdXRlUGF0aCB9IGZyb20gJy4uL3V0aWxzLmpzJztcclxuXHJcbmltcG9ydCBlcnJvck1pZGRsZXdhcmUgZnJvbSAnLi9taWRkbGV3YXJlcy9lcnJvci5qcyc7XHJcbmltcG9ydCByYXRlTGltaXRpbmdNaWRkbGV3YXJlIGZyb20gJy4vbWlkZGxld2FyZXMvcmF0ZUxpbWl0aW5nLmpzJztcclxuaW1wb3J0IHZhbGlkYXRpb25NaWRkbGV3YXJlIGZyb20gJy4vbWlkZGxld2FyZXMvdmFsaWRhdGlvbi5qcyc7XHJcblxyXG5pbXBvcnQgZXhwb3J0Um91dGVzIGZyb20gJy4vcm91dGVzL2V4cG9ydC5qcyc7XHJcbmltcG9ydCBoZWFsdGhSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvaGVhbHRoLmpzJztcclxuaW1wb3J0IHVpUm91dGVzIGZyb20gJy4vcm91dGVzL3VpLmpzJztcclxuaW1wb3J0IHZlcnNpb25DaGFuZ2VSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvdmVyc2lvbkNoYW5nZS5qcyc7XHJcblxyXG5pbXBvcnQgRXhwb3J0RXJyb3IgZnJvbSAnLi4vZXJyb3JzL0V4cG9ydEVycm9yLmpzJztcclxuXHJcbi8vIEFycmF5IG9mIGFuIGFjdGl2ZSBzZXJ2ZXJzXHJcbmNvbnN0IGFjdGl2ZVNlcnZlcnMgPSBuZXcgTWFwKCk7XHJcblxyXG4vLyBDcmVhdGUgZXhwcmVzcyBhcHBcclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuLyoqXHJcbiAqIFN0YXJ0cyBhbiBIVFRQIGFuZC9vciBIVFRQUyBzZXJ2ZXIgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGNvbmZpZ3VyYXRpb24uXHJcbiAqIFRoZSBgc2VydmVyT3B0aW9uc2Agb2JqZWN0IGNvbnRhaW5zIHNlcnZlci1yZWxhdGVkIHByb3BlcnRpZXMgKHJlZmVyXHJcbiAqIHRvIHRoZSBgc2VydmVyYCBzZWN0aW9uIGluIHRoZSBgLi9saWIvc2NoZW1hcy9jb25maWcuanNgIGZpbGUgZm9yIGRldGFpbHMpLlxyXG4gKlxyXG4gKiBAYXN5bmNcclxuICogQGZ1bmN0aW9uIHN0YXJ0U2VydmVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBbc2VydmVyT3B0aW9ucz17fV0gLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZ1xyXG4gKiBgc2VydmVyYCBvcHRpb25zLiBUaGlzIG9iamVjdCBtYXkgaW5jbHVkZSBhIHBhcnRpYWwgb3IgY29tcGxldGUgc2V0XHJcbiAqIG9mIHRoZSBgc2VydmVyYCBvcHRpb25zLiBJZiB0aGUgb3B0aW9ucyBhcmUgcGFydGlhbCwgbWlzc2luZyB2YWx1ZXMgd2lsbFxyXG4gKiBkZWZhdWx0IHRvIHRoZSBjdXJyZW50IGdsb2JhbCBjb25maWd1cmF0aW9uLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBhbiBlbXB0eVxyXG4gKiBvYmplY3QuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBzZXJ2ZXIgaXMgZWl0aGVyXHJcbiAqIG5vdCBlbmFibGVkIG9yIG5vIHZhbGlkIEV4cHJlc3MgYXBwIGlzIGZvdW5kLCBzaWduYWxpbmcgdGhlIGVuZCBvZiB0aGVcclxuICogZnVuY3Rpb24ncyBleGVjdXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3Mge0V4cG9ydEVycm9yfSBUaHJvd3MgYW4gYEV4cG9ydEVycm9yYCBpZiB0aGUgc2VydmVyIGNhbm5vdFxyXG4gKiBiZSBjb25maWd1cmVkIGFuZCBzdGFydGVkLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0YXJ0U2VydmVyKHNlcnZlck9wdGlvbnMgPSB7fSkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBVcGRhdGUgdGhlIGluc3RhbmNlIG9wdGlvbnMgb2JqZWN0XHJcbiAgICBjb25zdCBvcHRpb25zID0gdXBkYXRlT3B0aW9ucyh7XHJcbiAgICAgIHNlcnZlcjogc2VydmVyT3B0aW9uc1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVXNlIHZhbGlkYXRlZCBvcHRpb25zXHJcbiAgICBzZXJ2ZXJPcHRpb25zID0gb3B0aW9ucy5zZXJ2ZXI7XHJcblxyXG4gICAgLy8gU3RvcCBpZiBub3QgZW5hYmxlZFxyXG4gICAgaWYgKCFzZXJ2ZXJPcHRpb25zLmVuYWJsZSB8fCAhYXBwKSB7XHJcbiAgICAgIHRocm93IG5ldyBFeHBvcnRFcnJvcihcclxuICAgICAgICAnW3NlcnZlcl0gU2VydmVyIGNhbm5vdCBiZSBzdGFydGVkIChub3QgZW5hYmxlZCBvciBubyBjb3JyZWN0IEV4cHJlc3MgYXBwIGZvdW5kKS4nLFxyXG4gICAgICAgIDUwMFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRvbyBiaWcgbGltaXRzIGxlYWQgdG8gdGltZW91dHMgaW4gdGhlIGV4cG9ydCBwcm9jZXNzIHdoZW5cclxuICAgIC8vIHRoZSByYXN0ZXJpemF0aW9uIHRpbWVvdXQgaXMgc2V0IHRvbyBsb3dcclxuICAgIGNvbnN0IHVwbG9hZExpbWl0Qnl0ZXMgPSBzZXJ2ZXJPcHRpb25zLnVwbG9hZExpbWl0ICogMTAyNCAqIDEwMjQ7XHJcblxyXG4gICAgLy8gTWVtb3J5IHN0b3JhZ2UgZm9yIG11bHRlciBwYWNrYWdlXHJcbiAgICBjb25zdCBzdG9yYWdlID0gbXVsdGVyLm1lbW9yeVN0b3JhZ2UoKTtcclxuXHJcbiAgICAvLyBFbmFibGUgcGFyc2luZyBvZiBmb3JtIGRhdGEgKGZpbGVzKSB3aXRoIG11bHRlciBwYWNrYWdlXHJcbiAgICBjb25zdCB1cGxvYWQgPSBtdWx0ZXIoe1xyXG4gICAgICBzdG9yYWdlLFxyXG4gICAgICBsaW1pdHM6IHtcclxuICAgICAgICBmaWVsZFNpemU6IHVwbG9hZExpbWl0Qnl0ZXNcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRGlzYWJsZSB0aGUgWC1Qb3dlcmVkLUJ5IGhlYWRlclxyXG4gICAgYXBwLmRpc2FibGUoJ3gtcG93ZXJlZC1ieScpO1xyXG5cclxuICAgIC8vIEVuYWJsZSBDT1JTIHN1cHBvcnRcclxuICAgIGFwcC51c2UoXHJcbiAgICAgIGNvcnMoe1xyXG4gICAgICAgIG1ldGhvZHM6IFsnUE9TVCcsICdHRVQnLCAnT1BUSU9OUyddXHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIC8vIEdldHRpbmcgYSBsb3Qgb2YgYFJhbmdlTm90U2F0aXNmaWFibGVFcnJvcmAgZXhjZXB0aW9ucyAoZXZlbiB0aG91Z2ggdGhpc1xyXG4gICAgLy8gaXMgYSBkZXByZWNhdGVkIG9wdGlvbnMsIGxldCdzIHRyeSB0byBzZXQgaXQgdG8gZmFsc2UpXHJcbiAgICBhcHAudXNlKChyZXF1ZXN0LCByZXNwb25zZSwgbmV4dCkgPT4ge1xyXG4gICAgICByZXNwb25zZS5zZXQoJ0FjY2VwdC1SYW5nZXMnLCAnbm9uZScpO1xyXG4gICAgICBuZXh0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBFbmFibGUgYm9keSBwYXJzZXIgZm9yIEpTT04gZGF0YVxyXG4gICAgYXBwLnVzZShcclxuICAgICAgZXhwcmVzcy5qc29uKHtcclxuICAgICAgICBsaW1pdDogdXBsb2FkTGltaXRCeXRlc1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBFbmFibGUgYm9keSBwYXJzZXIgZm9yIFVSTC1lbmNvZGVkIGZvcm0gZGF0YVxyXG4gICAgYXBwLnVzZShcclxuICAgICAgZXhwcmVzcy51cmxlbmNvZGVkKHtcclxuICAgICAgICBleHRlbmRlZDogdHJ1ZSxcclxuICAgICAgICBsaW1pdDogdXBsb2FkTGltaXRCeXRlc1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBVc2Ugb25seSBub24tZmlsZSBtdWx0aXBhcnQgZm9ybSBmaWVsZHNcclxuICAgIGFwcC51c2UodXBsb2FkLm5vbmUoKSk7XHJcblxyXG4gICAgLy8gU2V0IHVwIHN0YXRpYyBmb2xkZXIncyByb3V0ZVxyXG4gICAgYXBwLnVzZShleHByZXNzLnN0YXRpYyhqb2luKF9fZGlybmFtZSwgJ3B1YmxpYycpKSk7XHJcblxyXG4gICAgLy8gTGlzdGVuIEhUVFAgc2VydmVyXHJcbiAgICBpZiAoIXNlcnZlck9wdGlvbnMuc3NsLmZvcmNlKSB7XHJcbiAgICAgIC8vIE1haW4gc2VydmVyIGluc3RhbmNlIChIVFRQKVxyXG4gICAgICBjb25zdCBodHRwU2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcclxuXHJcbiAgICAgIC8vIEF0dGFjaCBlcnJvciBoYW5kbGVycyBhbmQgbGlzdGVuIHRvIHRoZSBzZXJ2ZXJcclxuICAgICAgX2F0dGFjaFNlcnZlckVycm9ySGFuZGxlcnMoaHR0cFNlcnZlcik7XHJcblxyXG4gICAgICAvLyBMaXN0ZW5cclxuICAgICAgaHR0cFNlcnZlci5saXN0ZW4oc2VydmVyT3B0aW9ucy5wb3J0LCBzZXJ2ZXJPcHRpb25zLmhvc3QsICgpID0+IHtcclxuICAgICAgICAvLyBTYXZlIHRoZSByZWZlcmVuY2UgdG8gSFRUUCBzZXJ2ZXJcclxuICAgICAgICBhY3RpdmVTZXJ2ZXJzLnNldChzZXJ2ZXJPcHRpb25zLnBvcnQsIGh0dHBTZXJ2ZXIpO1xyXG5cclxuICAgICAgICBsb2coXHJcbiAgICAgICAgICAzLFxyXG4gICAgICAgICAgYFtzZXJ2ZXJdIFN0YXJ0ZWQgSFRUUCBzZXJ2ZXIgb24gJHtzZXJ2ZXJPcHRpb25zLmhvc3R9OiR7c2VydmVyT3B0aW9ucy5wb3J0fS5gXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTGlzdGVuIEhUVFBTIHNlcnZlclxyXG4gICAgaWYgKHNlcnZlck9wdGlvbnMuc3NsLmVuYWJsZSkge1xyXG4gICAgICAvLyBTZXQgdXAgYW4gU1NMIHNlcnZlciBhbHNvXHJcbiAgICAgIGxldCBrZXksIGNlcnQ7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIEdldCB0aGUgU1NMIGtleVxyXG4gICAgICAgIGtleSA9IHJlYWRGaWxlU3luYyhcclxuICAgICAgICAgIGpvaW4oZ2V0QWJzb2x1dGVQYXRoKHNlcnZlck9wdGlvbnMuc3NsLmNlcnRQYXRoKSwgJ3NlcnZlci5rZXknKSxcclxuICAgICAgICAgICd1dGY4J1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIEdldCB0aGUgU1NMIGNlcnRpZmljYXRlXHJcbiAgICAgICAgY2VydCA9IHJlYWRGaWxlU3luYyhcclxuICAgICAgICAgIGpvaW4oZ2V0QWJzb2x1dGVQYXRoKHNlcnZlck9wdGlvbnMuc3NsLmNlcnRQYXRoKSwgJ3NlcnZlci5jcnQnKSxcclxuICAgICAgICAgICd1dGY4J1xyXG4gICAgICAgICk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgbG9nKFxyXG4gICAgICAgICAgMixcclxuICAgICAgICAgIGBbc2VydmVyXSBVbmFibGUgdG8gbG9hZCBrZXkvY2VydGlmaWNhdGUgZnJvbSB0aGUgJyR7c2VydmVyT3B0aW9ucy5zc2wuY2VydFBhdGh9JyBwYXRoLiBDb3VsZCBub3QgcnVuIHNlY3VyZWQgbGF5ZXIgc2VydmVyLmBcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoa2V5ICYmIGNlcnQpIHtcclxuICAgICAgICAvLyBNYWluIHNlcnZlciBpbnN0YW5jZSAoSFRUUFMpXHJcbiAgICAgICAgY29uc3QgaHR0cHNTZXJ2ZXIgPSBodHRwcy5jcmVhdGVTZXJ2ZXIoeyBrZXksIGNlcnQgfSwgYXBwKTtcclxuXHJcbiAgICAgICAgLy8gQXR0YWNoIGVycm9yIGhhbmRsZXJzIGFuZCBsaXN0ZW4gdG8gdGhlIHNlcnZlclxyXG4gICAgICAgIF9hdHRhY2hTZXJ2ZXJFcnJvckhhbmRsZXJzKGh0dHBzU2VydmVyKTtcclxuXHJcbiAgICAgICAgLy8gTGlzdGVuXHJcbiAgICAgICAgaHR0cHNTZXJ2ZXIubGlzdGVuKHNlcnZlck9wdGlvbnMuc3NsLnBvcnQsIHNlcnZlck9wdGlvbnMuaG9zdCwgKCkgPT4ge1xyXG4gICAgICAgICAgLy8gU2F2ZSB0aGUgcmVmZXJlbmNlIHRvIEhUVFBTIHNlcnZlclxyXG4gICAgICAgICAgYWN0aXZlU2VydmVycy5zZXQoc2VydmVyT3B0aW9ucy5zc2wucG9ydCwgaHR0cHNTZXJ2ZXIpO1xyXG5cclxuICAgICAgICAgIGxvZyhcclxuICAgICAgICAgICAgMyxcclxuICAgICAgICAgICAgYFtzZXJ2ZXJdIFN0YXJ0ZWQgSFRUUFMgc2VydmVyIG9uICR7c2VydmVyT3B0aW9ucy5ob3N0fToke3NlcnZlck9wdGlvbnMuc3NsLnBvcnR9LmBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXQgdXAgdGhlIHJhdGUgbGltaXRlclxyXG4gICAgcmF0ZUxpbWl0aW5nTWlkZGxld2FyZShhcHAsIHNlcnZlck9wdGlvbnMucmF0ZUxpbWl0aW5nKTtcclxuXHJcbiAgICAvLyBTZXQgdXAgdGhlIHZhbGlkYXRpb24gaGFuZGxlclxyXG4gICAgdmFsaWRhdGlvbk1pZGRsZXdhcmUoYXBwKTtcclxuXHJcbiAgICAvLyBTZXQgdXAgcm91dGVzXHJcbiAgICBleHBvcnRSb3V0ZXMoYXBwKTtcclxuICAgIGhlYWx0aFJvdXRlcyhhcHApO1xyXG4gICAgdWlSb3V0ZXMoYXBwKTtcclxuICAgIHZlcnNpb25DaGFuZ2VSb3V0ZXMoYXBwKTtcclxuXHJcbiAgICAvLyBTZXQgdXAgdGhlIGNlbnRyYWxpemVkIGVycm9yIGhhbmRsZXJcclxuICAgIGVycm9yTWlkZGxld2FyZShhcHApO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgRXhwb3J0RXJyb3IoXHJcbiAgICAgICdbc2VydmVyXSBDb3VsZCBub3QgY29uZmlndXJlIGFuZCBzdGFydCB0aGUgc2VydmVyLicsXHJcbiAgICAgIDUwMFxyXG4gICAgKS5zZXRFcnJvcihlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ2xvc2VzIGFsbCBzZXJ2ZXJzIGFzc29jaWF0ZWQgd2l0aCBFeHByZXNzIGFwcCBpbnN0YW5jZS5cclxuICpcclxuICogQGZ1bmN0aW9uIGNsb3NlU2VydmVyc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlU2VydmVycygpIHtcclxuICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgc2VydmVycyB3b3JraW5nXHJcbiAgaWYgKGFjdGl2ZVNlcnZlcnMuc2l6ZSA+IDApIHtcclxuICAgIGxvZyg0LCBgW3NlcnZlcl0gQ2xvc2luZyBhbGwgc2VydmVycy5gKTtcclxuXHJcbiAgICAvLyBDbG9zZSBlYWNoIG9uZSBvZiBzZXJ2ZXJzXHJcbiAgICBmb3IgKGNvbnN0IFtwb3J0LCBzZXJ2ZXJdIG9mIGFjdGl2ZVNlcnZlcnMpIHtcclxuICAgICAgc2VydmVyLmNsb3NlKCgpID0+IHtcclxuICAgICAgICBhY3RpdmVTZXJ2ZXJzLmRlbGV0ZShwb3J0KTtcclxuICAgICAgICBsb2coNCwgYFtzZXJ2ZXJdIENsb3NlZCBzZXJ2ZXIgb24gcG9ydDogJHtwb3J0fS5gKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IGFsbCBzZXJ2ZXJzIGFzc29jaWF0ZWQgd2l0aCBFeHByZXNzIGFwcCBpbnN0YW5jZS5cclxuICpcclxuICogQGZ1bmN0aW9uIGdldFNlcnZlcnNcclxuICpcclxuICogQHJldHVybnMge0FycmF5PE9iamVjdD59IFNlcnZlcnMgYXNzb2NpYXRlZCB3aXRoIEV4cHJlc3MgYXBwIGluc3RhbmNlLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZlcnMoKSB7XHJcbiAgcmV0dXJuIGFjdGl2ZVNlcnZlcnM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIEV4cHJlc3MgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBnZXRFeHByZXNzXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtFeHByZXNzfSBUaGUgRXhwcmVzcyBpbnN0YW5jZS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHByZXNzKCkge1xyXG4gIHJldHVybiBleHByZXNzO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRoZSBFeHByZXNzIGFwcCBpbnN0YW5jZS5cclxuICpcclxuICogQGZ1bmN0aW9uIGdldEFwcFxyXG4gKlxyXG4gKiBAcmV0dXJucyB7RXhwcmVzc30gVGhlIEV4cHJlc3MgYXBwIGluc3RhbmNlLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFwcCgpIHtcclxuICByZXR1cm4gYXBwO1xyXG59XHJcblxyXG4vKipcclxuICogRW5hYmxlIHJhdGUgbGltaXRpbmcgZm9yIHRoZSBzZXJ2ZXIuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBlbmFibGVSYXRlTGltaXRpbmdcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHJhdGVMaW1pdGluZ09wdGlvbnMgLSBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZ1xyXG4gKiBgcmF0ZUxpbWl0aW5nYCBvcHRpb25zLiBUaGlzIG9iamVjdCBtYXkgaW5jbHVkZSBhIHBhcnRpYWwgb3IgY29tcGxldGUgc2V0XHJcbiAqIG9mIHRoZSBgcmF0ZUxpbWl0aW5nYCBvcHRpb25zLiBJZiB0aGUgb3B0aW9ucyBhcmUgcGFydGlhbCwgbWlzc2luZyB2YWx1ZXNcclxuICogd2lsbCBkZWZhdWx0IHRvIHRoZSBjdXJyZW50IGdsb2JhbCBjb25maWd1cmF0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZVJhdGVMaW1pdGluZyhyYXRlTGltaXRpbmdPcHRpb25zKSB7XHJcbiAgLy8gVXBkYXRlIHRoZSBpbnN0YW5jZSBvcHRpb25zIG9iamVjdFxyXG4gIGNvbnN0IG9wdGlvbnMgPSB1cGRhdGVPcHRpb25zKHtcclxuICAgIHNlcnZlcjoge1xyXG4gICAgICByYXRlTGltaXRpbmc6IHJhdGVMaW1pdGluZ09wdGlvbnNcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gU2V0IHRoZSByYXRlIGxpbWl0aW5nIG9wdGlvbnNcclxuICByYXRlTGltaXRpbmdNaWRkbGV3YXJlKGFwcCwgb3B0aW9ucy5zZXJ2ZXIucmF0ZUxpbWl0aW5nT3B0aW9ucyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBcHBseSBtaWRkbGV3YXJlKHMpIHRvIGEgc3BlY2lmaWMgcGF0aC5cclxuICpcclxuICogQGZ1bmN0aW9uIHVzZVxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFRoZSBwYXRoIHRvIHdoaWNoIHRoZSBtaWRkbGV3YXJlKHMpIHNob3VsZCBiZSBhcHBsaWVkLlxyXG4gKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBtaWRkbGV3YXJlcyAtIFRoZSBtaWRkbGV3YXJlIGZ1bmN0aW9uKHMpIHRvIGJlIGFwcGxpZWQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdXNlKHBhdGgsIC4uLm1pZGRsZXdhcmVzKSB7XHJcbiAgYXBwLnVzZShwYXRoLCAuLi5taWRkbGV3YXJlcyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXQgdXAgYSByb3V0ZSB3aXRoIEdFVCBtZXRob2QgYW5kIGFwcGx5IG1pZGRsZXdhcmUocykuXHJcbiAqXHJcbiAqIEBmdW5jdGlvbiBnZXRcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgcGF0aCB0byB3aGljaCB0aGUgbWlkZGxld2FyZShzKSBzaG91bGQgYmUgYXBwbGllZC5cclxuICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gbWlkZGxld2FyZXMgLSBUaGUgbWlkZGxld2FyZSBmdW5jdGlvbihzKSB0byBiZSBhcHBsaWVkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldChwYXRoLCAuLi5taWRkbGV3YXJlcykge1xyXG4gIGFwcC5nZXQocGF0aCwgLi4ubWlkZGxld2FyZXMpO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IHVwIGEgcm91dGUgd2l0aCBQT1NUIG1ldGhvZCBhbmQgYXBwbHkgbWlkZGxld2FyZShzKS5cclxuICpcclxuICogQGZ1bmN0aW9uIHBvc3RcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgcGF0aCB0byB3aGljaCB0aGUgbWlkZGxld2FyZShzKSBzaG91bGQgYmUgYXBwbGllZC5cclxuICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gbWlkZGxld2FyZXMgLSBUaGUgbWlkZGxld2FyZSBmdW5jdGlvbihzKSB0byBiZSBhcHBsaWVkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBvc3QocGF0aCwgLi4ubWlkZGxld2FyZXMpIHtcclxuICBhcHAucG9zdChwYXRoLCAuLi5taWRkbGV3YXJlcyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBdHRhY2ggZXJyb3IgaGFuZGxlcnMgdG8gdGhlIHNlcnZlci5cclxuICpcclxuICogQGZ1bmN0aW9uIF9hdHRhY2hTZXJ2ZXJFcnJvckhhbmRsZXJzXHJcbiAqXHJcbiAqIEBwYXJhbSB7KGh0dHAuU2VydmVyfGh0dHBzLlNlcnZlcil9IHNlcnZlciAtIFRoZSBIVFRQL0hUVFBTIHNlcnZlciBpbnN0YW5jZS5cclxuICovXHJcbmZ1bmN0aW9uIF9hdHRhY2hTZXJ2ZXJFcnJvckhhbmRsZXJzKHNlcnZlcikge1xyXG4gIHNlcnZlci5vbignY2xpZW50RXJyb3InLCAoZXJyb3IsIHNvY2tldCkgPT4ge1xyXG4gICAgbG9nV2l0aFN0YWNrKFxyXG4gICAgICAxLFxyXG4gICAgICBlcnJvcixcclxuICAgICAgYFtzZXJ2ZXJdIENsaWVudCBlcnJvcjogJHtlcnJvci5tZXNzYWdlfSwgZGVzdHJveWluZyBzb2NrZXQuYFxyXG4gICAgKTtcclxuICAgIHNvY2tldC5kZXN0cm95KCk7XHJcbiAgfSk7XHJcblxyXG4gIHNlcnZlci5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcclxuICAgIGxvZ1dpdGhTdGFjaygxLCBlcnJvciwgYFtzZXJ2ZXJdIFNlcnZlciBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gIH0pO1xyXG5cclxuICBzZXJ2ZXIub24oJ2Nvbm5lY3Rpb24nLCAoc29ja2V0KSA9PiB7XHJcbiAgICBzb2NrZXQub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgIGxvZ1dpdGhTdGFjaygxLCBlcnJvciwgYFtzZXJ2ZXJdIFNvY2tldCBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBzdGFydFNlcnZlcixcclxuICBjbG9zZVNlcnZlcnMsXHJcbiAgZ2V0U2VydmVycyxcclxuICBnZXRFeHByZXNzLFxyXG4gIGdldEFwcCxcclxuICBlbmFibGVSYXRlTGltaXRpbmcsXHJcbiAgdXNlLFxyXG4gIGdldCxcclxuICBwb3N0XHJcbn07XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBIYW5kbGVzIGdyYWNlZnVsIHNodXRkb3duIG9mIHRoZSBIaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXIsIGVuc3VyaW5nXHJcbiAqIHByb3BlciBjbGVhbnVwIG9mIHJlc291cmNlcyBzdWNoIGFzIGJyb3dzZXIsIHBhZ2VzLCBzZXJ2ZXJzLCBhbmQgdGltZXJzLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGtpbGxQb29sIH0gZnJvbSAnLi9wb29sLmpzJztcclxuaW1wb3J0IHsgY2xlYXJBbGxUaW1lcnMgfSBmcm9tICcuL3RpbWVyLmpzJztcclxuXHJcbmltcG9ydCB7IGNsb3NlU2VydmVycyB9IGZyb20gJy4vc2VydmVyL3NlcnZlci5qcyc7XHJcblxyXG4vKipcclxuICogUGVyZm9ybXMgY2xlYW51cCBvcGVyYXRpb25zIHRvIGVuc3VyZSBhIGdyYWNlZnVsIHNodXRkb3duIG9mIHRoZSBwcm9jZXNzLlxyXG4gKiBUaGlzIGluY2x1ZGVzIGNsZWFyaW5nIGFsbCByZWdpc3RlcmVkIHRpbWVvdXRzL2ludGVydmFscywgY2xvc2luZyBhY3RpdmVcclxuICogc2VydmVycywgdGVybWluYXRpbmcgcmVzb3VyY2VzIChwYWdlcykgb2YgdGhlIHBvb2wsIHBvb2wgaXRzZWxmLCBhbmQgY2xvc2luZ1xyXG4gKiB0aGUgYnJvd3Nlci5cclxuICpcclxuICogQGZ1bmN0aW9uIHNodXRkb3duQ2xlYW5VcFxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gW2V4aXRDb2RlPTBdIC0gVGhlIGV4aXQgY29kZSB0byB1c2Ugd2l0aCBgcHJvY2Vzcy5leGl0KClgLlxyXG4gKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgMGAuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2h1dGRvd25DbGVhblVwKGV4aXRDb2RlID0gMCkge1xyXG4gIC8vIEF3YWl0IGZyZWVpbmcgYWxsIHJlc291cmNlc1xyXG4gIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbXHJcbiAgICAvLyBDbGVhciBhbGwgb25nb2luZyBpbnRlcnZhbHNcclxuICAgIGNsZWFyQWxsVGltZXJzKCksXHJcblxyXG4gICAgLy8gR2V0IGF2YWlsYWJsZSBzZXJ2ZXIgaW5zdGFuY2VzIChIVFRQL0hUVFBTKSBhbmQgY2xvc2UgdGhlbVxyXG4gICAgY2xvc2VTZXJ2ZXJzKCksXHJcblxyXG4gICAgLy8gQ2xvc2UgYW4gYWN0aXZlIHBvb2wgYWxvbmcgd2l0aCBpdHMgd29ya2VycyBhbmQgdGhlIGJyb3dzZXIgaW5zdGFuY2VcclxuICAgIGtpbGxQb29sKClcclxuICBdKTtcclxuXHJcbiAgLy8gRXhpdCBwcm9jZXNzIHdpdGggYSBjb3JyZWN0IGNvZGVcclxuICBwcm9jZXNzLmV4aXQoZXhpdENvZGUpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgc2h1dGRvd25DbGVhblVwXHJcbn07XHJcbiIsIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcblxyXG5IaWdoY2hhcnRzIEV4cG9ydCBTZXJ2ZXJcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNi0yMDI1LCBIaWdoc29mdFxyXG5cclxuTGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbmNlLlxyXG5cclxuQWRkaXRpb25hbGx5IGEgdmFsaWQgSGlnaGNoYXJ0cyBsaWNlbnNlIGlzIHJlcXVpcmVkIGZvciB1c2UuXHJcblxyXG5TZWUgTElDRU5TRSBmaWxlIGluIHJvb3QgZm9yIGRldGFpbHMuXHJcblxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLyoqXHJcbiAqIEBvdmVydmlldyBUaGlzIGNvcmUgbW9kdWxlIGluaXRpYWxpemVzIGFuZCBtYW5hZ2VzIHRoZSBIaWdoY2hhcnRzIEV4cG9ydFxyXG4gKiBTZXJ2ZXIuIFRoZSBtYWluIGBpbml0RXhwb3J0YCBmdW5jdGlvbiBoYW5kbGVzIGxvZ2dpbmcsIHNjcmlwdCBjYWNoaW5nLFxyXG4gKiByZXNvdXJjZSBwb29saW5nLCBicm93c2VyIHN0YXJ0dXAsIGFuZCBlbnN1cmVzIGdyYWNlZnVsIHByb2Nlc3MgY2xlYW51cFxyXG4gKiBvbiBleGl0LiBBZGRpdGlvbmFsbHksIGl0IHByb3ZpZGVzIEFQSSBmdW5jdGlvbnMgZm9yIHVzaW5nIGl0IGFzIGEgTm9kZS5qc1xyXG4gKiBtb2R1bGUsIG9mZmVyaW5nIGZ1bmN0aW9uYWxpdGllcyBmb3IgcHJvY2Vzc2luZyBvcHRpb25zLCBjb25maWd1cmluZ1xyXG4gKiBhbmQgcGVyZm9ybWluZyBleHBvcnRzLCBhbmQgc2V0dGluZyB1cCBzZXJ2ZXIuXHJcbiAqL1xyXG5cclxuaW1wb3J0ICdjb2xvcnMnO1xyXG5cclxuaW1wb3J0IHsgY2hlY2tDYWNoZSB9IGZyb20gJy4vY2FjaGUuanMnO1xyXG5pbXBvcnQge1xyXG4gIGJhdGNoRXhwb3J0LFxyXG4gIHNpbmdsZUV4cG9ydCxcclxuICBzdGFydEV4cG9ydCxcclxuICBzZXRBbGxvd0NvZGVFeGVjdXRpb25cclxufSBmcm9tICcuL2NoYXJ0LmpzJztcclxuaW1wb3J0IHtcclxuICBnZXRPcHRpb25zLFxyXG4gIHVwZGF0ZU9wdGlvbnMsXHJcbiAgbWFwVG9OZXdPcHRpb25zLFxyXG4gIHZhbGlkYXRlT3B0aW9uLFxyXG4gIHZhbGlkYXRlT3B0aW9uc1xyXG59IGZyb20gJy4vY29uZmlnLmpzJztcclxuaW1wb3J0IHtcclxuICBsb2csXHJcbiAgbG9nV2l0aFN0YWNrLFxyXG4gIGxvZ1pvZElzc3VlcyxcclxuICBpbml0TG9nZ2luZyxcclxuICBlbmFibGVDb25zb2xlTG9nZ2luZyxcclxuICBlbmFibGVGaWxlTG9nZ2luZyxcclxuICBzZXRMb2dMZXZlbFxyXG59IGZyb20gJy4vbG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgaW5pdFBvb2wsIGtpbGxQb29sIH0gZnJvbSAnLi9wb29sLmpzJztcclxuaW1wb3J0IHsgc2h1dGRvd25DbGVhblVwIH0gZnJvbSAnLi9yZXNvdXJjZVJlbGVhc2UuanMnO1xyXG5cclxuaW1wb3J0IHNlcnZlciBmcm9tICcuL3NlcnZlci9zZXJ2ZXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemVzIHRoZSBleHBvcnQgcHJvY2Vzcy4gVGFza3Mgc3VjaCBhcyBjb25maWd1cmluZyBsb2dnaW5nLCBjaGVja2luZ1xyXG4gKiB0aGUgY2FjaGUgYW5kIHNvdXJjZXMsIGFuZCBpbml0aWFsaXppbmcgdGhlIHJlc291cmNlIHBvb2wgb2NjdXIgZHVyaW5nIHRoaXNcclxuICogc3RhZ2UuXHJcbiAqXHJcbiAqIFRoaXMgZnVuY3Rpb24gbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGF0dGVtcHRpbmcgdG8gZXhwb3J0IGNoYXJ0cyBvciBzZXRcclxuICogdXAgYSBzZXJ2ZXIuXHJcbiAqXHJcbiAqIEBhc3luY1xyXG4gKiBAZnVuY3Rpb24gaW5pdEV4cG9ydFxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gW2luaXRPcHRpb25zPXt9XSAtIFRoZSBgaW5pdE9wdGlvbnNgIG9iamVjdCwgd2hpY2ggbWF5XHJcbiAqIGJlIGEgcGFydGlhbCBvciBjb21wbGV0ZSBzZXQgb2Ygb3B0aW9ucy4gSWYgdGhlIG9wdGlvbnMgYXJlIHBhcnRpYWwsIG1pc3NpbmdcclxuICogdmFsdWVzIHdpbGwgZGVmYXVsdCB0byB0aGUgY3VycmVudCBnbG9iYWwgY29uZmlndXJhdGlvbi4gVGhlIGRlZmF1bHQgdmFsdWVcclxuICogaXMgYW4gZW1wdHkgb2JqZWN0LlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRFeHBvcnQoaW5pdE9wdGlvbnMgPSB7fSkge1xyXG4gIC8vIEluaXQsIHZhbGlkYXRlIGFuZCB1cGRhdGUgdGhlIG9wdGlvbnMgb2JqZWN0XHJcbiAgY29uc3Qgb3B0aW9ucyA9IHVwZGF0ZU9wdGlvbnMoaW5pdE9wdGlvbnMpO1xyXG5cclxuICAvLyBTZXQgdGhlIGBhbGxvd0NvZGVFeGVjdXRpb25gIHBlciBleHBvcnQgbW9kdWxlIHNjb3BlXHJcbiAgc2V0QWxsb3dDb2RlRXhlY3V0aW9uKG9wdGlvbnMuY3VzdG9tTG9naWMuYWxsb3dDb2RlRXhlY3V0aW9uKTtcclxuXHJcbiAgLy8gSW5pdCB0aGUgbG9nZ2luZ1xyXG4gIGluaXRMb2dnaW5nKG9wdGlvbnMubG9nZ2luZyk7XHJcblxyXG4gIC8vIEF0dGFjaCBwcm9jZXNzJyBleGl0IGxpc3RlbmVyc1xyXG4gIGlmIChvcHRpb25zLm90aGVyLmxpc3RlblRvUHJvY2Vzc0V4aXRzKSB7XHJcbiAgICBfYXR0YWNoUHJvY2Vzc0V4aXRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIC8vIENoZWNrIHRoZSBjdXJyZW50IHN0YXR1cyBvZiBjYWNoZVxyXG4gIGF3YWl0IGNoZWNrQ2FjaGUob3B0aW9ucy5oaWdoY2hhcnRzLCBvcHRpb25zLnNlcnZlci5wcm94eSk7XHJcblxyXG4gIC8vIEluaXQgdGhlIHBvb2xcclxuICBhd2FpdCBpbml0UG9vbChvcHRpb25zLnBvb2wsIG9wdGlvbnMucHVwcGV0ZWVyLmFyZ3MpO1xyXG59XHJcblxyXG4vKipcclxuICogQXR0YWNoZXMgZXhpdCBsaXN0ZW5lcnMgdG8gdGhlIHByb2Nlc3MsIGVuc3VyaW5nIHByb3BlciBjbGVhbnVwIG9mIHJlc291cmNlc1xyXG4gKiBhbmQgdGVybWluYXRpb24gb24gZXhpdCBzaWduYWxzLiBIYW5kbGVzICdleGl0JywgJ1NJR0lOVCcsICdTSUdURVJNJyxcclxuICogYW5kICd1bmNhdWdodEV4Y2VwdGlvbicgZXZlbnRzLlxyXG4gKlxyXG4gKiBAZnVuY3Rpb24gX2F0dGFjaFByb2Nlc3NFeGl0TGlzdGVuZXJzXHJcbiAqL1xyXG5mdW5jdGlvbiBfYXR0YWNoUHJvY2Vzc0V4aXRMaXN0ZW5lcnMoKSB7XHJcbiAgbG9nKDMsICdbcHJvY2Vzc10gQXR0YWNoaW5nIGV4aXQgbGlzdGVuZXJzIHRvIHRoZSBwcm9jZXNzLicpO1xyXG5cclxuICAvLyBIYW5kbGVyIGZvciB0aGUgJ2V4aXQnXHJcbiAgcHJvY2Vzcy5vbignZXhpdCcsIChjb2RlKSA9PiB7XHJcbiAgICBsb2coNCwgYFtwcm9jZXNzXSBQcm9jZXNzIGV4aXRlZCB3aXRoIGNvZGU6ICR7Y29kZX0uYCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEhhbmRsZXIgZm9yIHRoZSAnU0lHSU5UJ1xyXG4gIHByb2Nlc3Mub24oJ1NJR0lOVCcsIGFzeW5jIChuYW1lLCBjb2RlKSA9PiB7XHJcbiAgICBsb2coNCwgYFtwcm9jZXNzXSBUaGUgJHtuYW1lfSBldmVudCB3aXRoIGNvZGU6ICR7Y29kZX0uYCk7XHJcbiAgICBhd2FpdCBzaHV0ZG93bkNsZWFuVXAoKTtcclxuICB9KTtcclxuXHJcbiAgLy8gSGFuZGxlciBmb3IgdGhlICdTSUdURVJNJ1xyXG4gIHByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAobmFtZSwgY29kZSkgPT4ge1xyXG4gICAgbG9nKDQsIGBbcHJvY2Vzc10gVGhlICR7bmFtZX0gZXZlbnQgd2l0aCBjb2RlOiAke2NvZGV9LmApO1xyXG4gICAgYXdhaXQgc2h1dGRvd25DbGVhblVwKCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEhhbmRsZXIgZm9yIHRoZSAnU0lHSFVQJ1xyXG4gIHByb2Nlc3Mub24oJ1NJR0hVUCcsIGFzeW5jIChuYW1lLCBjb2RlKSA9PiB7XHJcbiAgICBsb2coNCwgYFtwcm9jZXNzXSBUaGUgJHtuYW1lfSBldmVudCB3aXRoIGNvZGU6ICR7Y29kZX0uYCk7XHJcbiAgICBhd2FpdCBzaHV0ZG93bkNsZWFuVXAoKTtcclxuICB9KTtcclxuXHJcbiAgLy8gSGFuZGxlciBmb3IgdGhlICd1bmNhdWdodEV4Y2VwdGlvbidcclxuICBwcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIGFzeW5jIChlcnJvciwgbmFtZSkgPT4ge1xyXG4gICAgbG9nV2l0aFN0YWNrKDEsIGVycm9yLCBgW3Byb2Nlc3NdIFRoZSAke25hbWV9IGVycm9yLmApO1xyXG4gICAgYXdhaXQgc2h1dGRvd25DbGVhblVwKDEpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgLy8gU2VydmVyXHJcbiAgLi4uc2VydmVyLFxyXG5cclxuICAvLyBPcHRpb25zXHJcbiAgZ2V0T3B0aW9ucyxcclxuICB1cGRhdGVPcHRpb25zLFxyXG4gIG1hcFRvTmV3T3B0aW9ucyxcclxuXHJcbiAgLy8gVmFsaWRhdGlvblxyXG4gIHZhbGlkYXRlT3B0aW9uLFxyXG4gIHZhbGlkYXRlT3B0aW9ucyxcclxuXHJcbiAgLy8gRXhwb3J0aW5nXHJcbiAgaW5pdEV4cG9ydCxcclxuICBzaW5nbGVFeHBvcnQsXHJcbiAgYmF0Y2hFeHBvcnQsXHJcbiAgc3RhcnRFeHBvcnQsXHJcblxyXG4gIC8vIFJlbGVhc2VcclxuICBraWxsUG9vbCxcclxuICBzaHV0ZG93bkNsZWFuVXAsXHJcblxyXG4gIC8vIExvZ3NcclxuICBsb2csXHJcbiAgbG9nV2l0aFN0YWNrLFxyXG4gIGxvZ1pvZElzc3VlcyxcclxuICBzZXRMb2dMZXZlbDogZnVuY3Rpb24gKGxldmVsKSB7XHJcbiAgICAvLyBVcGRhdGUgdGhlIGluc3RhbmNlIG9wdGlvbnMgb2JqZWN0XHJcbiAgICBjb25zdCBvcHRpb25zID0gdXBkYXRlT3B0aW9ucyh7XHJcbiAgICAgIGxvZ2dpbmc6IHtcclxuICAgICAgICBsZXZlbFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDYWxsIHRoZSBmdW5jdGlvblxyXG4gICAgc2V0TG9nTGV2ZWwob3B0aW9ucy5sb2dnaW5nLmxldmVsKTtcclxuICB9LFxyXG4gIGVuYWJsZUNvbnNvbGVMb2dnaW5nOiBmdW5jdGlvbiAodG9Db25zb2xlKSB7XHJcbiAgICAvLyBVcGRhdGUgdGhlIGluc3RhbmNlIG9wdGlvbnMgb2JqZWN0XHJcbiAgICBjb25zdCBvcHRpb25zID0gdXBkYXRlT3B0aW9ucyh7XHJcbiAgICAgIGxvZ2dpbmc6IHtcclxuICAgICAgICB0b0NvbnNvbGVcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2FsbCB0aGUgZnVuY3Rpb25cclxuICAgIGVuYWJsZUNvbnNvbGVMb2dnaW5nKG9wdGlvbnMubG9nZ2luZy50b0NvbnNvbGUpO1xyXG4gIH0sXHJcbiAgZW5hYmxlRmlsZUxvZ2dpbmc6IGZ1bmN0aW9uIChkZXN0LCBmaWxlLCB0b0ZpbGUpIHtcclxuICAgIC8vIFVwZGF0ZSB0aGUgaW5zdGFuY2Ugb3B0aW9ucyBvYmplY3RcclxuICAgIGNvbnN0IG9wdGlvbnMgPSB1cGRhdGVPcHRpb25zKHtcclxuICAgICAgbG9nZ2luZzoge1xyXG4gICAgICAgIGRlc3QsXHJcbiAgICAgICAgZmlsZSxcclxuICAgICAgICB0b0ZpbGVcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2FsbCB0aGUgZnVuY3Rpb25cclxuICAgIGVuYWJsZUZpbGVMb2dnaW5nKFxyXG4gICAgICBvcHRpb25zLmxvZ2dpbmcuZGVzdCxcclxuICAgICAgb3B0aW9ucy5sb2dnaW5nLmZpbGUsXHJcbiAgICAgIG9wdGlvbnMubG9nZ2luZy50b0ZpbGVcclxuICAgICk7XHJcbiAgfVxyXG59O1xyXG4iXSwibmFtZXMiOlsiX19kaXJuYW1lIiwiZmlsZVVSTFRvUGF0aCIsIlVSTCIsImRvY3VtZW50IiwicmVxdWlyZSIsInBhdGhUb0ZpbGVVUkwiLCJfX2ZpbGVuYW1lIiwiaHJlZiIsIl9kb2N1bWVudEN1cnJlbnRTY3JpcHQiLCJ0YWdOYW1lIiwidG9VcHBlckNhc2UiLCJzcmMiLCJiYXNlVVJJIiwiZGVlcENvcHkiLCJvYmpBcnIiLCJvYmpBcnJDb3B5IiwiQXJyYXkiLCJpc0FycmF5Iiwia2V5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZ2V0QWJzb2x1dGVQYXRoIiwicGF0aCIsImlzQWJzb2x1dGUiLCJub3JtYWxpemUiLCJyZXNvbHZlIiwiZ2V0QmFzZTY0IiwiaW5wdXQiLCJ0eXBlIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwiZ2V0TmV3RGF0ZSIsIkRhdGUiLCJzcGxpdCIsInRyaW0iLCJnZXROZXdEYXRlVGltZSIsImdldFRpbWUiLCJpc09iamVjdCIsIml0ZW0iLCJpc09iamVjdEVtcHR5Iiwia2V5cyIsImxlbmd0aCIsImlzUHJpdmF0ZVJhbmdlVXJsRm91bmQiLCJzb21lIiwicGF0dGVybiIsInRlc3QiLCJtZWFzdXJlVGltZSIsInN0YXJ0IiwicHJvY2VzcyIsImhydGltZSIsImJpZ2ludCIsIk51bWJlciIsInJvdW5kTnVtYmVyIiwidmFsdWUiLCJwcmVjaXNpb24iLCJtdWx0aXBsaWVyIiwiTWF0aCIsInBvdyIsInJvdW5kIiwiY29sb3JzIiwibG9nZ2luZyIsInRvQ29uc29sZSIsInRvRmlsZSIsInBhdGhDcmVhdGVkIiwicGF0aFRvTG9nIiwibGV2ZWxzRGVzYyIsInRpdGxlIiwiY29sb3IiLCJsb2ciLCJhcmdzIiwibmV3TGV2ZWwiLCJ0ZXh0cyIsImxldmVsIiwicHJlZml4IiwiX2xvZ1RvRmlsZSIsImNvbnNvbGUiLCJhcHBseSIsInVuZGVmaW5lZCIsImNvbmNhdCIsImxvZ1dpdGhTdGFjayIsImVycm9yIiwiY3VzdG9tTWVzc2FnZSIsIm1haW5NZXNzYWdlIiwibWVzc2FnZSIsInN0YWNrTWVzc2FnZSIsInN0YWNrIiwicHVzaCIsInNoaWZ0IiwibG9nWm9kSXNzdWVzIiwiaXNzdWVzIiwibWFwIiwiaXNzdWUiLCJqb2luIiwiaW5pdExvZ2dpbmciLCJsb2dnaW5nT3B0aW9ucyIsImRlc3QiLCJmaWxlIiwic2V0TG9nTGV2ZWwiLCJlbmFibGVDb25zb2xlTG9nZ2luZyIsImVuYWJsZUZpbGVMb2dnaW5nIiwiaXNJbnRlZ2VyIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsImFwcGVuZEZpbGUiLCJkZWZhdWx0Q29uZmlnIiwicHVwcGV0ZWVyIiwidHlwZXMiLCJlbnZMaW5rIiwiY2xpTmFtZSIsImRlc2NyaXB0aW9uIiwicHJvbXB0T3B0aW9ucyIsInNlcGFyYXRvciIsImhpZ2hjaGFydHMiLCJ2ZXJzaW9uIiwiY2RuVXJsIiwiZm9yY2VGZXRjaCIsImNhY2hlUGF0aCIsImNvcmVTY3JpcHRzIiwiaW5zdHJ1Y3Rpb25zIiwibW9kdWxlU2NyaXB0cyIsImluZGljYXRvclNjcmlwdHMiLCJjdXN0b21TY3JpcHRzIiwiZXhwb3J0IiwiaW5maWxlIiwiaW5zdHIiLCJvcHRpb25zIiwic3ZnIiwiYmF0Y2giLCJvdXRmaWxlIiwiaGludCIsImNob2ljZXMiLCJjb25zdHIiLCJiNjQiLCJub0Rvd25sb2FkIiwiaGVpZ2h0Iiwid2lkdGgiLCJzY2FsZSIsImRlZmF1bHRIZWlnaHQiLCJkZWZhdWx0V2lkdGgiLCJkZWZhdWx0U2NhbGUiLCJtaW4iLCJtYXgiLCJnbG9iYWxPcHRpb25zIiwidGhlbWVPcHRpb25zIiwicmFzdGVyaXphdGlvblRpbWVvdXQiLCJjdXN0b21Mb2dpYyIsImFsbG93Q29kZUV4ZWN1dGlvbiIsImFsbG93RmlsZVJlc291cmNlcyIsImN1c3RvbUNvZGUiLCJjYWxsYmFjayIsInJlc291cmNlcyIsImxvYWRDb25maWciLCJsZWdhY3lOYW1lIiwiY3JlYXRlQ29uZmlnIiwic2VydmVyIiwiZW5hYmxlIiwiaG9zdCIsInBvcnQiLCJ1cGxvYWRMaW1pdCIsImJlbmNobWFya2luZyIsInByb3h5IiwidGltZW91dCIsInJhdGVMaW1pdGluZyIsIm1heFJlcXVlc3RzIiwid2luZG93IiwiZGVsYXkiLCJ0cnVzdFByb3h5Iiwic2tpcEtleSIsInNraXBUb2tlbiIsInNzbCIsImZvcmNlIiwiY2VydFBhdGgiLCJwb29sIiwibWluV29ya2VycyIsIm1heFdvcmtlcnMiLCJ3b3JrTGltaXQiLCJhY3F1aXJlVGltZW91dCIsImNyZWF0ZVRpbWVvdXQiLCJkZXN0cm95VGltZW91dCIsImlkbGVUaW1lb3V0IiwiY3JlYXRlUmV0cnlJbnRlcnZhbCIsInJlYXBlckludGVydmFsIiwidWkiLCJyb3V0ZSIsIm90aGVyIiwibm9kZUVudiIsImxpc3RlblRvUHJvY2Vzc0V4aXRzIiwibm9Mb2dvIiwiaGFyZFJlc2V0UGFnZSIsImJyb3dzZXJTaGVsbE1vZGUiLCJ2YWxpZGF0aW9uIiwiZGVidWciLCJoZWFkbGVzcyIsImRldnRvb2xzIiwibGlzdGVuVG9Db25zb2xlIiwiZHVtcGlvIiwic2xvd01vIiwiZGVidWdnaW5nUG9ydCIsImRvdGVudiIsImNvbmZpZyIsInoiLCJzZXRFcnJvck1hcCIsIl9jdXN0b21FcnJvck1hcCIsInYiLCJib29sZWFuIiwic3RyaWN0Q2hlY2siLCJ1bmlvbiIsImVudW0iLCJ0cmFuc2Zvcm0iLCJpbmNsdWRlcyIsIm51bGxhYmxlIiwic3RyaW5nIiwicmVmaW5lIiwicGFyYW1zIiwiZXJyb3JNZXNzYWdlIiwidmFsdWVzIiwic3RyaW5nQXJyYXkiLCJmaWx0ZXJDYWxsYmFjayIsImFycmF5U2NoZW1hIiwiYXJyYXkiLCJzdHJpbmdTY2hlbWEiLCJzdGFydHNXaXRoIiwic2xpY2UiLCJlbmRzV2l0aCIsInRyYW5zZm9ybUNhbGxiYWNrIiwiZmlsdGVyIiwicG9zaXRpdmVOdW0iLCJudW1iZXIiLCJwb3NpdGl2ZSIsImlzTmFOIiwibm9uTmVnYXRpdmVOdW0iLCJub25uZWdhdGl2ZSIsInByZWZpeGVzIiwiY2hhcnRDb25maWciLCJvYmplY3QiLCJwYXNzdGhyb3VnaCIsImFkZGl0aW9uYWxPcHRpb25zIiwidmFsaWRhdG9ycyIsImFkbWluVG9rZW4iLCJpbmRleE9mIiwiZ3RlIiwibHRlIiwidGhpcyIsIm9iamVjdFNjaGVtYSIsImpzIiwiY3NzIiwiZmlsZXMiLCJwYXJ0aWFsIiwic3RyaW5nU2NoZW1hMSIsInN0cmluZ1NjaGVtYTIiLCJlbmFibGVTZXJ2ZXIiLCJzZXJ2ZXJCZW5jaG1hcmtpbmciLCJwcm94eUhvc3QiLCJwcm94eVBvcnQiLCJwcm94eVRpbWVvdXQiLCJlbmFibGVSYXRlTGltaXRpbmciLCJlbmFibGVTc2wiLCJzc2xGb3JjZSIsInNzbFBvcnQiLCJzc2xDZXJ0UGF0aCIsInBvb2xCZW5jaG1hcmtpbmciLCJyZXNvdXJjZXNJbnRlcnZhbCIsImxvZ0xldmVsIiwiaW50IiwibG9nRmlsZSIsImxvZ0Rlc3QiLCJsb2dUb0NvbnNvbGUiLCJsb2dUb0ZpbGUiLCJlbmFibGVVaSIsInVpUm91dGUiLCJlbmFibGVEZWJ1ZyIsInJlcXVlc3RJZCIsInV1aWQiLCJQdXBwZXRlZXJTY2hlbWEiLCJIaWdoY2hhcnRzU2NoZW1hIiwiRXhwb3J0U2NoZW1hIiwiQ3VzdG9tTG9naWNTY2hlbWEiLCJQcm94eVNjaGVtYSIsIlJhdGVMaW1pdGluZ1NjaGVtYSIsIlNzbFNjaGVtYSIsIlNlcnZlclNjaGVtYSIsIm9wdGlvbmFsIiwiUG9vbFNjaGVtYSIsIkxvZ2dpbmdTY2hlbWEiLCJVaVNjaGVtYSIsIk90aGVyU2NoZW1hIiwiRGVidWdTY2hlbWEiLCJTdHJpY3RDb25maWdTY2hlbWEiLCJMb29zZUNvbmZpZ1NjaGVtYSIsIkVudlNjaGVtYSIsIlBVUFBFVEVFUl9BUkdTIiwiSElHSENIQVJUU19WRVJTSU9OIiwiSElHSENIQVJUU19DRE5fVVJMIiwiSElHSENIQVJUU19GT1JDRV9GRVRDSCIsIkhJR0hDSEFSVFNfQ0FDSEVfUEFUSCIsIkhJR0hDSEFSVFNfQURNSU5fVE9LRU4iLCJISUdIQ0hBUlRTX0NPUkVfU0NSSVBUUyIsIkhJR0hDSEFSVFNfTU9EVUxFX1NDUklQVFMiLCJISUdIQ0hBUlRTX0lORElDQVRPUl9TQ1JJUFRTIiwiSElHSENIQVJUU19DVVNUT01fU0NSSVBUUyIsIkVYUE9SVF9JTkZJTEUiLCJFWFBPUlRfSU5TVFIiLCJFWFBPUlRfT1BUSU9OUyIsIkVYUE9SVF9TVkciLCJFWFBPUlRfQkFUQ0giLCJFWFBPUlRfT1VURklMRSIsIkVYUE9SVF9UWVBFIiwiRVhQT1JUX0NPTlNUUiIsIkVYUE9SVF9CNjQiLCJFWFBPUlRfTk9fRE9XTkxPQUQiLCJFWFBPUlRfSEVJR0hUIiwiRVhQT1JUX1dJRFRIIiwiRVhQT1JUX1NDQUxFIiwiRVhQT1JUX0RFRkFVTFRfSEVJR0hUIiwiRVhQT1JUX0RFRkFVTFRfV0lEVEgiLCJFWFBPUlRfREVGQVVMVF9TQ0FMRSIsIkVYUE9SVF9HTE9CQUxfT1BUSU9OUyIsIkVYUE9SVF9USEVNRV9PUFRJT05TIiwiRVhQT1JUX1JBU1RFUklaQVRJT05fVElNRU9VVCIsIkNVU1RPTV9MT0dJQ19BTExPV19DT0RFX0VYRUNVVElPTiIsIkNVU1RPTV9MT0dJQ19BTExPV19GSUxFX1JFU09VUkNFUyIsIkNVU1RPTV9MT0dJQ19DVVNUT01fQ09ERSIsIkNVU1RPTV9MT0dJQ19DQUxMQkFDSyIsIkNVU1RPTV9MT0dJQ19SRVNPVVJDRVMiLCJDVVNUT01fTE9HSUNfTE9BRF9DT05GSUciLCJDVVNUT01fTE9HSUNfQ1JFQVRFX0NPTkZJRyIsIlNFUlZFUl9FTkFCTEUiLCJTRVJWRVJfSE9TVCIsIlNFUlZFUl9QT1JUIiwiU0VSVkVSX1VQTE9BRF9MSU1JVCIsIlNFUlZFUl9CRU5DSE1BUktJTkciLCJTRVJWRVJfUFJPWFlfSE9TVCIsIlNFUlZFUl9QUk9YWV9QT1JUIiwiU0VSVkVSX1BST1hZX1RJTUVPVVQiLCJTRVJWRVJfUkFURV9MSU1JVElOR19FTkFCTEUiLCJTRVJWRVJfUkFURV9MSU1JVElOR19NQVhfUkVRVUVTVFMiLCJTRVJWRVJfUkFURV9MSU1JVElOR19XSU5ET1ciLCJTRVJWRVJfUkFURV9MSU1JVElOR19ERUxBWSIsIlNFUlZFUl9SQVRFX0xJTUlUSU5HX1RSVVNUX1BST1hZIiwiU0VSVkVSX1JBVEVfTElNSVRJTkdfU0tJUF9LRVkiLCJTRVJWRVJfUkFURV9MSU1JVElOR19TS0lQX1RPS0VOIiwiU0VSVkVSX1NTTF9FTkFCTEUiLCJTRVJWRVJfU1NMX0ZPUkNFIiwiU0VSVkVSX1NTTF9QT1JUIiwiU0VSVkVSX1NTTF9DRVJUX1BBVEgiLCJQT09MX01JTl9XT1JLRVJTIiwiUE9PTF9NQVhfV09SS0VSUyIsIlBPT0xfV09SS19MSU1JVCIsIlBPT0xfQUNRVUlSRV9USU1FT1VUIiwiUE9PTF9DUkVBVEVfVElNRU9VVCIsIlBPT0xfREVTVFJPWV9USU1FT1VUIiwiUE9PTF9JRExFX1RJTUVPVVQiLCJQT09MX0NSRUFURV9SRVRSWV9JTlRFUlZBTCIsIlBPT0xfUkVBUEVSX0lOVEVSVkFMIiwiUE9PTF9CRU5DSE1BUktJTkciLCJMT0dHSU5HX0xFVkVMIiwiTE9HR0lOR19GSUxFIiwiTE9HR0lOR19ERVNUIiwiTE9HR0lOR19UT19DT05TT0xFIiwiTE9HR0lOR19UT19GSUxFIiwiVUlfRU5BQkxFIiwiVUlfUk9VVEUiLCJPVEhFUl9OT0RFX0VOViIsIk9USEVSX0xJU1RFTl9UT19QUk9DRVNTX0VYSVRTIiwiT1RIRVJfTk9fTE9HTyIsIk9USEVSX0hBUkRfUkVTRVRfUEFHRSIsIk9USEVSX0JST1dTRVJfU0hFTExfTU9ERSIsIk9USEVSX1ZBTElEQVRJT04iLCJERUJVR19FTkFCTEUiLCJERUJVR19IRUFETEVTUyIsIkRFQlVHX0RFVlRPT0xTIiwiREVCVUdfTElTVEVOX1RPX0NPTlNPTEUiLCJERUJVR19EVU1QSU8iLCJERUJVR19TTE9XX01PIiwiREVCVUdfREVCVUdHSU5HX1BPUlQiLCJlbnZzIiwicGFyc2UiLCJlbnYiLCJzdHJpY3RWYWxpZGF0ZSIsImNvbmZpZ09wdGlvbnMiLCJsb29zZVZhbGlkYXRlIiwiY29udGV4dCIsInByb3BlcnR5TmFtZSIsInByb3BlcnR5SW5mbyIsImNvZGUiLCJab2RJc3N1ZUNvZGUiLCJpbnZhbGlkX3R5cGUiLCJyZWNlaXZlZCIsIlpvZFBhcnNlZFR5cGUiLCJkZWZhdWx0RXJyb3IiLCJjdXN0b20iLCJkYXRhIiwiaW52YWxpZF91bmlvbiIsInVuaW9uRXJyb3JzIiwiZm9yRWFjaCIsImluZGV4Iiwic3Vic3RyaW5nIiwiRXhwb3J0RXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwic3RhdHVzQ29kZSIsInN1cGVyIiwic2V0RXJyb3IiLCJuYW1lIiwiX2luaXRPcHRpb25zIiwibmVzdGVkUHJvcHMiLCJfY3JlYXRlTmVzdGVkUHJvcHMiLCJhYnNvbHV0ZVByb3BzIiwiX2NyZWF0ZUFic29sdXRlUHJvcHMiLCJnZXRPcHRpb25zIiwiZ2V0Q29weSIsInVwZGF0ZU9wdGlvbnMiLCJuZXdPcHRpb25zIiwiX21lcmdlT3B0aW9ucyIsInZhbGlkYXRlT3B0aW9ucyIsIm1hcFRvTmV3T3B0aW9ucyIsIm9sZE9wdGlvbnMiLCJlbnRyaWVzIiwicHJvcGVydGllc0NoYWluIiwicmVkdWNlIiwib2JqIiwicHJvcCIsInZhbGlkYXRlT3B0aW9uIiwiY29uZmlnT3B0aW9uIiwiaXNBbGxvd2VkQ29uZmlnIiwiYWxsb3dGdW5jdGlvbnMiLCJvYmplY3RDb25maWciLCJldmFsIiwiSlNPTiIsInN0cmluZ2lmaWVkT3B0aW9ucyIsIl9vcHRpb25zU3RyaW5naWZ5IiwicGFyc2VkT3B0aW9ucyIsIl8iLCJvcmlnaW5hbE9wdGlvbnMiLCJzdHJpbmdpZnlGdW5jdGlvbnMiLCJzdHJpbmdpZnkiLCJyZXBsYWNlQWxsIiwicHJvcENoYWluIiwiZW50cnkiLCJhc3luYyIsImdldCIsInVybCIsInJlcXVlc3RPcHRpb25zIiwiUHJvbWlzZSIsInJlamVjdCIsIl9nZXRQcm90b2NvbE1vZHVsZSIsInJlc3BvbnNlIiwicmVzcG9uc2VEYXRhIiwib24iLCJjaHVuayIsInRleHQiLCJodHRwcyIsImh0dHAiLCJjYWNoZSIsImFjdGl2ZU1hbmlmZXN0Iiwic291cmNlcyIsImhjVmVyc2lvbiIsImNoZWNrQ2FjaGUiLCJoaWdoY2hhcnRzT3B0aW9ucyIsInNlcnZlclByb3h5T3B0aW9ucyIsImZldGNoZWRNb2R1bGVzIiwiZ2V0Q2FjaGVQYXRoIiwibWFuaWZlc3RQYXRoIiwic291cmNlUGF0aCIsInJlY3Vyc2l2ZSIsIl91cGRhdGVDYWNoZSIsInJlcXVlc3RVcGRhdGUiLCJtYW5pZmVzdCIsInJlYWRGaWxlU3luYyIsIm1vZHVsZXMiLCJtb2R1bGVNYXAiLCJtIiwibnVtYmVyT2ZNb2R1bGVzIiwibW9kdWxlTmFtZSIsIl9leHRyYWN0SGNWZXJzaW9uIiwiX3NhdmVDb25maWdUb01hbmlmZXN0IiwiZ2V0SGNWZXJzaW9uIiwidXBkYXRlSGNWZXJzaW9uIiwibmV3VmVyc2lvbiIsIndyaXRlRmlsZVN5bmMiLCJfY29uZmlndXJlUmVxdWVzdCIsImFsbCIsImNzIiwiX2ZldGNoU2NyaXB0IiwibXMiLCJpcyIsInNjcmlwdCIsInNob3VsZFRocm93RXJyb3IiLCJfZXh0cmFjdE1vZHVsZU5hbWUiLCJhZ2VudCIsIkh0dHBzUHJveHlBZ2VudCIsImNhY2hlU291cmNlcyIsInJlcGxhY2UiLCJzY3JpcHRQYXRoIiwic2V0dXBIaWdoY2hhcnRzIiwiSGlnaGNoYXJ0cyIsImFuaW1PYmplY3QiLCJkdXJhdGlvbiIsImNyZWF0ZUNoYXJ0IiwiZXhwb3J0T3B0aW9ucyIsImN1c3RvbUxvZ2ljT3B0aW9ucyIsInNldE9wdGlvbnMiLCJtZXJnZSIsIndyYXAiLCJzZXRPcHRpb25zT2JqIiwiaXNSZW5kZXJDb21wbGV0ZSIsIkNoYXJ0IiwicHJvY2VlZCIsInVzZXJPcHRpb25zIiwiY2IiLCJleHBvcnRpbmciLCJlbmFibGVkIiwicGxvdE9wdGlvbnMiLCJzZXJpZXMiLCJsYWJlbCIsInRvb2x0aXAiLCJhbmltYXRpb24iLCJvbkhpZ2hjaGFydHNSZW5kZXIiLCJhZGRFdmVudCIsIlNlcmllcyIsImNoYXJ0IiwiRnVuY3Rpb24iLCJmaW5hbE9wdGlvbnMiLCJmaW5hbENhbGxiYWNrIiwiaW1hZ2VzIiwicXVlcnlTZWxlY3RvckFsbCIsInJhY2UiLCJpbWFnZSIsImNvbXBsZXRlIiwibmF0dXJhbEhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbmNlIiwic2V0VGltZW91dCIsImRlZmF1bHRPcHRpb25zIiwicGFnZVRlbXBsYXRlIiwiYnJvd3NlciIsImNyZWF0ZUJyb3dzZXIiLCJwdXBwZXRlZXJBcmdzIiwiZW5hYmxlZERlYnVnIiwiZGVidWdPcHRpb25zIiwibGF1bmNoT3B0aW9ucyIsInVzZXJEYXRhRGlyIiwiaGFuZGxlU0lHSU5UIiwiaGFuZGxlU0lHVEVSTSIsImhhbmRsZVNJR0hVUCIsIndhaXRGb3JJbml0aWFsUGFnZSIsImRlZmF1bHRWaWV3cG9ydCIsInRyeUNvdW50Iiwib3BlbkJyb3dzZXIiLCJsYXVuY2giLCJjbG9zZUJyb3dzZXIiLCJjb25uZWN0ZWQiLCJjbG9zZSIsIm5ld1BhZ2UiLCJwb29sUmVzb3VyY2UiLCJwYWdlIiwic2V0Q2FjaGVFbmFibGVkIiwiX3NldFBhZ2VDb250ZW50IiwiX3NldFBhZ2VFdmVudHMiLCJpc0Nsb3NlZCIsImNsZWFyUGFnZSIsImhhcmRSZXNldCIsImdvdG8iLCJ3YWl0VW50aWwiLCJldmFsdWF0ZSIsImJvZHkiLCJpbm5lckhUTUwiLCJpZCIsIndvcmtDb3VudCIsImFkZFBhZ2VSZXNvdXJjZXMiLCJpbmplY3RlZFJlc291cmNlcyIsImluamVjdGVkSnMiLCJjb250ZW50IiwiaXNMb2NhbCIsImpzUmVzb3VyY2UiLCJhZGRTY3JpcHRUYWciLCJpbmplY3RlZENzcyIsImNzc0ltcG9ydHMiLCJtYXRjaCIsImNzc0ltcG9ydFBhdGgiLCJjc3NSZXNvdXJjZSIsImFkZFN0eWxlVGFnIiwiY2xlYXJQYWdlUmVzb3VyY2VzIiwicmVzb3VyY2UiLCJkaXNwb3NlIiwib2xkQ2hhcnRzIiwiY2hhcnRzIiwib2xkQ2hhcnQiLCJkZXN0cm95Iiwic2NyaXB0c1RvUmVtb3ZlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzdHlsZXNUb1JlbW92ZSIsImxpbmtzVG9SZW1vdmUiLCJlbGVtZW50IiwicmVtb3ZlIiwic2V0Q29udGVudCIsImNzc1RlbXBsYXRlIiwic3ZnVGVtcGxhdGUiLCJwdXBwZXRlZXJFeHBvcnQiLCJpc1NWRyIsInNpemUiLCJfZ2V0Q2hhcnRTaXplIiwieCIsInkiLCJfZ2V0Q2xpcFJlZ2lvbiIsInZpZXdwb3J0SGVpZ2h0IiwiYWJzIiwiY2VpbCIsImNoYXJ0SGVpZ2h0Iiwidmlld3BvcnRXaWR0aCIsImNoYXJ0V2lkdGgiLCJyZXN1bHQiLCJzZXRWaWV3cG9ydCIsImRldmljZVNjYWxlRmFjdG9yIiwicGFyc2VGbG9hdCIsIl9jcmVhdGVTVkciLCJfY3JlYXRlSW1hZ2UiLCJfY3JlYXRlUERGIiwiJGV2YWwiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0cnVuYyIsInN2Z0VsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYmFzZVZhbCIsInN0eWxlIiwiem9vbSIsIm1hcmdpbiIsIm91dGVySFRNTCIsImNsaXAiLCJzY3JlZW5zaG90IiwiZW5jb2RpbmciLCJmdWxsUGFnZSIsIm9wdGltaXplRm9yU3BlZWQiLCJjYXB0dXJlQmV5b25kVmlld3BvcnQiLCJxdWFsaXR5Iiwib21pdEJhY2tncm91bmQiLCJfcmVzb2x2ZSIsImVtdWxhdGVNZWRpYVR5cGUiLCJwZGYiLCJwb29sU3RhdHMiLCJleHBvcnRzQXR0ZW1wdGVkIiwiZXhwb3J0c1BlcmZvcm1lZCIsImV4cG9ydHNEcm9wcGVkIiwiZXhwb3J0c0Zyb21TdmciLCJleHBvcnRzRnJvbU9wdGlvbnMiLCJleHBvcnRzRnJvbVN2Z0F0dGVtcHRzIiwiZXhwb3J0c0Zyb21PcHRpb25zQXR0ZW1wdHMiLCJ0aW1lU3BlbnQiLCJ0aW1lU3BlbnRBdmVyYWdlIiwiaW5pdFBvb2wiLCJwb29sT3B0aW9ucyIsIlBvb2wiLCJfZmFjdG9yeSIsImFjcXVpcmVUaW1lb3V0TWlsbGlzIiwiY3JlYXRlVGltZW91dE1pbGxpcyIsImRlc3Ryb3lUaW1lb3V0TWlsbGlzIiwiaWRsZVRpbWVvdXRNaWxsaXMiLCJjcmVhdGVSZXRyeUludGVydmFsTWlsbGlzIiwicmVhcEludGVydmFsTWlsbGlzIiwicHJvcGFnYXRlQ3JlYXRlRXJyb3IiLCJjbGVhclN0YXR1cyIsIl9ldmVudElkIiwiaW5pdGlhbFJlc291cmNlcyIsImkiLCJhY3F1aXJlIiwicHJvbWlzZSIsInJlbGVhc2UiLCJraWxsUG9vbCIsIndvcmtlciIsInVzZWQiLCJkZXN0cm95ZWQiLCJwb3N0V29yayIsIndvcmtlckhhbmRsZSIsIl9nZXRQb29sSW5mbyIsImFjcXVpcmVDb3VudGVyIiwiZXhwb3J0Q291bnRlciIsImV4cG9ydFJlc3VsdCIsImdldFBvb2xTdGF0cyIsImdldFBvb2xJbmZvSlNPTiIsIm51bVVzZWQiLCJhdmFpbGFibGUiLCJudW1GcmVlIiwiYWxsQ3JlYXRlZCIsInBlbmRpbmdBY3F1aXJlcyIsIm51bVBlbmRpbmdBY3F1aXJlcyIsInBlbmRpbmdDcmVhdGVzIiwibnVtUGVuZGluZ0NyZWF0ZXMiLCJwZW5kaW5nVmFsaWRhdGlvbnMiLCJudW1QZW5kaW5nVmFsaWRhdGlvbnMiLCJwZW5kaW5nRGVzdHJveXMiLCJhYnNvbHV0ZUFsbCIsImNyZWF0ZSIsInJhbmRvbSIsInN0YXJ0RGF0ZSIsInZhbGlkYXRlIiwibWFpbkZyYW1lIiwiZGV0YWNoZWQiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJzYW5pdGl6ZSIsIkpTRE9NIiwiRE9NUHVyaWZ5IiwiQUREX1RBR1MiLCJzaW5nbGVFeHBvcnQiLCJzdGFydEV4cG9ydCIsImJhdGNoRXhwb3J0IiwiYmF0Y2hGdW5jdGlvbnMiLCJwYWlyIiwiYmF0Y2hSZXN1bHRzIiwiYWxsU2V0dGxlZCIsInJlYXNvbiIsImltYWdlT3B0aW9ucyIsImVuZENhbGxiYWNrIiwiZmlsZUNvbnRlbnQiLCJfZXhwb3J0RnJvbVN2ZyIsIl9leHBvcnRGcm9tT3B0aW9ucyIsImdldEFsbG93Q29kZUV4ZWN1dGlvbiIsInNldEFsbG93Q29kZUV4ZWN1dGlvbiIsImlucHV0VG9FeHBvcnQiLCJfcHJlcGFyZUV4cG9ydCIsIl9maXhDb25zdHIiLCJfZml4VHlwZSIsIl9maXhPdXRmaWxlIiwiX2hhbmRsZUN1c3RvbUxvZ2ljIiwiX2hhbmRsZUdsb2JhbEFuZFRoZW1lIiwiX2hhbmRsZVNpemUiLCJfY2hlY2tEYXRhU2l6ZSIsImZpeGVkQ29uc3RyIiwidG9Mb3dlckNhc2UiLCJtaW1lVHlwZXMiLCJmb3JtYXRzIiwib3V0VHlwZSIsInBvcCIsImZpbmQiLCJ0Iiwib3B0aW9uc0NoYXJ0Iiwib3B0aW9uc0V4cG9ydGluZyIsImdsb2JhbE9wdGlvbnNDaGFydCIsImdsb2JhbE9wdGlvbnNFeHBvcnRpbmciLCJ0aGVtZU9wdGlvbnNDaGFydCIsInRoZW1lT3B0aW9uc0V4cG9ydGluZyIsInNvdXJjZUhlaWdodCIsInNvdXJjZVdpZHRoIiwicGFyYW0iLCJfaGFuZGxlUmVzb3VyY2VzIiwiX2hhbmRsZUN1c3RvbUNvZGUiLCJoYW5kbGVkUmVzb3VyY2VzIiwiYWxsb3dlZFByb3BzIiwiY29ycmVjdFJlc291cmNlcyIsInByb3BOYW1lIiwiaXNDYWxsYmFjayIsIm9wdGlvbnNOYW1lIiwidG90YWxTaXplIiwiYnl0ZUxlbmd0aCIsInRvRml4ZWQiLCJ0aW1lcklkcyIsImFkZFRpbWVyIiwiY2xlYXJBbGxUaW1lcnMiLCJjbGVhckludGVydmFsIiwiY2xlYXJUaW1lb3V0IiwibG9nRXJyb3JNaWRkbGV3YXJlIiwicmVxdWVzdCIsIm5leHQiLCJyZXR1cm5FcnJvck1pZGRsZXdhcmUiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3JNaWRkbGV3YXJlIiwiYXBwIiwidXNlIiwicmF0ZUxpbWl0aW5nTWlkZGxld2FyZSIsInJhdGVMaW1pdGluZ09wdGlvbnMiLCJyYXRlT3B0aW9ucyIsImxpbWl0ZXIiLCJyYXRlTGltaXQiLCJ3aW5kb3dNcyIsImxpbWl0IiwiZGVsYXlNcyIsImhhbmRsZXIiLCJmb3JtYXQiLCJzZW5kIiwiZGVmYXVsdCIsInNraXAiLCJxdWVyeSIsImFjY2Vzc190b2tlbiIsImNvbnRlbnRUeXBlTWlkZGxld2FyZSIsImNvbnRlbnRUeXBlIiwiaGVhZGVycyIsInJlcXVlc3RCb2R5TWlkZGxld2FyZSIsImNvbm5lY3Rpb24iLCJyZW1vdGVBZGRyZXNzIiwidmFsaWRhdGVkT3B0aW9ucyIsImZpbGVuYW1lIiwidmFsaWRhdGlvbk1pZGRsZXdhcmUiLCJwb3N0IiwicmV2ZXJzZWRNaW1lIiwicG5nIiwianBlZyIsImdpZiIsInJlcXVlc3RFeHBvcnQiLCJyZXF1ZXN0Q291bnRlciIsImNvbm5lY3Rpb25BYm9ydGVkIiwic29ja2V0IiwiaGFkRXJyb3JzIiwiaGVhZGVyIiwiYXR0YWNobWVudCIsImV4cG9ydFJvdXRlcyIsInNlcnZlclN0YXJ0VGltZSIsInBhY2thZ2VGaWxlIiwic3VjY2Vzc1JhdGVzIiwicmVjb3JkSW50ZXJ2YWwiLCJ3aW5kb3dTaXplIiwiX2NhbGN1bGF0ZU1vdmluZ0F2ZXJhZ2UiLCJhIiwiYiIsIl9zdGFydFN1Y2Nlc3NSYXRlIiwic2V0SW50ZXJ2YWwiLCJzdGF0cyIsInN1Y2Nlc3NSYXRpbyIsImhlYWx0aFJvdXRlcyIsInBlcmlvZCIsIm1vdmluZ0F2ZXJhZ2UiLCJib290VGltZSIsInVwdGltZSIsImZsb29yIiwic2VydmVyVmVyc2lvbiIsImhpZ2hjaGFydHNWZXJzaW9uIiwiYXZlcmFnZUV4cG9ydFRpbWUiLCJhdHRlbXB0ZWRFeHBvcnRzIiwicGVyZm9ybWVkRXhwb3J0cyIsImZhaWxlZEV4cG9ydHMiLCJzdWNlc3NSYXRpbyIsInN2Z0V4cG9ydHMiLCJqc29uRXhwb3J0cyIsInN2Z0V4cG9ydHNBdHRlbXB0cyIsImpzb25FeHBvcnRzQXR0ZW1wdHMiLCJ1aVJvdXRlcyIsInNlbmRGaWxlIiwiYWNjZXB0UmFuZ2VzIiwidmVyc2lvbkNoYW5nZVJvdXRlcyIsInRva2VuIiwiYWN0aXZlU2VydmVycyIsIk1hcCIsImV4cHJlc3MiLCJzdGFydFNlcnZlciIsInNlcnZlck9wdGlvbnMiLCJ1cGxvYWRMaW1pdEJ5dGVzIiwic3RvcmFnZSIsIm11bHRlciIsIm1lbW9yeVN0b3JhZ2UiLCJ1cGxvYWQiLCJsaW1pdHMiLCJmaWVsZFNpemUiLCJkaXNhYmxlIiwiY29ycyIsIm1ldGhvZHMiLCJzZXQiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJub25lIiwic3RhdGljIiwiaHR0cFNlcnZlciIsImNyZWF0ZVNlcnZlciIsIl9hdHRhY2hTZXJ2ZXJFcnJvckhhbmRsZXJzIiwibGlzdGVuIiwiY2VydCIsImh0dHBzU2VydmVyIiwiY2xvc2VTZXJ2ZXJzIiwiZGVsZXRlIiwiZ2V0U2VydmVycyIsImdldEV4cHJlc3MiLCJnZXRBcHAiLCJtaWRkbGV3YXJlcyIsInNodXRkb3duQ2xlYW5VcCIsImV4aXRDb2RlIiwiZXhpdCIsImluaXRFeHBvcnQiLCJpbml0T3B0aW9ucyIsIl9hdHRhY2hQcm9jZXNzRXhpdExpc3RlbmVycyJdLCJtYXBwaW5ncyI6IndsQkEwQk8sTUFBTUEsWUFBWUMsSUFBYUEsY0FBQyxJQUFJQyxJQUFJLE9BQVEsb0JBQUFDLFNBQUFDLFFBQUEsT0FBQUMsY0FBQUMsWUFBQUMsS0FBQUMsd0JBQUEsV0FBQUEsdUJBQUFDLFFBQUFDLGVBQUFGLHVCQUFBRyxLQUFBLElBQUFULElBQUEsWUFBQUMsU0FBQVMsU0FBQUwsT0ErQmhELFNBQVNNLFNBQVNDLEdBRXZCLEdBQWUsT0FBWEEsR0FBcUMsaUJBQVhBLEVBQzVCLE9BQU9BLEVBSVQsTUFBTUMsRUFBYUMsTUFBTUMsUUFBUUgsR0FBVSxHQUFLLEdBR2hELElBQUssTUFBTUksS0FBT0osRUFDWkssT0FBT0MsVUFBVUMsZUFBZUMsS0FBS1IsRUFBUUksS0FDL0NILEVBQVdHLEdBQU9MLFNB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
